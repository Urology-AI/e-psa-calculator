(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ge(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aN={exports:{}},my={},sN={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ud=Symbol.for("react.element"),b3=Symbol.for("react.portal"),E3=Symbol.for("react.fragment"),x3=Symbol.for("react.strict_mode"),T3=Symbol.for("react.profiler"),S3=Symbol.for("react.provider"),A3=Symbol.for("react.context"),I3=Symbol.for("react.forward_ref"),P3=Symbol.for("react.suspense"),O3=Symbol.for("react.memo"),C3=Symbol.for("react.lazy"),ZS=Symbol.iterator;function k3(t){return t===null||typeof t!="object"?null:(t=ZS&&t[ZS]||t["@@iterator"],typeof t=="function"?t:null)}var uN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lN=Object.assign,cN={};function Bl(t,e,n){this.props=t,this.context=e,this.refs=cN,this.updater=n||uN}Bl.prototype.isReactComponent={};Bl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fN(){}fN.prototype=Bl.prototype;function V1(t,e,n){this.props=t,this.context=e,this.refs=cN,this.updater=n||uN}var L1=V1.prototype=new fN;L1.constructor=V1;lN(L1,Bl.prototype);L1.isPureReactComponent=!0;var eA=Array.isArray,hN=Object.prototype.hasOwnProperty,F1={current:null},dN={key:!0,ref:!0,__self:!0,__source:!0};function pN(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)hN.call(e,r)&&!dN.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:ud,type:t,key:o,ref:a,props:i,_owner:F1.current}}function R3(t,e){return{$$typeof:ud,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function B1(t){return typeof t=="object"&&t!==null&&t.$$typeof===ud}function N3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tA=/\/+/g;function h_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?N3(""+t.key):e.toString(36)}function Lp(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ud:case b3:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+h_(a,0):r,eA(i)?(n="",t!=null&&(n=t.replace(tA,"$&/")+"/"),Lp(i,e,n,"",function(l){return l})):i!=null&&(B1(i)&&(i=R3(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(tA,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",eA(t))for(var s=0;s<t.length;s++){o=t[s];var u=r+h_(o,s);a+=Lp(o,e,n,u,i)}else if(u=k3(t),typeof u=="function")for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=r+h_(o,s++),a+=Lp(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Zd(t,e,n){if(t==null)return t;var r=[],i=0;return Lp(t,r,"","",function(o){return e.call(n,o,i++)}),r}function D3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xn={current:null},Fp={transition:null},j3={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:Fp,ReactCurrentOwner:F1};function mN(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Zd,forEach:function(t,e,n){Zd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zd(t,function(){e++}),e},toArray:function(t){return Zd(t,function(e){return e})||[]},only:function(t){if(!B1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=Bl;Se.Fragment=E3;Se.Profiler=T3;Se.PureComponent=V1;Se.StrictMode=x3;Se.Suspense=P3;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j3;Se.act=mN;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lN({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=F1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)hN.call(e,u)&&!dN.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&s!==void 0?s[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:ud,type:t.type,key:i,ref:o,props:r,_owner:a}};Se.createContext=function(t){return t={$$typeof:A3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:S3,_context:t},t.Consumer=t};Se.createElement=pN;Se.createFactory=function(t){var e=pN.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:I3,render:t}};Se.isValidElement=B1;Se.lazy=function(t){return{$$typeof:C3,_payload:{_status:-1,_result:t},_init:D3}};Se.memo=function(t,e){return{$$typeof:O3,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=Fp.transition;Fp.transition={};try{t()}finally{Fp.transition=e}};Se.unstable_act=mN;Se.useCallback=function(t,e){return xn.current.useCallback(t,e)};Se.useContext=function(t){return xn.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return xn.current.useDeferredValue(t)};Se.useEffect=function(t,e){return xn.current.useEffect(t,e)};Se.useId=function(){return xn.current.useId()};Se.useImperativeHandle=function(t,e,n){return xn.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return xn.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return xn.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return xn.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return xn.current.useReducer(t,e,n)};Se.useRef=function(t){return xn.current.useRef(t)};Se.useState=function(t){return xn.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return xn.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return xn.current.useTransition()};Se.version="18.3.1";sN.exports=Se;var W=sN.exports;const $=Ge(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M3=W,$3=Symbol.for("react.element"),V3=Symbol.for("react.fragment"),L3=Object.prototype.hasOwnProperty,F3=M3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B3={key:!0,ref:!0,__self:!0,__source:!0};function gN(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)L3.call(e,r)&&!B3.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$3,type:t,key:o,ref:a,props:i,_owner:F3.current}}my.Fragment=V3;my.jsx=gN;my.jsxs=gN;aN.exports=my;var m=aN.exports,yN={exports:{}},Zn={},vN={exports:{}},_N={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,H){var Q=V.length;V.push(H);e:for(;0<Q;){var ie=Q-1>>>1,J=V[ie];if(0<i(J,H))V[ie]=H,V[Q]=J,Q=ie;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var H=V[0],Q=V.pop();if(Q!==H){V[0]=Q;e:for(var ie=0,J=V.length,fe=J>>>1;ie<fe;){var Ee=2*(ie+1)-1,Be=V[Ee],Ze=Ee+1,an=V[Ze];if(0>i(Be,Q))Ze<J&&0>i(an,Be)?(V[ie]=an,V[Ze]=Q,ie=Ze):(V[ie]=Be,V[Ee]=Q,ie=Ee);else if(Ze<J&&0>i(an,Q))V[ie]=an,V[Ze]=Q,ie=Ze;else break e}}return H}function i(V,H){var Q=V.sortIndex-H.sortIndex;return Q!==0?Q:V.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var u=[],l=[],c=1,f=null,d=3,p=!1,_=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(V){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=V)r(l),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(l)}}function P(V){if(y=!1,E(V),!_)if(n(u)!==null)_=!0,F(T);else{var H=n(l);H!==null&&L(P,H.startTime-V)}}function T(V,H){_=!1,y&&(y=!1,v(S),S=-1),p=!0;var Q=d;try{for(E(H),f=n(u);f!==null&&(!(f.expirationTime>H)||V&&!k());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,d=f.priorityLevel;var J=ie(f.expirationTime<=H);H=t.unstable_now(),typeof J=="function"?f.callback=J:f===n(u)&&r(u),E(H)}else r(u);f=n(u)}if(f!==null)var fe=!0;else{var Ee=n(l);Ee!==null&&L(P,Ee.startTime-H),fe=!1}return fe}finally{f=null,d=Q,p=!1}}var A=!1,x=null,S=-1,O=5,C=-1;function k(){return!(t.unstable_now()-C<O)}function N(){if(x!==null){var V=t.unstable_now();C=V;var H=!0;try{H=x(!0,V)}finally{H?R():(A=!1,x=null)}}else A=!1}var R;if(typeof g=="function")R=function(){g(N)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,M=j.port2;j.port1.onmessage=N,R=function(){M.postMessage(null)}}else R=function(){b(N,0)};function F(V){x=V,A||(A=!0,R())}function L(V,H){S=b(function(){V(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){_||p||(_=!0,F(T))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(V){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var Q=d;d=H;try{return V()}finally{d=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,H){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=d;d=V;try{return H()}finally{d=Q}},t.unstable_scheduleCallback=function(V,H,Q){var ie=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ie+Q:ie):Q=ie,V){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=Q+J,V={id:c++,callback:H,priorityLevel:V,startTime:Q,expirationTime:J,sortIndex:-1},Q>ie?(V.sortIndex=Q,e(l,V),n(u)===null&&V===n(l)&&(y?(v(S),S=-1):y=!0,L(P,Q-ie))):(V.sortIndex=J,e(u,V),_||p||(_=!0,F(T))),V},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(V){var H=d;return function(){var Q=d;d=H;try{return V.apply(this,arguments)}finally{d=Q}}}})(_N);vN.exports=_N;var U3=vN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z3=W,Xn=U3;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wN=new Set,Gf={};function As(t,e){Lu(t,e),Lu(t+"Capture",e)}function Lu(t,e){for(Gf[t]=e,t=0;t<e.length;t++)wN.add(e[t])}var Oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C0=Object.prototype.hasOwnProperty,q3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nA={},rA={};function W3(t){return C0.call(rA,t)?!0:C0.call(nA,t)?!1:q3.test(t)?rA[t]=!0:(nA[t]=!0,!1)}function H3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G3(t,e,n,r){if(e===null||typeof e>"u"||H3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tn(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){on[t]=new Tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];on[e]=new Tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){on[t]=new Tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){on[t]=new Tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){on[t]=new Tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){on[t]=new Tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){on[t]=new Tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){on[t]=new Tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){on[t]=new Tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var U1=/[\-:]([a-z])/g;function z1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(U1,z1);on[e]=new Tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(U1,z1);on[e]=new Tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(U1,z1);on[e]=new Tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){on[t]=new Tn(t,1,!1,t.toLowerCase(),null,!1,!1)});on.xlinkHref=new Tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){on[t]=new Tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function q1(t,e,n,r){var i=on.hasOwnProperty(e)?on[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(G3(e,n,i,r)&&(n=null),r||i===null?W3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ui=z3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ep=Symbol.for("react.element"),au=Symbol.for("react.portal"),su=Symbol.for("react.fragment"),W1=Symbol.for("react.strict_mode"),k0=Symbol.for("react.profiler"),bN=Symbol.for("react.provider"),EN=Symbol.for("react.context"),H1=Symbol.for("react.forward_ref"),R0=Symbol.for("react.suspense"),N0=Symbol.for("react.suspense_list"),G1=Symbol.for("react.memo"),fo=Symbol.for("react.lazy"),xN=Symbol.for("react.offscreen"),iA=Symbol.iterator;function Dc(t){return t===null||typeof t!="object"?null:(t=iA&&t[iA]||t["@@iterator"],typeof t=="function"?t:null)}var gt=Object.assign,d_;function af(t){if(d_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);d_=e&&e[1]||""}return`
`+d_+t}var p_=!1;function m_(t,e){if(!t||p_)return"";p_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=s);break}}}finally{p_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?af(t):""}function K3(t){switch(t.tag){case 5:return af(t.type);case 16:return af("Lazy");case 13:return af("Suspense");case 19:return af("SuspenseList");case 0:case 2:case 15:return t=m_(t.type,!1),t;case 11:return t=m_(t.type.render,!1),t;case 1:return t=m_(t.type,!0),t;default:return""}}function D0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case su:return"Fragment";case au:return"Portal";case k0:return"Profiler";case W1:return"StrictMode";case R0:return"Suspense";case N0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case EN:return(t.displayName||"Context")+".Consumer";case bN:return(t._context.displayName||"Context")+".Provider";case H1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case G1:return e=t.displayName||null,e!==null?e:D0(t.type)||"Memo";case fo:e=t._payload,t=t._init;try{return D0(t(e))}catch{}}return null}function Q3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D0(e);case 8:return e===W1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Go(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Y3(t){var e=TN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tp(t){t._valueTracker||(t._valueTracker=Y3(t))}function SN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=TN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function j0(t,e){var n=e.checked;return gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function oA(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Go(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AN(t,e){e=e.checked,e!=null&&q1(t,"checked",e,!1)}function M0(t,e){AN(t,e);var n=Go(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$0(t,e.type,n):e.hasOwnProperty("defaultValue")&&$0(t,e.type,Go(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function aA(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $0(t,e,n){(e!=="number"||hm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sf=Array.isArray;function Eu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Go(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function V0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sA(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(sf(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Go(n)}}function IN(t,e){var n=Go(e.value),r=Go(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function uA(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var np,ON=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(np=np||document.createElement("div"),np.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=np.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Kf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _f={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},X3=["Webkit","ms","Moz","O"];Object.keys(_f).forEach(function(t){X3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_f[e]=_f[t]})});function CN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_f.hasOwnProperty(t)&&_f[t]?(""+e).trim():e+"px"}function kN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=CN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var J3=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function F0(t,e){if(e){if(J3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function B0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var U0=null;function K1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var z0=null,xu=null,Tu=null;function lA(t){if(t=fd(t)){if(typeof z0!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=wy(e),z0(t.stateNode,t.type,e))}}function RN(t){xu?Tu?Tu.push(t):Tu=[t]:xu=t}function NN(){if(xu){var t=xu,e=Tu;if(Tu=xu=null,lA(t),e)for(t=0;t<e.length;t++)lA(e[t])}}function DN(t,e){return t(e)}function jN(){}var g_=!1;function MN(t,e,n){if(g_)return t(e,n);g_=!0;try{return DN(t,e,n)}finally{g_=!1,(xu!==null||Tu!==null)&&(jN(),NN())}}function Qf(t,e){var n=t.stateNode;if(n===null)return null;var r=wy(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var q0=!1;if(Oi)try{var jc={};Object.defineProperty(jc,"passive",{get:function(){q0=!0}}),window.addEventListener("test",jc,jc),window.removeEventListener("test",jc,jc)}catch{q0=!1}function Z3(t,e,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var wf=!1,dm=null,pm=!1,W0=null,eB={onError:function(t){wf=!0,dm=t}};function tB(t,e,n,r,i,o,a,s,u){wf=!1,dm=null,Z3.apply(eB,arguments)}function nB(t,e,n,r,i,o,a,s,u){if(tB.apply(this,arguments),wf){if(wf){var l=dm;wf=!1,dm=null}else throw Error(Z(198));pm||(pm=!0,W0=l)}}function Is(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $N(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cA(t){if(Is(t)!==t)throw Error(Z(188))}function rB(t){var e=t.alternate;if(!e){if(e=Is(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return cA(i),t;if(o===r)return cA(i),e;o=o.sibling}throw Error(Z(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function VN(t){return t=rB(t),t!==null?LN(t):null}function LN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LN(t);if(e!==null)return e;t=t.sibling}return null}var FN=Xn.unstable_scheduleCallback,fA=Xn.unstable_cancelCallback,iB=Xn.unstable_shouldYield,oB=Xn.unstable_requestPaint,Et=Xn.unstable_now,aB=Xn.unstable_getCurrentPriorityLevel,Q1=Xn.unstable_ImmediatePriority,BN=Xn.unstable_UserBlockingPriority,mm=Xn.unstable_NormalPriority,sB=Xn.unstable_LowPriority,UN=Xn.unstable_IdlePriority,gy=null,Xr=null;function uB(t){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(gy,t,void 0,(t.current.flags&128)===128)}catch{}}var Cr=Math.clz32?Math.clz32:fB,lB=Math.log,cB=Math.LN2;function fB(t){return t>>>=0,t===0?32:31-(lB(t)/cB|0)|0}var rp=64,ip=4194304;function uf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=uf(s):(o&=a,o!==0&&(r=uf(o)))}else a=n&~i,a!==0?r=uf(a):o!==0&&(r=uf(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cr(e),i=1<<n,r|=t[n],e&=~i;return r}function hB(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dB(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Cr(o),s=1<<a,u=i[a];u===-1?(!(s&n)||s&r)&&(i[a]=hB(s,e)):u<=e&&(t.expiredLanes|=s),o&=~s}}function H0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zN(){var t=rp;return rp<<=1,!(rp&4194240)&&(rp=64),t}function y_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ld(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cr(e),t[e]=n}function pB(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Cr(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Y1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ve=0;function qN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WN,X1,HN,GN,KN,G0=!1,op=[],Ro=null,No=null,Do=null,Yf=new Map,Xf=new Map,go=[],mB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hA(t,e){switch(t){case"focusin":case"focusout":Ro=null;break;case"dragenter":case"dragleave":No=null;break;case"mouseover":case"mouseout":Do=null;break;case"pointerover":case"pointerout":Yf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xf.delete(e.pointerId)}}function Mc(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=fd(e),e!==null&&X1(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function gB(t,e,n,r,i){switch(e){case"focusin":return Ro=Mc(Ro,t,e,n,r,i),!0;case"dragenter":return No=Mc(No,t,e,n,r,i),!0;case"mouseover":return Do=Mc(Do,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Yf.set(o,Mc(Yf.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Xf.set(o,Mc(Xf.get(o)||null,t,e,n,r,i)),!0}return!1}function QN(t){var e=La(t.target);if(e!==null){var n=Is(e);if(n!==null){if(e=n.tag,e===13){if(e=$N(n),e!==null){t.blockedOn=e,KN(t.priority,function(){HN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=K0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);U0=r,n.target.dispatchEvent(r),U0=null}else return e=fd(n),e!==null&&X1(e),t.blockedOn=n,!1;e.shift()}return!0}function dA(t,e,n){Bp(t)&&n.delete(e)}function yB(){G0=!1,Ro!==null&&Bp(Ro)&&(Ro=null),No!==null&&Bp(No)&&(No=null),Do!==null&&Bp(Do)&&(Do=null),Yf.forEach(dA),Xf.forEach(dA)}function $c(t,e){t.blockedOn===e&&(t.blockedOn=null,G0||(G0=!0,Xn.unstable_scheduleCallback(Xn.unstable_NormalPriority,yB)))}function Jf(t){function e(i){return $c(i,t)}if(0<op.length){$c(op[0],t);for(var n=1;n<op.length;n++){var r=op[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ro!==null&&$c(Ro,t),No!==null&&$c(No,t),Do!==null&&$c(Do,t),Yf.forEach(e),Xf.forEach(e),n=0;n<go.length;n++)r=go[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<go.length&&(n=go[0],n.blockedOn===null);)QN(n),n.blockedOn===null&&go.shift()}var Su=Ui.ReactCurrentBatchConfig,ym=!0;function vB(t,e,n,r){var i=Ve,o=Su.transition;Su.transition=null;try{Ve=1,J1(t,e,n,r)}finally{Ve=i,Su.transition=o}}function _B(t,e,n,r){var i=Ve,o=Su.transition;Su.transition=null;try{Ve=4,J1(t,e,n,r)}finally{Ve=i,Su.transition=o}}function J1(t,e,n,r){if(ym){var i=K0(t,e,n,r);if(i===null)I_(t,e,r,vm,n),hA(t,r);else if(gB(i,t,e,n,r))r.stopPropagation();else if(hA(t,r),e&4&&-1<mB.indexOf(t)){for(;i!==null;){var o=fd(i);if(o!==null&&WN(o),o=K0(t,e,n,r),o===null&&I_(t,e,r,vm,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else I_(t,e,r,null,n)}}var vm=null;function K0(t,e,n,r){if(vm=null,t=K1(r),t=La(t),t!==null)if(e=Is(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$N(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vm=t,null}function YN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aB()){case Q1:return 1;case BN:return 4;case mm:case sB:return 16;case UN:return 536870912;default:return 16}default:return 16}}var So=null,Z1=null,Up=null;function XN(){if(Up)return Up;var t,e=Z1,n=e.length,r,i="value"in So?So.value:So.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return Up=i.slice(t,1<r?1-r:void 0)}function zp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ap(){return!0}function pA(){return!1}function er(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ap:pA,this.isPropagationStopped=pA,this}return gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ap)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ap)},persist:function(){},isPersistent:ap}),e}var Ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eE=er(Ul),cd=gt({},Ul,{view:0,detail:0}),wB=er(cd),v_,__,Vc,yy=gt({},cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vc&&(Vc&&t.type==="mousemove"?(v_=t.screenX-Vc.screenX,__=t.screenY-Vc.screenY):__=v_=0,Vc=t),v_)},movementY:function(t){return"movementY"in t?t.movementY:__}}),mA=er(yy),bB=gt({},yy,{dataTransfer:0}),EB=er(bB),xB=gt({},cd,{relatedTarget:0}),w_=er(xB),TB=gt({},Ul,{animationName:0,elapsedTime:0,pseudoElement:0}),SB=er(TB),AB=gt({},Ul,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IB=er(AB),PB=gt({},Ul,{data:0}),gA=er(PB),OB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RB(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kB[t])?!!e[t]:!1}function tE(){return RB}var NB=gt({},cd,{key:function(t){if(t.key){var e=OB[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CB[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tE,charCode:function(t){return t.type==="keypress"?zp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DB=er(NB),jB=gt({},yy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yA=er(jB),MB=gt({},cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tE}),$B=er(MB),VB=gt({},Ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),LB=er(VB),FB=gt({},yy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BB=er(FB),UB=[9,13,27,32],nE=Oi&&"CompositionEvent"in window,bf=null;Oi&&"documentMode"in document&&(bf=document.documentMode);var zB=Oi&&"TextEvent"in window&&!bf,JN=Oi&&(!nE||bf&&8<bf&&11>=bf),vA=" ",_A=!1;function ZN(t,e){switch(t){case"keyup":return UB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var uu=!1;function qB(t,e){switch(t){case"compositionend":return e2(e);case"keypress":return e.which!==32?null:(_A=!0,vA);case"textInput":return t=e.data,t===vA&&_A?null:t;default:return null}}function WB(t,e){if(uu)return t==="compositionend"||!nE&&ZN(t,e)?(t=XN(),Up=Z1=So=null,uu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JN&&e.locale!=="ko"?null:e.data;default:return null}}var HB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!HB[t.type]:e==="textarea"}function t2(t,e,n,r){RN(r),e=_m(e,"onChange"),0<e.length&&(n=new eE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ef=null,Zf=null;function GB(t){h2(t,0)}function vy(t){var e=fu(t);if(SN(e))return t}function KB(t,e){if(t==="change")return e}var n2=!1;if(Oi){var b_;if(Oi){var E_="oninput"in document;if(!E_){var bA=document.createElement("div");bA.setAttribute("oninput","return;"),E_=typeof bA.oninput=="function"}b_=E_}else b_=!1;n2=b_&&(!document.documentMode||9<document.documentMode)}function EA(){Ef&&(Ef.detachEvent("onpropertychange",r2),Zf=Ef=null)}function r2(t){if(t.propertyName==="value"&&vy(Zf)){var e=[];t2(e,Zf,t,K1(t)),MN(GB,e)}}function QB(t,e,n){t==="focusin"?(EA(),Ef=e,Zf=n,Ef.attachEvent("onpropertychange",r2)):t==="focusout"&&EA()}function YB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vy(Zf)}function XB(t,e){if(t==="click")return vy(e)}function JB(t,e){if(t==="input"||t==="change")return vy(e)}function ZB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dr=typeof Object.is=="function"?Object.is:ZB;function eh(t,e){if(Dr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!C0.call(e,i)||!Dr(t[i],e[i]))return!1}return!0}function xA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function TA(t,e){var n=xA(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xA(n)}}function i2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?i2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function o2(){for(var t=window,e=hm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hm(t.document)}return e}function rE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function e6(t){var e=o2(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&i2(n.ownerDocument.documentElement,n)){if(r!==null&&rE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=TA(n,o);var a=TA(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var t6=Oi&&"documentMode"in document&&11>=document.documentMode,lu=null,Q0=null,xf=null,Y0=!1;function SA(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Y0||lu==null||lu!==hm(r)||(r=lu,"selectionStart"in r&&rE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xf&&eh(xf,r)||(xf=r,r=_m(Q0,"onSelect"),0<r.length&&(e=new eE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=lu)))}function sp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cu={animationend:sp("Animation","AnimationEnd"),animationiteration:sp("Animation","AnimationIteration"),animationstart:sp("Animation","AnimationStart"),transitionend:sp("Transition","TransitionEnd")},x_={},a2={};Oi&&(a2=document.createElement("div").style,"AnimationEvent"in window||(delete cu.animationend.animation,delete cu.animationiteration.animation,delete cu.animationstart.animation),"TransitionEvent"in window||delete cu.transitionend.transition);function _y(t){if(x_[t])return x_[t];if(!cu[t])return t;var e=cu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in a2)return x_[t]=e[n];return t}var s2=_y("animationend"),u2=_y("animationiteration"),l2=_y("animationstart"),c2=_y("transitionend"),f2=new Map,AA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ra(t,e){f2.set(t,e),As(e,[t])}for(var T_=0;T_<AA.length;T_++){var S_=AA[T_],n6=S_.toLowerCase(),r6=S_[0].toUpperCase()+S_.slice(1);ra(n6,"on"+r6)}ra(s2,"onAnimationEnd");ra(u2,"onAnimationIteration");ra(l2,"onAnimationStart");ra("dblclick","onDoubleClick");ra("focusin","onFocus");ra("focusout","onBlur");ra(c2,"onTransitionEnd");Lu("onMouseEnter",["mouseout","mouseover"]);Lu("onMouseLeave",["mouseout","mouseover"]);Lu("onPointerEnter",["pointerout","pointerover"]);Lu("onPointerLeave",["pointerout","pointerover"]);As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));As("onBeforeInput",["compositionend","keypress","textInput","paste"]);As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i6=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function IA(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,nB(r,e,void 0,t),t.currentTarget=null}function h2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;IA(i,s,l),o=u}else for(a=0;a<r.length;a++){if(s=r[a],u=s.instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;IA(i,s,l),o=u}}}if(pm)throw t=W0,pm=!1,W0=null,t}function tt(t,e){var n=e[tw];n===void 0&&(n=e[tw]=new Set);var r=t+"__bubble";n.has(r)||(d2(e,t,2,!1),n.add(r))}function A_(t,e,n){var r=0;e&&(r|=4),d2(n,t,r,e)}var up="_reactListening"+Math.random().toString(36).slice(2);function th(t){if(!t[up]){t[up]=!0,wN.forEach(function(n){n!=="selectionchange"&&(i6.has(n)||A_(n,!1,t),A_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[up]||(e[up]=!0,A_("selectionchange",!1,e))}}function d2(t,e,n,r){switch(YN(e)){case 1:var i=vB;break;case 4:i=_B;break;default:i=J1}n=i.bind(null,e,n,t),i=void 0,!q0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function I_(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;s!==null;){if(a=La(s),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}s=s.parentNode}}r=r.return}MN(function(){var l=o,c=K1(n),f=[];e:{var d=f2.get(t);if(d!==void 0){var p=eE,_=t;switch(t){case"keypress":if(zp(n)===0)break e;case"keydown":case"keyup":p=DB;break;case"focusin":_="focus",p=w_;break;case"focusout":_="blur",p=w_;break;case"beforeblur":case"afterblur":p=w_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=mA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=EB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=$B;break;case s2:case u2:case l2:p=SB;break;case c2:p=LB;break;case"scroll":p=wB;break;case"wheel":p=BB;break;case"copy":case"cut":case"paste":p=IB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=yA}var y=(e&4)!==0,b=!y&&t==="scroll",v=y?d!==null?d+"Capture":null:d;y=[];for(var g=l,E;g!==null;){E=g;var P=E.stateNode;if(E.tag===5&&P!==null&&(E=P,v!==null&&(P=Qf(g,v),P!=null&&y.push(nh(g,P,E)))),b)break;g=g.return}0<y.length&&(d=new p(d,_,null,n,c),f.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==U0&&(_=n.relatedTarget||n.fromElement)&&(La(_)||_[Ci]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(_=n.relatedTarget||n.toElement,p=l,_=_?La(_):null,_!==null&&(b=Is(_),_!==b||_.tag!==5&&_.tag!==6)&&(_=null)):(p=null,_=l),p!==_)){if(y=mA,P="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=yA,P="onPointerLeave",v="onPointerEnter",g="pointer"),b=p==null?d:fu(p),E=_==null?d:fu(_),d=new y(P,g+"leave",p,n,c),d.target=b,d.relatedTarget=E,P=null,La(c)===l&&(y=new y(v,g+"enter",_,n,c),y.target=E,y.relatedTarget=b,P=y),b=P,p&&_)t:{for(y=p,v=_,g=0,E=y;E;E=Ws(E))g++;for(E=0,P=v;P;P=Ws(P))E++;for(;0<g-E;)y=Ws(y),g--;for(;0<E-g;)v=Ws(v),E--;for(;g--;){if(y===v||v!==null&&y===v.alternate)break t;y=Ws(y),v=Ws(v)}y=null}else y=null;p!==null&&PA(f,d,p,y,!1),_!==null&&b!==null&&PA(f,b,_,y,!0)}}e:{if(d=l?fu(l):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var T=KB;else if(wA(d))if(n2)T=JB;else{T=YB;var A=QB}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=XB);if(T&&(T=T(t,l))){t2(f,T,n,c);break e}A&&A(t,d,l),t==="focusout"&&(A=d._wrapperState)&&A.controlled&&d.type==="number"&&$0(d,"number",d.value)}switch(A=l?fu(l):window,t){case"focusin":(wA(A)||A.contentEditable==="true")&&(lu=A,Q0=l,xf=null);break;case"focusout":xf=Q0=lu=null;break;case"mousedown":Y0=!0;break;case"contextmenu":case"mouseup":case"dragend":Y0=!1,SA(f,n,c);break;case"selectionchange":if(t6)break;case"keydown":case"keyup":SA(f,n,c)}var x;if(nE)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else uu?ZN(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(JN&&n.locale!=="ko"&&(uu||S!=="onCompositionStart"?S==="onCompositionEnd"&&uu&&(x=XN()):(So=c,Z1="value"in So?So.value:So.textContent,uu=!0)),A=_m(l,S),0<A.length&&(S=new gA(S,t,null,n,c),f.push({event:S,listeners:A}),x?S.data=x:(x=e2(n),x!==null&&(S.data=x)))),(x=zB?qB(t,n):WB(t,n))&&(l=_m(l,"onBeforeInput"),0<l.length&&(c=new gA("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=x))}h2(f,e)})}function nh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _m(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Qf(t,n),o!=null&&r.unshift(nh(t,o,i)),o=Qf(t,e),o!=null&&r.push(nh(t,o,i))),t=t.return}return r}function Ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function PA(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,i?(u=Qf(n,o),u!=null&&a.unshift(nh(n,u,s))):i||(u=Qf(n,o),u!=null&&a.push(nh(n,u,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var o6=/\r\n?/g,a6=/\u0000|\uFFFD/g;function OA(t){return(typeof t=="string"?t:""+t).replace(o6,`
`).replace(a6,"")}function lp(t,e,n){if(e=OA(e),OA(t)!==e&&n)throw Error(Z(425))}function wm(){}var X0=null,J0=null;function Z0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ew=typeof setTimeout=="function"?setTimeout:void 0,s6=typeof clearTimeout=="function"?clearTimeout:void 0,CA=typeof Promise=="function"?Promise:void 0,u6=typeof queueMicrotask=="function"?queueMicrotask:typeof CA<"u"?function(t){return CA.resolve(null).then(t).catch(l6)}:ew;function l6(t){setTimeout(function(){throw t})}function P_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Jf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Jf(e)}function jo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function kA(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zl=Math.random().toString(36).slice(2),qr="__reactFiber$"+zl,rh="__reactProps$"+zl,Ci="__reactContainer$"+zl,tw="__reactEvents$"+zl,c6="__reactListeners$"+zl,f6="__reactHandles$"+zl;function La(t){var e=t[qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ci]||n[qr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=kA(t);t!==null;){if(n=t[qr])return n;t=kA(t)}return e}t=n,n=t.parentNode}return null}function fd(t){return t=t[qr]||t[Ci],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function wy(t){return t[rh]||null}var nw=[],hu=-1;function ia(t){return{current:t}}function at(t){0>hu||(t.current=nw[hu],nw[hu]=null,hu--)}function Ye(t,e){hu++,nw[hu]=t.current,t.current=e}var Ko={},vn=ia(Ko),Nn=ia(!1),os=Ko;function Fu(t,e){var n=t.type.contextTypes;if(!n)return Ko;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Dn(t){return t=t.childContextTypes,t!=null}function bm(){at(Nn),at(vn)}function RA(t,e,n){if(vn.current!==Ko)throw Error(Z(168));Ye(vn,e),Ye(Nn,n)}function p2(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Z(108,Q3(t)||"Unknown",i));return gt({},n,r)}function Em(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ko,os=vn.current,Ye(vn,t),Ye(Nn,Nn.current),!0}function NA(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=p2(t,e,os),r.__reactInternalMemoizedMergedChildContext=t,at(Nn),at(vn),Ye(vn,t)):at(Nn),Ye(Nn,n)}var hi=null,by=!1,O_=!1;function m2(t){hi===null?hi=[t]:hi.push(t)}function h6(t){by=!0,m2(t)}function oa(){if(!O_&&hi!==null){O_=!0;var t=0,e=Ve;try{var n=hi;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hi=null,by=!1}catch(i){throw hi!==null&&(hi=hi.slice(t+1)),FN(Q1,oa),i}finally{Ve=e,O_=!1}}return null}var du=[],pu=0,xm=null,Tm=0,ar=[],sr=0,as=null,di=1,pi="";function Ia(t,e){du[pu++]=Tm,du[pu++]=xm,xm=t,Tm=e}function g2(t,e,n){ar[sr++]=di,ar[sr++]=pi,ar[sr++]=as,as=t;var r=di;t=pi;var i=32-Cr(r)-1;r&=~(1<<i),n+=1;var o=32-Cr(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,di=1<<32-Cr(e)+i|n<<i|r,pi=o+t}else di=1<<o|n<<i|r,pi=t}function iE(t){t.return!==null&&(Ia(t,1),g2(t,1,0))}function oE(t){for(;t===xm;)xm=du[--pu],du[pu]=null,Tm=du[--pu],du[pu]=null;for(;t===as;)as=ar[--sr],ar[sr]=null,pi=ar[--sr],ar[sr]=null,di=ar[--sr],ar[sr]=null}var Kn=null,Gn=null,ut=!1,Sr=null;function y2(t,e){var n=ur(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function DA(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Kn=t,Gn=jo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Kn=t,Gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=as!==null?{id:di,overflow:pi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ur(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Kn=t,Gn=null,!0):!1;default:return!1}}function rw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function iw(t){if(ut){var e=Gn;if(e){var n=e;if(!DA(t,e)){if(rw(t))throw Error(Z(418));e=jo(n.nextSibling);var r=Kn;e&&DA(t,e)?y2(r,n):(t.flags=t.flags&-4097|2,ut=!1,Kn=t)}}else{if(rw(t))throw Error(Z(418));t.flags=t.flags&-4097|2,ut=!1,Kn=t}}}function jA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kn=t}function cp(t){if(t!==Kn)return!1;if(!ut)return jA(t),ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Z0(t.type,t.memoizedProps)),e&&(e=Gn)){if(rw(t))throw v2(),Error(Z(418));for(;e;)y2(t,e),e=jo(e.nextSibling)}if(jA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gn=jo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gn=null}}else Gn=Kn?jo(t.stateNode.nextSibling):null;return!0}function v2(){for(var t=Gn;t;)t=jo(t.nextSibling)}function Bu(){Gn=Kn=null,ut=!1}function aE(t){Sr===null?Sr=[t]:Sr.push(t)}var d6=Ui.ReactCurrentBatchConfig;function Lc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function fp(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function MA(t){var e=t._init;return e(t._payload)}function _2(t){function e(v,g){if(t){var E=v.deletions;E===null?(v.deletions=[g],v.flags|=16):E.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function i(v,g){return v=Lo(v,g),v.index=0,v.sibling=null,v}function o(v,g,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<g?(v.flags|=2,g):E):(v.flags|=2,g)):(v.flags|=1048576,g)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function s(v,g,E,P){return g===null||g.tag!==6?(g=M_(E,v.mode,P),g.return=v,g):(g=i(g,E),g.return=v,g)}function u(v,g,E,P){var T=E.type;return T===su?c(v,g,E.props.children,P,E.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===fo&&MA(T)===g.type)?(P=i(g,E.props),P.ref=Lc(v,g,E),P.return=v,P):(P=Yp(E.type,E.key,E.props,null,v.mode,P),P.ref=Lc(v,g,E),P.return=v,P)}function l(v,g,E,P){return g===null||g.tag!==4||g.stateNode.containerInfo!==E.containerInfo||g.stateNode.implementation!==E.implementation?(g=$_(E,v.mode,P),g.return=v,g):(g=i(g,E.children||[]),g.return=v,g)}function c(v,g,E,P,T){return g===null||g.tag!==7?(g=Xa(E,v.mode,P,T),g.return=v,g):(g=i(g,E),g.return=v,g)}function f(v,g,E){if(typeof g=="string"&&g!==""||typeof g=="number")return g=M_(""+g,v.mode,E),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ep:return E=Yp(g.type,g.key,g.props,null,v.mode,E),E.ref=Lc(v,null,g),E.return=v,E;case au:return g=$_(g,v.mode,E),g.return=v,g;case fo:var P=g._init;return f(v,P(g._payload),E)}if(sf(g)||Dc(g))return g=Xa(g,v.mode,E,null),g.return=v,g;fp(v,g)}return null}function d(v,g,E,P){var T=g!==null?g.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return T!==null?null:s(v,g,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ep:return E.key===T?u(v,g,E,P):null;case au:return E.key===T?l(v,g,E,P):null;case fo:return T=E._init,d(v,g,T(E._payload),P)}if(sf(E)||Dc(E))return T!==null?null:c(v,g,E,P,null);fp(v,E)}return null}function p(v,g,E,P,T){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(E)||null,s(g,v,""+P,T);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ep:return v=v.get(P.key===null?E:P.key)||null,u(g,v,P,T);case au:return v=v.get(P.key===null?E:P.key)||null,l(g,v,P,T);case fo:var A=P._init;return p(v,g,E,A(P._payload),T)}if(sf(P)||Dc(P))return v=v.get(E)||null,c(g,v,P,T,null);fp(g,P)}return null}function _(v,g,E,P){for(var T=null,A=null,x=g,S=g=0,O=null;x!==null&&S<E.length;S++){x.index>S?(O=x,x=null):O=x.sibling;var C=d(v,x,E[S],P);if(C===null){x===null&&(x=O);break}t&&x&&C.alternate===null&&e(v,x),g=o(C,g,S),A===null?T=C:A.sibling=C,A=C,x=O}if(S===E.length)return n(v,x),ut&&Ia(v,S),T;if(x===null){for(;S<E.length;S++)x=f(v,E[S],P),x!==null&&(g=o(x,g,S),A===null?T=x:A.sibling=x,A=x);return ut&&Ia(v,S),T}for(x=r(v,x);S<E.length;S++)O=p(x,v,S,E[S],P),O!==null&&(t&&O.alternate!==null&&x.delete(O.key===null?S:O.key),g=o(O,g,S),A===null?T=O:A.sibling=O,A=O);return t&&x.forEach(function(k){return e(v,k)}),ut&&Ia(v,S),T}function y(v,g,E,P){var T=Dc(E);if(typeof T!="function")throw Error(Z(150));if(E=T.call(E),E==null)throw Error(Z(151));for(var A=T=null,x=g,S=g=0,O=null,C=E.next();x!==null&&!C.done;S++,C=E.next()){x.index>S?(O=x,x=null):O=x.sibling;var k=d(v,x,C.value,P);if(k===null){x===null&&(x=O);break}t&&x&&k.alternate===null&&e(v,x),g=o(k,g,S),A===null?T=k:A.sibling=k,A=k,x=O}if(C.done)return n(v,x),ut&&Ia(v,S),T;if(x===null){for(;!C.done;S++,C=E.next())C=f(v,C.value,P),C!==null&&(g=o(C,g,S),A===null?T=C:A.sibling=C,A=C);return ut&&Ia(v,S),T}for(x=r(v,x);!C.done;S++,C=E.next())C=p(x,v,S,C.value,P),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?S:C.key),g=o(C,g,S),A===null?T=C:A.sibling=C,A=C);return t&&x.forEach(function(N){return e(v,N)}),ut&&Ia(v,S),T}function b(v,g,E,P){if(typeof E=="object"&&E!==null&&E.type===su&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ep:e:{for(var T=E.key,A=g;A!==null;){if(A.key===T){if(T=E.type,T===su){if(A.tag===7){n(v,A.sibling),g=i(A,E.props.children),g.return=v,v=g;break e}}else if(A.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===fo&&MA(T)===A.type){n(v,A.sibling),g=i(A,E.props),g.ref=Lc(v,A,E),g.return=v,v=g;break e}n(v,A);break}else e(v,A);A=A.sibling}E.type===su?(g=Xa(E.props.children,v.mode,P,E.key),g.return=v,v=g):(P=Yp(E.type,E.key,E.props,null,v.mode,P),P.ref=Lc(v,g,E),P.return=v,v=P)}return a(v);case au:e:{for(A=E.key;g!==null;){if(g.key===A)if(g.tag===4&&g.stateNode.containerInfo===E.containerInfo&&g.stateNode.implementation===E.implementation){n(v,g.sibling),g=i(g,E.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=$_(E,v.mode,P),g.return=v,v=g}return a(v);case fo:return A=E._init,b(v,g,A(E._payload),P)}if(sf(E))return _(v,g,E,P);if(Dc(E))return y(v,g,E,P);fp(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,g!==null&&g.tag===6?(n(v,g.sibling),g=i(g,E),g.return=v,v=g):(n(v,g),g=M_(E,v.mode,P),g.return=v,v=g),a(v)):n(v,g)}return b}var Uu=_2(!0),w2=_2(!1),Sm=ia(null),Am=null,mu=null,sE=null;function uE(){sE=mu=Am=null}function lE(t){var e=Sm.current;at(Sm),t._currentValue=e}function ow(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Au(t,e){Am=t,sE=mu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pn=!0),t.firstContext=null)}function dr(t){var e=t._currentValue;if(sE!==t)if(t={context:t,memoizedValue:e,next:null},mu===null){if(Am===null)throw Error(Z(308));mu=t,Am.dependencies={lanes:0,firstContext:t}}else mu=mu.next=t;return e}var Fa=null;function cE(t){Fa===null?Fa=[t]:Fa.push(t)}function b2(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,cE(e)):(n.next=i.next,i.next=n),e.interleaved=n,ki(t,r)}function ki(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ho=!1;function fE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function E2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ki(t,n)}return i=r.interleaved,i===null?(e.next=e,cE(r)):(e.next=i.next,i.next=e),r.interleaved=e,ki(t,n)}function qp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Y1(t,n)}}function $A(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Im(t,e,n,r){var i=t.updateQueue;ho=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,a===null?o=l:a.next=l,a=u;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(o!==null){var f=i.baseState;a=0,c=l=u=null,s=o;do{var d=s.lane,p=s.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var _=t,y=s;switch(d=e,p=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){f=_.call(p,f,d);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,d=typeof _=="function"?_.call(p,f,d):_,d==null)break e;f=gt({},f,d);break e;case 2:ho=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=p,u=f):c=c.next=p,a|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);us|=a,t.lanes=a,t.memoizedState=f}}function VA(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Z(191,i));i.call(r)}}}var hd={},Jr=ia(hd),ih=ia(hd),oh=ia(hd);function Ba(t){if(t===hd)throw Error(Z(174));return t}function hE(t,e){switch(Ye(oh,e),Ye(ih,t),Ye(Jr,hd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:L0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=L0(e,t)}at(Jr),Ye(Jr,e)}function zu(){at(Jr),at(ih),at(oh)}function x2(t){Ba(oh.current);var e=Ba(Jr.current),n=L0(e,t.type);e!==n&&(Ye(ih,t),Ye(Jr,n))}function dE(t){ih.current===t&&(at(Jr),at(ih))}var pt=ia(0);function Pm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var C_=[];function pE(){for(var t=0;t<C_.length;t++)C_[t]._workInProgressVersionPrimary=null;C_.length=0}var Wp=Ui.ReactCurrentDispatcher,k_=Ui.ReactCurrentBatchConfig,ss=0,mt=null,Dt=null,Ht=null,Om=!1,Tf=!1,ah=0,p6=0;function sn(){throw Error(Z(321))}function mE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dr(t[n],e[n]))return!1;return!0}function gE(t,e,n,r,i,o){if(ss=o,mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wp.current=t===null||t.memoizedState===null?v6:_6,t=n(r,i),Tf){o=0;do{if(Tf=!1,ah=0,25<=o)throw Error(Z(301));o+=1,Ht=Dt=null,e.updateQueue=null,Wp.current=w6,t=n(r,i)}while(Tf)}if(Wp.current=Cm,e=Dt!==null&&Dt.next!==null,ss=0,Ht=Dt=mt=null,Om=!1,e)throw Error(Z(300));return t}function yE(){var t=ah!==0;return ah=0,t}function Br(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?mt.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function pr(){if(Dt===null){var t=mt.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var e=Ht===null?mt.memoizedState:Ht.next;if(e!==null)Ht=e,Dt=t;else{if(t===null)throw Error(Z(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Ht===null?mt.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function sh(t,e){return typeof e=="function"?e(t):e}function R_(t){var e=pr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=Dt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,u=null,l=o;do{var c=l.lane;if((ss&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=f,a=r):u=u.next=f,mt.lanes|=c,us|=c}l=l.next}while(l!==null&&l!==o);u===null?a=r:u.next=s,Dr(r,e.memoizedState)||(Pn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,mt.lanes|=o,us|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function N_(t){var e=pr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Dr(o,e.memoizedState)||(Pn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function T2(){}function S2(t,e){var n=mt,r=pr(),i=e(),o=!Dr(r.memoizedState,i);if(o&&(r.memoizedState=i,Pn=!0),r=r.queue,vE(P2.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,uh(9,I2.bind(null,n,r,i,e),void 0,null),Qt===null)throw Error(Z(349));ss&30||A2(n,e,i)}return i}function A2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function I2(t,e,n,r){e.value=n,e.getSnapshot=r,O2(e)&&C2(t)}function P2(t,e,n){return n(function(){O2(e)&&C2(t)})}function O2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dr(t,n)}catch{return!0}}function C2(t){var e=ki(t,1);e!==null&&kr(e,t,1,-1)}function LA(t){var e=Br();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sh,lastRenderedState:t},e.queue=t,t=t.dispatch=y6.bind(null,mt,t),[e.memoizedState,t]}function uh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function k2(){return pr().memoizedState}function Hp(t,e,n,r){var i=Br();mt.flags|=t,i.memoizedState=uh(1|e,n,void 0,r===void 0?null:r)}function Ey(t,e,n,r){var i=pr();r=r===void 0?null:r;var o=void 0;if(Dt!==null){var a=Dt.memoizedState;if(o=a.destroy,r!==null&&mE(r,a.deps)){i.memoizedState=uh(e,n,o,r);return}}mt.flags|=t,i.memoizedState=uh(1|e,n,o,r)}function FA(t,e){return Hp(8390656,8,t,e)}function vE(t,e){return Ey(2048,8,t,e)}function R2(t,e){return Ey(4,2,t,e)}function N2(t,e){return Ey(4,4,t,e)}function D2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function j2(t,e,n){return n=n!=null?n.concat([t]):null,Ey(4,4,D2.bind(null,e,t),n)}function _E(){}function M2(t,e){var n=pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $2(t,e){var n=pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function V2(t,e,n){return ss&21?(Dr(n,e)||(n=zN(),mt.lanes|=n,us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pn=!0),t.memoizedState=n)}function m6(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=k_.transition;k_.transition={};try{t(!1),e()}finally{Ve=n,k_.transition=r}}function L2(){return pr().memoizedState}function g6(t,e,n){var r=Vo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},F2(t))B2(e,n);else if(n=b2(t,e,n,r),n!==null){var i=En();kr(n,t,r,i),U2(n,e,r)}}function y6(t,e,n){var r=Vo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(F2(t))B2(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Dr(s,a)){var u=e.interleaved;u===null?(i.next=i,cE(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=b2(t,e,i,r),n!==null&&(i=En(),kr(n,t,r,i),U2(n,e,r))}}function F2(t){var e=t.alternate;return t===mt||e!==null&&e===mt}function B2(t,e){Tf=Om=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function U2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Y1(t,n)}}var Cm={readContext:dr,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},v6={readContext:dr,useCallback:function(t,e){return Br().memoizedState=[t,e===void 0?null:e],t},useContext:dr,useEffect:FA,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hp(4194308,4,D2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hp(4,2,t,e)},useMemo:function(t,e){var n=Br();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Br();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=g6.bind(null,mt,t),[r.memoizedState,t]},useRef:function(t){var e=Br();return t={current:t},e.memoizedState=t},useState:LA,useDebugValue:_E,useDeferredValue:function(t){return Br().memoizedState=t},useTransition:function(){var t=LA(!1),e=t[0];return t=m6.bind(null,t[1]),Br().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=mt,i=Br();if(ut){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Qt===null)throw Error(Z(349));ss&30||A2(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,FA(P2.bind(null,r,o,t),[t]),r.flags|=2048,uh(9,I2.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Br(),e=Qt.identifierPrefix;if(ut){var n=pi,r=di;n=(r&~(1<<32-Cr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ah++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=p6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_6={readContext:dr,useCallback:M2,useContext:dr,useEffect:vE,useImperativeHandle:j2,useInsertionEffect:R2,useLayoutEffect:N2,useMemo:$2,useReducer:R_,useRef:k2,useState:function(){return R_(sh)},useDebugValue:_E,useDeferredValue:function(t){var e=pr();return V2(e,Dt.memoizedState,t)},useTransition:function(){var t=R_(sh)[0],e=pr().memoizedState;return[t,e]},useMutableSource:T2,useSyncExternalStore:S2,useId:L2,unstable_isNewReconciler:!1},w6={readContext:dr,useCallback:M2,useContext:dr,useEffect:vE,useImperativeHandle:j2,useInsertionEffect:R2,useLayoutEffect:N2,useMemo:$2,useReducer:N_,useRef:k2,useState:function(){return N_(sh)},useDebugValue:_E,useDeferredValue:function(t){var e=pr();return Dt===null?e.memoizedState=t:V2(e,Dt.memoizedState,t)},useTransition:function(){var t=N_(sh)[0],e=pr().memoizedState;return[t,e]},useMutableSource:T2,useSyncExternalStore:S2,useId:L2,unstable_isNewReconciler:!1};function br(t,e){if(t&&t.defaultProps){e=gt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function aw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:gt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xy={isMounted:function(t){return(t=t._reactInternals)?Is(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=En(),i=Vo(t),o=xi(r,i);o.payload=e,n!=null&&(o.callback=n),e=Mo(t,o,i),e!==null&&(kr(e,t,i,r),qp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=En(),i=Vo(t),o=xi(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Mo(t,o,i),e!==null&&(kr(e,t,i,r),qp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=En(),r=Vo(t),i=xi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Mo(t,i,r),e!==null&&(kr(e,t,r,n),qp(e,t,r))}};function BA(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!eh(n,r)||!eh(i,o):!0}function z2(t,e,n){var r=!1,i=Ko,o=e.contextType;return typeof o=="object"&&o!==null?o=dr(o):(i=Dn(e)?os:vn.current,r=e.contextTypes,o=(r=r!=null)?Fu(t,i):Ko),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function UA(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xy.enqueueReplaceState(e,e.state,null)}function sw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},fE(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=dr(o):(o=Dn(e)?os:vn.current,i.context=Fu(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(aw(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xy.enqueueReplaceState(i,i.state,null),Im(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function qu(t,e){try{var n="",r=e;do n+=K3(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function D_(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var b6=typeof WeakMap=="function"?WeakMap:Map;function q2(t,e,n){n=xi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Rm||(Rm=!0,vw=r),uw(t,e)},n}function W2(t,e,n){n=xi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){uw(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){uw(t,e),typeof r!="function"&&($o===null?$o=new Set([this]):$o.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function zA(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new b6;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=j6.bind(null,t,e,n),e.then(t,t))}function qA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function WA(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xi(-1,1),e.tag=2,Mo(n,e,1))),n.lanes|=1),t)}var E6=Ui.ReactCurrentOwner,Pn=!1;function wn(t,e,n,r){e.child=t===null?w2(e,null,n,r):Uu(e,t.child,n,r)}function HA(t,e,n,r,i){n=n.render;var o=e.ref;return Au(e,i),r=gE(t,e,n,r,o,i),n=yE(),t!==null&&!Pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ri(t,e,i)):(ut&&n&&iE(e),e.flags|=1,wn(t,e,r,i),e.child)}function GA(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!IE(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,H2(t,e,o,r,i)):(t=Yp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:eh,n(a,r)&&t.ref===e.ref)return Ri(t,e,i)}return e.flags|=1,t=Lo(o,r),t.ref=e.ref,t.return=e,e.child=t}function H2(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(eh(o,r)&&t.ref===e.ref)if(Pn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Pn=!0);else return e.lanes=t.lanes,Ri(t,e,i)}return lw(t,e,n,r,i)}function G2(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(yu,Un),Un|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(yu,Un),Un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ye(yu,Un),Un|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ye(yu,Un),Un|=r;return wn(t,e,i,n),e.child}function K2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lw(t,e,n,r,i){var o=Dn(n)?os:vn.current;return o=Fu(e,o),Au(e,i),n=gE(t,e,n,r,o,i),r=yE(),t!==null&&!Pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ri(t,e,i)):(ut&&r&&iE(e),e.flags|=1,wn(t,e,n,i),e.child)}function KA(t,e,n,r,i){if(Dn(n)){var o=!0;Em(e)}else o=!1;if(Au(e,i),e.stateNode===null)Gp(t,e),z2(e,n,r),sw(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=dr(l):(l=Dn(n)?os:vn.current,l=Fu(e,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||u!==l)&&UA(e,a,r,l),ho=!1;var d=e.memoizedState;a.state=d,Im(e,r,a,i),u=e.memoizedState,s!==r||d!==u||Nn.current||ho?(typeof c=="function"&&(aw(e,n,c,r),u=e.memoizedState),(s=ho||BA(e,n,s,r,d,u,l))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,E2(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:br(e.type,s),a.props=l,f=e.pendingProps,d=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=dr(u):(u=Dn(n)?os:vn.current,u=Fu(e,u));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||d!==u)&&UA(e,a,r,u),ho=!1,d=e.memoizedState,a.state=d,Im(e,r,a,i);var _=e.memoizedState;s!==f||d!==_||Nn.current||ho?(typeof p=="function"&&(aw(e,n,p,r),_=e.memoizedState),(l=ho||BA(e,n,l,r,d,_,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,_,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,_,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),a.props=r,a.state=_,a.context=u,r=l):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return cw(t,e,n,r,o,i)}function cw(t,e,n,r,i,o){K2(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&NA(e,n,!1),Ri(t,e,o);r=e.stateNode,E6.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Uu(e,t.child,null,o),e.child=Uu(e,null,s,o)):wn(t,e,s,o),e.memoizedState=r.state,i&&NA(e,n,!0),e.child}function Q2(t){var e=t.stateNode;e.pendingContext?RA(t,e.pendingContext,e.pendingContext!==e.context):e.context&&RA(t,e.context,!1),hE(t,e.containerInfo)}function QA(t,e,n,r,i){return Bu(),aE(i),e.flags|=256,wn(t,e,n,r),e.child}var fw={dehydrated:null,treeContext:null,retryLane:0};function hw(t){return{baseLanes:t,cachePool:null,transitions:null}}function Y2(t,e,n){var r=e.pendingProps,i=pt.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ye(pt,i&1),t===null)return iw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Ay(a,r,0,null),t=Xa(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=hw(n),e.memoizedState=fw,t):wE(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return x6(t,e,a,r,s,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,s=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Lo(i,u),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Lo(s,o):(o=Xa(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?hw(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=fw,r}return o=t.child,t=o.sibling,r=Lo(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wE(t,e){return e=Ay({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hp(t,e,n,r){return r!==null&&aE(r),Uu(e,t.child,null,n),t=wE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function x6(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=D_(Error(Z(422))),hp(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Ay({mode:"visible",children:r.children},i,0,null),o=Xa(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Uu(e,t.child,null,a),e.child.memoizedState=hw(a),e.memoizedState=fw,o);if(!(e.mode&1))return hp(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(Z(419)),r=D_(o,r,void 0),hp(t,e,a,r)}if(s=(a&t.childLanes)!==0,Pn||s){if(r=Qt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ki(t,i),kr(r,t,i,-1))}return AE(),r=D_(Error(Z(421))),hp(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=M6.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Gn=jo(i.nextSibling),Kn=e,ut=!0,Sr=null,t!==null&&(ar[sr++]=di,ar[sr++]=pi,ar[sr++]=as,di=t.id,pi=t.overflow,as=e),e=wE(e,r.children),e.flags|=4096,e)}function YA(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ow(t.return,e,n)}function j_(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function X2(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(wn(t,e,r.children,n),r=pt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&YA(t,n,e);else if(t.tag===19)YA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(pt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Pm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),j_(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Pm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}j_(e,!0,n,null,o);break;case"together":j_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ri(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=Lo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Lo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function T6(t,e,n){switch(e.tag){case 3:Q2(e),Bu();break;case 5:x2(e);break;case 1:Dn(e.type)&&Em(e);break;case 4:hE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ye(Sm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(pt,pt.current&1),e.flags|=128,null):n&e.child.childLanes?Y2(t,e,n):(Ye(pt,pt.current&1),t=Ri(t,e,n),t!==null?t.sibling:null);Ye(pt,pt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return X2(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ye(pt,pt.current),r)break;return null;case 22:case 23:return e.lanes=0,G2(t,e,n)}return Ri(t,e,n)}var J2,dw,Z2,eD;J2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dw=function(){};Z2=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ba(Jr.current);var o=null;switch(n){case"input":i=j0(t,i),r=j0(t,r),o=[];break;case"select":i=gt({},i,{value:void 0}),r=gt({},r,{value:void 0}),o=[];break;case"textarea":i=V0(t,i),r=V0(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wm)}F0(n,r);var a;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Gf.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Gf.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&tt("scroll",t),o||s===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};eD=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fc(t,e){if(!ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function S6(t,e,n){var r=e.pendingProps;switch(oE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(e),null;case 1:return Dn(e.type)&&bm(),un(e),null;case 3:return r=e.stateNode,zu(),at(Nn),at(vn),pE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sr!==null&&(bw(Sr),Sr=null))),dw(t,e),un(e),null;case 5:dE(e);var i=Ba(oh.current);if(n=e.type,t!==null&&e.stateNode!=null)Z2(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return un(e),null}if(t=Ba(Jr.current),cp(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[qr]=e,r[rh]=o,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(i=0;i<lf.length;i++)tt(lf[i],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":oA(r,o),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},tt("invalid",r);break;case"textarea":sA(r,o),tt("invalid",r)}F0(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&lp(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&lp(r.textContent,s,t),i=["children",""+s]):Gf.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&tt("scroll",r)}switch(n){case"input":tp(r),aA(r,o,!0);break;case"textarea":tp(r),uA(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=wm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[qr]=e,t[rh]=r,J2(t,e,!1,!1),e.stateNode=t;e:{switch(a=B0(n,r),n){case"dialog":tt("cancel",t),tt("close",t),i=r;break;case"iframe":case"object":case"embed":tt("load",t),i=r;break;case"video":case"audio":for(i=0;i<lf.length;i++)tt(lf[i],t);i=r;break;case"source":tt("error",t),i=r;break;case"img":case"image":case"link":tt("error",t),tt("load",t),i=r;break;case"details":tt("toggle",t),i=r;break;case"input":oA(t,r),i=j0(t,r),tt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=gt({},r,{value:void 0}),tt("invalid",t);break;case"textarea":sA(t,r),i=V0(t,r),tt("invalid",t);break;default:i=r}F0(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="style"?kN(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ON(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Kf(t,u):typeof u=="number"&&Kf(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Gf.hasOwnProperty(o)?u!=null&&o==="onScroll"&&tt("scroll",t):u!=null&&q1(t,o,u,a))}switch(n){case"input":tp(t),aA(t,r,!1);break;case"textarea":tp(t),uA(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Go(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Eu(t,!!r.multiple,o,!1):r.defaultValue!=null&&Eu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return un(e),null;case 6:if(t&&e.stateNode!=null)eD(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=Ba(oh.current),Ba(Jr.current),cp(e)){if(r=e.stateNode,n=e.memoizedProps,r[qr]=e,(o=r.nodeValue!==n)&&(t=Kn,t!==null))switch(t.tag){case 3:lp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lp(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qr]=e,e.stateNode=r}return un(e),null;case 13:if(at(pt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ut&&Gn!==null&&e.mode&1&&!(e.flags&128))v2(),Bu(),e.flags|=98560,o=!1;else if(o=cp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Z(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Z(317));o[qr]=e}else Bu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;un(e),o=!1}else Sr!==null&&(bw(Sr),Sr=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pt.current&1?jt===0&&(jt=3):AE())),e.updateQueue!==null&&(e.flags|=4),un(e),null);case 4:return zu(),dw(t,e),t===null&&th(e.stateNode.containerInfo),un(e),null;case 10:return lE(e.type._context),un(e),null;case 17:return Dn(e.type)&&bm(),un(e),null;case 19:if(at(pt),o=e.memoizedState,o===null)return un(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)Fc(o,!1);else{if(jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Pm(t),a!==null){for(e.flags|=128,Fc(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(pt,pt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Et()>Wu&&(e.flags|=128,r=!0,Fc(o,!1),e.lanes=4194304)}else{if(!r)if(t=Pm(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ut)return un(e),null}else 2*Et()-o.renderingStartTime>Wu&&n!==1073741824&&(e.flags|=128,r=!0,Fc(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Et(),e.sibling=null,n=pt.current,Ye(pt,r?n&1|2:n&1),e):(un(e),null);case 22:case 23:return SE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Un&1073741824&&(un(e),e.subtreeFlags&6&&(e.flags|=8192)):un(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function A6(t,e){switch(oE(e),e.tag){case 1:return Dn(e.type)&&bm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zu(),at(Nn),at(vn),pE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dE(e),null;case 13:if(at(pt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Bu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return at(pt),null;case 4:return zu(),null;case 10:return lE(e.type._context),null;case 22:case 23:return SE(),null;case 24:return null;default:return null}}var dp=!1,hn=!1,I6=typeof WeakSet=="function"?WeakSet:Set,se=null;function gu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_t(t,e,r)}else n.current=null}function pw(t,e,n){try{n()}catch(r){_t(t,e,r)}}var XA=!1;function P6(t,e){if(X0=ym,t=o2(),rE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,u=-1,l=0,c=0,f=t,d=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(s=a+i),f!==o||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)d=f,f=p;for(;;){if(f===t)break t;if(d===n&&++l===i&&(s=a),d===o&&++c===r&&(u=a),(p=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=p}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(J0={focusedElem:t,selectionRange:n},ym=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,b=_.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:br(e.type,y),b);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(P){_t(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return _=XA,XA=!1,_}function Sf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&pw(e,n,o)}i=i.next}while(i!==r)}}function Ty(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tD(t){var e=t.alternate;e!==null&&(t.alternate=null,tD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qr],delete e[rh],delete e[tw],delete e[c6],delete e[f6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nD(t){return t.tag===5||t.tag===3||t.tag===4}function JA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wm));else if(r!==4&&(t=t.child,t!==null))for(gw(t,e,n),t=t.sibling;t!==null;)gw(t,e,n),t=t.sibling}function yw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yw(t,e,n),t=t.sibling;t!==null;)yw(t,e,n),t=t.sibling}var Zt=null,Er=!1;function oo(t,e,n){for(n=n.child;n!==null;)rD(t,e,n),n=n.sibling}function rD(t,e,n){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(gy,n)}catch{}switch(n.tag){case 5:hn||gu(n,e);case 6:var r=Zt,i=Er;Zt=null,oo(t,e,n),Zt=r,Er=i,Zt!==null&&(Er?(t=Zt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Zt.removeChild(n.stateNode));break;case 18:Zt!==null&&(Er?(t=Zt,n=n.stateNode,t.nodeType===8?P_(t.parentNode,n):t.nodeType===1&&P_(t,n),Jf(t)):P_(Zt,n.stateNode));break;case 4:r=Zt,i=Er,Zt=n.stateNode.containerInfo,Er=!0,oo(t,e,n),Zt=r,Er=i;break;case 0:case 11:case 14:case 15:if(!hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&pw(n,e,a),i=i.next}while(i!==r)}oo(t,e,n);break;case 1:if(!hn&&(gu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){_t(n,e,s)}oo(t,e,n);break;case 21:oo(t,e,n);break;case 22:n.mode&1?(hn=(r=hn)||n.memoizedState!==null,oo(t,e,n),hn=r):oo(t,e,n);break;default:oo(t,e,n)}}function ZA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new I6),e.forEach(function(r){var i=$6.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _r(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:Zt=s.stateNode,Er=!1;break e;case 3:Zt=s.stateNode.containerInfo,Er=!0;break e;case 4:Zt=s.stateNode.containerInfo,Er=!0;break e}s=s.return}if(Zt===null)throw Error(Z(160));rD(o,a,i),Zt=null,Er=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){_t(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iD(e,t),e=e.sibling}function iD(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_r(e,t),Fr(t),r&4){try{Sf(3,t,t.return),Ty(3,t)}catch(y){_t(t,t.return,y)}try{Sf(5,t,t.return)}catch(y){_t(t,t.return,y)}}break;case 1:_r(e,t),Fr(t),r&512&&n!==null&&gu(n,n.return);break;case 5:if(_r(e,t),Fr(t),r&512&&n!==null&&gu(n,n.return),t.flags&32){var i=t.stateNode;try{Kf(i,"")}catch(y){_t(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&AN(i,o),B0(s,a);var l=B0(s,o);for(a=0;a<u.length;a+=2){var c=u[a],f=u[a+1];c==="style"?kN(i,f):c==="dangerouslySetInnerHTML"?ON(i,f):c==="children"?Kf(i,f):q1(i,c,f,l)}switch(s){case"input":M0(i,o);break;case"textarea":IN(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Eu(i,!!o.multiple,p,!1):d!==!!o.multiple&&(o.defaultValue!=null?Eu(i,!!o.multiple,o.defaultValue,!0):Eu(i,!!o.multiple,o.multiple?[]:"",!1))}i[rh]=o}catch(y){_t(t,t.return,y)}}break;case 6:if(_r(e,t),Fr(t),r&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){_t(t,t.return,y)}}break;case 3:if(_r(e,t),Fr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jf(e.containerInfo)}catch(y){_t(t,t.return,y)}break;case 4:_r(e,t),Fr(t);break;case 13:_r(e,t),Fr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(xE=Et())),r&4&&ZA(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(hn=(l=hn)||c,_r(e,t),hn=l):_r(e,t),Fr(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(se=t,c=t.child;c!==null;){for(f=se=c;se!==null;){switch(d=se,p=d.child,d.tag){case 0:case 11:case 14:case 15:Sf(4,d,d.return);break;case 1:gu(d,d.return);var _=d.stateNode;if(typeof _.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){_t(r,n,y)}}break;case 5:gu(d,d.return);break;case 22:if(d.memoizedState!==null){tI(f);continue}}p!==null?(p.return=d,se=p):tI(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=CN("display",a))}catch(y){_t(t,t.return,y)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){_t(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:_r(e,t),Fr(t),r&4&&ZA(t);break;case 21:break;default:_r(e,t),Fr(t)}}function Fr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nD(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Kf(i,""),r.flags&=-33);var o=JA(t);yw(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=JA(t);gw(t,s,a);break;default:throw Error(Z(161))}}catch(u){_t(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function O6(t,e,n){se=t,oD(t)}function oD(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||dp;if(!a){var s=i.alternate,u=s!==null&&s.memoizedState!==null||hn;s=dp;var l=hn;if(dp=a,(hn=u)&&!l)for(se=i;se!==null;)a=se,u=a.child,a.tag===22&&a.memoizedState!==null?nI(i):u!==null?(u.return=a,se=u):nI(i);for(;o!==null;)se=o,oD(o),o=o.sibling;se=i,dp=s,hn=l}eI(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,se=o):eI(t)}}function eI(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||Ty(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!hn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:br(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&VA(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}VA(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Jf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}hn||e.flags&512&&mw(e)}catch(d){_t(e,e.return,d)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function tI(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function nI(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ty(4,e)}catch(u){_t(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){_t(e,i,u)}}var o=e.return;try{mw(e)}catch(u){_t(e,o,u)}break;case 5:var a=e.return;try{mw(e)}catch(u){_t(e,a,u)}}}catch(u){_t(e,e.return,u)}if(e===t){se=null;break}var s=e.sibling;if(s!==null){s.return=e.return,se=s;break}se=e.return}}var C6=Math.ceil,km=Ui.ReactCurrentDispatcher,bE=Ui.ReactCurrentOwner,fr=Ui.ReactCurrentBatchConfig,Re=0,Qt=null,Pt=null,nn=0,Un=0,yu=ia(0),jt=0,lh=null,us=0,Sy=0,EE=0,Af=null,An=null,xE=0,Wu=1/0,fi=null,Rm=!1,vw=null,$o=null,pp=!1,Ao=null,Nm=0,If=0,_w=null,Kp=-1,Qp=0;function En(){return Re&6?Et():Kp!==-1?Kp:Kp=Et()}function Vo(t){return t.mode&1?Re&2&&nn!==0?nn&-nn:d6.transition!==null?(Qp===0&&(Qp=zN()),Qp):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:YN(t.type)),t):1}function kr(t,e,n,r){if(50<If)throw If=0,_w=null,Error(Z(185));ld(t,n,r),(!(Re&2)||t!==Qt)&&(t===Qt&&(!(Re&2)&&(Sy|=n),jt===4&&yo(t,nn)),jn(t,r),n===1&&Re===0&&!(e.mode&1)&&(Wu=Et()+500,by&&oa()))}function jn(t,e){var n=t.callbackNode;dB(t,e);var r=gm(t,t===Qt?nn:0);if(r===0)n!==null&&fA(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fA(n),e===1)t.tag===0?h6(rI.bind(null,t)):m2(rI.bind(null,t)),u6(function(){!(Re&6)&&oa()}),n=null;else{switch(qN(r)){case 1:n=Q1;break;case 4:n=BN;break;case 16:n=mm;break;case 536870912:n=UN;break;default:n=mm}n=dD(n,aD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aD(t,e){if(Kp=-1,Qp=0,Re&6)throw Error(Z(327));var n=t.callbackNode;if(Iu()&&t.callbackNode!==n)return null;var r=gm(t,t===Qt?nn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Dm(t,r);else{e=r;var i=Re;Re|=2;var o=uD();(Qt!==t||nn!==e)&&(fi=null,Wu=Et()+500,Ya(t,e));do try{N6();break}catch(s){sD(t,s)}while(!0);uE(),km.current=o,Re=i,Pt!==null?e=0:(Qt=null,nn=0,e=jt)}if(e!==0){if(e===2&&(i=H0(t),i!==0&&(r=i,e=ww(t,i))),e===1)throw n=lh,Ya(t,0),yo(t,r),jn(t,Et()),n;if(e===6)yo(t,r);else{if(i=t.current.alternate,!(r&30)&&!k6(i)&&(e=Dm(t,r),e===2&&(o=H0(t),o!==0&&(r=o,e=ww(t,o))),e===1))throw n=lh,Ya(t,0),yo(t,r),jn(t,Et()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:Pa(t,An,fi);break;case 3:if(yo(t,r),(r&130023424)===r&&(e=xE+500-Et(),10<e)){if(gm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){En(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ew(Pa.bind(null,t,An,fi),e);break}Pa(t,An,fi);break;case 4:if(yo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Cr(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=Et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*C6(r/1960))-r,10<r){t.timeoutHandle=ew(Pa.bind(null,t,An,fi),r);break}Pa(t,An,fi);break;case 5:Pa(t,An,fi);break;default:throw Error(Z(329))}}}return jn(t,Et()),t.callbackNode===n?aD.bind(null,t):null}function ww(t,e){var n=Af;return t.current.memoizedState.isDehydrated&&(Ya(t,e).flags|=256),t=Dm(t,e),t!==2&&(e=An,An=n,e!==null&&bw(e)),t}function bw(t){An===null?An=t:An.push.apply(An,t)}function k6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Dr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yo(t,e){for(e&=~EE,e&=~Sy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cr(e),r=1<<n;t[n]=-1,e&=~r}}function rI(t){if(Re&6)throw Error(Z(327));Iu();var e=gm(t,0);if(!(e&1))return jn(t,Et()),null;var n=Dm(t,e);if(t.tag!==0&&n===2){var r=H0(t);r!==0&&(e=r,n=ww(t,r))}if(n===1)throw n=lh,Ya(t,0),yo(t,e),jn(t,Et()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pa(t,An,fi),jn(t,Et()),null}function TE(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(Wu=Et()+500,by&&oa())}}function ls(t){Ao!==null&&Ao.tag===0&&!(Re&6)&&Iu();var e=Re;Re|=1;var n=fr.transition,r=Ve;try{if(fr.transition=null,Ve=1,t)return t()}finally{Ve=r,fr.transition=n,Re=e,!(Re&6)&&oa()}}function SE(){Un=yu.current,at(yu)}function Ya(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,s6(n)),Pt!==null)for(n=Pt.return;n!==null;){var r=n;switch(oE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bm();break;case 3:zu(),at(Nn),at(vn),pE();break;case 5:dE(r);break;case 4:zu();break;case 13:at(pt);break;case 19:at(pt);break;case 10:lE(r.type._context);break;case 22:case 23:SE()}n=n.return}if(Qt=t,Pt=t=Lo(t.current,null),nn=Un=e,jt=0,lh=null,EE=Sy=us=0,An=Af=null,Fa!==null){for(e=0;e<Fa.length;e++)if(n=Fa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Fa=null}return t}function sD(t,e){do{var n=Pt;try{if(uE(),Wp.current=Cm,Om){for(var r=mt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Om=!1}if(ss=0,Ht=Dt=mt=null,Tf=!1,ah=0,bE.current=null,n===null||n.return===null){jt=1,lh=e,Pt=null;break}e:{var o=t,a=n.return,s=n,u=e;if(e=nn,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=qA(a);if(p!==null){p.flags&=-257,WA(p,a,s,o,e),p.mode&1&&zA(o,l,e),e=p,u=l;var _=e.updateQueue;if(_===null){var y=new Set;y.add(u),e.updateQueue=y}else _.add(u);break e}else{if(!(e&1)){zA(o,l,e),AE();break e}u=Error(Z(426))}}else if(ut&&s.mode&1){var b=qA(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),WA(b,a,s,o,e),aE(qu(u,s));break e}}o=u=qu(u,s),jt!==4&&(jt=2),Af===null?Af=[o]:Af.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=q2(o,u,e);$A(o,v);break e;case 1:s=u;var g=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&($o===null||!$o.has(E)))){o.flags|=65536,e&=-e,o.lanes|=e;var P=W2(o,s,e);$A(o,P);break e}}o=o.return}while(o!==null)}cD(n)}catch(T){e=T,Pt===n&&n!==null&&(Pt=n=n.return);continue}break}while(!0)}function uD(){var t=km.current;return km.current=Cm,t===null?Cm:t}function AE(){(jt===0||jt===3||jt===2)&&(jt=4),Qt===null||!(us&268435455)&&!(Sy&268435455)||yo(Qt,nn)}function Dm(t,e){var n=Re;Re|=2;var r=uD();(Qt!==t||nn!==e)&&(fi=null,Ya(t,e));do try{R6();break}catch(i){sD(t,i)}while(!0);if(uE(),Re=n,km.current=r,Pt!==null)throw Error(Z(261));return Qt=null,nn=0,jt}function R6(){for(;Pt!==null;)lD(Pt)}function N6(){for(;Pt!==null&&!iB();)lD(Pt)}function lD(t){var e=hD(t.alternate,t,Un);t.memoizedProps=t.pendingProps,e===null?cD(t):Pt=e,bE.current=null}function cD(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=A6(n,e),n!==null){n.flags&=32767,Pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jt=6,Pt=null;return}}else if(n=S6(n,e,Un),n!==null){Pt=n;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=t}while(e!==null);jt===0&&(jt=5)}function Pa(t,e,n){var r=Ve,i=fr.transition;try{fr.transition=null,Ve=1,D6(t,e,n,r)}finally{fr.transition=i,Ve=r}return null}function D6(t,e,n,r){do Iu();while(Ao!==null);if(Re&6)throw Error(Z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(pB(t,o),t===Qt&&(Pt=Qt=null,nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pp||(pp=!0,dD(mm,function(){return Iu(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=fr.transition,fr.transition=null;var a=Ve;Ve=1;var s=Re;Re|=4,bE.current=null,P6(t,n),iD(n,t),e6(J0),ym=!!X0,J0=X0=null,t.current=n,O6(n),oB(),Re=s,Ve=a,fr.transition=o}else t.current=n;if(pp&&(pp=!1,Ao=t,Nm=i),o=t.pendingLanes,o===0&&($o=null),uB(n.stateNode),jn(t,Et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Rm)throw Rm=!1,t=vw,vw=null,t;return Nm&1&&t.tag!==0&&Iu(),o=t.pendingLanes,o&1?t===_w?If++:(If=0,_w=t):If=0,oa(),null}function Iu(){if(Ao!==null){var t=qN(Nm),e=fr.transition,n=Ve;try{if(fr.transition=null,Ve=16>t?16:t,Ao===null)var r=!1;else{if(t=Ao,Ao=null,Nm=0,Re&6)throw Error(Z(331));var i=Re;for(Re|=4,se=t.current;se!==null;){var o=se,a=o.child;if(se.flags&16){var s=o.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(se=l;se!==null;){var c=se;switch(c.tag){case 0:case 11:case 15:Sf(8,c,o)}var f=c.child;if(f!==null)f.return=c,se=f;else for(;se!==null;){c=se;var d=c.sibling,p=c.return;if(tD(c),c===l){se=null;break}if(d!==null){d.return=p,se=d;break}se=p}}}var _=o.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}se=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,se=a;else e:for(;se!==null;){if(o=se,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Sf(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,se=v;break e}se=o.return}}var g=t.current;for(se=g;se!==null;){a=se;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,se=E;else e:for(a=g;se!==null;){if(s=se,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Ty(9,s)}}catch(T){_t(s,s.return,T)}if(s===a){se=null;break e}var P=s.sibling;if(P!==null){P.return=s.return,se=P;break e}se=s.return}}if(Re=i,oa(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(gy,t)}catch{}r=!0}return r}finally{Ve=n,fr.transition=e}}return!1}function iI(t,e,n){e=qu(n,e),e=q2(t,e,1),t=Mo(t,e,1),e=En(),t!==null&&(ld(t,1,e),jn(t,e))}function _t(t,e,n){if(t.tag===3)iI(t,t,n);else for(;e!==null;){if(e.tag===3){iI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($o===null||!$o.has(r))){t=qu(n,t),t=W2(e,t,1),e=Mo(e,t,1),t=En(),e!==null&&(ld(e,1,t),jn(e,t));break}}e=e.return}}function j6(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=En(),t.pingedLanes|=t.suspendedLanes&n,Qt===t&&(nn&n)===n&&(jt===4||jt===3&&(nn&130023424)===nn&&500>Et()-xE?Ya(t,0):EE|=n),jn(t,e)}function fD(t,e){e===0&&(t.mode&1?(e=ip,ip<<=1,!(ip&130023424)&&(ip=4194304)):e=1);var n=En();t=ki(t,e),t!==null&&(ld(t,e,n),jn(t,n))}function M6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fD(t,n)}function $6(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),fD(t,n)}var hD;hD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nn.current)Pn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pn=!1,T6(t,e,n);Pn=!!(t.flags&131072)}else Pn=!1,ut&&e.flags&1048576&&g2(e,Tm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gp(t,e),t=e.pendingProps;var i=Fu(e,vn.current);Au(e,n),i=gE(null,e,r,t,i,n);var o=yE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dn(r)?(o=!0,Em(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fE(e),i.updater=xy,e.stateNode=i,i._reactInternals=e,sw(e,r,t,n),e=cw(null,e,r,!0,o,n)):(e.tag=0,ut&&o&&iE(e),wn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=L6(r),t=br(r,t),i){case 0:e=lw(null,e,r,t,n);break e;case 1:e=KA(null,e,r,t,n);break e;case 11:e=HA(null,e,r,t,n);break e;case 14:e=GA(null,e,r,br(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:br(r,i),lw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:br(r,i),KA(t,e,r,i,n);case 3:e:{if(Q2(e),t===null)throw Error(Z(387));r=e.pendingProps,o=e.memoizedState,i=o.element,E2(t,e),Im(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=qu(Error(Z(423)),e),e=QA(t,e,r,n,i);break e}else if(r!==i){i=qu(Error(Z(424)),e),e=QA(t,e,r,n,i);break e}else for(Gn=jo(e.stateNode.containerInfo.firstChild),Kn=e,ut=!0,Sr=null,n=w2(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bu(),r===i){e=Ri(t,e,n);break e}wn(t,e,r,n)}e=e.child}return e;case 5:return x2(e),t===null&&iw(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,Z0(r,i)?a=null:o!==null&&Z0(r,o)&&(e.flags|=32),K2(t,e),wn(t,e,a,n),e.child;case 6:return t===null&&iw(e),null;case 13:return Y2(t,e,n);case 4:return hE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Uu(e,null,r,n):wn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:br(r,i),HA(t,e,r,i,n);case 7:return wn(t,e,e.pendingProps,n),e.child;case 8:return wn(t,e,e.pendingProps.children,n),e.child;case 12:return wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Ye(Sm,r._currentValue),r._currentValue=a,o!==null)if(Dr(o.value,a)){if(o.children===i.children&&!Nn.current){e=Ri(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=xi(-1,n&-n),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),ow(o.return,n,e),s.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Z(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),ow(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}wn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Au(e,n),i=dr(i),r=r(i),e.flags|=1,wn(t,e,r,n),e.child;case 14:return r=e.type,i=br(r,e.pendingProps),i=br(r.type,i),GA(t,e,r,i,n);case 15:return H2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:br(r,i),Gp(t,e),e.tag=1,Dn(r)?(t=!0,Em(e)):t=!1,Au(e,n),z2(e,r,i),sw(e,r,i,n),cw(null,e,r,!0,t,n);case 19:return X2(t,e,n);case 22:return G2(t,e,n)}throw Error(Z(156,e.tag))};function dD(t,e){return FN(t,e)}function V6(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(t,e,n,r){return new V6(t,e,n,r)}function IE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function L6(t){if(typeof t=="function")return IE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===H1)return 11;if(t===G1)return 14}return 2}function Lo(t,e){var n=t.alternate;return n===null?(n=ur(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yp(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")IE(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case su:return Xa(n.children,i,o,e);case W1:a=8,i|=8;break;case k0:return t=ur(12,n,e,i|2),t.elementType=k0,t.lanes=o,t;case R0:return t=ur(13,n,e,i),t.elementType=R0,t.lanes=o,t;case N0:return t=ur(19,n,e,i),t.elementType=N0,t.lanes=o,t;case xN:return Ay(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bN:a=10;break e;case EN:a=9;break e;case H1:a=11;break e;case G1:a=14;break e;case fo:a=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=ur(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Xa(t,e,n,r){return t=ur(7,t,r,e),t.lanes=n,t}function Ay(t,e,n,r){return t=ur(22,t,r,e),t.elementType=xN,t.lanes=n,t.stateNode={isHidden:!1},t}function M_(t,e,n){return t=ur(6,t,null,e),t.lanes=n,t}function $_(t,e,n){return e=ur(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function F6(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=y_(0),this.expirationTimes=y_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=y_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function PE(t,e,n,r,i,o,a,s,u){return t=new F6(t,e,n,s,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ur(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fE(o),t}function B6(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:au,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pD(t){if(!t)return Ko;t=t._reactInternals;e:{if(Is(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(Dn(n))return p2(t,n,e)}return e}function mD(t,e,n,r,i,o,a,s,u){return t=PE(n,r,!0,t,i,o,a,s,u),t.context=pD(null),n=t.current,r=En(),i=Vo(n),o=xi(r,i),o.callback=e??null,Mo(n,o,i),t.current.lanes=i,ld(t,i,r),jn(t,r),t}function Iy(t,e,n,r){var i=e.current,o=En(),a=Vo(i);return n=pD(n),e.context===null?e.context=n:e.pendingContext=n,e=xi(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mo(i,e,a),t!==null&&(kr(t,i,a,o),qp(t,i,a)),a}function jm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function oI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function OE(t,e){oI(t,e),(t=t.alternate)&&oI(t,e)}function U6(){return null}var gD=typeof reportError=="function"?reportError:function(t){console.error(t)};function CE(t){this._internalRoot=t}Py.prototype.render=CE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));Iy(t,e,null,null)};Py.prototype.unmount=CE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ls(function(){Iy(null,t,null,null)}),e[Ci]=null}};function Py(t){this._internalRoot=t}Py.prototype.unstable_scheduleHydration=function(t){if(t){var e=GN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<go.length&&e!==0&&e<go[n].priority;n++);go.splice(n,0,t),n===0&&QN(t)}};function kE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function aI(){}function z6(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=jm(a);o.call(l)}}var a=mD(e,r,t,0,null,!1,!1,"",aI);return t._reactRootContainer=a,t[Ci]=a.current,th(t.nodeType===8?t.parentNode:t),ls(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=jm(u);s.call(l)}}var u=PE(t,0,!1,null,null,!1,!1,"",aI);return t._reactRootContainer=u,t[Ci]=u.current,th(t.nodeType===8?t.parentNode:t),ls(function(){Iy(e,u,n,r)}),u}function Cy(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var u=jm(a);s.call(u)}}Iy(e,a,t,i)}else a=z6(n,e,t,i,r);return jm(a)}WN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=uf(e.pendingLanes);n!==0&&(Y1(e,n|1),jn(e,Et()),!(Re&6)&&(Wu=Et()+500,oa()))}break;case 13:ls(function(){var r=ki(t,1);if(r!==null){var i=En();kr(r,t,1,i)}}),OE(t,1)}};X1=function(t){if(t.tag===13){var e=ki(t,134217728);if(e!==null){var n=En();kr(e,t,134217728,n)}OE(t,134217728)}};HN=function(t){if(t.tag===13){var e=Vo(t),n=ki(t,e);if(n!==null){var r=En();kr(n,t,e,r)}OE(t,e)}};GN=function(){return Ve};KN=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};z0=function(t,e,n){switch(e){case"input":if(M0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wy(r);if(!i)throw Error(Z(90));SN(r),M0(r,i)}}}break;case"textarea":IN(t,n);break;case"select":e=n.value,e!=null&&Eu(t,!!n.multiple,e,!1)}};DN=TE;jN=ls;var q6={usingClientEntryPoint:!1,Events:[fd,fu,wy,RN,NN,TE]},Bc={findFiberByHostInstance:La,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},W6={bundleType:Bc.bundleType,version:Bc.version,rendererPackageName:Bc.rendererPackageName,rendererConfig:Bc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=VN(t),t===null?null:t.stateNode},findFiberByHostInstance:Bc.findFiberByHostInstance||U6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mp.isDisabled&&mp.supportsFiber)try{gy=mp.inject(W6),Xr=mp}catch{}}Zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q6;Zn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kE(e))throw Error(Z(200));return B6(t,e,null,n)};Zn.createRoot=function(t,e){if(!kE(t))throw Error(Z(299));var n=!1,r="",i=gD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=PE(t,1,!1,null,null,n,!1,r,i),t[Ci]=e.current,th(t.nodeType===8?t.parentNode:t),new CE(e)};Zn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=VN(e),t=t===null?null:t.stateNode,t};Zn.flushSync=function(t){return ls(t)};Zn.hydrate=function(t,e,n){if(!Oy(e))throw Error(Z(200));return Cy(null,t,e,!0,n)};Zn.hydrateRoot=function(t,e,n){if(!kE(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=gD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=mD(e,null,t,1,n??null,i,!1,o,a),t[Ci]=e.current,th(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Py(e)};Zn.render=function(t,e,n){if(!Oy(e))throw Error(Z(200));return Cy(null,t,e,!1,n)};Zn.unmountComponentAtNode=function(t){if(!Oy(t))throw Error(Z(40));return t._reactRootContainer?(ls(function(){Cy(null,null,t,!1,function(){t._reactRootContainer=null,t[Ci]=null})}),!0):!1};Zn.unstable_batchedUpdates=TE;Zn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Oy(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return Cy(t,e,n,!1,r)};Zn.version="18.3.1-next-f1338f8080-20240426";function yD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yD)}catch(t){console.error(t)}}yD(),yN.exports=Zn;var H6=yN.exports,vD,sI=H6;vD=sI.createRoot,sI.hydrateRoot;/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=t=>{const e=K6(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=W.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:a,...s},u)=>W.createElement("svg",{ref:u,...Q6,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:_D("lucide",i),...!o&&!Y6(s)&&{"aria-hidden":"true"},...s},[...a.map(([l,c])=>W.createElement(l,c)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(t,e)=>{const n=W.forwardRef(({className:r,...i},o)=>W.createElement(X6,{ref:o,iconNode:e,className:_D(`lucide-${G6(uI(t))}`,`lucide-${t}`,r),...i}));return n.displayName=uI(t),n};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Pu=ke("activity",J6);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],eU=ke("arrow-right",Z6);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],nU=ke("arrow-up-right",tU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Ew=ke("calculator",rU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],oU=ke("calendar",iU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],sU=ke("chart-column",aU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],lU=ke("chart-no-axes-column",uU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],fU=ke("chart-pie",cU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cf=ke("circle-alert",hU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],lr=ke("circle-check-big",dU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]],Mm=ke("clock",pU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Ja=ke("database",mU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],yU=ke("download",gU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=[["path",{d:"M10 16h.01",key:"1bzywj"}],["path",{d:"M2.212 11.577a2 2 0 0 0-.212.896V18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5.527a2 2 0 0 0-.212-.896L18.55 5.11A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"18tbho"}],["path",{d:"M21.946 12.013H2.054",key:"zqlbp7"}],["path",{d:"M6 16h.01",key:"1pmjb7"}]],_U=ke("hard-drive",vU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],bU=ke("house",wU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],V_=ke("loader-circle",EU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],TU=ke("lock",xU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],AU=ke("log-out",SU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],lI=ke("mail",IU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],OU=ke("menu",PU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kU=ke("plus",CU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],NU=ke("refresh-cw",RU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],jU=ke("rotate-ccw",DU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$U=ke("save",MU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],xw=ke("server",VU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],cI=ke("shield",LU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],fI=ke("target",FU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],UU=ke("trash-2",BU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],$m=ke("trending-up",zU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ti=ke("triangle-alert",qU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Pf=ke("users",WU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],GU=ke("wifi",HU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Tw=ke("x",KU);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],YU=ke("zap",QU),XU="modulepreload",JU=function(t){return"/"+t},hI={},Vm=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),s=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=JU(u),u in hI)return;hI[u]=!0;const l=u.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${c}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":XU,l||(f.as="script"),f.crossOrigin="",f.href=u,s&&f.setAttribute("nonce",s),document.head.appendChild(f),l)return new Promise((d,p)=>{f.addEventListener("load",d),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return i.then(a=>{for(const s of a||[])s.status==="rejected"&&o(s.reason);return e().catch(o)})},tu={version:"1.0.1",part1:{intercept:-3.8347,variables:[{id:"age",name:"Age",weight:.0454,type:"continuous",min:18,max:120,unit:"years",description:"Age in years"},{id:"raceBlack",name:"Race (Black/African American)",weight:-.0253,type:"binary",description:"Black race (1 if Black, 0 otherwise)",clinicalNote:"Black men have 1.6-1.8x higher risk"},{id:"bmi",name:"BMI",weight:.0195,type:"continuous",min:15,max:60,unit:"kg/m",description:"Body Mass Index"},{id:"ipssTotal",name:"IPSS Total Score",weight:-.0292,type:"continuous",min:0,max:35,unit:"points",description:"International Prostate Symptom Score",clinicalNote:"Higher symptoms may indicate BPH, not necessarily cancer"},{id:"exerciseCode",name:"Exercise Level",weight:-.5947,type:"ordinal",options:[{value:0,label:"Regular (3+ days/week)"},{value:1,label:"Some (1-2 days/week)"},{value:2,label:"None"}],description:"Exercise frequency (protective factor)"},{id:"fhBinary",name:"Family History",weight:-.8911,type:"binary",description:"Family history of prostate cancer (1 if yes, 0 if no)",clinicalNote:"Strong risk factor - 2-3x increased risk"},{id:"shimTotal",name:"SHIM Total Score",weight:-.0358,type:"continuous",min:0,max:25,unit:"points",description:"Sexual Health Inventory for Men",clinicalNote:"Lower scores may indicate hormonal issues"}],riskCutoffs:{lower:{threshold:.08,label:"Below 8%",color:"#27AE60"},moderate:{threshold:.2,label:"8%  20%",color:"#D4AF37"},higher:{threshold:1,label:"Above 20%",color:"#C0392B"}}},part2:{baselineCarryPoints:15,preScoreToPoints:{ranges:[{max:21,multiplier:40,divisor:21},{max:31,base:40,multiplier:40,divisor:10},{max:41,base:80,multiplier:40,divisor:10},{max:100,base:120,multiplier:80,divisor:59}]},psaPoints:[{max:1,points:0},{max:2.5,points:5},{max:4,points:10},{max:10,points:20},{max:1/0,points:40}],piradsPoints:[{value:2,points:0},{value:3,points:10}],piradsOverrides:{4:{riskPct:"52% (4361%)",riskCat:" Very High-Risk",riskClass:"very-high-risk"},5:{riskPct:"89% (7697%)",riskCat:" Very High-Risk",riskClass:"very-high-risk"}},riskCategories:[{maxPoints:40,riskPct:"010%",riskCat:" Low",riskClass:"low-risk"},{maxPoints:80,riskPct:"1020%",riskCat:" Moderate",riskClass:"moderate-risk"},{maxPoints:120,riskPct:"2040%",riskCat:" High",riskClass:"high-risk"},{maxPoints:1/0,riskPct:"4070%",riskCat:" Very High",riskClass:"very-high-risk"}]},validation:{minAge:18,maxAge:120,minBMI:15,maxBMI:60,minPSA:0,maxPSA:1e3}},dI={conservative:{name:"Conservative Model",description:"Lower weights for screening hesitancy",part1:{intercept:-4.5,variables:[{id:"age",weight:.04},{id:"raceBlack",weight:.02},{id:"bmi",weight:.015},{id:"ipssTotal",weight:.02},{id:"exerciseCode",weight:.5},{id:"fhBinary",weight:.7},{id:"shimTotal",weight:.03}]}},aggressive:{name:"Aggressive Detection Model",description:"Higher sensitivity for early detection",part1:{intercept:-3.2,variables:[{id:"age",weight:.05},{id:"raceBlack",weight:.035},{id:"bmi",weight:.025},{id:"ipssTotal",weight:.035},{id:"exerciseCode",weight:.65},{id:"fhBinary",weight:1},{id:"shimTotal",weight:.04}]}}},Ta={minWeight:-2,maxWeight:2,stepSize:.001,recommendedVariables:[{id:"age",recommendedRange:[.03,.06]},{id:"raceBlack",recommendedRange:[.02,.05]},{id:"bmi",recommendedRange:[.01,.03]},{id:"ipssTotal",recommendedRange:[-.05,.05]},{id:"exerciseCode",recommendedRange:[.4,.8]},{id:"fhBinary",recommendedRange:[.6,1.2]},{id:"shimTotal",recommendedRange:[.02,.05]}]},ZU=()=>{};var pI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ez=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],a=t[n++],s=t[n++],u=((i&7)<<18|(o&63)<<12|(a&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},bD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=o>>2,f=(o&3)<<4|s>>4;let d=(s&15)<<2|l>>6,p=l&63;u||(p=64,a||(d=64)),r.push(n[c],n[f],n[d],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ez(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||s==null||l==null||f==null)throw new tz;const d=o<<2|s>>4;if(r.push(d),l!==64){const p=s<<4&240|l>>2;if(r.push(p),f!==64){const _=l<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nz=function(t){const e=wD(t);return bD.encodeByteArray(e,!0)},Lm=function(t){return nz(t).replace(/\./g,"")},ED=function(t){try{return bD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz=()=>xD().__FIREBASE_DEFAULTS__,iz=()=>{if(typeof process>"u"||typeof pI>"u")return;const t=pI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ED(t[1]);return e&&JSON.parse(e)},ky=()=>{try{return ZU()||rz()||iz()||oz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},TD=t=>{var e,n;return(n=(e=ky())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},az=t=>{const e=TD(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},SD=()=>{var t;return(t=ky())==null?void 0:t.config},AD=t=>{var e;return(e=ky())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function RE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uz(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Lm(JSON.stringify(n)),Lm(JSON.stringify(a)),""].join(".")}const Of={};function lz(){const t={prod:[],emulator:[]};for(const e of Object.keys(Of))Of[e]?t.emulator.push(e):t.prod.push(e);return t}function cz(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let mI=!1;function ID(t,e){if(typeof window>"u"||typeof document>"u"||!Ps(window.location.host)||Of[t]===e||Of[t]||mI)return;Of[t]=e;function n(d){return`__firebase__banner__${d}`}const r="__firebase__banner",o=lz().prod.length>0;function a(){const d=document.getElementById(r);d&&d.remove()}function s(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function u(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function l(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{mI=!0,a()},d}function c(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function f(){const d=cz(r),p=n("text"),_=document.getElementById(p)||document.createElement("span"),y=n("learnmore"),b=document.getElementById(y)||document.createElement("a"),v=n("preprendIcon"),g=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const E=d.element;s(E),c(b,y);const P=l();u(g,v),E.append(g,_,b,P),document.body.appendChild(E)}o?(_.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function PD(){var e;const t=(e=ky())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hz(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dz(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mz(){const t=$t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OD(){return!PD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CD(){return!PD()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function kD(){try{return typeof indexedDB=="object"}catch{return!1}}function gz(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz="FirebaseError";class zi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=yz,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dd.prototype.create)}}class dd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?vz(o,r):"Error",s=`${this.serviceName}: ${a} (${i}).`;return new zi(i,s,r)}}function vz(t,e){return t.replace(_z,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const _z=/\{\$([^}]+)}/g;function wz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],a=e[i];if(gI(o)&&gI(a)){if(!jr(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function gI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ff(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function hf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bz(t,e){const n=new Ez(t,e);return n.subscribe.bind(n)}class Ez{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xz(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=L_),i.error===void 0&&(i.error=L_),i.complete===void 0&&(i.complete=L_);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function L_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class cs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sz;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Az(e))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oa){return this.instances.has(e)}getOptions(e=Oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(o);r===s&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Sz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oa){return this.component?this.component.multipleInstances?e:Oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sz(t){return t===Oa?void 0:t}function Az(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Tz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const Pz={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},Oz=Ie.INFO,Cz={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},kz=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Cz[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class NE{constructor(e){this.name=e,this._logLevel=Oz,this._logHandler=kz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Pz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const Rz=(t,e)=>e.some(n=>t instanceof n);let yI,vI;function Nz(){return yI||(yI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dz(){return vI||(vI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RD=new WeakMap,Sw=new WeakMap,ND=new WeakMap,F_=new WeakMap,DE=new WeakMap;function jz(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Fo(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&RD.set(n,t)}).catch(()=>{}),DE.set(e,t),e}function Mz(t){if(Sw.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Sw.set(t,e)}let Aw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ND.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $z(t){Aw=t(Aw)}function Vz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(B_(this),e,...n);return ND.set(r,e.sort?e.sort():[e]),Fo(r)}:Dz().includes(t)?function(...e){return t.apply(B_(this),e),Fo(RD.get(this))}:function(...e){return Fo(t.apply(B_(this),e))}}function Lz(t){return typeof t=="function"?Vz(t):(t instanceof IDBTransaction&&Mz(t),Rz(t,Nz())?new Proxy(t,Aw):t)}function Fo(t){if(t instanceof IDBRequest)return jz(t);if(F_.has(t))return F_.get(t);const e=Lz(t);return e!==t&&(F_.set(t,e),DE.set(e,t)),e}const B_=t=>DE.get(t);function Fz(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),s=Fo(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Fo(a.result),u.oldVersion,u.newVersion,Fo(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),s.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),s}const Bz=["get","getKey","getAll","getAllKeys","count"],Uz=["put","add","delete","clear"],U_=new Map;function _I(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(U_.get(e))return U_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Uz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Bz.includes(n)))return;const o=async function(a,...s){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(s.shift())),(await Promise.all([l[n](...s),i&&u.done]))[0]};return U_.set(e,o),o}$z(t=>({...t,get:(e,n,r)=>_I(e,n)||t.get(e,n,r),has:(e,n)=>!!_I(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qz(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Iw="@firebase/app",wI="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new NE("@firebase/app"),Wz="@firebase/app-compat",Hz="@firebase/analytics-compat",Gz="@firebase/analytics",Kz="@firebase/app-check-compat",Qz="@firebase/app-check",Yz="@firebase/auth",Xz="@firebase/auth-compat",Jz="@firebase/database",Zz="@firebase/data-connect",e5="@firebase/database-compat",t5="@firebase/functions",n5="@firebase/functions-compat",r5="@firebase/installations",i5="@firebase/installations-compat",o5="@firebase/messaging",a5="@firebase/messaging-compat",s5="@firebase/performance",u5="@firebase/performance-compat",l5="@firebase/remote-config",c5="@firebase/remote-config-compat",f5="@firebase/storage",h5="@firebase/storage-compat",d5="@firebase/firestore",p5="@firebase/ai",m5="@firebase/firestore-compat",g5="firebase",y5="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="[DEFAULT]",v5={[Iw]:"fire-core",[Wz]:"fire-core-compat",[Gz]:"fire-analytics",[Hz]:"fire-analytics-compat",[Qz]:"fire-app-check",[Kz]:"fire-app-check-compat",[Yz]:"fire-auth",[Xz]:"fire-auth-compat",[Jz]:"fire-rtdb",[Zz]:"fire-data-connect",[e5]:"fire-rtdb-compat",[t5]:"fire-fn",[n5]:"fire-fn-compat",[r5]:"fire-iid",[i5]:"fire-iid-compat",[o5]:"fire-fcm",[a5]:"fire-fcm-compat",[s5]:"fire-perf",[u5]:"fire-perf-compat",[l5]:"fire-rc",[c5]:"fire-rc-compat",[f5]:"fire-gcs",[h5]:"fire-gcs-compat",[d5]:"fire-fst",[m5]:"fire-fst-compat",[p5]:"fire-vertex","fire-js":"fire-js",[g5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new Map,_5=new Map,Pw=new Map;function bI(t,e){try{t.container.addComponent(e)}catch(n){Ni.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Hu(t){const e=t.name;if(Pw.has(e))return Ni.debug(`There were multiple attempts to register component ${e}.`),!1;Pw.set(e,t);for(const n of Bm.values())bI(n,t);for(const n of _5.values())bI(n,t);return!0}function md(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function w5(t,e,n=Fm){md(t,e).clearInstance(n)}function Ar(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bo=new dd("app","Firebase",b5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=y5;function DD(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Fm,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Bo.create("bad-app-name",{appName:String(i)});if(n||(n=SD()),!n)throw Bo.create("no-options");const o=Bm.get(i);if(o){if(jr(n,o.options)&&jr(r,o.config))return o;throw Bo.create("duplicate-app",{appName:i})}const a=new Iz(i);for(const u of Pw.values())a.addComponent(u);const s=new E5(n,r,a);return Bm.set(i,s),s}function jD(t=Fm){const e=Bm.get(t);if(!e&&t===Fm&&SD())return DD();if(!e)throw Bo.create("no-app",{appName:t});return e}function Uo(t,e,n){let r=v5[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ni.warn(a.join(" "));return}Hu(new cs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5="firebase-heartbeat-database",T5=1,ch="firebase-heartbeat-store";let z_=null;function MD(){return z_||(z_=Fz(x5,T5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ch)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bo.create("idb-open",{originalErrorMessage:t.message})})),z_}async function S5(t){try{const n=(await MD()).transaction(ch),r=await n.objectStore(ch).get($D(t));return await n.done,r}catch(e){if(e instanceof zi)Ni.warn(e.message);else{const n=Bo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ni.warn(n.message)}}}async function EI(t,e){try{const r=(await MD()).transaction(ch,"readwrite");await r.objectStore(ch).put(e,$D(t)),await r.done}catch(n){if(n instanceof zi)Ni.warn(n.message);else{const r=Bo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ni.warn(r.message)}}}function $D(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=1024,I5=30;class P5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new C5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=xI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>I5){const a=k5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ni.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xI(),{heartbeatsToSend:r,unsentEntries:i}=O5(this._heartbeatsCache.heartbeats),o=Lm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ni.warn(n),""}}}function xI(){return new Date().toISOString().substring(0,10)}function O5(t,e=A5){const n=[];let r=t.slice();for(const i of t){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),TI(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),TI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class C5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kD()?gz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await S5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return EI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return EI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function TI(t){return Lm(JSON.stringify({version:2,heartbeats:t})).length}function k5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(t){Hu(new cs("platform-logger",e=>new zz(e),"PRIVATE")),Hu(new cs("heartbeat",e=>new P5(e),"PRIVATE")),Uo(Iw,wI,t),Uo(Iw,wI,"esm2020"),Uo("fire-js","")}R5("");var N5="firebase",D5="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uo(N5,D5,"app");var SI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zo,VD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function O(){}O.prototype=S.prototype,x.F=S.prototype,x.prototype=new O,x.prototype.constructor=x,x.D=function(C,k,N){for(var R=Array(arguments.length-2),j=2;j<arguments.length;j++)R[j-2]=arguments[j];return S.prototype[k].apply(C,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,S,O){O||(O=0);const C=Array(16);if(typeof S=="string")for(var k=0;k<16;++k)C[k]=S.charCodeAt(O++)|S.charCodeAt(O++)<<8|S.charCodeAt(O++)<<16|S.charCodeAt(O++)<<24;else for(k=0;k<16;++k)C[k]=S[O++]|S[O++]<<8|S[O++]<<16|S[O++]<<24;S=x.g[0],O=x.g[1],k=x.g[2];let N=x.g[3],R;R=S+(N^O&(k^N))+C[0]+3614090360&4294967295,S=O+(R<<7&4294967295|R>>>25),R=N+(k^S&(O^k))+C[1]+3905402710&4294967295,N=S+(R<<12&4294967295|R>>>20),R=k+(O^N&(S^O))+C[2]+606105819&4294967295,k=N+(R<<17&4294967295|R>>>15),R=O+(S^k&(N^S))+C[3]+3250441966&4294967295,O=k+(R<<22&4294967295|R>>>10),R=S+(N^O&(k^N))+C[4]+4118548399&4294967295,S=O+(R<<7&4294967295|R>>>25),R=N+(k^S&(O^k))+C[5]+1200080426&4294967295,N=S+(R<<12&4294967295|R>>>20),R=k+(O^N&(S^O))+C[6]+2821735955&4294967295,k=N+(R<<17&4294967295|R>>>15),R=O+(S^k&(N^S))+C[7]+4249261313&4294967295,O=k+(R<<22&4294967295|R>>>10),R=S+(N^O&(k^N))+C[8]+1770035416&4294967295,S=O+(R<<7&4294967295|R>>>25),R=N+(k^S&(O^k))+C[9]+2336552879&4294967295,N=S+(R<<12&4294967295|R>>>20),R=k+(O^N&(S^O))+C[10]+4294925233&4294967295,k=N+(R<<17&4294967295|R>>>15),R=O+(S^k&(N^S))+C[11]+2304563134&4294967295,O=k+(R<<22&4294967295|R>>>10),R=S+(N^O&(k^N))+C[12]+1804603682&4294967295,S=O+(R<<7&4294967295|R>>>25),R=N+(k^S&(O^k))+C[13]+4254626195&4294967295,N=S+(R<<12&4294967295|R>>>20),R=k+(O^N&(S^O))+C[14]+2792965006&4294967295,k=N+(R<<17&4294967295|R>>>15),R=O+(S^k&(N^S))+C[15]+1236535329&4294967295,O=k+(R<<22&4294967295|R>>>10),R=S+(k^N&(O^k))+C[1]+4129170786&4294967295,S=O+(R<<5&4294967295|R>>>27),R=N+(O^k&(S^O))+C[6]+3225465664&4294967295,N=S+(R<<9&4294967295|R>>>23),R=k+(S^O&(N^S))+C[11]+643717713&4294967295,k=N+(R<<14&4294967295|R>>>18),R=O+(N^S&(k^N))+C[0]+3921069994&4294967295,O=k+(R<<20&4294967295|R>>>12),R=S+(k^N&(O^k))+C[5]+3593408605&4294967295,S=O+(R<<5&4294967295|R>>>27),R=N+(O^k&(S^O))+C[10]+38016083&4294967295,N=S+(R<<9&4294967295|R>>>23),R=k+(S^O&(N^S))+C[15]+3634488961&4294967295,k=N+(R<<14&4294967295|R>>>18),R=O+(N^S&(k^N))+C[4]+3889429448&4294967295,O=k+(R<<20&4294967295|R>>>12),R=S+(k^N&(O^k))+C[9]+568446438&4294967295,S=O+(R<<5&4294967295|R>>>27),R=N+(O^k&(S^O))+C[14]+3275163606&4294967295,N=S+(R<<9&4294967295|R>>>23),R=k+(S^O&(N^S))+C[3]+4107603335&4294967295,k=N+(R<<14&4294967295|R>>>18),R=O+(N^S&(k^N))+C[8]+1163531501&4294967295,O=k+(R<<20&4294967295|R>>>12),R=S+(k^N&(O^k))+C[13]+2850285829&4294967295,S=O+(R<<5&4294967295|R>>>27),R=N+(O^k&(S^O))+C[2]+4243563512&4294967295,N=S+(R<<9&4294967295|R>>>23),R=k+(S^O&(N^S))+C[7]+1735328473&4294967295,k=N+(R<<14&4294967295|R>>>18),R=O+(N^S&(k^N))+C[12]+2368359562&4294967295,O=k+(R<<20&4294967295|R>>>12),R=S+(O^k^N)+C[5]+4294588738&4294967295,S=O+(R<<4&4294967295|R>>>28),R=N+(S^O^k)+C[8]+2272392833&4294967295,N=S+(R<<11&4294967295|R>>>21),R=k+(N^S^O)+C[11]+1839030562&4294967295,k=N+(R<<16&4294967295|R>>>16),R=O+(k^N^S)+C[14]+4259657740&4294967295,O=k+(R<<23&4294967295|R>>>9),R=S+(O^k^N)+C[1]+2763975236&4294967295,S=O+(R<<4&4294967295|R>>>28),R=N+(S^O^k)+C[4]+1272893353&4294967295,N=S+(R<<11&4294967295|R>>>21),R=k+(N^S^O)+C[7]+4139469664&4294967295,k=N+(R<<16&4294967295|R>>>16),R=O+(k^N^S)+C[10]+3200236656&4294967295,O=k+(R<<23&4294967295|R>>>9),R=S+(O^k^N)+C[13]+681279174&4294967295,S=O+(R<<4&4294967295|R>>>28),R=N+(S^O^k)+C[0]+3936430074&4294967295,N=S+(R<<11&4294967295|R>>>21),R=k+(N^S^O)+C[3]+3572445317&4294967295,k=N+(R<<16&4294967295|R>>>16),R=O+(k^N^S)+C[6]+76029189&4294967295,O=k+(R<<23&4294967295|R>>>9),R=S+(O^k^N)+C[9]+3654602809&4294967295,S=O+(R<<4&4294967295|R>>>28),R=N+(S^O^k)+C[12]+3873151461&4294967295,N=S+(R<<11&4294967295|R>>>21),R=k+(N^S^O)+C[15]+530742520&4294967295,k=N+(R<<16&4294967295|R>>>16),R=O+(k^N^S)+C[2]+3299628645&4294967295,O=k+(R<<23&4294967295|R>>>9),R=S+(k^(O|~N))+C[0]+4096336452&4294967295,S=O+(R<<6&4294967295|R>>>26),R=N+(O^(S|~k))+C[7]+1126891415&4294967295,N=S+(R<<10&4294967295|R>>>22),R=k+(S^(N|~O))+C[14]+2878612391&4294967295,k=N+(R<<15&4294967295|R>>>17),R=O+(N^(k|~S))+C[5]+4237533241&4294967295,O=k+(R<<21&4294967295|R>>>11),R=S+(k^(O|~N))+C[12]+1700485571&4294967295,S=O+(R<<6&4294967295|R>>>26),R=N+(O^(S|~k))+C[3]+2399980690&4294967295,N=S+(R<<10&4294967295|R>>>22),R=k+(S^(N|~O))+C[10]+4293915773&4294967295,k=N+(R<<15&4294967295|R>>>17),R=O+(N^(k|~S))+C[1]+2240044497&4294967295,O=k+(R<<21&4294967295|R>>>11),R=S+(k^(O|~N))+C[8]+1873313359&4294967295,S=O+(R<<6&4294967295|R>>>26),R=N+(O^(S|~k))+C[15]+4264355552&4294967295,N=S+(R<<10&4294967295|R>>>22),R=k+(S^(N|~O))+C[6]+2734768916&4294967295,k=N+(R<<15&4294967295|R>>>17),R=O+(N^(k|~S))+C[13]+1309151649&4294967295,O=k+(R<<21&4294967295|R>>>11),R=S+(k^(O|~N))+C[4]+4149444226&4294967295,S=O+(R<<6&4294967295|R>>>26),R=N+(O^(S|~k))+C[11]+3174756917&4294967295,N=S+(R<<10&4294967295|R>>>22),R=k+(S^(N|~O))+C[2]+718787259&4294967295,k=N+(R<<15&4294967295|R>>>17),R=O+(N^(k|~S))+C[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+N&4294967295}r.prototype.v=function(x,S){S===void 0&&(S=x.length);const O=S-this.blockSize,C=this.C;let k=this.h,N=0;for(;N<S;){if(k==0)for(;N<=O;)i(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<S;)if(C[k++]=x.charCodeAt(N++),k==this.blockSize){i(this,C),k=0;break}}else for(;N<S;)if(C[k++]=x[N++],k==this.blockSize){i(this,C),k=0;break}}this.h=k,this.o+=S},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;S=this.o*8;for(var O=x.length-8;O<x.length;++O)x[O]=S&255,S/=256;for(this.v(x),x=Array(16),S=0,O=0;O<4;++O)for(let C=0;C<32;C+=8)x[S++]=this.g[O]>>>C&255;return x};function o(x,S){var O=s;return Object.prototype.hasOwnProperty.call(O,x)?O[x]:O[x]=S(x)}function a(x,S){this.h=S;const O=[];let C=!0;for(let k=x.length-1;k>=0;k--){const N=x[k]|0;C&&N==S||(O[k]=N,C=!1)}this.g=O}var s={};function u(x){return-128<=x&&x<128?o(x,function(S){return new a([S|0],S<0?-1:0)}):new a([x|0],x<0?-1:0)}function l(x){if(isNaN(x)||!isFinite(x))return f;if(x<0)return b(l(-x));const S=[];let O=1;for(let C=0;x>=O;C++)S[C]=x/O|0,O*=4294967296;return new a(S,0)}function c(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return b(c(x.substring(1),S));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=l(Math.pow(S,8));let C=f;for(let N=0;N<x.length;N+=8){var k=Math.min(8,x.length-N);const R=parseInt(x.substring(N,N+k),S);k<8?(k=l(Math.pow(S,k)),C=C.j(k).add(l(R))):(C=C.j(O),C=C.add(l(R)))}return C}var f=u(0),d=u(1),p=u(16777216);t=a.prototype,t.m=function(){if(y(this))return-b(this).m();let x=0,S=1;for(let O=0;O<this.g.length;O++){const C=this.i(O);x+=(C>=0?C:4294967296+C)*S,S*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(_(this))return"0";if(y(this))return"-"+b(this).toString(x);const S=l(Math.pow(x,6));var O=this;let C="";for(;;){const k=P(O,S).g;O=v(O,k.j(S));let N=((O.g.length>0?O.g[0]:O.h)>>>0).toString(x);if(O=k,_(O))return N+C;for(;N.length<6;)N="0"+N;C=N+C}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function _(x){if(x.h!=0)return!1;for(let S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function y(x){return x.h==-1}t.l=function(x){return x=v(this,x),y(x)?-1:_(x)?0:1};function b(x){const S=x.g.length,O=[];for(let C=0;C<S;C++)O[C]=~x.g[C];return new a(O,~x.h).add(d)}t.abs=function(){return y(this)?b(this):this},t.add=function(x){const S=Math.max(this.g.length,x.g.length),O=[];let C=0;for(let k=0;k<=S;k++){let N=C+(this.i(k)&65535)+(x.i(k)&65535),R=(N>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);C=R>>>16,N&=65535,R&=65535,O[k]=R<<16|N}return new a(O,O[O.length-1]&-2147483648?-1:0)};function v(x,S){return x.add(b(S))}t.j=function(x){if(_(this)||_(x))return f;if(y(this))return y(x)?b(this).j(b(x)):b(b(this).j(x));if(y(x))return b(this.j(b(x)));if(this.l(p)<0&&x.l(p)<0)return l(this.m()*x.m());const S=this.g.length+x.g.length,O=[];for(var C=0;C<2*S;C++)O[C]=0;for(C=0;C<this.g.length;C++)for(let k=0;k<x.g.length;k++){const N=this.i(C)>>>16,R=this.i(C)&65535,j=x.i(k)>>>16,M=x.i(k)&65535;O[2*C+2*k]+=R*M,g(O,2*C+2*k),O[2*C+2*k+1]+=N*M,g(O,2*C+2*k+1),O[2*C+2*k+1]+=R*j,g(O,2*C+2*k+1),O[2*C+2*k+2]+=N*j,g(O,2*C+2*k+2)}for(x=0;x<S;x++)O[x]=O[2*x+1]<<16|O[2*x];for(x=S;x<2*S;x++)O[x]=0;return new a(O,0)};function g(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function E(x,S){this.g=x,this.h=S}function P(x,S){if(_(S))throw Error("division by zero");if(_(x))return new E(f,f);if(y(x))return S=P(b(x),S),new E(b(S.g),b(S.h));if(y(S))return S=P(x,b(S)),new E(b(S.g),S.h);if(x.g.length>30){if(y(x)||y(S))throw Error("slowDivide_ only works with positive integers.");for(var O=d,C=S;C.l(x)<=0;)O=T(O),C=T(C);var k=A(O,1),N=A(C,1);for(C=A(C,2),O=A(O,2);!_(C);){var R=N.add(C);R.l(x)<=0&&(k=k.add(O),N=R),C=A(C,1),O=A(O,1)}return S=v(x,k.j(S)),new E(k,S)}for(k=f;x.l(S)>=0;){for(O=Math.max(1,Math.floor(x.m()/S.m())),C=Math.ceil(Math.log(O)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),N=l(O),R=N.j(S);y(R)||R.l(x)>0;)O-=C,N=l(O),R=N.j(S);_(N)&&(N=d),k=k.add(N),x=v(x,R)}return new E(k,x)}t.B=function(x){return P(this,x).h},t.and=function(x){const S=Math.max(this.g.length,x.g.length),O=[];for(let C=0;C<S;C++)O[C]=this.i(C)&x.i(C);return new a(O,this.h&x.h)},t.or=function(x){const S=Math.max(this.g.length,x.g.length),O=[];for(let C=0;C<S;C++)O[C]=this.i(C)|x.i(C);return new a(O,this.h|x.h)},t.xor=function(x){const S=Math.max(this.g.length,x.g.length),O=[];for(let C=0;C<S;C++)O[C]=this.i(C)^x.i(C);return new a(O,this.h^x.h)};function T(x){const S=x.g.length+1,O=[];for(let C=0;C<S;C++)O[C]=x.i(C)<<1|x.i(C-1)>>>31;return new a(O,x.h)}function A(x,S){const O=S>>5;S%=32;const C=x.g.length-O,k=[];for(let N=0;N<C;N++)k[N]=S>0?x.i(N+O)>>>S|x.i(N+O+1)<<32-S:x.i(N+O);return new a(k,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,VD=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=l,a.fromString=c,zo=a}).apply(typeof SI<"u"?SI:typeof self<"u"?self:typeof window<"u"?window:{});var gp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LD,df,FD,Xp,Ow,BD,UD,zD;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof gp=="object"&&gp];for(var w=0;w<h.length;++w){var I=h[w];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(h,w){if(w)e:{var I=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var U=h[D];if(!(U in I))break e;I=I[U]}h=h[h.length-1],D=I[h],w=w(D),w!=D&&w!=null&&e(I,h,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(w){var I=[],D;for(D in w)Object.prototype.hasOwnProperty.call(w,D)&&I.push([D,w[D]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function s(h){var w=typeof h;return w=="object"&&h!=null||w=="function"}function u(h,w,I){return h.call.apply(h.bind,arguments)}function l(h,w,I){return l=u,l.apply(null,arguments)}function c(h,w){var I=Array.prototype.slice.call(arguments,1);return function(){var D=I.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function f(h,w){function I(){}I.prototype=w.prototype,h.Z=w.prototype,h.prototype=new I,h.prototype.constructor=h,h.Ob=function(D,U,q){for(var re=Array(arguments.length-2),we=2;we<arguments.length;we++)re[we-2]=arguments[we];return w.prototype[U].apply(D,re)}}var d=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function p(h){const w=h.length;if(w>0){const I=Array(w);for(let D=0;D<w;D++)I[D]=h[D];return I}return[]}function _(h,w){for(let D=1;D<arguments.length;D++){const U=arguments[D];var I=typeof U;if(I=I!="object"?I:U?Array.isArray(U)?"array":I:"null",I=="array"||I=="object"&&typeof U.length=="number"){I=h.length||0;const q=U.length||0;h.length=I+q;for(let re=0;re<q;re++)h[I+re]=U[re]}else h.push(U)}}class y{constructor(w,I){this.i=w,this.j=I,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function b(h){a.setTimeout(()=>{throw h},0)}function v(){var h=x;let w=null;return h.g&&(w=h.g,h.g=h.g.next,h.g||(h.h=null),w.next=null),w}class g{constructor(){this.h=this.g=null}add(w,I){const D=E.get();D.set(w,I),this.h?this.h.next=D:this.g=D,this.h=D}}var E=new y(()=>new P,h=>h.reset());class P{constructor(){this.next=this.g=this.h=null}set(w,I){this.h=w,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let T,A=!1,x=new g,S=()=>{const h=Promise.resolve(void 0);T=()=>{h.then(O)}};function O(){for(var h;h=v();){try{h.h.call(h.g)}catch(I){b(I)}var w=E;w.j(h),w.h<100&&(w.h++,h.next=w.g,w.g=h)}A=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,w){this.type=h,this.g=this.target=w,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,w=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,w),a.removeEventListener("test",I,w)}catch{}return h}();function R(h){return/^[\s\xa0]*$/.test(h)}function j(h,w){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,w)}f(j,k),j.prototype.init=function(h,w){const I=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=w,w=h.relatedTarget,w||(I=="mouseover"?w=h.fromElement:I=="mouseout"&&(w=h.toElement)),this.relatedTarget=w,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&j.Z.h.call(this)},j.prototype.h=function(){j.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var M="closure_listenable_"+(Math.random()*1e6|0),F=0;function L(h,w,I,D,U){this.listener=h,this.proxy=null,this.src=w,this.type=I,this.capture=!!D,this.ha=U,this.key=++F,this.da=this.fa=!1}function V(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function H(h,w,I){for(const D in h)w.call(I,h[D],D,h)}function Q(h,w){for(const I in h)w.call(void 0,h[I],I,h)}function ie(h){const w={};for(const I in h)w[I]=h[I];return w}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(h,w){let I,D;for(let U=1;U<arguments.length;U++){D=arguments[U];for(I in D)h[I]=D[I];for(let q=0;q<J.length;q++)I=J[q],Object.prototype.hasOwnProperty.call(D,I)&&(h[I]=D[I])}}function Ee(h){this.src=h,this.g={},this.h=0}Ee.prototype.add=function(h,w,I,D,U){const q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);const re=Ze(h,w,D,U);return re>-1?(w=h[re],I||(w.fa=!1)):(w=new L(w,this.src,q,!!D,U),w.fa=I,h.push(w)),w};function Be(h,w){const I=w.type;if(I in h.g){var D=h.g[I],U=Array.prototype.indexOf.call(D,w,void 0),q;(q=U>=0)&&Array.prototype.splice.call(D,U,1),q&&(V(w),h.g[I].length==0&&(delete h.g[I],h.h--))}}function Ze(h,w,I,D){for(let U=0;U<h.length;++U){const q=h[U];if(!q.da&&q.listener==w&&q.capture==!!I&&q.ha==D)return U}return-1}var an="closure_lm_"+(Math.random()*1e6|0),Bt={};function oe(h,w,I,D,U){if(Array.isArray(w)){for(let q=0;q<w.length;q++)oe(h,w[q],I,D,U);return null}return I=vr(I),h&&h[M]?h.J(w,I,s(D)?!!D.capture:!1,U):me(h,w,I,!1,D,U)}function me(h,w,I,D,U,q){if(!w)throw Error("Invalid event type");const re=s(U)?!!U.capture:!!U;let we=ht(h);if(we||(h[an]=we=new Ee(h)),I=we.add(w,I,D,re,q),I.proxy)return I;if(D=_e(),I.proxy=D,D.src=h,D.listener=I,h.addEventListener)N||(U=re),U===void 0&&(U=!1),h.addEventListener(w.toString(),D,U);else if(h.attachEvent)h.attachEvent(Ae(w.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return I}function _e(){function h(I){return w.call(h.src,h.listener,I)}const w=bt;return h}function X(h,w,I,D,U){if(Array.isArray(w))for(var q=0;q<w.length;q++)X(h,w[q],I,D,U);else D=s(D)?!!D.capture:!!D,I=vr(I),h&&h[M]?(h=h.i,q=String(w).toString(),q in h.g&&(w=h.g[q],I=Ze(w,I,D,U),I>-1&&(V(w[I]),Array.prototype.splice.call(w,I,1),w.length==0&&(delete h.g[q],h.h--)))):h&&(h=ht(h))&&(w=h.g[w.toString()],h=-1,w&&(h=Ze(w,I,D,U)),(I=h>-1?w[h]:null)&&Ke(I))}function Ke(h){if(typeof h!="number"&&h&&!h.da){var w=h.src;if(w&&w[M])Be(w.i,h);else{var I=h.type,D=h.proxy;w.removeEventListener?w.removeEventListener(I,D,h.capture):w.detachEvent?w.detachEvent(Ae(I),D):w.addListener&&w.removeListener&&w.removeListener(D),(I=ht(w))?(Be(I,h),I.h==0&&(I.src=null,w[an]=null)):V(h)}}}function Ae(h){return h in Bt?Bt[h]:Bt[h]="on"+h}function bt(h,w){if(h.da)h=!0;else{w=new j(w,this);const I=h.listener,D=h.ha||h.src;h.fa&&Ke(h),h=I.call(D,w)}return h}function ht(h){return h=h[an],h instanceof Ee?h:null}var Ut="__closure_events_fn_"+(Math.random()*1e9>>>0);function vr(h){return typeof h=="function"?h:(h[Ut]||(h[Ut]=function(w){return h.handleEvent(w)}),h[Ut])}function dt(){C.call(this),this.i=new Ee(this),this.M=this,this.G=null}f(dt,C),dt.prototype[M]=!0,dt.prototype.removeEventListener=function(h,w,I,D){X(this,h,w,I,D)};function St(h,w){var I,D=h.G;if(D)for(I=[];D;D=D.G)I.push(D);if(h=h.M,D=w.type||w,typeof w=="string")w=new k(w,h);else if(w instanceof k)w.target=w.target||h;else{var U=w;w=new k(D,h),fe(w,U)}U=!0;let q,re;if(I)for(re=I.length-1;re>=0;re--)q=w.g=I[re],U=tr(q,D,!0,w)&&U;if(q=w.g=h,U=tr(q,D,!0,w)&&U,U=tr(q,D,!1,w)&&U,I)for(re=0;re<I.length;re++)q=w.g=I[re],U=tr(q,D,!1,w)&&U}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var h=this.i;for(const w in h.g){const I=h.g[w];for(let D=0;D<I.length;D++)V(I[D]);delete h.g[w],h.h--}}this.G=null},dt.prototype.J=function(h,w,I,D){return this.i.add(String(h),w,!1,I,D)},dt.prototype.K=function(h,w,I,D){return this.i.add(String(h),w,!0,I,D)};function tr(h,w,I,D){if(w=h.i.g[String(w)],!w)return!0;w=w.concat();let U=!0;for(let q=0;q<w.length;++q){const re=w[q];if(re&&!re.da&&re.capture==I){const we=re.listener,kt=re.ha||re.src;re.fa&&Be(h.i,re),U=we.call(kt,D)!==!1&&U}}return U&&!D.defaultPrevented}function li(h,w){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=l(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:a.setTimeout(h,w||0)}function Bs(h){h.g=li(()=>{h.g=null,h.i&&(h.i=!1,Bs(h))},h.l);const w=h.h;h.h=null,h.m.apply(null,w)}class Fd extends C{constructor(w,I){super(),this.m=w,this.l=I,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Bs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ji(h){C.call(this),this.h=h,this.g={}}f(Ji,C);var aS=[];function sS(h){H(h.g,function(w,I){this.g.hasOwnProperty(I)&&Ke(w)},h),h.g={}}Ji.prototype.N=function(){Ji.Z.N.call(this),sS(this)},Ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qv=a.JSON.stringify,X4=a.JSON.parse,J4=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function uS(){}function lS(){}var _c={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yv(){k.call(this,"d")}f(Yv,k);function Xv(){k.call(this,"c")}f(Xv,k);var _a={},cS=null;function Bd(){return cS=cS||new dt}_a.Ia="serverreachability";function fS(h){k.call(this,_a.Ia,h)}f(fS,k);function wc(h){const w=Bd();St(w,new fS(w))}_a.STAT_EVENT="statevent";function hS(h,w){k.call(this,_a.STAT_EVENT,h),this.stat=w}f(hS,k);function _n(h){const w=Bd();St(w,new hS(w,h))}_a.Ja="timingevent";function dS(h,w){k.call(this,_a.Ja,h),this.size=w}f(dS,k);function bc(h,w){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},w)}function Ec(){this.g=!0}Ec.prototype.ua=function(){this.g=!1};function Z4(h,w,I,D,U,q){h.info(function(){if(h.g)if(q){var re="",we=q.split("&");for(let We=0;We<we.length;We++){var kt=we[We].split("=");if(kt.length>1){const zt=kt[0];kt=kt[1];const Lr=zt.split("_");re=Lr.length>=2&&Lr[1]=="type"?re+(zt+"="+kt+"&"):re+(zt+"=redacted&")}}}else re=null;else re=q;return"XMLHTTP REQ ("+D+") [attempt "+U+"]: "+w+`
`+I+`
`+re})}function e3(h,w,I,D,U,q,re){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+U+"]: "+w+`
`+I+`
`+q+" "+re})}function Us(h,w,I,D){h.info(function(){return"XMLHTTP TEXT ("+w+"): "+n3(h,I)+(D?" "+D:"")})}function t3(h,w){h.info(function(){return"TIMEOUT: "+w})}Ec.prototype.info=function(){};function n3(h,w){if(!h.g)return w;if(!w)return null;try{const q=JSON.parse(w);if(q){for(h=0;h<q.length;h++)if(Array.isArray(q[h])){var I=q[h];if(!(I.length<2)){var D=I[1];if(Array.isArray(D)&&!(D.length<1)){var U=D[0];if(U!="noop"&&U!="stop"&&U!="close")for(let re=1;re<D.length;re++)D[re]=""}}}}return Qv(q)}catch{return w}}var Ud={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pS={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mS;function Jv(){}f(Jv,uS),Jv.prototype.g=function(){return new XMLHttpRequest},mS=new Jv;function xc(h){return encodeURIComponent(String(h))}function r3(h){var w=1;h=h.split(":");const I=[];for(;w>0&&h.length;)I.push(h.shift()),w--;return h.length&&I.push(h.join(":")),I}function Zi(h,w,I,D){this.j=h,this.i=w,this.l=I,this.S=D||1,this.V=new Ji(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gS}function gS(){this.i=null,this.g="",this.h=!1}var yS={},Zv={};function e_(h,w,I){h.M=1,h.A=qd(Vr(w)),h.u=I,h.R=!0,vS(h,null)}function vS(h,w){h.F=Date.now(),zd(h),h.B=Vr(h.A);var I=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),kS(I.i,"t",D),h.C=0,I=h.j.L,h.h=new gS,h.g=QS(h.j,I?w:null,!h.u),h.P>0&&(h.O=new Fd(l(h.Y,h,h.g),h.P)),w=h.V,I=h.g,D=h.ba;var U="readystatechange";Array.isArray(U)||(U&&(aS[0]=U.toString()),U=aS);for(let q=0;q<U.length;q++){const re=oe(I,U[q],D||w.handleEvent,!1,w.h||w);if(!re)break;w.g[re.key]=re}w=h.J?ie(h.J):{},h.u?(h.v||(h.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,w)):(h.v="GET",h.g.ea(h.B,h.v,null,w)),wc(),Z4(h.i,h.v,h.B,h.l,h.S,h.u)}Zi.prototype.ba=function(h){h=h.target;const w=this.O;w&&no(h)==3?w.j():this.Y(h)},Zi.prototype.Y=function(h){try{if(h==this.g)e:{const we=no(this.g),kt=this.g.ya(),We=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||VS(this.g)))){this.K||we!=4||kt==7||(kt==8||We<=0?wc(3):wc(2)),t_(this);var w=this.g.ca();this.X=w;var I=i3(this);if(this.o=w==200,e3(this.i,this.v,this.B,this.l,this.S,we,w),this.o){if(this.U&&!this.L){t:{if(this.g){var D,U=this.g;if((D=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(D)){var q=D;break t}}q=null}if(h=q)Us(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,n_(this,h);else{this.o=!1,this.m=3,_n(12),wa(this),Tc(this);break e}}if(this.R){h=!0;let zt;for(;!this.K&&this.C<I.length;)if(zt=o3(this,I),zt==Zv){we==4&&(this.m=4,_n(14),h=!1),Us(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==yS){this.m=4,_n(15),Us(this.i,this.l,I,"[Invalid Chunk]"),h=!1;break}else Us(this.i,this.l,zt,null),n_(this,zt);if(_S(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||I.length!=0||this.h.h||(this.m=1,_n(16),h=!1),this.o=this.o&&h,!h)Us(this.i,this.l,I,"[Invalid Chunked Response]"),wa(this),Tc(this);else if(I.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),c_(re),re.P=!0,_n(11))}}else Us(this.i,this.l,I,null),n_(this,I);we==4&&wa(this),this.o&&!this.K&&(we==4?WS(this.j,this):(this.o=!1,zd(this)))}else _3(this.g),w==400&&I.indexOf("Unknown SID")>0?(this.m=3,_n(12)):(this.m=0,_n(13)),wa(this),Tc(this)}}}catch{}finally{}};function i3(h){if(!_S(h))return h.g.la();const w=VS(h.g);if(w==="")return"";let I="";const D=w.length,U=no(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return wa(h),Tc(h),"";h.h.i=new a.TextDecoder}for(let q=0;q<D;q++)h.h.h=!0,I+=h.h.i.decode(w[q],{stream:!(U&&q==D-1)});return w.length=0,h.h.g+=I,h.C=0,h.h.g}function _S(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function o3(h,w){var I=h.C,D=w.indexOf(`
`,I);return D==-1?Zv:(I=Number(w.substring(I,D)),isNaN(I)?yS:(D+=1,D+I>w.length?Zv:(w=w.slice(D,D+I),h.C=D+I,w)))}Zi.prototype.cancel=function(){this.K=!0,wa(this)};function zd(h){h.T=Date.now()+h.H,wS(h,h.H)}function wS(h,w){if(h.D!=null)throw Error("WatchDog timer not null");h.D=bc(l(h.aa,h),w)}function t_(h){h.D&&(a.clearTimeout(h.D),h.D=null)}Zi.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(t3(this.i,this.B),this.M!=2&&(wc(),_n(17)),wa(this),this.m=2,Tc(this)):wS(this,this.T-h)};function Tc(h){h.j.I==0||h.K||WS(h.j,h)}function wa(h){t_(h);var w=h.O;w&&typeof w.dispose=="function"&&w.dispose(),h.O=null,sS(h.V),h.g&&(w=h.g,h.g=null,w.abort(),w.dispose())}function n_(h,w){try{var I=h.j;if(I.I!=0&&(I.g==h||r_(I.h,h))){if(!h.L&&r_(I.h,h)&&I.I==3){try{var D=I.Ba.g.parse(w)}catch{D=null}if(Array.isArray(D)&&D.length==3){var U=D;if(U[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<h.F)Qd(I),Gd(I);else break e;l_(I),_n(18)}}else I.xa=U[1],0<I.xa-I.K&&U[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=bc(l(I.Va,I),6e3));xS(I.h)<=1&&I.ta&&(I.ta=void 0)}else Ea(I,11)}else if((h.L||I.g==h)&&Qd(I),!R(w))for(U=I.Ba.g.parse(w),w=0;w<U.length;w++){let We=U[w];const zt=We[0];if(!(zt<=I.K))if(I.K=zt,We=We[1],I.I==2)if(We[0]=="c"){I.M=We[1],I.ba=We[2];const Lr=We[3];Lr!=null&&(I.ka=Lr,I.j.info("VER="+I.ka));const xa=We[4];xa!=null&&(I.za=xa,I.j.info("SVER="+I.za));const ro=We[5];ro!=null&&typeof ro=="number"&&ro>0&&(D=1.5*ro,I.O=D,I.j.info("backChannelRequestTimeoutMs_="+D)),D=I;const io=h.g;if(io){const Xd=io.g?io.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xd){var q=D.h;q.g||Xd.indexOf("spdy")==-1&&Xd.indexOf("quic")==-1&&Xd.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(i_(q,q.h),q.h=null))}if(D.G){const f_=io.g?io.g.getResponseHeader("X-HTTP-Session-Id"):null;f_&&(D.wa=f_,et(D.J,D.G,f_))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-h.F,I.j.info("Handshake RTT: "+I.T+"ms")),D=I;var re=h;if(D.na=KS(D,D.L?D.ba:null,D.W),re.L){TS(D.h,re);var we=re,kt=D.O;kt&&(we.H=kt),we.D&&(t_(we),zd(we)),D.g=re}else zS(D);I.i.length>0&&Kd(I)}else We[0]!="stop"&&We[0]!="close"||Ea(I,7);else I.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Ea(I,7):u_(I):We[0]!="noop"&&I.l&&I.l.qa(We),I.A=0)}}wc(4)}catch{}}var a3=class{constructor(h,w){this.g=h,this.map=w}};function bS(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ES(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function xS(h){return h.h?1:h.g?h.g.size:0}function r_(h,w){return h.h?h.h==w:h.g?h.g.has(w):!1}function i_(h,w){h.g?h.g.add(w):h.h=w}function TS(h,w){h.h&&h.h==w?h.h=null:h.g&&h.g.has(w)&&h.g.delete(w)}bS.prototype.cancel=function(){if(this.i=SS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function SS(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let w=h.i;for(const I of h.g.values())w=w.concat(I.G);return w}return p(h.i)}var AS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function s3(h,w){if(h){h=h.split("&");for(let I=0;I<h.length;I++){const D=h[I].indexOf("=");let U,q=null;D>=0?(U=h[I].substring(0,D),q=h[I].substring(D+1)):U=h[I],w(U,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function eo(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;h instanceof eo?(this.l=h.l,Sc(this,h.j),this.o=h.o,this.g=h.g,Ac(this,h.u),this.h=h.h,o_(this,RS(h.i)),this.m=h.m):h&&(w=String(h).match(AS))?(this.l=!1,Sc(this,w[1]||"",!0),this.o=Ic(w[2]||""),this.g=Ic(w[3]||"",!0),Ac(this,w[4]),this.h=Ic(w[5]||"",!0),o_(this,w[6]||"",!0),this.m=Ic(w[7]||"")):(this.l=!1,this.i=new Oc(null,this.l))}eo.prototype.toString=function(){const h=[];var w=this.j;w&&h.push(Pc(w,IS,!0),":");var I=this.g;return(I||w=="file")&&(h.push("//"),(w=this.o)&&h.push(Pc(w,IS,!0),"@"),h.push(xc(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&h.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(Pc(I,I.charAt(0)=="/"?c3:l3,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",Pc(I,h3)),h.join("")},eo.prototype.resolve=function(h){const w=Vr(this);let I=!!h.j;I?Sc(w,h.j):I=!!h.o,I?w.o=h.o:I=!!h.g,I?w.g=h.g:I=h.u!=null;var D=h.h;if(I)Ac(w,h.u);else if(I=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var U=w.h.lastIndexOf("/");U!=-1&&(D=w.h.slice(0,U+1)+D)}if(U=D,U==".."||U==".")D="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){D=U.lastIndexOf("/",0)==0,U=U.split("/");const q=[];for(let re=0;re<U.length;){const we=U[re++];we=="."?D&&re==U.length&&q.push(""):we==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),D&&re==U.length&&q.push("")):(q.push(we),D=!0)}D=q.join("/")}else D=U}return I?w.h=D:I=h.i.toString()!=="",I?o_(w,RS(h.i)):I=!!h.m,I&&(w.m=h.m),w};function Vr(h){return new eo(h)}function Sc(h,w,I){h.j=I?Ic(w,!0):w,h.j&&(h.j=h.j.replace(/:$/,""))}function Ac(h,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);h.u=w}else h.u=null}function o_(h,w,I){w instanceof Oc?(h.i=w,d3(h.i,h.l)):(I||(w=Pc(w,f3)),h.i=new Oc(w,h.l))}function et(h,w,I){h.i.set(w,I)}function qd(h){return et(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ic(h,w){return h?w?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Pc(h,w,I){return typeof h=="string"?(h=encodeURI(h).replace(w,u3),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function u3(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var IS=/[#\/\?@]/g,l3=/[#\?:]/g,c3=/[#\?]/g,f3=/[#\?@]/g,h3=/#/g;function Oc(h,w){this.h=this.g=null,this.i=h||null,this.j=!!w}function ba(h){h.g||(h.g=new Map,h.h=0,h.i&&s3(h.i,function(w,I){h.add(decodeURIComponent(w.replace(/\+/g," ")),I)}))}t=Oc.prototype,t.add=function(h,w){ba(this),this.i=null,h=zs(this,h);let I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(w),this.h+=1,this};function PS(h,w){ba(h),w=zs(h,w),h.g.has(w)&&(h.i=null,h.h-=h.g.get(w).length,h.g.delete(w))}function OS(h,w){return ba(h),w=zs(h,w),h.g.has(w)}t.forEach=function(h,w){ba(this),this.g.forEach(function(I,D){I.forEach(function(U){h.call(w,U,D,this)},this)},this)};function CS(h,w){ba(h);let I=[];if(typeof w=="string")OS(h,w)&&(I=I.concat(h.g.get(zs(h,w))));else for(h=Array.from(h.g.values()),w=0;w<h.length;w++)I=I.concat(h[w]);return I}t.set=function(h,w){return ba(this),this.i=null,h=zs(this,h),OS(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[w]),this.h+=1,this},t.get=function(h,w){return h?(h=CS(this,h),h.length>0?String(h[0]):w):w};function kS(h,w,I){PS(h,w),I.length>0&&(h.i=null,h.g.set(zs(h,w),p(I)),h.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],w=Array.from(this.g.keys());for(let D=0;D<w.length;D++){var I=w[D];const U=xc(I);I=CS(this,I);for(let q=0;q<I.length;q++){let re=U;I[q]!==""&&(re+="="+xc(I[q])),h.push(re)}}return this.i=h.join("&")};function RS(h){const w=new Oc;return w.i=h.i,h.g&&(w.g=new Map(h.g),w.h=h.h),w}function zs(h,w){return w=String(w),h.j&&(w=w.toLowerCase()),w}function d3(h,w){w&&!h.j&&(ba(h),h.i=null,h.g.forEach(function(I,D){const U=D.toLowerCase();D!=U&&(PS(this,D),kS(this,U,I))},h)),h.j=w}function p3(h,w){const I=new Ec;if(a.Image){const D=new Image;D.onload=c(to,I,"TestLoadImage: loaded",!0,w,D),D.onerror=c(to,I,"TestLoadImage: error",!1,w,D),D.onabort=c(to,I,"TestLoadImage: abort",!1,w,D),D.ontimeout=c(to,I,"TestLoadImage: timeout",!1,w,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else w(!1)}function m3(h,w){const I=new Ec,D=new AbortController,U=setTimeout(()=>{D.abort(),to(I,"TestPingServer: timeout",!1,w)},1e4);fetch(h,{signal:D.signal}).then(q=>{clearTimeout(U),q.ok?to(I,"TestPingServer: ok",!0,w):to(I,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(U),to(I,"TestPingServer: error",!1,w)})}function to(h,w,I,D,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),D(I)}catch{}}function g3(){this.g=new J4}function a_(h){this.i=h.Sb||null,this.h=h.ab||!1}f(a_,uS),a_.prototype.g=function(){return new Wd(this.i,this.h)};function Wd(h,w){dt.call(this),this.H=h,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Wd,dt),t=Wd.prototype,t.open=function(h,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=w,this.readyState=1,kc(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(w.body=h),(this.H||a).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cc(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,kc(this)),this.g&&(this.readyState=3,kc(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;NS(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function NS(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var w=h.value?h.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!h.done}))&&(this.response=this.responseText+=w)}h.done?Cc(this):kc(this),this.readyState==3&&NS(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,Cc(this))},t.Na=function(h){this.g&&(this.response=h,Cc(this))},t.ga=function(){this.g&&Cc(this)};function Cc(h){h.readyState=4,h.l=null,h.j=null,h.B=null,kc(h)}t.setRequestHeader=function(h,w){this.A.append(h,w)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],w=this.h.entries();for(var I=w.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=w.next();return h.join(`\r
`)};function kc(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Wd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function DS(h){let w="";return H(h,function(I,D){w+=D,w+=":",w+=I,w+=`\r
`}),w}function s_(h,w,I){e:{for(D in I){var D=!1;break e}D=!0}D||(I=DS(I),typeof h=="string"?I!=null&&xc(I):et(h,w,I))}function vt(h){dt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(vt,dt);var y3=/^https?$/i,v3=["POST","PUT"];t=vt.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,w,I,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);w=w?w.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mS.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(w,String(h),!0),this.B=!1}catch(q){jS(this,q);return}if(h=I||"",I=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var U in D)I.set(U,D[U]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const q of D.keys())I.set(q,D.get(q));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(I.keys()).find(q=>q.toLowerCase()=="content-type"),U=a.FormData&&h instanceof a.FormData,!(Array.prototype.indexOf.call(v3,w,void 0)>=0)||D||U||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,re]of I)this.g.setRequestHeader(q,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(q){jS(this,q)}};function jS(h,w){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=w,h.o=5,MS(h),Hd(h)}function MS(h){h.A||(h.A=!0,St(h,"complete"),St(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,St(this,"complete"),St(this,"abort"),Hd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hd(this,!0)),vt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?$S(this):this.Xa())},t.Xa=function(){$S(this)};function $S(h){if(h.h&&typeof o<"u"){if(h.v&&no(h)==4)setTimeout(h.Ca.bind(h),0);else if(St(h,"readystatechange"),no(h)==4){h.h=!1;try{const q=h.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var I;if(!(I=w)){var D;if(D=q===0){let re=String(h.D).match(AS)[1]||null;!re&&a.self&&a.self.location&&(re=a.self.location.protocol.slice(0,-1)),D=!y3.test(re?re.toLowerCase():"")}I=D}if(I)St(h,"complete"),St(h,"success");else{h.o=6;try{var U=no(h)>2?h.g.statusText:""}catch{U=""}h.l=U+" ["+h.ca()+"]",MS(h)}}finally{Hd(h)}}}}function Hd(h,w){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const I=h.g;h.g=null,w||St(h,"ready");try{I.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function no(h){return h.g?h.g.readyState:0}t.ca=function(){try{return no(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var w=this.g.responseText;return h&&w.indexOf(h)==0&&(w=w.substring(h.length)),X4(w)}};function VS(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function _3(h){const w={};h=(h.g&&no(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(R(h[D]))continue;var I=r3(h[D]);const U=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const q=w[U]||[];w[U]=q,q.push(I)}Q(w,function(D){return D.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rc(h,w,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||w}function LS(h){this.za=0,this.i=[],this.j=new Ec,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rc("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rc("baseRetryDelayMs",5e3,h),this.Za=Rc("retryDelaySeedMs",1e4,h),this.Ta=Rc("forwardChannelMaxRetries",2,h),this.va=Rc("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new bS(h&&h.concurrentRequestLimit),this.Ba=new g3,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=LS.prototype,t.ka=8,t.I=1,t.connect=function(h,w,I,D){_n(0),this.W=h,this.H=w||{},I&&D!==void 0&&(this.H.OSID=I,this.H.OAID=D),this.F=this.X,this.J=KS(this,null,this.W),Kd(this)};function u_(h){if(FS(h),h.I==3){var w=h.V++,I=Vr(h.J);if(et(I,"SID",h.M),et(I,"RID",w),et(I,"TYPE","terminate"),Nc(h,I),w=new Zi(h,h.j,w),w.M=2,w.A=qd(Vr(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(w.A.toString(),"")}catch{}!I&&a.Image&&(new Image().src=w.A,I=!0),I||(w.g=QS(w.j,null),w.g.ea(w.A)),w.F=Date.now(),zd(w)}GS(h)}function Gd(h){h.g&&(c_(h),h.g.cancel(),h.g=null)}function FS(h){Gd(h),h.v&&(a.clearTimeout(h.v),h.v=null),Qd(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&a.clearTimeout(h.m),h.m=null)}function Kd(h){if(!ES(h.h)&&!h.m){h.m=!0;var w=h.Ea;T||S(),A||(T(),A=!0),x.add(w,h),h.D=0}}function w3(h,w){return xS(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=w.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=bc(l(h.Ea,h,w),HS(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const U=new Zi(this,this.j,h);let q=this.o;if(this.U&&(q?(q=ie(q),fe(q,this.U)):q=this.U),this.u!==null||this.R||(U.J=q,q=null),this.S)e:{for(var w=0,I=0;I<this.i.length;I++){t:{var D=this.i[I];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(w+=D,w>4096){w=I;break e}if(w===4096||I===this.i.length-1){w=I+1;break e}}w=1e3}else w=1e3;w=US(this,U,w),I=Vr(this.J),et(I,"RID",h),et(I,"CVER",22),this.G&&et(I,"X-HTTP-Session-Id",this.G),Nc(this,I),q&&(this.R?w="headers="+xc(DS(q))+"&"+w:this.u&&s_(I,this.u,q)),i_(this.h,U),this.Ra&&et(I,"TYPE","init"),this.S?(et(I,"$req",w),et(I,"SID","null"),U.U=!0,e_(U,I,null)):e_(U,I,w),this.I=2}}else this.I==3&&(h?BS(this,h):this.i.length==0||ES(this.h)||BS(this))};function BS(h,w){var I;w?I=w.l:I=h.V++;const D=Vr(h.J);et(D,"SID",h.M),et(D,"RID",I),et(D,"AID",h.K),Nc(h,D),h.u&&h.o&&s_(D,h.u,h.o),I=new Zi(h,h.j,I,h.D+1),h.u===null&&(I.J=h.o),w&&(h.i=w.G.concat(h.i)),w=US(h,I,1e3),I.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),i_(h.h,I),e_(I,D,w)}function Nc(h,w){h.H&&H(h.H,function(I,D){et(w,D,I)}),h.l&&H({},function(I,D){et(w,D,I)})}function US(h,w,I){I=Math.min(h.i.length,I);const D=h.l?l(h.l.Ka,h.l,h):null;e:{var U=h.i;let we=-1;for(;;){const kt=["count="+I];we==-1?I>0?(we=U[0].g,kt.push("ofs="+we)):we=0:kt.push("ofs="+we);let We=!0;for(let zt=0;zt<I;zt++){var q=U[zt].g;const Lr=U[zt].map;if(q-=we,q<0)we=Math.max(0,U[zt].g-100),We=!1;else try{q="req"+q+"_"||"";try{var re=Lr instanceof Map?Lr:Object.entries(Lr);for(const[xa,ro]of re){let io=ro;s(ro)&&(io=Qv(ro)),kt.push(q+xa+"="+encodeURIComponent(io))}}catch(xa){throw kt.push(q+"type="+encodeURIComponent("_badmap")),xa}}catch{D&&D(Lr)}}if(We){re=kt.join("&");break e}}re=void 0}return h=h.i.splice(0,I),w.G=h,re}function zS(h){if(!h.g&&!h.v){h.Y=1;var w=h.Da;T||S(),A||(T(),A=!0),x.add(w,h),h.A=0}}function l_(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=bc(l(h.Da,h),HS(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,qS(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=bc(l(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_n(10),Gd(this),qS(this))};function c_(h){h.B!=null&&(a.clearTimeout(h.B),h.B=null)}function qS(h){h.g=new Zi(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var w=Vr(h.na);et(w,"RID","rpc"),et(w,"SID",h.M),et(w,"AID",h.K),et(w,"CI",h.F?"0":"1"),!h.F&&h.ia&&et(w,"TO",h.ia),et(w,"TYPE","xmlhttp"),Nc(h,w),h.u&&h.o&&s_(w,h.u,h.o),h.O&&(h.g.H=h.O);var I=h.g;h=h.ba,I.M=1,I.A=qd(Vr(w)),I.u=null,I.R=!0,vS(I,h)}t.Va=function(){this.C!=null&&(this.C=null,Gd(this),l_(this),_n(19))};function Qd(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function WS(h,w){var I=null;if(h.g==w){Qd(h),c_(h),h.g=null;var D=2}else if(r_(h.h,w))I=w.G,TS(h.h,w),D=1;else return;if(h.I!=0){if(w.o)if(D==1){I=w.u?w.u.length:0,w=Date.now()-w.F;var U=h.D;D=Bd(),St(D,new dS(D,I)),Kd(h)}else zS(h);else if(U=w.m,U==3||U==0&&w.X>0||!(D==1&&w3(h,w)||D==2&&l_(h)))switch(I&&I.length>0&&(w=h.h,w.i=w.i.concat(I)),U){case 1:Ea(h,5);break;case 4:Ea(h,10);break;case 3:Ea(h,6);break;default:Ea(h,2)}}}function HS(h,w){let I=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(I*=2),I*w}function Ea(h,w){if(h.j.info("Error code "+w),w==2){var I=l(h.bb,h),D=h.Ua;const U=!D;D=new eo(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Sc(D,"https"),qd(D),U?p3(D.toString(),I):m3(D.toString(),I)}else _n(2);h.I=0,h.l&&h.l.pa(w),GS(h),FS(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),_n(2)):(this.j.info("Failed to ping google.com"),_n(1))};function GS(h){if(h.I=0,h.ja=[],h.l){const w=SS(h.h);(w.length!=0||h.i.length!=0)&&(_(h.ja,w),_(h.ja,h.i),h.h.i.length=0,p(h.i),h.i.length=0),h.l.oa()}}function KS(h,w,I){var D=I instanceof eo?Vr(I):new eo(I);if(D.g!="")w&&(D.g=w+"."+D.g),Ac(D,D.u);else{var U=a.location;D=U.protocol,w=w?w+"."+U.hostname:U.hostname,U=+U.port;const q=new eo(null);D&&Sc(q,D),w&&(q.g=w),U&&Ac(q,U),I&&(q.h=I),D=q}return I=h.G,w=h.wa,I&&w&&et(D,I,w),et(D,"VER",h.ka),Nc(h,D),D}function QS(h,w,I){if(w&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=h.Aa&&!h.ma?new vt(new a_({ab:I})):new vt(h.ma),w.Fa(h.L),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function YS(){}t=YS.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Yd(){}Yd.prototype.g=function(h,w){return new Fn(h,w)};function Fn(h,w){dt.call(this),this.g=new LS(w),this.l=h,this.h=w&&w.messageUrlParams||null,h=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(h?h["X-WebChannel-Content-Type"]=w.messageContentType:h={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(h?h["X-WebChannel-Client-Profile"]=w.sa:h={"X-WebChannel-Client-Profile":w.sa}),this.g.U=h,(h=w&&w.Qb)&&!R(h)&&(this.g.u=h),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!R(w)&&(this.g.G=w,h=this.h,h!==null&&w in h&&(h=this.h,w in h&&delete h[w])),this.j=new qs(this)}f(Fn,dt),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){u_(this.g)},Fn.prototype.o=function(h){var w=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.v&&(I={},I.__data__=Qv(h),h=I);w.i.push(new a3(w.Ya++,h)),w.I==3&&Kd(w)},Fn.prototype.N=function(){this.g.l=null,delete this.j,u_(this.g),delete this.g,Fn.Z.N.call(this)};function XS(h){Yv.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var w=h.__sm__;if(w){e:{for(const I in w){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,w=w!==null&&h in w?w[h]:void 0),this.data=w}else this.data=h}f(XS,Yv);function JS(){Xv.call(this),this.status=1}f(JS,Xv);function qs(h){this.g=h}f(qs,YS),qs.prototype.ra=function(){St(this.g,"a")},qs.prototype.qa=function(h){St(this.g,new XS(h))},qs.prototype.pa=function(h){St(this.g,new JS)},qs.prototype.oa=function(){St(this.g,"b")},Yd.prototype.createWebChannel=Yd.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,zD=function(){return new Yd},UD=function(){return Bd()},BD=_a,Ow={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ud.NO_ERROR=0,Ud.TIMEOUT=8,Ud.HTTP_ERROR=6,Xp=Ud,pS.COMPLETE="complete",FD=pS,lS.EventType=_c,_c.OPEN="a",_c.CLOSE="b",_c.ERROR="c",_c.MESSAGE="d",dt.prototype.listen=dt.prototype.J,df=lS,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,LD=vt}).apply(typeof gp<"u"?gp:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl="12.9.0";function j5(t){Wl=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new NE("@firebase/firestore");function nu(){return Qo.logLevel}function M5(t){Qo.setLogLevel(t)}function Y(t,...e){if(Qo.logLevel<=Ie.DEBUG){const n=e.map(jE);Qo.debug(`Firestore (${Wl}): ${t}`,...n)}}function xt(t,...e){if(Qo.logLevel<=Ie.ERROR){const n=e.map(jE);Qo.error(`Firestore (${Wl}): ${t}`,...n)}}function Vn(t,...e){if(Qo.logLevel<=Ie.WARN){const n=e.map(jE);Qo.warn(`Firestore (${Wl}): ${t}`,...n)}}function jE(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,qD(t,r,n)}function qD(t,e,n){let r=`FIRESTORE (${Wl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw xt(r),new Error(r)}function le(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||qD(e,i,r)}function $5(t,e){t||ae(57014,e)}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}}class V5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class L5{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new Yt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Yt,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},s=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>s(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?s(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Yt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string",31837,{l:r}),new WD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string",2055,{h:e}),new Gt(e)}}class F5{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class B5{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new F5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){le(this.o===void 0,3512);const r=o=>{o.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Cw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class z5{getToken(){return Promise.resolve(new Cw(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=q5(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function kw(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return q_(i)===q_(o)?pe(i,o):q_(i)?1:-1}return pe(t.length,e.length)}const W5=55296,H5=57343;function q_(t){const e=t.charCodeAt(0);return e>=W5&&e<=H5}function Gu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function GD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="__name__";class Ur{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ae(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ur.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ur?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Ur.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return pe(e.length,n.length)}static compareSegments(e,n){const r=Ur.isNumericId(e),i=Ur.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ur.extractNumericId(e).compare(Ur.extractNumericId(n)):kw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zo.fromString(e.substring(4,e.length-2))}}class xe extends Ur{construct(e,n,r){return new xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const G5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Ur{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return G5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Rw}static keyField(){return new ot([Rw])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new K(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new K(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else s==="`"?(a=!a,i++):s!=="."||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new K(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(xe.fromString(e))}static fromName(e){return new te(xe.fromString(e).popFirst(5))}static empty(){return new te(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new xe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t,e,n){if(!n)throw new K(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KD(t,e,n,r){if(e===!0&&r===!0)throw new K(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function AI(t){if(!te.isDocumentKey(t))throw new K(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function II(t){if(te.isDocumentKey(t))throw new K(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function QD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ny(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae(12329,{type:typeof t})}function Te(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ny(t);throw new K(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function YD(t,e){if(e<=0)throw new K(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function Os(t,e){if(!QD(t))throw new K(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new K(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=-62135596800,OI=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*OI);return new De(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<PI)throw new K(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OI}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Os(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-PI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:Ot("string",De._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{static fromTimestamp(e){return new ce(e)}static min(){return new ce(new De(0,0))}static max(){return new ce(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=-1;class Qu{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Nw(t){return t.fields.find(e=>e.kind===2)}function Ca(t){return t.fields.filter(e=>e.kind!==2)}function K5(t,e){let n=pe(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=Q5(t.fields[r],e.fields[r]),n!==0)return n;return pe(t.fields.length,e.fields.length)}Qu.UNKNOWN_ID=-1;class Za{constructor(e,n){this.fieldPath=e,this.kind=n}}function Q5(t,e){const n=ot.comparator(t.fieldPath,e.fieldPath);return n!==0?n:pe(t.kind,e.kind)}class Yu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Yu(0,Jn.min())}}function XD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new Jn(i,te.empty(),e)}function JD(t){return new Jn(t.readTime,t.key,Ku)}class Jn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Jn(ce.min(),te.empty(),Ku)}static max(){return new Jn(ce.max(),te.empty(),Ku)}}function $E(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ej{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==ZD)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,o=0,a=!1;e.forEach(s=>{++i,s.next(()=>{++o,a&&o===i&&n()},u=>r(u))}),a=!0,o===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const o=e.length,a=new Array(o);let s=0;for(let u=0;u<o;u++){const l=u;n(e[l]).next(c=>{a[l]=c,++s,s===o&&r(a)},c=>i(c))}})}static doWhile(e,n){return new B((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="SimpleDb";class Dy{static open(e,n,r,i){try{return new Dy(n,e.transaction(i,r))}catch(o){throw new Cf(n,o)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Yt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Cf(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=VE(r.target.error);this.S.reject(new Cf(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Y(qn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new X5(n)}}class Zr{static delete(e){return Y(qn,"Removing database:",e),ja(xD().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!kD())return!1;if(Zr.F())return!0;const e=$t(),n=Zr.M(e),r=0<n&&n<10,i=tj(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Zr.M($t())===12.2&&xt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Y(qn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const a=o.target.result;n(a)},i.onblocked=()=>{r(new Cf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const a=o.target.error;a.name==="VersionError"?r(new K(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new K(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Cf(e,a))},i.onupgradeneeded=o=>{Y(qn,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const a=o.target.result;this.N.k(a,i.transaction,o.oldVersion,this.version).next(()=>{Y(qn,"Database upgrade to version "+this.version+" complete")})}})),this.K&&(this.db.onversionchange=n=>this.K(n)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const o=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const s=Dy.open(this.db,e,o?"readonly":"readwrite",r),u=i(s).next(l=>(s.C(),l)).catch(l=>(s.abort(l),B.reject(l))).toPromise();return u.catch(()=>{}),await s.D,u}catch(s){const u=s,l=u.name!=="FirebaseError"&&a<3;if(Y(qn,"Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function tj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Y5{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return ja(this.U.delete())}}class Cf extends K{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function sa(t){return t.name==="IndexedDbTransactionError"}class X5{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Y(qn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Y(qn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ja(r)}add(e){return Y(qn,"ADD",this.store.name,e,e),ja(this.store.add(e))}get(e){return ja(this.store.get(e)).next(n=>(n===void 0&&(n=null),Y(qn,"GET",this.store.name,e,n),n))}delete(e){return Y(qn,"DELETE",this.store.name,e),ja(this.store.delete(e))}count(){return Y(qn,"COUNT",this.store.name),ja(this.store.count())}H(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new B((a,s)=>{o.onerror=u=>{s(u.target.error)},o.onsuccess=u=>{a(u.target.result)}})}{const o=this.cursor(r),a=[];return this.J(o,(s,u)=>{a.push(u)}).next(()=>a)}}Z(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new B((i,o)=>{r.onerror=a=>{o(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}X(e,n){Y(qn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.J(i,(o,a,s)=>s.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.J(i,n)}te(e){const n=this.cursor({});return new B((r,i)=>{n.onerror=o=>{const a=VE(o.target.error);i(a)},n.onsuccess=o=>{const a=o.target.result;a?e(a.primaryKey,a.value).next(s=>{s?a.continue():r()}):r()}})}J(e,n){const r=[];return new B((i,o)=>{e.onerror=a=>{o(a.target.error)},e.onsuccess=a=>{const s=a.target.result;if(!s)return void i();const u=new Y5(s),l=n(s.primaryKey,s.value,u);if(l instanceof B){const c=l.catch(f=>(u.done(),B.reject(f)));r.push(c)}u.isDone?i():u.G===null?s.continue():s.continue(u.G)}}).next(()=>B.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ja(t){return new B((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=VE(r.target.error);n(i)}})}let CI=!1;function VE(t){const e=Zr.M($t());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return CI||(CI=!0,setTimeout(()=>{throw r},0)),r}}return t}const kf="IndexBackfiller";class J5{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Y(kf,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();Y(kf,`Documents written: ${n}`)}catch(n){sa(n)?Y(kf,"Ignoring IndexedDB error during index backfill: ",n):await aa(n)}await this.re(6e4)})}}class Z5{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,o=!0;return B.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return Y(kf,`Processing collection: ${a}`),this.oe(e,a,i).next(s=>{i-=s,r.add(a)});o=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const a=o.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(i,o)).next(s=>(Y(kf,`Updating offset: ${s}`),this.localStore.indexManager.updateCollectionGroup(e,n,s))).next(()=>a.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,o)=>{const a=JD(o);$E(a,r)>0&&(r=a)}),new Jn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}On.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=-1;function gd(t){return t==null}function fh(t){return t===0&&1/t==-1/0}function nj(t){return typeof t=="number"&&Number.isInteger(t)&&!fh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="";function gn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=kI(e)),e=e9(t.get(n),e);return kI(e)}function e9(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case Um:n+="";break;default:n+=o}}return n}function kI(t){return t+Um+""}function Gr(t){const e=t.length;if(le(e>=2,64408,{path:t}),e===2)return le(t.charAt(0)===Um&&t.charAt(1)==="",56145,{path:t}),xe.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const a=t.indexOf(Um,o);switch((a<0||a>n)&&ae(50515,{path:t}),t.charAt(a+1)){case"":const s=t.substring(o,a);let u;i.length===0?u=s:(i+=s,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:ae(61167,{path:t})}o=a+2}return new xe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="remoteDocuments",yd="owner",Hs="owner",hh="mutationQueues",t9="userId",xr="mutations",RI="batchId",Ua="userMutationsIndex",NI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t,e){return[t,gn(e)]}function rj(t,e,n){return[t,gn(e),n]}const n9={},Xu="documentMutations",zm="remoteDocumentsV14",r9=["prefixPath","collectionGroup","readTime","documentId"],Zp="documentKeyIndex",i9=["prefixPath","collectionGroup","documentId"],ij="collectionGroupIndex",o9=["collectionGroup","readTime","prefixPath","documentId"],dh="remoteDocumentGlobal",Dw="remoteDocumentGlobalKey",Ju="targets",oj="queryTargetsIndex",a9=["canonicalId","targetId"],Zu="targetDocuments",s9=["targetId","path"],LE="documentTargetsIndex",u9=["path","targetId"],qm="targetGlobalKey",es="targetGlobal",ph="collectionParents",l9=["collectionId","parent"],el="clientMetadata",c9="clientId",jy="bundles",f9="bundleId",My="namedQueries",h9="name",FE="indexConfiguration",d9="indexId",jw="collectionGroupIndex",p9="collectionGroup",Rf="indexState",m9=["indexId","uid"],aj="sequenceNumberIndex",g9=["uid","sequenceNumber"],Nf="indexEntries",y9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sj="documentKeyIndex",v9=["indexId","uid","orderedDocumentKey"],$y="documentOverlays",_9=["userId","collectionPath","documentId"],Mw="collectionPathOverlayIndex",w9=["userId","collectionPath","largestBatchId"],uj="collectionGroupOverlayIndex",b9=["userId","collectionGroup","largestBatchId"],BE="globals",E9="name",lj=[hh,xr,Xu,ka,Ju,yd,es,Zu,el,dh,ph,jy,My],x9=[...lj,$y],cj=[hh,xr,Xu,zm,Ju,yd,es,Zu,el,dh,ph,jy,My,$y],fj=cj,UE=[...fj,FE,Rf,Nf],T9=UE,hj=[...UE,BE],S9=hj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w extends ej{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Lt(t,e){const n=ne(t);return Zr.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ua(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dj(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function pj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yp(this.root,e,this.comparator,!1)}getReverseIterator(){return new yp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yp(this.root,e,this.comparator,!0)}}class yp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??en.RED,this.left=i??en.EMPTY,this.right=o??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new en(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return en.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jI(this.data.getIterator())}getIteratorFrom(e){return new jI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Le)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Le(this.comparator);return n.data=e,n}}class jI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gs(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new Le(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new mj("Invalid base64 string: "+o):o}}(e);return new yt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const I9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(t){if(le(!!t,39018),typeof t=="string"){let e=0;const n=I9.exec(t);if(le(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ji(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj="server_timestamp",yj="__type__",vj="__previous_value__",_j="__local_write_time__";function Vy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[yj])==null?void 0:r.stringValue)===gj}function Ly(t){const e=t.mapValue.fields[vj];return Vy(e)?Ly(e):e}function mh(t){const e=Di(t.mapValue.fields[_j].timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e,n,r,i,o,a,s,u,l,c,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=c,this.apiKey=f}}const gh="(default)";class Yo{constructor(e,n){this.projectId=e,this.database=n||gh}static empty(){return new Yo("","")}get isDefaultDatabase(){return this.database===gh}isEqual(e){return e instanceof Yo&&e.projectId===this.projectId&&e.database===this.database}}function O9(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new K(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yo(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="__type__",wj="__max__",Io={mapValue:{fields:{__type__:{stringValue:wj}}}},qE="__vector__",tl="value",em={nullValue:"NULL_VALUE"};function Xo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vy(t)?4:bj(t)?9007199254740991:Fy(t)?10:11:ae(28295,{value:t})}function oi(t,e){if(t===e)return!0;const n=Xo(t);if(n!==Xo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mh(t).isEqual(mh(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=Di(i.timestampValue),s=Di(o.timestampValue);return a.seconds===s.seconds&&a.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return ji(i.bytesValue).isEqual(ji(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return st(i.geoPointValue.latitude)===st(o.geoPointValue.latitude)&&st(i.geoPointValue.longitude)===st(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return st(i.integerValue)===st(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=st(i.doubleValue),s=st(o.doubleValue);return a===s?fh(a)===fh(s):isNaN(a)&&isNaN(s)}return!1}(t,e);case 9:return Gu(t.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},s=o.mapValue.fields||{};if(DI(a)!==DI(s))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(s[u]===void 0||!oi(a[u],s[u])))return!1;return!0}(t,e);default:return ae(52216,{left:t})}}function yh(t,e){return(t.values||[]).find(n=>oi(n,e))!==void 0}function Jo(t,e){if(t===e)return 0;const n=Xo(t),r=Xo(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(o,a){const s=st(o.integerValue||o.doubleValue),u=st(a.integerValue||a.doubleValue);return s<u?-1:s>u?1:s===u?0:isNaN(s)?isNaN(u)?0:-1:1}(t,e);case 3:return MI(t.timestampValue,e.timestampValue);case 4:return MI(mh(t),mh(e));case 5:return kw(t.stringValue,e.stringValue);case 6:return function(o,a){const s=ji(o),u=ji(a);return s.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const s=o.split("/"),u=a.split("/");for(let l=0;l<s.length&&l<u.length;l++){const c=pe(s[l],u[l]);if(c!==0)return c}return pe(s.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const s=pe(st(o.latitude),st(a.latitude));return s!==0?s:pe(st(o.longitude),st(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $I(t.arrayValue,e.arrayValue);case 10:return function(o,a){var d,p,_,y;const s=o.fields||{},u=a.fields||{},l=(d=s[tl])==null?void 0:d.arrayValue,c=(p=u[tl])==null?void 0:p.arrayValue,f=pe(((_=l==null?void 0:l.values)==null?void 0:_.length)||0,((y=c==null?void 0:c.values)==null?void 0:y.length)||0);return f!==0?f:$I(l,c)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Io.mapValue&&a===Io.mapValue)return 0;if(o===Io.mapValue)return 1;if(a===Io.mapValue)return-1;const s=o.fields||{},u=Object.keys(s),l=a.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=kw(u[f],c[f]);if(d!==0)return d;const p=Jo(s[u[f]],l[c[f]]);if(p!==0)return p}return pe(u.length,c.length)}(t.mapValue,e.mapValue);default:throw ae(23264,{he:n})}}function MI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=Di(t),r=Di(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function $I(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Jo(n[i],r[i]);if(o)return o}return pe(n.length,r.length)}function nl(t){return Vw(t)}function Vw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Di(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ji(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Vw(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${Vw(n.fields[a])}`;return i+"}"}(t.mapValue):ae(61005,{value:t})}function tm(t){switch(Xo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ly(t);return e?16+tm(e):16;case 5:return 2*t.stringValue.length;case 6:return ji(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+tm(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ua(r.fields,(o,a)=>{i+=o.length+tm(a)}),i}(t.mapValue);default:throw ae(13486,{value:t})}}function fs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lw(t){return!!t&&"integerValue"in t}function vh(t){return!!t&&"arrayValue"in t}function VI(t){return!!t&&"nullValue"in t}function LI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nm(t){return!!t&&"mapValue"in t}function Fy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[zE])==null?void 0:r.stringValue)===qE}function Df(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ua(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Df(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Df(t.arrayValue.values[n]);return e}return{...t}}function bj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===wj}const Ej={mapValue:{fields:{[zE]:{stringValue:qE},[tl]:{arrayValue:{}}}}};function C9(t){return"nullValue"in t?em:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?fs(Yo.empty(),te.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Fy(t)?Ej:{mapValue:{}}:ae(35942,{value:t})}function k9(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?fs(Yo.empty(),te.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Ej:"mapValue"in t?Fy(t)?{mapValue:{}}:Io:ae(61959,{value:t})}function FI(t,e){const n=Jo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function BI(t,e){const n=Jo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Df(n)}setAll(e){let n=ot.emptyPath(),r={},i=[];e.forEach((a,s)=>{if(!n.isImmediateParentOf(s)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=s.popLast()}a?r[s.lastSegment()]=Df(a):i.push(s.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());nm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];nm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ua(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Kt(Df(this.value))}}function xj(t){const e=[];return ua(t.fields,(n,r)=>{const i=new ot([n]);if(nm(r)){const o=xj(r.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n,r,i,o,a,s){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=s}static newInvalidDocument(e){return new it(e,0,ce.min(),ce.min(),ce.min(),Kt.empty(),0)}static newFoundDocument(e,n,r,i){return new it(e,1,n,ce.min(),r,i,0)}static newNoDocument(e,n){return new it(e,2,n,ce.min(),ce.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new it(e,3,n,ce.min(),ce.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof it&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new it(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.position=e,this.inclusive=n}}function UI(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?r=te.comparator(te.fromName(a.referenceValue),n.key):r=Jo(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function zI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!oi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n="asc"){this.field=e,this.dir=n}}function R9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{}class Pe extends Tj{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new N9(e,n,r):n==="array-contains"?new M9(e,r):n==="in"?new Cj(e,r):n==="not-in"?new $9(e,r):n==="array-contains-any"?new V9(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new D9(e,r):new j9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jo(n,this.value)):n!==null&&Xo(this.value)===Xo(n)&&this.matchesComparison(Jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Me extends Tj{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Me(e,n)}matches(e){return rl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rl(t){return t.op==="and"}function Fw(t){return t.op==="or"}function WE(t){return Sj(t)&&rl(t)}function Sj(t){for(const e of t.filters)if(e instanceof Me)return!1;return!0}function Bw(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+nl(t.value);if(WE(t))return t.filters.map(e=>Bw(e)).join(",");{const e=t.filters.map(n=>Bw(n)).join(",");return`${t.op}(${e})`}}function Aj(t,e){return t instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.field.isEqual(i.field)&&oi(r.value,i.value)}(t,e):t instanceof Me?function(r,i){return i instanceof Me&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,s)=>o&&Aj(a,i.filters[s]),!0):!1}(t,e):void ae(19439)}function Ij(t,e){const n=t.filters.concat(e);return Me.create(n,t.op)}function Pj(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${nl(n.value)}`}(t):t instanceof Me?function(n){return n.op.toString()+" {"+n.getFilters().map(Pj).join(" ,")+"}"}(t):"Filter"}class N9 extends Pe{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class D9 extends Pe{constructor(e,n){super(e,"in",n),this.keys=Oj("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class j9 extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=Oj("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Oj(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class M9 extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vh(n)&&yh(n.arrayValue,this.value)}}class Cj extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yh(this.value.arrayValue,n)}}class $9 extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(yh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yh(this.value.arrayValue,n)}}class V9 extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,n=null,r=[],i=[],o=null,a=null,s=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=s,this.Te=null}}function Uw(t,e=null,n=[],r=[],i=null,o=null,a=null){return new L9(t,e,n,r,i,o,a)}function hs(t){const e=ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Bw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),gd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nl(r)).join(",")),e.Te=n}return e.Te}function vd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Aj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zI(t.startAt,e.startAt)&&zI(t.endAt,e.endAt)}function Wm(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Hm(t,e){return t.filters.filter(n=>n instanceof Pe&&n.field.isEqual(e))}function qI(t,e,n){let r=em,i=!0;for(const o of Hm(t,e)){let a=em,s=!0;switch(o.op){case"<":case"<=":a=C9(o.value);break;case"==":case"in":case">=":a=o.value;break;case">":a=o.value,s=!1;break;case"!=":case"not-in":a=em}FI({value:r,inclusive:i},{value:a,inclusive:s})<0&&(r=a,i=s)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const a=n.position[o];FI({value:r,inclusive:i},{value:a,inclusive:n.inclusive})<0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}function WI(t,e,n){let r=Io,i=!0;for(const o of Hm(t,e)){let a=Io,s=!0;switch(o.op){case">=":case">":a=k9(o.value),s=!1;break;case"==":case"in":case"<=":a=o.value;break;case"<":a=o.value,s=!1;break;case"!=":case"not-in":a=Io}BI({value:r,inclusive:i},{value:a,inclusive:s})>0&&(r=a,i=s)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const a=n.position[o];BI({value:r,inclusive:i},{value:a,inclusive:n.inclusive})>0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n=null,r=[],i=[],o=null,a="F",s=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=s,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function kj(t,e,n,r,i,o,a,s){return new qi(t,e,n,r,i,o,a,s)}function Hl(t){return new qi(t)}function HI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function F9(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function HE(t){return t.collectionGroup!==null}function Ou(t){const e=ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let s=new Le(ot.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(s=s.add(l.field))})}),s})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new _h(o,r))}),n.has(ot.keyField().canonicalString())||e.Ie.push(new _h(ot.keyField(),r))}return e.Ie}function yn(t){const e=ne(t);return e.Ee||(e.Ee=Nj(e,Ou(t))),e.Ee}function Rj(t){const e=ne(t);return e.Re||(e.Re=Nj(e,t.explicitOrderBy)),e.Re}function Nj(t,e){if(t.limitType==="F")return Uw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new _h(i.field,o)});const n=t.endAt?new Zo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zo(t.startAt.position,t.startAt.inclusive):null;return Uw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zw(t,e){const n=t.filters.concat([e]);return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function B9(t,e){const n=t.explicitOrderBy.concat([e]);return new qi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Gm(t,e,n){return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function U9(t,e){return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function z9(t,e){return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function _d(t,e){return vd(yn(t),yn(e))&&t.limitType===e.limitType}function Dj(t){return`${hs(yn(t))}|lt:${t.limitType}`}function ru(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Pj(i)).join(", ")}]`),gd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>nl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>nl(i)).join(",")),`Target(${r})`}(yn(t))}; limitType=${t.limitType})`}function wd(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Ou(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,s,u){const l=UI(a,s,u);return a.inclusive?l<=0:l<0}(r.startAt,Ou(r),i)||r.endAt&&!function(a,s,u){const l=UI(a,s,u);return a.inclusive?l>=0:l>0}(r.endAt,Ou(r),i))}(t,e)}function jj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Mj(t){return(e,n)=>{let r=!1;for(const i of Ou(t)){const o=q9(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function q9(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(o,a,s){const u=a.data.field(o),l=s.data.field(o);return u!==null&&l!==null?Jo(u,l):ae(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ua(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return pj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=new Je(te.comparator);function kn(){return W9}const $j=new Je(te.comparator);function pf(...t){let e=$j;for(const n of t)e=e.insert(n.key,n);return e}function Vj(t){let e=$j;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Kr(){return jf()}function Lj(){return jf()}function jf(){return new Wi(t=>t.toString(),(t,e)=>t.isEqual(e))}const H9=new Je(te.comparator),G9=new Le(te.comparator);function ge(...t){let e=G9;for(const n of t)e=e.add(n);return e}const K9=new Le(pe);function GE(){return K9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fh(e)?"-0":e}}function Fj(t){return{integerValue:""+t}}function Bj(t,e){return nj(e)?Fj(e):KE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(){this._=void 0}}function Q9(t,e,n){return t instanceof il?function(i,o){const a={fields:{[yj]:{stringValue:gj},[_j]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Vy(o)&&(o=Ly(o)),o&&(a.fields[vj]=o),{mapValue:a}}(n,e):t instanceof ds?zj(t,e):t instanceof ps?qj(t,e):function(i,o){const a=Uj(i,o),s=GI(a)+GI(i.Ae);return Lw(a)&&Lw(i.Ae)?Fj(s):KE(i.serializer,s)}(t,e)}function Y9(t,e,n){return t instanceof ds?zj(t,e):t instanceof ps?qj(t,e):n}function Uj(t,e){return t instanceof ol?function(r){return Lw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class il extends By{}class ds extends By{constructor(e){super(),this.elements=e}}function zj(t,e){const n=Wj(e);for(const r of t.elements)n.some(i=>oi(i,r))||n.push(r);return{arrayValue:{values:n}}}class ps extends By{constructor(e){super(),this.elements=e}}function qj(t,e){let n=Wj(e);for(const r of t.elements)n=n.filter(i=>!oi(i,r));return{arrayValue:{values:n}}}class ol extends By{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function GI(t){return st(t.integerValue||t.doubleValue)}function Wj(t){return vh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n){this.field=e,this.transform=n}}function X9(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ds&&i instanceof ds||r instanceof ps&&i instanceof ps?Gu(r.elements,i.elements,oi):r instanceof ol&&i instanceof ol?oi(r.Ae,i.Ae):r instanceof il&&i instanceof il}(t.transform,e.transform)}class J9{constructor(e,n){this.version=e,this.transformResults=n}}class lt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lt}static exists(e){return new lt(void 0,e)}static updateTime(e){return new lt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Uy{}function Hj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kl(t.key,lt.none()):new Gl(t.key,t.data,lt.none());{const n=t.data,r=Kt.empty();let i=new Le(ot.comparator);for(let o of e.fields)if(!i.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new Hi(t.key,r,new Cn(i.toArray()),lt.none())}}function Z9(t,e,n){t instanceof Gl?function(i,o,a){const s=i.value.clone(),u=QI(i.fieldTransforms,o,a.transformResults);s.setAll(u),o.convertToFoundDocument(a.version,s).setHasCommittedMutations()}(t,e,n):t instanceof Hi?function(i,o,a){if(!rm(i.precondition,o))return void o.convertToUnknownDocument(a.version);const s=QI(i.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(Gj(i)),u.setAll(s),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Mf(t,e,n,r){return t instanceof Gl?function(o,a,s,u){if(!rm(o.precondition,a))return s;const l=o.value.clone(),c=YI(o.fieldTransforms,u,a);return l.setAll(c),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hi?function(o,a,s,u){if(!rm(o.precondition,a))return s;const l=YI(o.fieldTransforms,u,a),c=a.data;return c.setAll(Gj(o)),c.setAll(l),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),s===null?null:s.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,a,s){return rm(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):s}(t,e,n)}function e8(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=Uj(r.transform,i||null);o!=null&&(n===null&&(n=Kt.empty()),n.set(r.field,o))}return n||null}function KI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gu(r,i,(o,a)=>X9(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gl extends Uy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hi extends Uy{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Gj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function QI(t,e,n){const r=new Map;le(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Y9(a,s,n[i]))}return r}function YI(t,e,n){const r=new Map;for(const i of t){const o=i.transform,a=n.data.field(i.field);r.set(i.field,Q9(o,a,e))}return r}class Kl extends Uy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QE extends Uy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Z9(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Lj();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let s=this.applyToLocalView(a,o.mutatedFields);s=n.has(i.key)?null:s;const u=Hj(a,s);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Gu(this.mutations,e.mutations,(n,r)=>KI(n,r))&&Gu(this.baseMutations,e.baseMutations,(n,r)=>KI(n,r))}}class XE{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){le(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return H9}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new XE(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,Oe;function Qj(t){switch(t){case z.OK:return ae(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ae(15467,{code:t})}}function Yj(t){if(t===void 0)return xt("GRPC error has no .code"),z.UNKNOWN;switch(t){case At.OK:return z.OK;case At.CANCELLED:return z.CANCELLED;case At.UNKNOWN:return z.UNKNOWN;case At.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case At.INTERNAL:return z.INTERNAL;case At.UNAVAILABLE:return z.UNAVAILABLE;case At.UNAUTHENTICATED:return z.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case At.NOT_FOUND:return z.NOT_FOUND;case At.ALREADY_EXISTS:return z.ALREADY_EXISTS;case At.PERMISSION_DENIED:return z.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case At.ABORTED:return z.ABORTED;case At.OUT_OF_RANGE:return z.OUT_OF_RANGE;case At.UNIMPLEMENTED:return z.UNIMPLEMENTED;case At.DATA_LOSS:return z.DATA_LOSS;default:return ae(39323,{code:t})}}(Oe=At||(At={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $f=null;function n8(t){if($f)throw new Error("a TestingHooksSpi instance is already set");$f=t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=new zo([4294967295,4294967295],0);function XI(t){const e=Xj().encode(t),n=new VD;return n.update(e),new Uint8Array(n.digest())}function JI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new zo([n,r],0),new zo([i,o],0)]}class ZE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mf(`Invalid padding: ${n}`);if(r<0)throw new mf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new mf(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zo.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(zo.fromNumber(r)));return i.compare(r8)===1&&(i=new zo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=XI(e),[r,i]=JI(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,i,o);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new ZE(o,i,n);return r.forEach(s=>a.insert(s)),a}insert(e){if(this.ge===0)return;const n=XI(e),[r,i]=JI(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,i,o);this.be(a)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class mf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,xd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ed(ce.min(),i,new Je(pe),kn(),ge())}}class xd{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xd(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Jj{constructor(e,n){this.targetId=e,this.Ce=n}}class Zj{constructor(e,n,r=yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ZI{constructor(){this.ve=0,this.Fe=eP(),this.Me=yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),r=ge();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae(38017,{changeType:o})}}),new xd(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=eP()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,le(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class i8{constructor(e){this.Ge=e,this.ze=new Map,this.je=kn(),this.He=vp(),this.Je=vp(),this.Ze=new Je(pe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(Wm(o))if(r===0){const a=new te(o.path);this.et(n,a,it.newNoDocument(a,ce.min()))}else le(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const s=this.ut(e),u=s?this.ct(s,e,a):1;if(u!==0){this.it(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}$f==null||$f.lt(function(c,f,d,p,_){var v,g,E;const y={localCacheCount:c,existenceFilterCount:f.count,databaseId:d.database,projectId:d.projectId},b=f.unchangedNames;return b&&(y.bloomFilter={applied:_===0,hashCount:(b==null?void 0:b.hashCount)??0,bitmapLength:((g=(v=b==null?void 0:b.bits)==null?void 0:v.bitmap)==null?void 0:g.length)??0,padding:((E=b==null?void 0:b.bits)==null?void 0:E.padding)??0,mightContain:P=>(p==null?void 0:p.mightContain(P))??!1}),y}(a,e.Ce,this.Ge.ht(),s,u))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let a,s;try{a=ji(r).toUint8Array()}catch(u){if(u instanceof mj)return Vn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{s=new ZE(a,i,o)}catch(u){return Vn(u instanceof mf?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return s.ge===0?null:s}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const a=this.Ge.ht(),s=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(s)||(this.et(n,o,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const s=this.ot(a);if(s){if(o.current&&Wm(s.target)){const u=new te(s.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,it.newNoDocument(u,e))}o.Be&&(n.set(a,o.ke()),o.Ke())}});let r=ge();this.Je.forEach((o,a)=>{let s=!0;a.forEachWhile(u=>{const l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const i=new Ed(e,n,this.Ze,this.je,r);return this.je=kn(),this.He=vp(),this.Je=vp(),this.Ze=new Je(pe),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new ZI,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Le(pe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Le(pe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ZI),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function vp(){return new Je(te.comparator)}function eP(){return new Je(te.comparator)}const o8={asc:"ASCENDING",desc:"DESCENDING"},a8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},s8={and:"AND",or:"OR"};class u8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qw(t,e){return t.useProto3Json||gd(e)?e:{value:e}}function al(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function l8(t,e){return al(t,e.toTimestamp())}function Tt(t){return le(!!t,49232),ce.fromTimestamp(function(n){const r=Di(n);return new De(r.seconds,r.nanos)}(t))}function ex(t,e){return Ww(t,e).canonicalString()}function Ww(t,e){const n=function(i){return new xe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tM(t){const e=xe.fromString(t);return le(cM(e),10190,{key:e.toString()}),e}function wh(t,e){return ex(t.databaseId,e.path)}function ei(t,e){const n=tM(e);if(n.get(1)!==t.databaseId.projectId)throw new K(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(iM(n))}function nM(t,e){return ex(t.databaseId,e)}function rM(t){const e=tM(t);return e.length===4?xe.emptyPath():iM(e)}function Hw(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iM(t){return le(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function tP(t,e,n){return{name:wh(t,e),fields:n.value.mapValue.fields}}function zy(t,e,n){const r=ei(t,e.name),i=Tt(e.updateTime),o=e.createTime?Tt(e.createTime):ce.min(),a=new Kt({mapValue:{fields:e.fields}}),s=it.newFoundDocument(r,i,o,a);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function c8(t,e){return"found"in e?function(r,i){le(!!i.found,43571),i.found.name,i.found.updateTime;const o=ei(r,i.found.name),a=Tt(i.found.updateTime),s=i.found.createTime?Tt(i.found.createTime):ce.min(),u=new Kt({mapValue:{fields:i.found.fields}});return it.newFoundDocument(o,a,s,u)}(t,e):"missing"in e?function(r,i){le(!!i.missing,3894),le(!!i.readTime,22933);const o=ei(r,i.missing),a=Tt(i.readTime);return it.newNoDocument(o,a)}(t,e):ae(7234,{result:e})}function f8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ae(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,c){return l.useProto3Json?(le(c===void 0||typeof c=="string",58123),yt.fromBase64String(c||"")):(le(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),yt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(l){const c=l.code===void 0?z.UNKNOWN:Yj(l.code);return new K(c,l.message||"")}(a);n=new Zj(r,i,o,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ei(t,r.document.name),o=Tt(r.document.updateTime),a=r.document.createTime?Tt(r.document.createTime):ce.min(),s=new Kt({mapValue:{fields:r.document.fields}}),u=it.newFoundDocument(i,o,a,s),l=r.targetIds||[],c=r.removedTargetIds||[];n=new im(l,c,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ei(t,r.document),o=r.readTime?Tt(r.readTime):ce.min(),a=it.newNoDocument(i,o),s=r.removedTargetIds||[];n=new im([],s,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ei(t,r.document),o=r.removedTargetIds||[];n=new im([],o,i,null)}else{if(!("filter"in e))return ae(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,a=new t8(i,o),s=r.targetId;n=new Jj(s,a)}}return n}function bh(t,e){let n;if(e instanceof Gl)n={update:tP(t,e.key,e.value)};else if(e instanceof Kl)n={delete:wh(t,e.key)};else if(e instanceof Hi)n={update:tP(t,e.key,e.data),updateMask:y8(e.fieldMask)};else{if(!(e instanceof QE))return ae(16599,{dt:e.type});n={verify:wh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const s=a.transform;if(s instanceof il)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof ds)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof ps)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof ol)return{fieldPath:a.field.canonicalString(),increment:s.Ae};throw ae(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:l8(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ae(27497)}(t,e.precondition)),n}function Gw(t,e){const n=e.currentDocument?function(o){return o.updateTime!==void 0?lt.updateTime(Tt(o.updateTime)):o.exists!==void 0?lt.exists(o.exists):lt.none()}(e.currentDocument):lt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,s){let u=null;if("setToServerValue"in s)le(s.setToServerValue==="REQUEST_TIME",16630,{proto:s}),u=new il;else if("appendMissingElements"in s){const c=s.appendMissingElements.values||[];u=new ds(c)}else if("removeAllFromArray"in s){const c=s.removeAllFromArray.values||[];u=new ps(c)}else"increment"in s?u=new ol(a,s.increment):ae(16584,{proto:s});const l=ot.fromServerFormat(s.fieldPath);return new bd(l,u)}(t,i)):[];if(e.update){e.update.name;const i=ei(t,e.update.name),o=new Kt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(u){const l=u.fieldPaths||[];return new Cn(l.map(c=>ot.fromServerFormat(c)))}(e.updateMask);return new Hi(i,o,a,n,r)}return new Gl(i,o,n,r)}if(e.delete){const i=ei(t,e.delete);return new Kl(i,n)}if(e.verify){const i=ei(t,e.verify);return new QE(i,n)}return ae(1463,{proto:e})}function h8(t,e){return t&&t.length>0?(le(e!==void 0,14353),t.map(n=>function(i,o){let a=i.updateTime?Tt(i.updateTime):Tt(o);return a.isEqual(ce.min())&&(a=Tt(o)),new J9(a,i.transformResults||[])}(n,e))):[]}function oM(t,e){return{documents:[nM(t,e.path)]}}function qy(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nM(t,i);const o=function(l){if(l.length!==0)return lM(Me.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:vo(d.field),direction:p8(d.dir)}}(c))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const s=qw(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:i}}function aM(t,e,n,r){const{ft:i,parent:o}=qy(t,e),a={},s=[];let u=0;return n.forEach(l=>{const c=r?l.alias:"aggregate_"+u++;a[c]=l.alias,l.aggregateType==="count"?s.push({alias:c,count:{}}):l.aggregateType==="avg"?s.push({alias:c,avg:{field:vo(l.fieldPath)}}):l.aggregateType==="sum"&&s.push({alias:c,sum:{field:vo(l.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:s,structuredQuery:i.structuredQuery},parent:i.parent},gt:a,parent:o}}function sM(t){let e=rM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){le(r===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let o=[];n.where&&(o=function(f){const d=uM(f);return d instanceof Me&&WE(d)?d.getFilters():[d]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(d=>function(_){return new _h(iu(_.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(d))}(n.orderBy));let s=null;n.limit&&(s=function(f){let d;return d=typeof f=="object"?f.value:f,gd(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,p=f.values||[];return new Zo(p,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,p=f.values||[];return new Zo(p,d)}(n.endAt)),kj(e,i,a,o,s,"F",u,l)}function d8(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=iu(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=iu(n.unaryFilter.field);return Pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=iu(n.unaryFilter.field);return Pe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=iu(n.unaryFilter.field);return Pe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(iu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Me.create(n.compositeFilter.filters.map(r=>uM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae(1026)}}(n.compositeFilter.op))}(t):ae(30097,{filter:t})}function p8(t){return o8[t]}function m8(t){return a8[t]}function g8(t){return s8[t]}function vo(t){return{fieldPath:t.canonicalString()}}function iu(t){return ot.fromServerFormat(t.fieldPath)}function lM(t){return t instanceof Pe?function(n){if(n.op==="=="){if(LI(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NAN"}};if(VI(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(LI(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NAN"}};if(VI(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(n.field),op:m8(n.op),value:n.value}}}(t):t instanceof Me?function(n){const r=n.getFilters().map(i=>lM(i));return r.length===1?r[0]:{compositeFilter:{op:g8(n.op),filters:r}}}(t):ae(54877,{filter:t})}function y8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function fM(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n,r,i,o=ce.min(),a=ce.min(),s=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=u}withSequenceNumber(e){return new mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.yt=e}}function v8(t,e){let n;if(e.document)n=zy(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=te.fromSegments(e.noDocument.path),i=gs(e.noDocument.readTime);n=it.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ae(56709);{const r=te.fromSegments(e.unknownDocument.path),i=gs(e.unknownDocument.version);n=it.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new De(i[0],i[1]);return ce.fromTimestamp(o)}(e.readTime)),n}function nP(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Km(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,a){return{name:wh(o,a.key),fields:a.data.value.mapValue.fields,updateTime:al(o,a.version.toTimestamp()),createTime:al(o,a.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ms(e.version)};else{if(!e.isUnknownDocument())return ae(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:ms(e.version)}}return r}function Km(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ms(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gs(t){const e=new De(t.seconds,t.nanoseconds);return ce.fromTimestamp(e)}function Ma(t,e){const n=(e.baseMutations||[]).map(o=>Gw(t.yt,o));for(let o=0;o<e.mutations.length-1;++o){const a=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const s=e.mutations[o+1];a.updateTransforms=s.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>Gw(t.yt,o)),i=De.fromMillis(e.localWriteTimeMs);return new YE(e.batchId,i,n,r)}function gf(t){const e=gs(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?gs(t.lastLimboFreeSnapshotVersion):ce.min();let r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){const a=o.documents.length;return le(a===1,1966,{count:a}),yn(Hl(rM(o.documents[0])))}(t.query):function(o){return yn(sM(o))}(t.query),new mi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,yt.fromBase64String(t.resumeToken))}function dM(t,e){const n=ms(e.snapshotVersion),r=ms(e.lastLimboFreeSnapshotVersion);let i;i=Wm(e.target)?oM(t.yt,e.target):qy(t.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hs(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Wy(t){const e=sM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gm(e,e.limit,"L"):e}function W_(t,e){return new JE(e.largestBatchId,Gw(t.yt,e.overlayMutation))}function rP(t,e){const n=e.path.lastSegment();return[t,gn(e.path.popLast()),n]}function iP(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ms(r.readTime),documentKey:gn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{getBundleMetadata(e,n){return oP(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:gs(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return oP(e).put(function(i){return{bundleId:i.id,createTime:ms(Tt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return aP(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:Wy(o.bundledQuery),readTime:gs(o.readTime)}}(r)})}saveNamedQuery(e,n){return aP(e).put(function(i){return{name:i.name,readTime:ms(Tt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function oP(t){return Lt(t,jy)}function aP(t){return Lt(t,My)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Hy(e,r)}getOverlay(e,n){return Uc(e).get(rP(this.userId,n)).next(r=>r?W_(this.serializer,r):null)}getOverlays(e,n){const r=Kr();return B.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,a)=>{const s=new JE(n,a);i.push(this.bt(e,s))}),B.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(a=>i.add(gn(a.getCollectionPath())));const o=[];return i.forEach(a=>{const s=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);o.push(Uc(e).X(Mw,s))}),B.waitFor(o)}getOverlaysForCollection(e,n,r){const i=Kr(),o=gn(n),a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Uc(e).H(Mw,a).next(s=>{for(const u of s){const l=W_(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=Kr();let a;const s=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Uc(e).ee({index:uj,range:s},(u,l,c)=>{const f=W_(this.serializer,l);o.size()<i||f.largestBatchId===a?(o.set(f.getKey(),f),a=f.largestBatchId):c.done()}).next(()=>o)}bt(e,n){return Uc(e).put(function(i,o,a){const[s,u,l]=rP(o,a.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:bh(i.yt,a.mutation)}}(this.serializer,this.userId,n))}}function Uc(t){return Lt(t,$y)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{St(e){return Lt(e,BE)}getSessionToken(e){return this.St(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?yt.fromUint8Array(r):yt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(st(e.integerValue));else if("doubleValue"in e){const r=st(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),fh(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Di(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(ji(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?bj(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Fy(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):ae(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var a,s;const r=e.fields||{};this.Ft(n,53);const i=tl,o=((s=(a=r[i].arrayValue)==null?void 0:a.values)==null?void 0:s.length)||0;this.Ft(n,15),n.Mt(st(o)),this.Ot(i,n),this.Ct(r[i],n)}qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),te.fromName(e).path.forEach(r=>{this.Ft(n,60),this.$t(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}$a.Wt=new $a;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=255;function b8(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function sP(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const a=b8(255&r[o]);if(i+=a,a!==8)break}return i}(t);return Math.ceil(e/8)}class E8{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ht(r.value),r=n.next();this.Jt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const i=n.codePointAt(0);this.Ht(240|i>>>18),this.Ht(128|63&i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i)}}this.Jt()}Yt(e){const n=this.en(e),r=sP(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=sP(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(Ks),this.sn(255)}_n(){this.an(Ks),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(o){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,o,!1),new Uint8Array(a.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Ks?(this.sn(Ks),this.sn(0)):this.sn(n)}Ht(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Ks?(this.an(Ks),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class x8{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class T8{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class zc{constructor(){this.cn=new E8,this.ascending=new x8(this.cn),this.descending=new T8(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n,r,i){this.hn=e,this.Pn=n,this.Tn=r,this.In=i}En(){const e=this.In.length,n=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.In,0),n!==e?r.set([0],this.In.length):++r[r.length-1],new Va(this.hn,this.Pn,this.Tn,r)}Rn(e,n,r){return{indexId:this.hn,uid:e,arrayValue:om(this.Tn),directionalValue:om(this.In),orderedDocumentKey:om(n),documentKey:r.path.toArray()}}An(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function ao(t,e){let n=t.hn-e.hn;return n!==0?n:(n=uP(t.Tn,e.Tn),n!==0?n:(n=uP(t.In,e.In),n!==0?n:te.comparator(t.Pn,e.Pn)))}function uP(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function om(t){return CD()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function lP(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class cP{constructor(e){this.Vn=new Le((n,r)=>ot.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(le(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const n=Nw(e);if(n!==void 0&&!this.pn(n))return!1;const r=Ca(e);let i=new Set,o=0,a=0;for(;o<r.length&&this.pn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){const s=this.Vn.getIterator().getNext();if(!i.has(s.field.canonicalString())){const u=r[o];if(!this.yn(s,u)||!this.wn(this.dn[a++],u))return!1}++o}for(;o<r.length;++o){const s=r[o];if(a>=this.dn.length||!this.wn(this.dn[a++],s))return!1}return!0}bn(){if(this.fn)return null;let e=new Le(ot.comparator);const n=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Za(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Za(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Za(r.field,r.dir==="asc"?0:1)));return new Qu(Qu.UNKNOWN_ID,this.collectionId,n,Yu.empty())}pn(e){for(const n of this.mn)if(this.yn(n,e))return!0;return!1}yn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}wn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t){var n,r;if(le(t instanceof Pe||t instanceof Me,20012),t instanceof Pe){if(t instanceof Cj){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(o=>Pe.create(t.field,"==",o)))||[];return Me.create(i,"or")}return t}const e=t.filters.map(i=>pM(i));return Me.create(e,t.op)}function S8(t){if(t.getFilters().length===0)return[];const e=Yw(pM(t));return le(mM(e),7391),Kw(e)||Qw(e)?[e]:e.getFilters()}function Kw(t){return t instanceof Pe}function Qw(t){return t instanceof Me&&WE(t)}function mM(t){return Kw(t)||Qw(t)||function(n){if(n instanceof Me&&Fw(n)){for(const r of n.getFilters())if(!Kw(r)&&!Qw(r))return!1;return!0}return!1}(t)}function Yw(t){if(le(t instanceof Pe||t instanceof Me,34018),t instanceof Pe)return t;if(t.filters.length===1)return Yw(t.filters[0]);const e=t.filters.map(r=>Yw(r));let n=Me.create(e,t.op);return n=Qm(n),mM(n)?n:(le(n instanceof Me,64498),le(rl(n),40251),le(n.filters.length>1,57927),n.filters.reduce((r,i)=>tx(r,i)))}function tx(t,e){let n;return le(t instanceof Pe||t instanceof Me,38388),le(e instanceof Pe||e instanceof Me,25473),n=t instanceof Pe?e instanceof Pe?function(i,o){return Me.create([i,o],"and")}(t,e):fP(t,e):e instanceof Pe?fP(e,t):function(i,o){if(le(i.filters.length>0&&o.filters.length>0,48005),rl(i)&&rl(o))return Ij(i,o.getFilters());const a=Fw(i)?i:o,s=Fw(i)?o:i,u=a.filters.map(l=>tx(l,s));return Me.create(u,"or")}(t,e),Qm(n)}function fP(t,e){if(rl(e))return Ij(e,t.getFilters());{const n=e.filters.map(r=>tx(t,r));return Me.create(n,"or")}}function Qm(t){if(le(t instanceof Pe||t instanceof Me,11850),t instanceof Pe)return t;const e=t.getFilters();if(e.length===1)return Qm(e[0]);if(Sj(t))return t;const n=e.map(i=>Qm(i)),r=[];return n.forEach(i=>{i instanceof Pe?r.push(i):i instanceof Me&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Me.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(){this.Sn=new nx}addToCollectionParentIndex(e,n){return this.Sn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Jn.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Jn.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class nx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Le(xe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Le(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="IndexedDbIndexManager",_p=new Uint8Array(0);class I8{constructor(e,n){this.databaseId=n,this.Dn=new nx,this.Cn=new Wi(r=>hs(r),(r,i)=>vd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Dn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.Dn.add(n)});const o={collectionId:r,parent:gn(i)};return dP(e).put(o)}return B.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[GD(n),""],!1,!0);return dP(e).H(i).next(o=>{for(const a of o){if(a.collectionId!==n)break;r.push(Gr(a.parent))}return r})}addFieldIndex(e,n){const r=qc(e),i=function(s){return{indexId:s.indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;const o=r.add(i);if(n.indexState){const a=Ys(e);return o.next(s=>{a.put(iP(s,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=qc(e),i=Ys(e),o=Qs(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=qc(e),r=Qs(e),i=Ys(e);return n.X().next(()=>r.X()).next(()=>i.X())}createTargetIndexes(e,n){return B.forEach(this.vn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const o=new cP(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=Qs(e);let i=!0;const o=new Map;return B.forEach(this.vn(n),a=>this.Fn(e,a).next(s=>{i&&(i=!!s),o.set(a,s)})).next(()=>{if(i){let a=ge();const s=[];return B.forEach(o,(u,l)=>{Y(hP,`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(u)} to execute ${hs(n)}`);const c=function(E,P){const T=Nw(P);if(T===void 0)return null;for(const A of Hm(E,T.fieldPath))switch(A.op){case"array-contains-any":return A.value.arrayValue.values||[];case"array-contains":return[A.value]}return null}(l,u),f=function(E,P){const T=new Map;for(const A of Ca(P))for(const x of Hm(E,A.fieldPath))switch(x.op){case"==":case"in":T.set(A.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return T.set(A.fieldPath.canonicalString(),x.value),Array.from(T.values())}return null}(l,u),d=function(E,P){const T=[];let A=!0;for(const x of Ca(P)){const S=x.kind===0?qI(E,x.fieldPath,E.startAt):WI(E,x.fieldPath,E.startAt);T.push(S.value),A&&(A=S.inclusive)}return new Zo(T,A)}(l,u),p=function(E,P){const T=[];let A=!0;for(const x of Ca(P)){const S=x.kind===0?WI(E,x.fieldPath,E.endAt):qI(E,x.fieldPath,E.endAt);T.push(S.value),A&&(A=S.inclusive)}return new Zo(T,A)}(l,u),_=this.Mn(u,l,d),y=this.Mn(u,l,p),b=this.xn(u,l,f),v=this.On(u.indexId,c,_,d.inclusive,y,p.inclusive,b);return B.forEach(v,g=>r.Z(g,n.limit).next(E=>{E.forEach(P=>{const T=te.fromSegments(P.documentKey);a.has(T)||(a=a.add(T),s.push(T))})}))}).next(()=>s)}return B.resolve(null)})}vn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=S8(Me.create(e.filters,"and")).map(r=>Uw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,n),n)}On(e,n,r,i,o,a,s){const u=(n!=null?n.length:1)*Math.max(r.length,o.length),l=u/(n!=null?n.length:1),c=[];for(let f=0;f<u;++f){const d=n?this.Nn(n[f/l]):_p,p=this.Bn(e,d,r[f%l],i),_=this.Ln(e,d,o[f%l],a),y=s.map(b=>this.Bn(e,d,b,!0));c.push(...this.createRange(p,_,y))}return c}Bn(e,n,r,i){const o=new Va(e,te.empty(),n,r);return i?o:o.En()}Ln(e,n,r,i){const o=new Va(e,te.empty(),n,r);return i?o.En():o}Fn(e,n){const r=new cP(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let a=null;for(const s of o)r.gn(s)&&(!a||s.fields.length>a.fields.length)&&(a=s);return a})}getIndexType(e,n){let r=2;const i=this.vn(n);return B.forEach(i,o=>this.Fn(e,o).next(a=>{a?r!==0&&a.fields.length<function(u){let l=new Le(ot.comparator),c=!1;for(const f of u.filters)for(const d of f.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?c=!0:l=l.add(d.field));for(const f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(c?1:0)}(o)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(n)&&i.length>1&&r===2?1:r)}kn(e,n){const r=new zc;for(const i of Ca(e)){const o=n.data.field(i.fieldPath);if(o==null)return null;const a=r.ln(i.kind);$a.Wt.Dt(o,a)}return r.un()}Nn(e){const n=new zc;return $a.Wt.Dt(e,n.ln(0)),n.un()}Kn(e,n){const r=new zc;return $a.Wt.Dt(fs(this.databaseId,n),r.ln(function(o){const a=Ca(o);return a.length===0?0:a[a.length-1].kind}(e))),r.un()}xn(e,n,r){if(r===null)return[];let i=[];i.push(new zc);let o=0;for(const a of Ca(e)){const s=r[o++];for(const u of i)if(this.qn(n,a.fieldPath)&&vh(s))i=this.Un(i,a,s);else{const l=u.ln(a.kind);$a.Wt.Dt(s,l)}}return this.$n(i)}Mn(e,n,r){return this.xn(e,n,r.position)}$n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Un(e,n,r){const i=[...e],o=[];for(const a of r.arrayValue.values||[])for(const s of i){const u=new zc;u.seed(s.un()),$a.Wt.Dt(a,u.ln(n.kind)),o.push(u)}return o}qn(e,n){return!!e.filters.find(r=>r instanceof Pe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=qc(e),i=Ys(e);return(n?r.H(jw,IDBKeyRange.bound(n,n)):r.H()).next(o=>{const a=[];return B.forEach(o,s=>i.get([s.indexId,this.uid]).next(u=>{a.push(function(c,f){const d=f?new Yu(f.sequenceNumber,new Jn(gs(f.readTime),new te(Gr(f.documentKey)),f.largestBatchId)):Yu.empty(),p=c.fields.map(([_,y])=>new Za(ot.fromServerFormat(_),y));return new Qu(c.indexId,c.collectionGroup,p,d)}(s,u))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:pe(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=qc(e),o=Ys(e);return this.Wn(e).next(a=>i.H(jw,IDBKeyRange.bound(n,n)).next(s=>B.forEach(s,u=>o.put(iP(u.indexId,this.uid,a,r)))))}updateIndexEntries(e,n){const r=new Map;return B.forEach(n,(i,o)=>{const a=r.get(i.collectionGroup);return(a?B.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(s=>(r.set(i.collectionGroup,s),B.forEach(s,u=>this.Qn(e,i,u).next(l=>{const c=this.Gn(o,u);return l.isEqual(c)?B.resolve():this.zn(e,o,u,l,c)}))))})}jn(e,n,r,i){return Qs(e).put(i.Rn(this.uid,this.Kn(r,n.key),n.key))}Hn(e,n,r,i){return Qs(e).delete(i.An(this.uid,this.Kn(r,n.key),n.key))}Qn(e,n,r){const i=Qs(e);let o=new Le(ao);return i.ee({index:sj,range:IDBKeyRange.only([r.indexId,this.uid,om(this.Kn(r,n))])},(a,s)=>{o=o.add(new Va(r.indexId,n,lP(s.arrayValue),lP(s.directionalValue)))}).next(()=>o)}Gn(e,n){let r=new Le(ao);const i=this.kn(n,e);if(i==null)return r;const o=Nw(n);if(o!=null){const a=e.data.field(o.fieldPath);if(vh(a))for(const s of a.arrayValue.values||[])r=r.add(new Va(n.indexId,e.key,this.Nn(s),i))}else r=r.add(new Va(n.indexId,e.key,_p,i));return r}zn(e,n,r,i,o){Y(hP,"Updating index entries for document '%s'",n.key);const a=[];return function(u,l,c,f,d){const p=u.getIterator(),_=l.getIterator();let y=Gs(p),b=Gs(_);for(;y||b;){let v=!1,g=!1;if(y&&b){const E=c(y,b);E<0?g=!0:E>0&&(v=!0)}else y!=null?g=!0:v=!0;v?(f(b),b=Gs(_)):g?(d(y),y=Gs(p)):(y=Gs(p),b=Gs(_))}}(i,o,ao,s=>{a.push(this.jn(e,n,r,s))},s=>{a.push(this.Hn(e,n,r,s))}),B.waitFor(a)}Wn(e){let n=1;return Ys(e).ee({index:aj,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((a,s)=>ao(a,s)).filter((a,s,u)=>!s||ao(a,u[s-1])!==0);const i=[];i.push(e);for(const a of r){const s=ao(a,e),u=ao(a,n);if(s===0)i[0]=e.En();else if(s>0&&u<0)i.push(a),i.push(a.En());else if(u>0)break}i.push(n);const o=[];for(let a=0;a<i.length;a+=2){if(this.Jn(i[a],i[a+1]))return[];const s=i[a].An(this.uid,_p,te.empty()),u=i[a+1].An(this.uid,_p,te.empty());o.push(IDBKeyRange.bound(s,u))}return o}Jn(e,n){return ao(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(pP)}getMinOffset(e,n){return B.mapArray(this.vn(n),r=>this.Fn(e,r).next(i=>i||ae(44426))).next(pP)}}function dP(t){return Lt(t,ph)}function Qs(t){return Lt(t,Nf)}function qc(t){return Lt(t,FE)}function Ys(t){return Lt(t,Rf)}function pP(t){le(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;$E(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Jn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gM=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(t,e,n){const r=t.store(xr),i=t.store(Xu),o=[],a=IDBKeyRange.only(n.batchId);let s=0;const u=r.ee({range:a},(c,f,d)=>(s++,d.delete()));o.push(u.next(()=>{le(s===1,47070,{batchId:n.batchId})}));const l=[];for(const c of n.mutations){const f=rj(e,c.key.path,n.batchId);o.push(i.delete(f)),l.push(c.key)}return B.waitFor(o).next(()=>l)}function Ym(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ae(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(gM,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);class Gy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static wt(e,n,r,i){le(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Gy(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return so(e).ee({index:Ua,range:r},(i,o,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=ou(e),a=so(e);return a.add({}).next(s=>{le(typeof s=="number",49019);const u=new YE(s,n,r,i),l=function(p,_,y){const b=y.baseMutations.map(g=>bh(p.yt,g)),v=y.mutations.map(g=>bh(p.yt,g));return{userId:_,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:b,mutations:v}}(this.serializer,this.userId,u),c=[];let f=new Le((d,p)=>pe(d.canonicalString(),p.canonicalString()));for(const d of i){const p=rj(this.userId,d.key.path,s);f=f.add(d.key.path.popLast()),c.push(a.put(l)),c.push(o.put(p,n9))}return f.forEach(d=>{c.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.Zn[s]=u.keys()}),B.waitFor(c).next(()=>u)})}lookupMutationBatch(e,n){return so(e).get(n).next(r=>r?(le(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Ma(this.serializer,r)):null)}Xn(e,n){return this.Zn[n]?B.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Zn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return so(e).ee({index:Ua,range:i},(a,s,u)=>{s.userId===this.userId&&(le(s.batchId>=r,47524,{Yn:r}),o=Ma(this.serializer,s)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=qo;return so(e).ee({index:Ua,range:n,reverse:!0},(i,o,a)=>{r=o.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,qo],[this.userId,Number.POSITIVE_INFINITY]);return so(e).H(Ua,n).next(r=>r.map(i=>Ma(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Jp(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return ou(e).ee({range:i},(a,s,u)=>{const[l,c,f]=a,d=Gr(c);if(l===this.userId&&n.path.isEqual(d))return so(e).get(f).next(p=>{if(!p)throw ae(61480,{er:a,batchId:f});le(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:f}),o.push(Ma(this.serializer,p))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(pe);const i=[];return n.forEach(o=>{const a=Jp(this.userId,o.path),s=IDBKeyRange.lowerBound(a),u=ou(e).ee({range:s},(l,c,f)=>{const[d,p,_]=l,y=Gr(p);d===this.userId&&o.path.isEqual(y)?r=r.add(_):f.done()});i.push(u)}),B.waitFor(i).next(()=>this.tr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=Jp(this.userId,r),a=IDBKeyRange.lowerBound(o);let s=new Le(pe);return ou(e).ee({range:a},(u,l,c)=>{const[f,d,p]=u,_=Gr(d);f===this.userId&&r.isPrefixOf(_)?_.length===i&&(s=s.add(p)):c.done()}).next(()=>this.tr(e,s))}tr(e,n){const r=[],i=[];return n.forEach(o=>{i.push(so(e).get(o).next(a=>{if(a===null)throw ae(35274,{batchId:o});le(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:o}),r.push(Ma(this.serializer,a))}))}),B.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return yM(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.nr(n.batchId)}),B.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return B.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return ou(e).ee({range:r},(o,a,s)=>{if(o[0]===this.userId){const u=Gr(o[1]);i.push(u)}else s.done()}).next(()=>{le(i.length===0,56720,{rr:i.map(o=>o.canonicalString())})})})}containsKey(e,n){return vM(e,this.userId,n)}ir(e){return _M(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:qo,lastStreamToken:""})}}function vM(t,e,n){const r=Jp(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let a=!1;return ou(t).ee({range:o,Y:!0},(s,u,l)=>{const[c,f,d]=s;c===e&&f===i&&(a=!0),l.done()}).next(()=>a)}function so(t){return Lt(t,xr)}function ou(t){return Lt(t,Xu)}function _M(t){return Lt(t,hh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ys(0)}static ar(){return new ys(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.ur(e).next(n=>{const r=new ys(n.highestTargetId);return n.highestTargetId=r.next(),this.cr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.ur(e).next(n=>ce.fromTimestamp(new De(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.ur(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.ur(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.cr(e,i)))}addTargetData(e,n){return this.lr(e,n).next(()=>this.ur(e).next(r=>(r.targetCount+=1,this.hr(n,r),this.cr(e,r))))}updateTargetData(e,n){return this.lr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Xs(e).delete(n.targetId)).next(()=>this.ur(e)).next(r=>(le(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return Xs(e).ee((a,s)=>{const u=gf(s);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>B.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Xs(e).ee((r,i)=>{const o=gf(i);n(o)})}ur(e){return gP(e).get(qm).next(n=>(le(n!==null,2888),n))}cr(e,n){return gP(e).put(qm,n)}lr(e,n){return Xs(e).put(dM(this.serializer,n))}hr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next(n=>n.targetCount)}getTargetData(e,n){const r=hs(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Xs(e).ee({range:i,index:oj},(a,s,u)=>{const l=gf(s);vd(n,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=_o(e);return n.forEach(a=>{const s=gn(a.path);i.push(o.put({targetId:r,path:s})),i.push(this.referenceDelegate.addReference(e,r,a))}),B.waitFor(i)}removeMatchingKeys(e,n,r){const i=_o(e);return B.forEach(n,o=>{const a=gn(o.path);return B.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=_o(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=_o(e);let o=ge();return i.ee({range:r,Y:!0},(a,s,u)=>{const l=Gr(a[1]),c=new te(l);o=o.add(c)}).next(()=>o)}containsKey(e,n){const r=gn(n.path),i=IDBKeyRange.bound([r],[GD(r)],!1,!0);let o=0;return _o(e).ee({index:LE,Y:!0,range:i},([a,s],u,l)=>{a!==0&&(o++,l.done())}).next(()=>o>0)}At(e,n){return Xs(e).get(n).next(r=>r?gf(r):null)}}function Xs(t){return Lt(t,Ju)}function gP(t){return Lt(t,es)}function _o(t){return Lt(t,Zu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="LruGarbageCollector",wM=1048576;function vP([t,e],[n,r]){const i=pe(t,n);return i===0?pe(e,r):i}class O8{constructor(e){this.Pr=e,this.buffer=new Le(vP),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();vP(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Y(yP,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sa(n)?Y(yP,"Ignoring IndexedDB error during garbage collection: ",n):await aa(n)}await this.Ar(3e5)})}}class C8{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(On.ce);const r=new O8(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(mP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mP):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,o,a,s,u,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,a=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,s=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),nu()<=Ie.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-c}ms
	Determined least recently used ${i} in `+(s-a)+`ms
	Removed ${o} targets in `+(u-s)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}}function EM(t,e){return new C8(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(e,n){this.db=e,this.garbageCollector=EM(this,n)}dr(e){const n=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}mr(e,n){return this.yr(e,(r,i)=>n(i))}addReference(e,n,r){return wp(e,r)}removeReference(e,n,r){return wp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return wp(e,n)}wr(e,n){return function(i,o){let a=!1;return _M(i).te(s=>vM(i,s,o).next(u=>(u&&(a=!0),B.resolve(!u)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.yr(e,(a,s)=>{if(s<=n){const u=this.wr(e,a).next(l=>{if(!l)return o++,r.getEntry(e,a).next(()=>(r.removeEntry(a,ce.min()),_o(e).delete(function(f){return[0,gn(f.path)]}(a))))});i.push(u)}}).next(()=>B.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return wp(e,n)}yr(e,n){const r=_o(e);let i,o=On.ce;return r.ee({index:LE},([a,s],{path:u,sequenceNumber:l})=>{a===0?(o!==On.ce&&n(new te(Gr(i)),o),o=l,i=u):o=On.ce}).next(()=>{o!==On.ce&&n(new te(Gr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wp(t,e){return _o(t).put(function(r,i){return{targetId:0,path:gn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this.changes=new Wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Sa(e).put(r)}removeEntry(e,n,r){return Sa(e).delete(function(o,a){const s=o.path.toArray();return[s.slice(0,s.length-2),s[s.length-2],Km(a),s[s.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.br(e,r)))}getEntry(e,n){let r=it.newInvalidDocument(n);return Sa(e).ee({index:Zp,range:IDBKeyRange.only(Wc(n))},(i,o)=>{r=this.Sr(n,o)}).next(()=>r)}Dr(e,n){let r={size:0,document:it.newInvalidDocument(n)};return Sa(e).ee({index:Zp,range:IDBKeyRange.only(Wc(n))},(i,o)=>{r={document:this.Sr(n,o),size:Ym(o)}}).next(()=>r)}getEntries(e,n){let r=kn();return this.Cr(e,n,(i,o)=>{const a=this.Sr(i,o);r=r.insert(i,a)}).next(()=>r)}vr(e,n){let r=kn(),i=new Je(te.comparator);return this.Cr(e,n,(o,a)=>{const s=this.Sr(o,a);r=r.insert(o,s),i=i.insert(o,Ym(a))}).next(()=>({documents:r,Fr:i}))}Cr(e,n,r){if(n.isEmpty())return B.resolve();let i=new Le(bP);n.forEach(u=>i=i.add(u));const o=IDBKeyRange.bound(Wc(i.first()),Wc(i.last())),a=i.getIterator();let s=a.getNext();return Sa(e).ee({index:Zp,range:o},(u,l,c)=>{const f=te.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;s&&bP(s,f)<0;)r(s,null),s=a.getNext();s&&s.isEqual(f)&&(r(s,l),s=a.hasNext()?a.getNext():null),s?c.j(Wc(s)):c.done()}).next(()=>{for(;s;)r(s,null),s=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const a=n.path,s=[a.popLast().toArray(),a.lastSegment(),Km(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sa(e).H(IDBKeyRange.bound(s,u,!0)).next(l=>{o==null||o.incrementDocumentReadCount(l.length);let c=kn();for(const f of l){const d=this.Sr(te.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);d.isFoundDocument()&&(wd(n,d)||i.has(d.key))&&(c=c.insert(d.key,d))}return c})}getAllFromCollectionGroup(e,n,r,i){let o=kn();const a=wP(n,r),s=wP(n,Jn.max());return Sa(e).ee({index:ij,range:IDBKeyRange.bound(a,s,!0)},(u,l,c)=>{const f=this.Sr(te.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&c.done()}).next(()=>o)}newChangeBuffer(e){return new N8(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return _P(e).get(Dw).next(n=>(le(!!n,20021),n))}br(e,n){return _P(e).put(Dw,n)}Sr(e,n){if(n){const r=v8(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ce.min())))return r}return it.newInvalidDocument(e)}}function TM(t){return new R8(t)}class N8 extends xM{constructor(e,n){super(),this.Mr=e,this.trackRemovals=n,this.Or=new Wi(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Le((o,a)=>pe(o.canonicalString(),a.canonicalString()));return this.changes.forEach((o,a)=>{const s=this.Or.get(o);if(n.push(this.Mr.removeEntry(e,o,s.readTime)),a.isValidDocument()){const u=nP(this.Mr.serializer,a);i=i.add(o.path.popLast());const l=Ym(u);r+=l-s.size,n.push(this.Mr.addEntry(e,o,u))}else if(r-=s.size,this.trackRemovals){const u=nP(this.Mr.serializer,a.convertToNoDocument(ce.min()));n.push(this.Mr.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.Mr.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.Mr.updateMetadata(e,r)),B.waitFor(n)}getFromCache(e,n){return this.Mr.Dr(e,n).next(r=>(this.Or.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Mr.vr(e,n).next(({documents:r,Fr:i})=>(i.forEach((o,a)=>{this.Or.set(o,{size:a,readTime:r.get(o).readTime})}),r))}}function _P(t){return Lt(t,dh)}function Sa(t){return Lt(t,zm)}function Wc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wP(t,e){const n=e.documentKey.path.toArray();return[t,Km(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function bP(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=pe(n[o],r[o]),i)return i;return i=pe(n.length,r.length),i||(i=pe(n[n.length-2],r[r.length-2]),i||pe(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Mf(r.mutation,i,Cn.empty(),De.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const i=Kr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let a=pf();return o.forEach((s,u)=>{a=a.insert(s,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Kr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,s)=>{n.set(a,s)})})}computeViews(e,n,r,i){let o=kn();const a=jf(),s=function(){return jf()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Hi)?o=o.insert(l.key,l):c!==void 0?(a.set(l.key,c.mutation.getFieldMask()),Mf(c.mutation,l,c.mutation.getFieldMask(),De.now())):a.set(l.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,c)=>a.set(l,c)),n.forEach((l,c)=>s.set(l,new D8(c,a.get(l)??null))),s))}recalculateAndSaveOverlays(e,n){const r=jf();let i=new Je((a,s)=>a-s),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const s of a)s.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Cn.empty();c=s.applyToLocalView(l,c),r.set(u,c);const f=(i.get(s.batchId)||ge()).add(u);i=i.insert(s.batchId,f)})}).next(()=>{const a=[],s=i.getReverseIterator();for(;s.hasNext();){const u=s.getNext(),l=u.key,c=u.value,f=Lj();c.forEach(d=>{if(!o.has(d)){const p=Hj(n.get(d),r.get(d));p!==null&&f.set(d,p),o=o.add(d)}}),a.push(this.documentOverlayCache.saveOverlays(e,l,f))}return B.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return F9(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):B.resolve(Kr());let s=Ku,u=o;return a.next(l=>B.forEach(l,(c,f)=>(s<f.largestBatchId&&(s=f.largestBatchId),o.get(c)?B.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ge())).next(c=>({batchId:s,changes:Vj(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=pf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let a=pf();return this.indexManager.getCollectionParents(e,o).next(s=>B.forEach(s,u=>{const l=function(f,d){return new qi(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(c=>{c.forEach((f,d)=>{a=a.insert(f,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(a=>{o.forEach((u,l)=>{const c=l.getKey();a.get(c)===null&&(a=a.insert(c,it.newInvalidDocument(c)))});let s=pf();return a.forEach((u,l)=>{const c=o.get(u);c!==void 0&&Mf(c.mutation,l,Cn.empty(),De.now()),wd(n,l)&&(s=s.insert(u,l))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return B.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Tt(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:Wy(i.bundledQuery),readTime:Tt(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(){this.overlays=new Je(te.comparator),this.Lr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Kr();return B.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.bt(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Kr(),o=n.length+1,a=new te(n.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const u=s.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Je((l,c)=>l-c);const a=this.overlays.getIterator();for(;a.hasNext();){const l=a.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=o.get(l.largestBatchId);c===null&&(c=Kr(),o=o.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const s=Kr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>s.set(l,c)),!(s.size()>=i)););return B.resolve(s)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new JE(n,r));let o=this.Lr.get(n);o===void 0&&(o=ge(),this.Lr.set(n,o)),this.Lr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.kr=new Le(qt.Kr),this.qr=new Le(qt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new qt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new qt(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new te(new xe([])),r=new qt(n,e),i=new qt(n,e+1),o=[];return this.qr.forEachInRange([r,i],a=>{this.Wr(a),o.push(a.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new te(new xe([])),r=new qt(n,e),i=new qt(n,e+1);let o=ge();return this.qr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new qt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return te.comparator(e.key,n.key)||pe(e.Hr,n.Hr)}static Ur(e,n){return pe(e.Hr,n.Hr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Le(qt.Kr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new YE(o,n,r,i);this.mutationQueue.push(a);for(const s of i)this.Jr=this.Jr.add(new qt(s.key,o)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),o=i<0?0:i;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?qo:this.Yn-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qt(n,0),i=new qt(n,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],a=>{const s=this.Zr(a.Hr);o.push(s)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(pe);return n.forEach(i=>{const o=new qt(i,0),a=new qt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,a],s=>{r=r.add(s.Hr)})}),B.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;te.isDocumentKey(o)||(o=o.child(""));const a=new qt(new te(o),0);let s=new Le(pe);return this.Jr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(s=s.add(u.Hr)),!0)},a),B.resolve(this.Yr(s))}Yr(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){le(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return B.forEach(n.mutations,i=>{const o=new qt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new qt(n,0),i=this.Jr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.ti=e,this.docs=function(){return new Je(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,a=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():it.newInvalidDocument(n))}getEntries(e,n){let r=kn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():it.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=kn();const a=n.path,s=new te(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||$E(JD(c),r)<=0||(i.has(c.key)||wd(n,c))&&(o=o.insert(c.key,c.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ae(9500)}ni(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new F8(this)}getSize(e){return B.resolve(this.size)}}class F8 extends xM{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e){this.persistence=e,this.ri=new Wi(n=>hs(n),vd),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.ii=0,this.si=new rx,this.targetCount=0,this.oi=ys._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),B.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ys(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.lr(n),B.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ri.forEach((a,s)=>{s.sequenceNumber<=n&&r.get(s.targetId)===null&&(this.ri.delete(a),o.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),B.waitFor(o).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n){this._i={},this.overlays={},this.ai=new On(0),this.ui=!1,this.ui=!0,this.ci=new $8,this.referenceDelegate=e(this),this.li=new B8(this),this.indexManager=new A8,this.remoteDocumentCache=function(i){return new L8(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new hM(n),this.Pi=new j8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new M8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new V8(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const i=new U8(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(o=>this.referenceDelegate.Ii(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return B.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class U8 extends ej{constructor(e){super(),this.currentSequenceNumber=e}}class Ky{constructor(e){this.persistence=e,this.Ri=new rx,this.Ai=null}static Vi(e){return new Ky(e)}get di(){if(this.Ai)return this.Ai;throw ae(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,r=>{const i=te.fromPath(r);return this.mi(e,i).next(o=>{o||n.removeEntry(i,ce.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Xm{constructor(e,n){this.persistence=e,this.fi=new Wi(r=>gn(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=EM(this,n)}static Vi(e,n){return new Xm(e,n)}Ti(){}Ii(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return B.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(o=>o?B.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,a=>this.wr(e,a,n).next(s=>{s||(r++,o.removeEntry(a,ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),B.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=tm(e.data.value)),n}wr(e,n,r){return B.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return B.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e){this.serializer=e}k(e,n,r,i){const o=new Dy("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore(yd)}(e),function(u){u.createObjectStore(hh,{keyPath:t9}),u.createObjectStore(xr,{keyPath:RI,autoIncrement:!0}).createIndex(Ua,NI,{unique:!0}),u.createObjectStore(Xu)}(e),EP(e),function(u){u.createObjectStore(ka)}(e));let a=B.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore(Zu),u.deleteObjectStore(Ju),u.deleteObjectStore(es)}(e),EP(e)),a=a.next(()=>function(u){const l=u.store(es),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ce.min().toTimestamp(),targetCount:0};return l.put(qm,c)}(o))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(u,l){return l.store(xr).H().next(f=>{u.deleteObjectStore(xr),u.createObjectStore(xr,{keyPath:RI,autoIncrement:!0}).createIndex(Ua,NI,{unique:!0});const d=l.store(xr),p=f.map(_=>d.put(_));return B.waitFor(p)})}(e,o))),a=a.next(()=>{(function(u){u.createObjectStore(el,{keyPath:c9})})(e)})),r<5&&i>=5&&(a=a.next(()=>this.gi(o))),r<6&&i>=6&&(a=a.next(()=>(function(u){u.createObjectStore(dh)}(e),this.pi(o)))),r<7&&i>=7&&(a=a.next(()=>this.yi(o))),r<8&&i>=8&&(a=a.next(()=>this.wi(e,o))),r<9&&i>=9&&(a=a.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(a=a.next(()=>this.bi(o))),r<11&&i>=11&&(a=a.next(()=>{(function(u){u.createObjectStore(jy,{keyPath:f9})})(e),function(u){u.createObjectStore(My,{keyPath:h9})}(e)})),r<12&&i>=12&&(a=a.next(()=>{(function(u){const l=u.createObjectStore($y,{keyPath:_9});l.createIndex(Mw,w9,{unique:!1}),l.createIndex(uj,b9,{unique:!1})})(e)})),r<13&&i>=13&&(a=a.next(()=>function(u){const l=u.createObjectStore(zm,{keyPath:r9});l.createIndex(Zp,i9),l.createIndex(ij,o9)}(e)).next(()=>this.Si(e,o)).next(()=>e.deleteObjectStore(ka))),r<14&&i>=14&&(a=a.next(()=>this.Di(e,o))),r<15&&i>=15&&(a=a.next(()=>function(u){u.createObjectStore(FE,{keyPath:d9,autoIncrement:!0}).createIndex(jw,p9,{unique:!1}),u.createObjectStore(Rf,{keyPath:m9}).createIndex(aj,g9,{unique:!1}),u.createObjectStore(Nf,{keyPath:y9}).createIndex(sj,v9,{unique:!1})}(e))),r<16&&i>=16&&(a=a.next(()=>{n.objectStore(Rf).clear()}).next(()=>{n.objectStore(Nf).clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(u){u.createObjectStore(BE,{keyPath:E9})})(e)})),r<18&&i>=18&&CD()&&(a=a.next(()=>{n.objectStore(Rf).clear()}).next(()=>{n.objectStore(Nf).clear()})),a}pi(e){let n=0;return e.store(ka).ee((r,i)=>{n+=Ym(i)}).next(()=>{const r={byteSize:n};return e.store(dh).put(Dw,r)})}gi(e){const n=e.store(hh),r=e.store(xr);return n.H().next(i=>B.forEach(i,o=>{const a=IDBKeyRange.bound([o.userId,qo],[o.userId,o.lastAcknowledgedBatchId]);return r.H(Ua,a).next(s=>B.forEach(s,u=>{le(u.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});const l=Ma(this.serializer,u);return yM(e,o.userId,l).next(()=>{})}))}))}yi(e){const n=e.store(Zu),r=e.store(ka);return e.store(es).get(qm).next(i=>{const o=[];return r.ee((a,s)=>{const u=new xe(a),l=function(f){return[0,gn(f)]}(u);o.push(n.get(l).next(c=>c?B.resolve():(f=>n.put({targetId:0,path:gn(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>B.waitFor(o))})}wi(e,n){e.createObjectStore(ph,{keyPath:l9});const r=n.store(ph),i=new nx,o=a=>{if(i.add(a)){const s=a.lastSegment(),u=a.popLast();return r.put({collectionId:s,parent:gn(u)})}};return n.store(ka).ee({Y:!0},(a,s)=>{const u=new xe(a);return o(u.popLast())}).next(()=>n.store(Xu).ee({Y:!0},([a,s,u],l)=>{const c=Gr(s);return o(c.popLast())}))}bi(e){const n=e.store(Ju);return n.ee((r,i)=>{const o=gf(i),a=dM(this.serializer,o);return n.put(a)})}Si(e,n){const r=n.store(ka),i=[];return r.ee((o,a)=>{const s=n.store(zm),u=function(f){return f.document?new te(xe.fromString(f.document.name).popFirst(5)):f.noDocument?te.fromSegments(f.noDocument.path):f.unknownDocument?te.fromSegments(f.unknownDocument.path):ae(36783)}(a).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(s.put(l))}).next(()=>B.waitFor(i))}Di(e,n){const r=n.store(xr),i=TM(this.serializer),o=new ix(Ky.Vi,this.serializer.yt);return r.H().next(a=>{const s=new Map;return a.forEach(u=>{let l=s.get(u.userId)??ge();Ma(this.serializer,u).keys().forEach(c=>l=l.add(c)),s.set(u.userId,l)}),B.forEach(s,(u,l)=>{const c=new Gt(l),f=Hy.wt(this.serializer,c),d=o.getIndexManager(c),p=Gy.wt(c,this.serializer,d,o.referenceDelegate);return new SM(i,p,f,d).recalculateAndSaveOverlaysForDocumentKeys(new $w(n,On.ce),u).next()})})}}function EP(t){t.createObjectStore(Zu,{keyPath:s9}).createIndex(LE,u9,{unique:!0}),t.createObjectStore(Ju,{keyPath:"targetId"}).createIndex(oj,a9,{unique:!0}),t.createObjectStore(es)}const uo="IndexedDbPersistence",H_=18e5,G_=5e3,K_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",AM="main";class ox{constructor(e,n,r,i,o,a,s,u,l,c,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ci=o,this.window=a,this.document=s,this.Fi=l,this.Mi=c,this.xi=f,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=d=>Promise.resolve(),!ox.v())throw new K(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new k8(this,i),this.Ki=n+AM,this.serializer=new hM(u),this.qi=new Zr(this.Ki,this.xi,new z8(this.serializer)),this.ci=new w8,this.li=new P8(this.referenceDelegate,this.serializer),this.remoteDocumentCache=TM(this.serializer),this.Pi=new _8,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,c===!1&&xt(uo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K(z.FAILED_PRECONDITION,K_);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.li.getHighestSequenceNumber(e))}).then(e=>{this.ai=new On(e,this.Fi)}).then(()=>{this.ui=!0}).catch(e=>(this.qi&&this.qi.close(),Promise.reject(e)))}zi(e){return this.ki=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget(async()=>{this.started&&await this.$i()}))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ji(e).next(n=>{n||(this.isPrimary=!1,this.Ci.enqueueRetryable(()=>this.ki(!1)))})}).next(()=>this.Hi(e)).next(n=>this.isPrimary&&!n?this.Ji(e).next(()=>!1):!!n&&this.Zi(e).next(()=>!0))).catch(e=>{if(sa(e))return Y(uo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Y(uo,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable(()=>this.ki(e)),this.isPrimary=e})}ji(e){return Hc(e).get(Hs).next(n=>B.resolve(this.Xi(n)))}Yi(e){return bp(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,H_)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Lt(n,el);return r.H().next(i=>{const o=this.ns(i,H_),a=i.filter(s=>o.indexOf(s)===-1);return B.forEach(a,s=>r.delete(s.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ui)for(const n of e)this.Ui.removeItem(this.rs(n.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.$i().then(()=>this.es()).then(()=>this.Gi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?B.resolve(!0):Hc(e).get(Hs).next(n=>{if(n!==null&&this.ts(n.leaseTimestampMs,G_)&&!this.ss(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new K(z.FAILED_PRECONDITION,K_);return!1}}return!(!this.networkEnabled||!this.inForeground)||bp(e).H().next(r=>this.ns(r,G_).find(i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,s=this.networkEnabled===i.networkEnabled;if(o||a&&s)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Y(uo,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[yd,el],e=>{const n=new $w(e,On.ce);return this.Ji(n).next(()=>this.Yi(n))}),this.qi.close(),this.ls()}ns(e,n){return e.filter(r=>this.ts(r.updateTimeMs,n)&&!this.ss(r.clientId))}hs(){return this.runTransaction("getActiveClients","readonly",e=>bp(e).H().next(n=>this.ns(n,H_).map(r=>r.clientId)))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,n){return Gy.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new I8(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Hy.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,n,r){Y(uo,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===18?S9:u===17?hj:u===16?T9:u===15?UE:u===14?fj:u===13?cj:u===12?x9:u===11?lj:void ae(60245)}(this.xi);let a;return this.qi.runTransaction(e,i,o,s=>(a=new $w(s,this.ai?this.ai.next():On.ce),n==="readwrite-primary"?this.ji(a).next(u=>!!u||this.Hi(a)).next(u=>{if(!u)throw xt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable(()=>this.ki(!1)),new K(z.FAILED_PRECONDITION,ZD);return r(a)}).next(u=>this.Zi(a).next(()=>u)):this.Ps(a).next(()=>r(a)))).then(s=>(a.raiseOnCommittedEvent(),s))}Ps(e){return Hc(e).get(Hs).next(n=>{if(n!==null&&this.ts(n.leaseTimestampMs,G_)&&!this.ss(n.ownerId)&&!this.Xi(n)&&!(this.Mi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K(z.FAILED_PRECONDITION,K_)})}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hc(e).put(Hs,n)}static v(){return Zr.v()}Ji(e){const n=Hc(e);return n.get(Hs).next(r=>this.Xi(r)?(Y(uo,"Releasing primary lease."),n.delete(Hs)):B.resolve())}ts(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(xt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.$i()))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const n=/(?:Version|Mobile)\/1[456]/;OD()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var n;try{const r=((n=this.Ui)==null?void 0:n.getItem(this.rs(e)))!==null;return Y(uo,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xt(uo,"Failed to get zombied client id.",r),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){xt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Hc(t){return Lt(t,yd)}function bp(t){return Lt(t,el)}function ax(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=ge(),i=ge();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new sx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return OD()?8:tj($t())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.gs(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ps(e,n,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new q8;return this.ys(e,n,a).next(s=>{if(o.result=s,this.As)return this.ws(e,n,a,s.size)})}).next(()=>o.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(nu()<=Ie.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",ru(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(nu()<=Ie.DEBUG&&Y("QueryEngine","Query:",ru(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(nu()<=Ie.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",ru(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yn(n))):B.resolve())}gs(e,n){if(HI(n))return B.resolve(null);let r=yn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Gm(n,null,"F"),r=yn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=ge(...o);return this.fs.getDocuments(e,a).next(s=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.bs(n,s);return this.Ss(n,l,a,u.readTime)?this.gs(e,Gm(n,null,"F")):this.Ds(e,l,n,u)}))})))}ps(e,n,r,i){return HI(n)||i.isEqual(ce.min())?B.resolve(null):this.fs.getDocuments(e,r).next(o=>{const a=this.bs(n,o);return this.Ss(n,a,r,i)?B.resolve(null):(nu()<=Ie.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ru(n)),this.Ds(e,a,n,XD(i,Ku)).next(s=>s))})}bs(e,n){let r=new Le(Mj(e));return n.forEach((i,o)=>{wd(e,o)&&(r=r.add(o))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,n,r){return nu()<=Ie.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",ru(n)),this.fs.getDocumentsMatchingQuery(e,n,Jn.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="LocalStore",W8=3e8;class H8{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new Je(pe),this.Fs=new Wi(o=>hs(o),vd),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function PM(t,e,n,r){return new H8(t,e,n,r)}async function OM(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],s=[];let u=ge();for(const l of i){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of o){s.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ns:l,removedBatchIds:a,addedBatchIds:s}))})})}function G8(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.xs.newChangeBuffer({trackRemovals:!0});return function(s,u,l,c){const f=l.batch,d=f.keys();let p=B.resolve();return d.forEach(_=>{p=p.next(()=>c.getEntry(u,_)).next(y=>{const b=l.docVersions.get(_);le(b!==null,48541),y.version.compareTo(b)<0&&(f.applyToRemoteDocument(y,l),y.isValidDocument()&&(y.setReadTime(l.commitVersion),c.addEntry(y)))})}),p.next(()=>s.mutationQueue.removeMutationBatch(u,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let u=ge();for(let l=0;l<s.mutationResults.length;++l)s.mutationResults[l].transformResults.length>0&&(u=u.add(s.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function CM(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function K8(t,e){const n=ne(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const s=[];e.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;s.push(n.li.removeMatchingKeys(o,c.removedDocuments,f).next(()=>n.li.addMatchingKeys(o,c.addedDocuments,f)));let p=d.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(yt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(f,p),function(y,b,v){return y.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=W8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,p,c)&&s.push(n.li.updateTargetData(o,p))});let u=kn(),l=ge();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,c))}),s.push(kM(o,a,e.documentUpdates).next(c=>{u=c.Bs,l=c.Ls})),!r.isEqual(ce.min())){const c=n.li.getLastRemoteSnapshotVersion(o).next(f=>n.li.setTargetsMetadata(o,o.currentSequenceNumber,r));s.push(c)}return B.waitFor(s).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.vs=i,o))}function kM(t,e,n){let r=ge(),i=ge();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=kn();return n.forEach((s,u)=>{const l=o.get(s);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(s)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(s,u.readTime),a=a.insert(s,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),a=a.insert(s,u)):Y(ux,"Ignoring outdated watch update for ",s,". Current version:",l.version," Watch version:",u.version)}),{Bs:a,Ls:i}})}function Q8(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qo),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sl(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(o=>o?(i=o,B.resolve(i)):n.li.allocateTargetId(r).next(a=>(i=new mi(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function ul(t,e,n){const r=ne(t),i=r.vs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!sa(a))throw a;Y(ux,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function Jm(t,e,n){const r=ne(t);let i=ce.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,l,c){const f=ne(u),d=f.Fs.get(c);return d!==void 0?B.resolve(f.vs.get(d)):f.li.getTargetData(l,c)}(r,a,yn(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,s.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?i:ce.min(),n?o:ge())).next(s=>(DM(r,jj(e),s),{documents:s,ks:o})))}function RM(t,e){const n=ne(t),r=ne(n.li),i=n.vs.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.At(o,e).next(a=>a?a.target:null))}function NM(t,e){const n=ne(t),r=n.Ms.get(e)||ce.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.xs.getAllFromCollectionGroup(i,e,XD(r,Ku),Number.MAX_SAFE_INTEGER)).then(i=>(DM(n,e,i),i))}function DM(t,e,n){let r=t.Ms.get(e)||ce.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ms.set(e,r)}async function Y8(t,e,n,r){const i=ne(t);let o=ge(),a=kn();for(const l of n){const c=e.Ks(l.metadata.name);l.document&&(o=o.add(c));const f=e.qs(l);f.setReadTime(e.Us(l.metadata.readTime)),a=a.insert(c,f)}const s=i.xs.newChangeBuffer({trackRemovals:!0}),u=await sl(i,function(c){return yn(Hl(xe.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>kM(l,s,a).next(c=>(s.apply(l),c)).next(c=>i.li.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.li.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,c.Bs,c.Ls)).next(()=>c.Bs)))}async function X8(t,e,n=ge()){const r=await sl(t,yn(Wy(e.bundledQuery))),i=ne(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const a=Tt(e.readTime);if(r.snapshotVersion.compareTo(a)>=0)return i.Pi.saveNamedQuery(o,e);const s=r.withResumeToken(yt.EMPTY_BYTE_STRING,a);return i.vs=i.vs.insert(s.targetId,s),i.li.updateTargetData(o,s).next(()=>i.li.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.li.addMatchingKeys(o,n,r.targetId)).next(()=>i.Pi.saveNamedQuery(o,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM="firestore_clients";function xP(t,e){return`${jM}_${t}_${e}`}const MM="firestore_mutations";function TP(t,e,n){let r=`${MM}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const $M="firestore_targets";function Q_(t,e){return`${$M}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="SharedClientState";class Zm{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static $s(e,n,r){const i=JSON.parse(r);let o,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(o=new K(i.error.code,i.error.message))),a?new Zm(e,n,i.state,o):(xt(zr,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vf{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static $s(e,n){const r=JSON.parse(n);let i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new K(r.error.code,r.error.message))),o?new Vf(e,r.state,i):(xt(zr,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static $s(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=GE();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=nj(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new eg(e,o):(xt(zr,`Failed to parse client data for instance '${e}': ${n}`),null)}}class lx{constructor(e,n){this.clientId=e,this.onlineState=n}static $s(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new lx(n.clientId,n.onlineState):(xt(zr,`Failed to parse online state: ${e}`),null)}}class Xw{constructor(){this.activeTargetIds=GE()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Y_{constructor(e,n,r,i,o){this.window=e,this.Ci=n,this.persistenceKey=r,this.zs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Je(pe),this.started=!1,this.Zs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=xP(this.persistenceKey,this.zs),this.Ys=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Xw),this.eo=new RegExp(`^${jM}_${a}_([^_]*)$`),this.no=new RegExp(`^${MM}_${a}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${$M}_${a}_(\\d+)$`),this.io=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.so=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const i=this.getItem(xP(this.persistenceKey,r));if(i){const o=eg.$s(r,i);o&&(this.Js=this.Js.insert(o.clientId,o))}}this.oo();const n=this.storage.getItem(this.io);if(n){const r=this._o(n);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let n=!1;return this.Js.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,n,r){this.co(e,n,r),this.lo(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Q_(this.persistenceKey,e));if(i){const o=Vf.$s(e,i);o&&(r=o.state)}}return n&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Q_(this.persistenceKey,e))}updateQueryState(e,n,r){this.Po(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.lo(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Y(zr,"READ",e,n),n}setItem(e,n){Y(zr,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Y(zr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(Y(zr,"EVENT",n.key,n.newValue),n.key===this.Xs)return void xt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.eo.test(n.key)){if(n.newValue==null){const r=this.Eo(n.key);return this.Ro(r,null)}{const r=this.Ao(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(n.key)){if(n.newValue!==null){const r=this.Vo(n.key,n.newValue);if(r)return this.mo(r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(n.key===this.io){if(n.newValue!==null){const r=this._o(n.newValue);if(r)return this.ao(r)}}else if(n.key===this.Ys){const r=function(o){let a=On.ce;if(o!=null)try{const s=JSON.parse(o);le(typeof s=="number",30636,{yo:o}),a=s}catch(s){xt(zr,"Failed to read sequence number from WebStorage",s)}return a}(n.newValue);r!==On.ce&&this.sequenceNumberHandler(r)}else if(n.key===this.so){const r=this.wo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(n)})}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,n,r){const i=new Zm(this.currentUser,e,n,r),o=TP(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}lo(e){const n=TP(this.persistenceKey,this.currentUser,e);this.removeItem(n)}To(e){const n={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(n))}Po(e,n,r){const i=Q_(this.persistenceKey,e),o=new Vf(e,n,r);this.setItem(i,o.Ws())}Io(e){const n=JSON.stringify(Array.from(e));this.setItem(this.so,n)}Eo(e){const n=this.eo.exec(e);return n?n[1]:null}Ao(e,n){const r=this.Eo(e);return eg.$s(r,n)}Vo(e,n){const r=this.no.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Zm.$s(new Gt(o),i,n)}fo(e,n){const r=this.ro.exec(e),i=Number(r[1]);return Vf.$s(i,n)}_o(e){return lx.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);Y(zr,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Js.insert(e,n):this.Js.remove(e),i=this.uo(this.Js),o=this.uo(r),a=[],s=[];return o.forEach(u=>{i.has(u)||a.push(u)}),i.forEach(u=>{o.has(u)||s.push(u)}),this.syncEngine.Co(a,s).then(()=>{this.Js=r})}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let n=GE();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class VM{constructor(){this.vo=new Xw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Xw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP="ConnectivityMonitor";class AP{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Y(SP,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Y(SP,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ep=null;function Jw(){return Ep===null?Ep=function(){return 268435456+Math.round(2147483648*Math.random())}():Ep++,"0x"+Ep.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="RestConnection",Z8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class eq{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===gh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const a=Jw(),s=this.Qo(e,n.toUriEncodedString());Y(X_,`Sending RPC '${e}' ${a}:`,s,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,i,o);const{host:l}=new URL(s),c=Ps(l);return this.zo(e,s,u,r,c).then(f=>(Y(X_,`Received RPC '${e}' ${a}: `,f),f),f=>{throw Vn(X_,`RPC '${e}' ${a} failed with error: `,f,"url: ",s,"request:",r),f})}jo(e,n,r,i,o,a){return this.Wo(e,n,r,i,o)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Qo(e,n){const r=Z8[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tq{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection",Gc=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})};class Cu extends eq{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Cu.c_){const e=UD();Gc(e,BD.STAT_EVENT,n=>{n.stat===Ow.PROXY?Y(ln,"STAT_EVENT: detected buffering proxy"):n.stat===Ow.NOPROXY&&Y(ln,"STAT_EVENT: detected no buffering proxy")}),Cu.c_=!0}}zo(e,n,r,i,o){const a=Jw();return new Promise((s,u)=>{const l=new LD;l.setWithCredentials(!0),l.listenOnce(FD.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Xp.NO_ERROR:const f=l.getResponseJson();Y(ln,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),s(f);break;case Xp.TIMEOUT:Y(ln,`RPC '${e}' ${a} timed out`),u(new K(z.DEADLINE_EXCEEDED,"Request time out"));break;case Xp.HTTP_ERROR:const d=l.getStatus();if(Y(ln,`RPC '${e}' ${a} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const y=function(v){const g=v.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(g)>=0?g:z.UNKNOWN}(_.status);u(new K(y,_.message))}else u(new K(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new K(z.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{l_:e,streamId:a,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{Y(ln,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(i);Y(ln,`RPC '${e}' ${a} sending request:`,i),l.send(n,"POST",c,r,15)})}T_(e,n,r){const i=Jw(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Go(s.initMessageHeaders,n,r),s.encodeInitMessageHeaders=!0;const l=o.join("");Y(ln,`Creating RPC '${e}' stream ${i}: ${l}`,s);const c=a.createWebChannel(l,s);this.I_(c);let f=!1,d=!1;const p=new tq({Ho:_=>{d?Y(ln,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(f||(Y(ln,`Opening RPC '${e}' stream ${i} transport.`),c.open(),f=!0),Y(ln,`RPC '${e}' stream ${i} sending:`,_),c.send(_))},Jo:()=>c.close()});return Gc(c,df.EventType.OPEN,()=>{d||(Y(ln,`RPC '${e}' stream ${i} transport opened.`),p.i_())}),Gc(c,df.EventType.CLOSE,()=>{d||(d=!0,Y(ln,`RPC '${e}' stream ${i} transport closed`),p.o_(),this.E_(c))}),Gc(c,df.EventType.ERROR,_=>{d||(d=!0,Vn(ln,`RPC '${e}' stream ${i} transport errored. Name:`,_.name,"Message:",_.message),p.o_(new K(z.UNAVAILABLE,"The operation could not be completed")))}),Gc(c,df.EventType.MESSAGE,_=>{var y;if(!d){const b=_.data[0];le(!!b,16349);const v=b,g=(v==null?void 0:v.error)||((y=v[0])==null?void 0:y.error);if(g){Y(ln,`RPC '${e}' stream ${i} received error:`,g);const E=g.status;let P=function(x){const S=At[x];if(S!==void 0)return Yj(S)}(E),T=g.message;E==="NOT_FOUND"&&T.includes("database")&&T.includes("does not exist")&&T.includes(this.databaseId.database)&&Vn(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),P===void 0&&(P=z.INTERNAL,T="Unknown error status: "+E+" with message "+g.message),d=!0,p.o_(new K(P,T)),c.close()}else Y(ln,`RPC '${e}' stream ${i} received:`,b),p.__(b)}}),Cu.u_(),setTimeout(()=>{p.s_()},0),p}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return zD()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nq(t){return new Cu(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(){return typeof window<"u"?window:null}function am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t){return new u8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cu.c_=!1;class cx{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="PersistentStream";class FM{constructor(e,n,r,i,o,a,s,u){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(xt(n.toString()),xt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new K(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(IP,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(Y(IP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rq extends FM{constructor(e,n,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=f8(this.serializer,e),r=function(o){if(!("targetChange"in o))return ce.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ce.min():a.readTime?Tt(a.readTime):ce.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Hw(this.serializer),n.addTarget=function(o,a){let s;const u=a.target;if(s=Wm(u)?{documents:oM(o,u)}:{query:qy(o,u).ft},s.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){s.resumeToken=eM(o,a.resumeToken);const l=qw(o,a.expectedCount);l!==null&&(s.expectedCount=l)}else if(a.snapshotVersion.compareTo(ce.min())>0){s.readTime=al(o,a.snapshotVersion.toTimestamp());const l=qw(o,a.expectedCount);l!==null&&(s.expectedCount=l)}return s}(this.serializer,e);const r=d8(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Hw(this.serializer),n.removeTarget=e,this.K_(n)}}class iq extends FM{constructor(e,n,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=h8(e.writeResults,e.commitTime),r=Tt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Hw(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bh(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{}class aq extends oq{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new K(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,Ww(n,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(z.UNKNOWN,o.toString())})}jo(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.jo(e,Ww(n,r),i,a,s,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(z.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function sq(t,e,n,r){return new aq(t,e,n,r)}class uq{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xt(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="RemoteStore";class lq{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(a=>{r.enqueueAndForget(async()=>{la(this)&&(Y(vs,"Restarting streams for network reachability change."),await async function(u){const l=ne(u);l.Ea.add(4),await Ql(l),l.Va.set("Unknown"),l.Ea.delete(4),await Td(l)}(this))})}),this.Va=new uq(r,i)}}async function Td(t){if(la(t))for(const e of t.Ra)await e(!0)}async function Ql(t){for(const e of t.Ra)await e(!1)}function Qy(t,e){const n=ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),dx(n)?hx(n):Xl(n).O_()&&fx(n,e))}function ll(t,e){const n=ne(t),r=Xl(n);n.Ia.delete(e),r.O_()&&BM(n,e),n.Ia.size===0&&(r.O_()?r.L_():la(n)&&n.Va.set("Unknown"))}function fx(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xl(t).Z_(e)}function BM(t,e){t.da.$e(e),Xl(t).X_(e)}function hx(t){t.da=new i8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xl(t).start(),t.Va.ua()}function dx(t){return la(t)&&!Xl(t).x_()&&t.Ia.size>0}function la(t){return ne(t).Ea.size===0}function UM(t){t.da=void 0}async function cq(t){t.Va.set("Online")}async function fq(t){t.Ia.forEach((e,n)=>{fx(t,e)})}async function hq(t,e){UM(t),dx(t)?(t.Va.ha(e),hx(t)):t.Va.set("Unknown")}async function dq(t,e,n){if(t.Va.set("Online"),e instanceof Zj&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const s of o.targetIds)i.Ia.has(s)&&(await i.remoteSyncer.rejectListen(s,a),i.Ia.delete(s),i.da.removeTarget(s))}(t,e)}catch(r){Y(vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tg(t,r)}else if(e instanceof im?t.da.Xe(e):e instanceof Jj?t.da.st(e):t.da.tt(e),!n.isEqual(ce.min()))try{const r=await CM(t.localStore);n.compareTo(r)>=0&&await function(o,a){const s=o.da.Tt(a);return s.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=o.Ia.get(l);c&&o.Ia.set(l,c.withResumeToken(u.resumeToken,a))}}),s.targetMismatches.forEach((u,l)=>{const c=o.Ia.get(u);if(!c)return;o.Ia.set(u,c.withResumeToken(yt.EMPTY_BYTE_STRING,c.snapshotVersion)),BM(o,u);const f=new mi(c.target,u,l,c.sequenceNumber);fx(o,f)}),o.remoteSyncer.applyRemoteEvent(s)}(t,n)}catch(r){Y(vs,"Failed to raise snapshot:",r),await tg(t,r)}}async function tg(t,e,n){if(!sa(e))throw e;t.Ea.add(1),await Ql(t),t.Va.set("Offline"),n||(n=()=>CM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(vs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Td(t)})}function zM(t,e){return e().catch(n=>tg(t,n,e))}async function Yl(t){const e=ne(t),n=ea(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qo;for(;pq(e);)try{const i=await Q8(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,mq(e,i)}catch(i){await tg(e,i)}qM(e)&&WM(e)}function pq(t){return la(t)&&t.Ta.length<10}function mq(t,e){t.Ta.push(e);const n=ea(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function qM(t){return la(t)&&!ea(t).x_()&&t.Ta.length>0}function WM(t){ea(t).start()}async function gq(t){ea(t).ra()}async function yq(t){const e=ea(t);for(const n of t.Ta)e.ea(n.mutations)}async function vq(t,e,n){const r=t.Ta.shift(),i=XE.from(r,e,n);await zM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Yl(t)}async function _q(t,e){e&&ea(t).Y_&&await async function(r,i){if(function(a){return Qj(a)&&a!==z.ABORTED}(i.code)){const o=r.Ta.shift();ea(r).B_(),await zM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Yl(r)}}(t,e),qM(t)&&WM(t)}async function PP(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),Y(vs,"RemoteStore received new credentials");const r=la(n);n.Ea.add(3),await Ql(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Td(n)}async function Zw(t,e){const n=ne(t);e?(n.Ea.delete(2),await Td(n)):e||(n.Ea.add(2),await Ql(n),n.Va.set("Unknown"))}function Xl(t){return t.ma||(t.ma=function(n,r,i){const o=ne(n);return o.sa(),new rq(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:cq.bind(null,t),Yo:fq.bind(null,t),t_:hq.bind(null,t),J_:dq.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),dx(t)?hx(t):t.Va.set("Unknown")):(await t.ma.stop(),UM(t))})),t.ma}function ea(t){return t.fa||(t.fa=function(n,r,i){const o=ne(n);return o.sa(),new iq(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:gq.bind(null,t),t_:_q.bind(null,t),ta:yq.bind(null,t),na:vq.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Yl(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(vs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Yt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const a=Date.now()+r,s=new px(e,n,a,i,o);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jl(t,e){if(xt("AsyncQueue",`${e}: ${t}`),sa(t))return new K(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{static emptySet(e){return new ts(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=pf(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ts)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ts;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.ga=new Je(te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ae(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class _s{constructor(e,n,r,i,o,a,s,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){const a=[];return n.forEach(s=>{a.push({type:0,doc:s})}),new _s(e,n,ts.emptySet(n),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wq{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class bq{constructor(){this.queries=CP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ne(n),o=i.queries;i.queries=CP(),o.forEach((a,s)=>{for(const u of s.ba)u.onError(r)})})(this,new K(z.ABORTED,"Firestore shutting down"))}}function CP(){return new Wi(t=>Dj(t),_d)}async function mx(t,e){const n=ne(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new wq,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const s=Jl(a,`Initialization of query '${ru(e.query)}' failed`);return void e.onError(s)}n.queries.set(i,o),o.ba.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&yx(n)}async function gx(t,e){const n=ne(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const a=o.ba.indexOf(e);a>=0&&(o.ba.splice(a,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Eq(t,e){const n=ne(t);let r=!1;for(const i of e){const o=i.query,a=n.queries.get(o);if(a){for(const s of a.ba)s.Fa(i)&&(r=!0);a.wa=i}}r&&yx(n)}function xq(t,e,n){const r=ne(t),i=r.queries.get(e);if(i)for(const o of i.ba)o.onError(n);r.queries.delete(e)}function yx(t){t.Ca.forEach(e=>{e.next()})}var eb,kP;(kP=eb||(eb={})).Ma="default",kP.Cache="cache";class vx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new _s(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=_s.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==eb.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,n){this.qa=e,this.byteLength=n}Ua(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.serializer=e}Ks(e){return ei(this.serializer,e)}qs(e){return e.metadata.exists?zy(this.serializer,e.document,!1):it.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Tt(e)}}class _x{constructor(e,n){this.$a=e,this.serializer=n,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=GM(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++n;const r=xe.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new RP(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Ks(i.metadata.name);for(const a of i.metadata.queries){const s=(n.get(a)||ge()).add(o);n.set(a,s)}}return n}async ja(e){const n=await Y8(e,new RP(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const i of this.Wa)await X8(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:n}}}function GM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.key=e}}class QM{constructor(e){this.key=e}}class YM{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ge(),this.mutatedKeys=ge(),this.eu=Mj(e),this.tu=new ts(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new OP,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=i,s=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,f)=>{const d=i.get(c),p=wd(this.query,f)?f:null,_=!!d&&this.mutatedKeys.has(d.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;d&&p?d.data.isEqual(p.data)?_!==y&&(r.track({type:3,doc:p}),b=!0):this.su(d,p)||(r.track({type:2,doc:p}),b=!0,(u&&this.eu(p,u)>0||l&&this.eu(p,l)<0)&&(s=!0)):!d&&p?(r.track({type:0,doc:p}),b=!0):d&&!p&&(r.track({type:1,doc:d}),b=!0,(u||l)&&(s=!0)),b&&(p?(a=a.add(p),o=y?o.add(c):o.delete(c)):(a=a.delete(c),o=o.delete(c)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const c=this.query.limitType==="F"?a.last():a.first();a=a.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{tu:a,iu:r,Ss:s,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((c,f)=>function(p,_){const y=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{Vt:b})}};return y(p)-y(_)}(c.type,f.type)||this.eu(c.doc,f.doc)),this.ou(r),i=i??!1;const s=n&&!i?this._u():[],u=this.Ya.size===0&&this.current&&!i?1:0,l=u!==this.Xa;return this.Xa=u,a.length!==0||l?{snapshot:new _s(this.query,e.tu,o,a,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new OP,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new QM(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new KM(r))}),n}cu(e){this.Za=e.ks,this.Ya=ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return _s.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ca="SyncEngine";class Tq{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Sq{constructor(e){this.key=e,this.hu=!1}}class Aq{constructor(e,n,r,i,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Wi(s=>Dj(s),_d),this.Iu=new Map,this.Eu=new Set,this.Ru=new Je(te.comparator),this.Au=new Map,this.Vu=new rx,this.du={},this.mu=new Map,this.fu=ys.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Iq(t,e,n=!0){const r=Yy(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await XM(r,e,n,!0),i}async function Pq(t,e){const n=Yy(t);await XM(n,e,!0,!1)}async function XM(t,e,n,r){const i=await sl(t.localStore,yn(e)),o=i.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await wx(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Qy(t.remoteStore,i),s}async function wx(t,e,n,r,i){t.pu=(f,d,p)=>async function(y,b,v,g){let E=b.view.ru(v);E.Ss&&(E=await Jm(y.localStore,b.query,!1).then(({documents:x})=>b.view.ru(x,E)));const P=g&&g.targetChanges.get(b.targetId),T=g&&g.targetMismatches.get(b.targetId)!=null,A=b.view.applyChanges(E,y.isPrimaryClient,P,T);return tb(y,b.targetId,A.au),A.snapshot}(t,f,d,p);const o=await Jm(t.localStore,e,!0),a=new YM(e,o.ks),s=a.ru(o.documents),u=xd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=a.applyChanges(s,t.isPrimaryClient,u);tb(t,n,l.au);const c=new Tq(e,n,a);return t.Tu.set(e,c),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function Oq(t,e,n){const r=ne(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(a=>!_d(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ul(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ll(r.remoteStore,i.targetId),cl(r,i.targetId)}).catch(aa)):(cl(r,i.targetId),await ul(r.localStore,i.targetId,!0))}async function Cq(t,e){const n=ne(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ll(n.remoteStore,r.targetId))}async function kq(t,e,n){const r=Tx(t);try{const i=await function(a,s){const u=ne(a),l=De.now(),c=s.reduce((p,_)=>p.add(_.key),ge());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=kn(),y=ge();return u.xs.getEntries(p,c).next(b=>{_=b,_.forEach((v,g)=>{g.isValidDocument()||(y=y.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,_)).next(b=>{f=b;const v=[];for(const g of s){const E=e8(g,f.get(g.key).overlayedDocument);E!=null&&v.push(new Hi(g.key,E,xj(E.value.mapValue),lt.exists(!0)))}return u.mutationQueue.addMutationBatch(p,l,v,s)}).next(b=>{d=b;const v=b.applyToLocalDocumentSet(f,y);return u.documentOverlayCache.saveOverlays(p,b.batchId,v)})}).then(()=>({batchId:d.batchId,changes:Vj(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,s,u){let l=a.du[a.currentUser.toKey()];l||(l=new Je(pe)),l=l.insert(s,u),a.du[a.currentUser.toKey()]=l}(r,i.batchId,n),await Gi(r,i.changes),await Yl(r.remoteStore)}catch(i){const o=Jl(i,"Failed to persist write");n.reject(o)}}async function JM(t,e){const n=ne(t);try{const r=await K8(n.localStore,e);e.targetChanges.forEach((i,o)=>{const a=n.Au.get(o);a&&(le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?le(a.hu,14607):i.removedDocuments.size>0&&(le(a.hu,42227),a.hu=!1))}),await Gi(n,r,e)}catch(r){await aa(r)}}function NP(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((o,a)=>{const s=a.view.va(e);s.snapshot&&i.push(s.snapshot)}),function(a,s){const u=ne(a);u.onlineState=s;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.ba)d.va(s)&&(l=!0)}),l&&yx(u)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Rq(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let a=new Je(te.comparator);a=a.insert(o,it.newNoDocument(o,ce.min()));const s=ge().add(o),u=new Ed(ce.min(),new Map,new Je(pe),a,s);await JM(r,u),r.Ru=r.Ru.remove(o),r.Au.delete(e),xx(r)}else await ul(r.localStore,e,!1).then(()=>cl(r,e,n)).catch(aa)}async function Nq(t,e){const n=ne(t),r=e.batch.batchId;try{const i=await G8(n.localStore,e);Ex(n,r,null),bx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gi(n,i)}catch(i){await aa(i)}}async function Dq(t,e,n){const r=ne(t);try{const i=await function(a,s){const u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,s).next(f=>(le(f!==null,37113),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,s)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,e);Ex(r,e,n),bx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gi(r,i)}catch(i){await aa(i)}}async function jq(t,e){const n=ne(t);la(n.remoteStore)||Y(ca,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(a){const s=ne(a);return s.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>s.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===qo)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=Jl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function bx(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Ex(t,e,n){const r=ne(t);let i=r.du[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function cl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||ZM(t,r)})}function ZM(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(ll(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),xx(t))}function tb(t,e,n){for(const r of n)r instanceof KM?(t.Vu.addReference(r.key,e),Mq(t,r)):r instanceof QM?(Y(ca,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||ZM(t,r.key)):ae(19791,{wu:r})}function Mq(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Y(ca,"New document in limbo: "+n),t.Eu.add(r),xx(t))}function xx(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new te(xe.fromString(e)),r=t.fu.next();t.Au.set(r,new Sq(n)),t.Ru=t.Ru.insert(n,r),Qy(t.remoteStore,new mi(yn(Hl(n.path)),r,"TargetPurposeLimboResolution",On.ce))}}async function Gi(t,e,n){const r=ne(t),i=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((s,u)=>{a.push(r.pu(u,e,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const f=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);const f=sx.Es(u.targetId,l);o.push(f)}}))}),await Promise.all(a),r.Pu.J_(i),await async function(u,l){const c=ne(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(l,d=>B.forEach(d.Ts,p=>c.persistence.referenceDelegate.addReference(f,d.targetId,p)).next(()=>B.forEach(d.Is,p=>c.persistence.referenceDelegate.removeReference(f,d.targetId,p)))))}catch(f){if(!sa(f))throw f;Y(ux,"Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const p=c.vs.get(d),_=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(_);c.vs=c.vs.insert(d,y)}}}(r.localStore,o))}async function $q(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){Y(ca,"User change. New user:",e.toKey());const r=await OM(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(s=>{s.forEach(u=>{u.reject(new K(z.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gi(n,r.Ns)}}function Vq(t,e){const n=ne(t),r=n.Au.get(e);if(r&&r.hu)return ge().add(r.key);{let i=ge();const o=n.Iu.get(e);if(!o)return i;for(const a of o){const s=n.Tu.get(a);i=i.unionWith(s.view.nu)}return i}}async function Lq(t,e){const n=ne(t),r=await Jm(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&tb(n,e.targetId,i.au),i}async function Fq(t,e){const n=ne(t);return NM(n.localStore,e).then(r=>Gi(n,r))}async function Bq(t,e,n,r){const i=ne(t),o=await function(s,u){const l=ne(s),c=ne(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>c.Xn(f,u).next(d=>d?l.localDocuments.getDocuments(f,d):B.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?await Yl(i.remoteStore):n==="acknowledged"||n==="rejected"?(Ex(i,e,r||null),bx(i,e),function(s,u){ne(ne(s).mutationQueue).nr(u)}(i.localStore,e)):ae(6720,"Unknown batchState",{bu:n}),await Gi(i,o)):Y(ca,"Cannot apply mutation batch with id: "+e)}async function Uq(t,e){const n=ne(t);if(Yy(n),Tx(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await DP(n,r.toArray());n.gu=!0,await Zw(n.remoteStore,!0);for(const o of i)Qy(n.remoteStore,o)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((o,a)=>{n.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(cl(n,a),ul(n.localStore,a,!0))),ll(n.remoteStore,a)}),await i,await DP(n,r),function(a){const s=ne(a);s.Au.forEach((u,l)=>{ll(s.remoteStore,l)}),s.Vu.zr(),s.Au=new Map,s.Ru=new Je(te.comparator)}(n),n.gu=!1,await Zw(n.remoteStore,!1)}}async function DP(t,e,n){const r=ne(t),i=[],o=[];for(const a of e){let s;const u=r.Iu.get(a);if(u&&u.length!==0){s=await sl(r.localStore,yn(u[0]));for(const l of u){const c=r.Tu.get(l),f=await Lq(r,c);f.snapshot&&o.push(f.snapshot)}}else{const l=await RM(r.localStore,a);s=await sl(r.localStore,l),await wx(r,e$(l),a,!1,s.resumeToken)}i.push(s)}return r.Pu.J_(o),i}function e$(t){return kj(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function zq(t){return function(n){return ne(ne(n).persistence).hs()}(ne(t).localStore)}async function qq(t,e,n,r){const i=ne(t);if(i.gu)return void Y(ca,"Ignoring unexpected query state notification.");const o=i.Iu.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const a=await NM(i.localStore,jj(o[0])),s=Ed.createSynthesizedRemoteEventForCurrentChange(e,n==="current",yt.EMPTY_BYTE_STRING);await Gi(i,a,s);break}case"rejected":await ul(i.localStore,e,!0),cl(i,e,r);break;default:ae(64155,n)}}async function Wq(t,e,n){const r=Yy(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Y(ca,"Adding an already active target "+i);continue}const o=await RM(r.localStore,i),a=await sl(r.localStore,o);await wx(r,e$(o),a.targetId,!1,a.resumeToken),Qy(r.remoteStore,a)}for(const i of n)r.Iu.has(i)&&await ul(r.localStore,i,!1).then(()=>{ll(r.remoteStore,i),cl(r,i)}).catch(aa)}}function Yy(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rq.bind(null,e),e.Pu.J_=Eq.bind(null,e.eventManager),e.Pu.yu=xq.bind(null,e.eventManager),e}function Tx(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dq.bind(null,e),e}function Hq(t,e,n){const r=ne(t);(async function(o,a,s){try{const u=await a.getMetadata();if(await function(p,_){const y=ne(p),b=Tt(_.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",v=>y.Pi.getBundleMetadata(v,_.id)).then(v=>!!v&&v.createTime.compareTo(b)>=0)}(o.localStore,u))return await a.close(),s._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(u)),Promise.resolve(new Set);s._updateProgress(GM(u));const l=new _x(u,a.serializer);let c=await a.Su();for(;c;){const d=await l.Ga(c);d&&s._updateProgress(d),c=await a.Su()}const f=await l.ja(o.localStore);return await Gi(o,f.Ja,void 0),await function(p,_){const y=ne(p);return y.persistence.runTransaction("Save bundle","readwrite",b=>y.Pi.saveBundleMetadata(b,_))}(o.localStore,u),s._completeWith(f.progress),Promise.resolve(f.Ha)}catch(u){return Vn(ca,`Loading bundle failed with ${u}`),s._failWith(u),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class fl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cs(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return PM(this.persistence,new IM,e.initialUser,this.serializer)}Cu(e){return new ix(Ky.Vi,this.serializer)}Du(e){return new VM}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fl.provider={build:()=>new fl};class Sx extends fl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){le(this.persistence.referenceDelegate instanceof Xm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new bM(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new ix(r=>Xm.Vi(r,n),this.serializer)}}class Ax extends fl{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Tx(this.xu.syncEngine),await Yl(this.xu.remoteStore),await this.persistence.zi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return PM(this.persistence,new IM,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new bM(r,e.asyncQueue,n)}Mu(e,n){const r=new Z5(n,this.persistence);return new J5(e.asyncQueue,r)}Cu(e){const n=ax(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new ox(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,LM(),am(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new VM}}class t$ extends Ax{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Y_&&(this.sharedClientState.syncEngine={So:Bq.bind(null,n),Do:qq.bind(null,n),Co:Wq.bind(null,n),hs:zq.bind(null,n),bo:Fq.bind(null,n)},await this.sharedClientState.start()),await this.persistence.zi(async r=>{await Uq(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=LM();if(!Y_.v(n))throw new K(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ax(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Y_(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ta{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>NP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$q.bind(null,this.syncEngine),await Zw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bq}()}createDatastore(e){const n=Cs(e.databaseInfo.databaseId),r=nq(e.databaseInfo);return sq(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,a,s){return new lq(r,i,o,a,s)}(this.localStore,this.datastore,e.asyncQueue,n=>NP(this.syncEngine,n,0),function(){return AP.v()?new AP:new J8}())}createSyncEngine(e,n){return function(i,o,a,s,u,l,c){const f=new Aq(i,o,a,s,u,l);return c&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=ne(i);Y(vs,"RemoteStore shutting down."),o.Ea.add(5),await Ql(o),o.Aa.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ta.provider={build:()=>new ta};function jP(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Yt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.qu(`length string (${n}) is not valid number`);const i=await this.Uu(r);return new HM(JSON.parse(i),e.length+r)}$u(){return this.buffer.findIndex(e=>e===123)}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Ua())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.qa)}`);this.metadata=r;do r=this.Su(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Qu(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.Ku(),n=this.Uu(e);return new HM(JSON.parse(n),e)}Uu(e){if(this.cursor+e>this.bundleData.length)throw new K(z.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}Ku(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qq=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,o){const a=ne(i),s={documents:o.map(f=>wh(a.serializer,f))},u=await a.jo("BatchGetDocuments",a.serializer.databaseId,xe.emptyPath(),s,o.length),l=new Map;u.forEach(f=>{const d=c8(a.serializer,f);l.set(d.key.toString(),d)});const c=[];return o.forEach(f=>{const d=l.get(f.toString());le(!!d,55234,{key:f}),c.push(d)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=te.fromPath(r);this.mutations.push(new QE(i,this.precondition(i)))}),await async function(r,i){const o=ne(r),a={writes:i.map(s=>bh(o.serializer,s))};await o.Wo("Commit",o.serializer.databaseId,xe.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ae(50498,{Gu:e.constructor.name});n=ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new K(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ce.min())?lt.exists(!1):lt.updateTime(n):lt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ce.min()))throw new K(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lt.updateTime(n)}return lt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new cx(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_(async()=>{const e=new Qq(this.datastore),n=this.Ju(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Zu(i)}))}).catch(r=>{this.Zu(r)})})}Ju(e){try{const n=this.updateFunction(e);return!gd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Hu(),Promise.resolve()))):this.deferred.reject(e)}Xu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Qj(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="FirestoreClient";class Xq{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=Gt.UNAUTHENTICATED,this.clientId=Ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{Y(na,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Y(na,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jl(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function J_(t,e){t.asyncQueue.verifyOperationInProgress(),Y(na,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await OM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function MP(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ix(t);Y(na,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>PP(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>PP(e.remoteStore,i)),t._onlineComponents=e}async function Ix(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(na,"Using user provided OfflineComponentProvider");try{await J_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Vn("Error using user provided cache. Falling back to memory cache: "+n),await J_(t,new fl)}}else Y(na,"Using default OfflineComponentProvider"),await J_(t,new Sx(void 0));return t._offlineComponents}async function Jy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(na,"Using user provided OnlineComponentProvider"),await MP(t,t._uninitializedComponentsProvider._online)):(Y(na,"Using default OnlineComponentProvider"),await MP(t,new ta))),t._onlineComponents}function n$(t){return Ix(t).then(e=>e.persistence)}function Zl(t){return Ix(t).then(e=>e.localStore)}function r$(t){return Jy(t).then(e=>e.remoteStore)}function Px(t){return Jy(t).then(e=>e.syncEngine)}function i$(t){return Jy(t).then(e=>e.datastore)}async function hl(t){const e=await Jy(t),n=e.eventManager;return n.onListen=Iq.bind(null,e.syncEngine),n.onUnlisten=Oq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Pq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Cq.bind(null,e.syncEngine),n}function Jq(t){return t.asyncQueue.enqueue(async()=>{const e=await n$(t),n=await r$(t);return e.setNetworkEnabled(!0),function(i){const o=ne(i);return o.Ea.delete(0),Td(o)}(n)})}function Zq(t){return t.asyncQueue.enqueue(async()=>{const e=await n$(t),n=await r$(t);return e.setNetworkEnabled(!1),async function(i){const o=ne(i);o.Ea.add(0),await Ql(o),o.Va.set("Offline")}(n)})}function e7(t,e,n,r){const i=new Xy(r),o=new vx(e,i,n);return t.asyncQueue.enqueueAndForget(async()=>mx(await hl(t),o)),()=>{i.Nu(),t.asyncQueue.enqueueAndForget(async()=>gx(await hl(t),o))}}function t7(t,e){const n=new Yt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,o,a){try{const s=await function(l,c){const f=ne(l);return f.persistence.runTransaction("read document","readonly",d=>f.localDocuments.getDocument(d,c))}(i,o);s.isFoundDocument()?a.resolve(s):s.isNoDocument()?a.resolve(null):a.reject(new K(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(s){const u=Jl(s,`Failed to get document '${o} from cache`);a.reject(u)}}(await Zl(t),e,n)),n.promise}function o$(t,e,n={}){const r=new Yt;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,s,u,l){const c=new Xy({next:d=>{c.Nu(),a.enqueueAndForget(()=>gx(o,f));const p=d.docs.has(s);!p&&d.fromCache?l.reject(new K(z.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&u&&u.source==="server"?l.reject(new K(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new vx(Hl(s.path),c,{includeMetadataChanges:!0,Ka:!0});return mx(o,f)}(await hl(t),t.asyncQueue,e,n,r)),r.promise}function n7(t,e){const n=new Yt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,o,a){try{const s=await Jm(i,o,!0),u=new YM(o,s.ks),l=u.ru(s.documents),c=u.applyChanges(l,!1);a.resolve(c.snapshot)}catch(s){const u=Jl(s,`Failed to execute query '${o} against cache`);a.reject(u)}}(await Zl(t),e,n)),n.promise}function a$(t,e,n={}){const r=new Yt;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,s,u,l){const c=new Xy({next:d=>{c.Nu(),a.enqueueAndForget(()=>gx(o,f)),d.fromCache&&u.source==="server"?l.reject(new K(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new vx(s,c,{includeMetadataChanges:!0,Ka:!0});return mx(o,f)}(await hl(t),t.asyncQueue,e,n,r)),r.promise}function r7(t,e,n){const r=new Yt;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await i$(t);r.resolve(async function(a,s,u){var y;const l=ne(a),{request:c,gt:f,parent:d}=aM(l.serializer,Rj(s),u);l.connection.Ko||delete c.parent;const p=(await l.jo("RunAggregationQuery",l.serializer.databaseId,d,c,1)).filter(b=>!!b.result);le(p.length===1,64727);const _=(y=p[0].result)==null?void 0:y.aggregateFields;return Object.keys(_).reduce((b,v)=>(b[f[v]]=_[v],b),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}function i7(t,e){const n=new Yt;return t.asyncQueue.enqueueAndForget(async()=>kq(await Px(t),e,n)),n.promise}function o7(t,e){const n=new Xy(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,o){ne(i).Ca.add(o),o.next()}(await hl(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(i,o){ne(i).Ca.delete(o)}(await hl(t),n))}}function a7(t,e,n){const r=new Yt;return t.asyncQueue.enqueueAndForget(async()=>{const i=await i$(t);new Yq(t.asyncQueue,i,n,e,r).ju()}),r.promise}function s7(t,e,n,r){const i=function(a,s){let u;return u=typeof a=="string"?Xj().encode(a):a,function(c,f){return new Gq(c,f)}(function(c,f){if(c instanceof Uint8Array)return jP(c,f);if(c instanceof ArrayBuffer)return jP(new Uint8Array(c),f);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),s)}(n,Cs(e));t.asyncQueue.enqueueAndForget(async()=>{Hq(await Px(t),i,r)})}function u7(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const o=ne(r);return o.persistence.runTransaction("Get named query","readonly",a=>o.Pi.getNamedQuery(a,i))}(await Zl(t),e))}function s$(t,e){return function(r,i){return new Kq(r,i)}(t,e)}function l7(t,e){return t.asyncQueue.enqueue(async()=>async function(r,i){const o=ne(r),a=o.indexManager,s=[];return o.persistence.runTransaction("Configure indexes","readwrite",u=>a.getFieldIndexes(u).next(l=>function(f,d,p,_,y){f=[...f],d=[...d],f.sort(p),d.sort(p);const b=f.length,v=d.length;let g=0,E=0;for(;g<v&&E<b;){const P=p(f[E],d[g]);P<0?y(f[E++]):P>0?_(d[g++]):(g++,E++)}for(;g<v;)_(d[g++]);for(;E<b;)y(f[E++])}(l,i,K5,c=>{s.push(a.addFieldIndex(u,c))},c=>{s.push(a.deleteFieldIndex(u,c))})).next(()=>B.waitFor(s)))}(await Zl(t),e))}function c7(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){ne(r).Cs.As=i}(await Zl(t),e))}function f7(t){return t.asyncQueue.enqueue(async()=>function(n){const r=ne(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",o=>i.deleteAllFieldIndexes(o))}(await Zl(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u$(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7="ComponentProvider",$P=new Map;function d7(t,e,n,r,i){return new P9(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,u$(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$="firestore.googleapis.com",VP=!0;class LP{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=l$,this.ssl=VP}else this.host=e.host,this.ssl=e.ssl??VP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wM)throw new K(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u$(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HD;switch(r.type){case"firstParty":return new B5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$P.get(n);r&&(Y(h7,"Removing Datastore"),$P.delete(n),r.terminate())}(this),Promise.resolve()}}function c$(t,e,n,r={}){var l;t=Te(t,Sd);const i=Ps(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},s=`${e}:${n}`;i&&(RE(`https://${s}`),ID("Firestore",!0)),o.host!==l$&&o.host!==s&&Vn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:s,ssl:i,emulatorOptions:r};if(!jr(u,a)&&(t._setSettings(u),r.mockUserToken)){let c,f;if(typeof r.mockUserToken=="string")c=r.mockUserToken,f=Gt.MOCK_USER;else{c=uz(r.mockUserToken,(l=t._app)==null?void 0:l.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new K(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Gt(d)}t._authCredentials=new V5(new WD(c,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vt(this.firestore,e,this._query)}}class $e{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}toJSON(){return{type:$e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Os(n,$e._jsonSchema))return new $e(e,r||null,new te(xe.fromString(n.referencePath)))}}$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:Ot("string",$e._jsonSchemaVersion),referencePath:Ot("string")};class Rr extends Vt{constructor(e,n,r){super(e,n,Hl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new te(e))}withConverter(e){return new Rr(this.firestore,e,this._path)}}function Eh(t,e,...n){if(t=Xe(t),ME("collection","path",e),t instanceof Sd){const r=xe.fromString(e,...n);return II(r),new Rr(t,null,r)}{if(!(t instanceof $e||t instanceof Rr))throw new K(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return II(r),new Rr(t.firestore,null,r)}}function p7(t,e){if(t=Te(t,Sd),ME("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new K(z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vt(t,null,function(r){return new qi(xe.emptyPath(),r)}(e))}function po(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=Ry.newId()),ME("doc","path",e),t instanceof Sd){const r=xe.fromString(e,...n);return AI(r),new $e(t,null,new te(r))}{if(!(t instanceof $e||t instanceof Rr))throw new K(z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return AI(r),new $e(t.firestore,t instanceof Rr?t.converter:null,new te(r))}}function m7(t,e){return t=Xe(t),e=Xe(e),(t instanceof $e||t instanceof Rr)&&(e instanceof $e||e instanceof Rr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ox(t,e){return t=Xe(t),e=Xe(e),t instanceof Vt&&e instanceof Vt&&t.firestore===e.firestore&&_d(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="AsyncQueue";class BP{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cx(this,"async_queue_retry"),this._c=()=>{const r=am();r&&Y(FP,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=am();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=am();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Yt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!sa(e))throw e;Y(FP,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,xt("INTERNAL UNHANDLED ERROR: ",UP(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=px.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&ae(47125,{Pc:UP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function UP(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(){this._progressObserver={},this._taskCompletionResolver=new Yt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7=-1;class qe extends Sd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new BP,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new BP(e),this._firestoreClient=void 0,await e}}}function y7(t,e,n){n||(n=gh);const r=md(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),o=r.getOptions(n);if(jr(o,e))return i;throw new K(z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new K(z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wM)throw new K(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ps(e.host)&&RE(e.host),r.initialize({options:e,instanceIdentifier:n})}function h$(t,e){const n=typeof t=="object"?t:jD(),r=typeof t=="string"?t:e||gh,i=md(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=az("firestore");o&&c$(i,...o)}return i}function ft(t){if(t._terminated)throw new K(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||d$(t),t._firestoreClient}function d$(t){var r,i,o,a;const e=t._freezeSettings(),n=d7(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Xq(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const l=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(l),_online:l}}(t._componentsProvider))}function v7(t,e){Vn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return p$(t,ta.provider,{build:r=>new Ax(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function _7(t){Vn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();p$(t,ta.provider,{build:n=>new t$(n,e.cacheSizeBytes)})}function p$(t,e,n){if((t=Te(t,qe))._firestoreClient||t._terminated)throw new K(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new K(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},d$(t)}function w7(t){if(t._initialized&&!t._terminated)throw new K(z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Yt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Zr.v())return Promise.resolve();const i=r+AM;await Zr.delete(i)}(ax(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function b7(t){return function(n){const r=new Yt;return n.asyncQueue.enqueueAndForget(async()=>jq(await Px(n),r)),r.promise}(ft(t=Te(t,qe)))}function E7(t){return Jq(ft(t=Te(t,qe)))}function x7(t){return Zq(ft(t=Te(t,qe)))}function T7(t){return w5(t.app,"firestore",t._databaseId.database),t._delete()}function nb(t,e){const n=ft(t=Te(t,qe)),r=new f$;return s7(n,t._databaseId,e,r),r}function m$(t,e){return u7(ft(t=Te(t,qe)),e).then(n=>n?new Vt(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._byteString=e}static fromBase64String(e){try{return new In(yt.fromBase64String(e))}catch(n){throw new K(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new In(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:In._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Os(e,In._jsonSchema))return In.fromBase64String(e.bytes)}}In._jsonSchemaVersion="firestore/bytes/1.0",In._jsonSchema={type:Ot("string",In._jsonSchemaVersion),bytes:Ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function S7(){return new ks(Rw)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Nr._jsonSchemaVersion}}static fromJSON(e){if(Os(e,Nr._jsonSchema))return new Nr(e.latitude,e.longitude)}}Nr._jsonSchemaVersion="firestore/geoPoint/1.0",Nr._jsonSchema={type:Ot("string",Nr._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Qn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Os(e,Qn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Qn(e.vectorValues);throw new K(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qn._jsonSchemaVersion="firestore/vectorValue/1.0",Qn._jsonSchema={type:Ot("string",Qn._jsonSchemaVersion),vectorValues:Ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=/^__.*__$/;class I7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gl(e,this.data,n,this.fieldTransforms)}}class g${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function y$(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{dataSource:t})}}class Zy{constructor(e,n,r,i,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Zy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ng(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(y$(this.dataSource)&&A7.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class P7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cs(e)}createContext(e,n,r,i=!1){return new Zy({dataSource:e,methodName:n,targetDoc:r,path:ot.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rs(t){const e=t._freezeSettings(),n=Cs(t._databaseId);return new P7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ev(t,e,n,r,i,o={}){const a=t.createContext(o.merge||o.mergeFields?2:0,e,n,i);Mx("Data must be an object, but it was:",a,r);const s=w$(r,a);let u,l;if(o.merge)u=new Cn(a.fieldMask),l=a.fieldTransforms;else if(o.mergeFields){const c=[];for(const f of o.mergeFields){const d=Mi(e,f,n);if(!a.contains(d))throw new K(z.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);E$(c,d)||c.push(d)}u=new Cn(c),l=a.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=a.fieldTransforms;return new I7(new Kt(s),u,l)}class Ad extends fa{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ad}}function v$(t,e,n){return new Zy({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Cx extends fa{_toFieldTransform(e){return new bd(e.path,new il)}isEqual(e){return e instanceof Cx}}class kx extends fa{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=v$(this,e,!0),r=this.Ac.map(o=>Ns(o,n)),i=new ds(r);return new bd(e.path,i)}isEqual(e){return e instanceof kx&&jr(this.Ac,e.Ac)}}class Rx extends fa{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=v$(this,e,!0),r=this.Ac.map(o=>Ns(o,n)),i=new ps(r);return new bd(e.path,i)}isEqual(e){return e instanceof Rx&&jr(this.Ac,e.Ac)}}class Nx extends fa{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new ol(e.serializer,Bj(e.serializer,this.Vc));return new bd(e.path,n)}isEqual(e){return e instanceof Nx&&this.Vc===e.Vc}}function Dx(t,e,n,r){const i=t.createContext(1,e,n);Mx("Data must be an object, but it was:",i,r);const o=[],a=Kt.empty();ua(r,(u,l)=>{const c=$x(e,u,n);l=Xe(l);const f=i.childContextForFieldPath(c);if(l instanceof Ad)o.push(c);else{const d=Ns(l,f);d!=null&&(o.push(c),a.set(c,d))}});const s=new Cn(o);return new g$(a,s,i.fieldTransforms)}function jx(t,e,n,r,i,o){const a=t.createContext(1,e,n),s=[Mi(e,r,n)],u=[i];if(o.length%2!=0)throw new K(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)s.push(Mi(e,o[d])),u.push(o[d+1]);const l=[],c=Kt.empty();for(let d=s.length-1;d>=0;--d)if(!E$(l,s[d])){const p=s[d];let _=u[d];_=Xe(_);const y=a.childContextForFieldPath(p);if(_ instanceof Ad)l.push(p);else{const b=Ns(_,y);b!=null&&(l.push(p),c.set(p,b))}}const f=new Cn(l);return new g$(c,f,a.fieldTransforms)}function _$(t,e,n,r=!1){return Ns(n,t.createContext(r?4:3,e))}function Ns(t,e){if(b$(t=Xe(t)))return Mx("Unsupported field value:",e,t),w$(t,e);if(t instanceof fa)return function(r,i){if(!y$(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){const o=[];let a=0;for(const s of r){let u=Ns(s,i.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Bj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=De.fromDate(r);return{timestampValue:al(i.serializer,o)}}if(r instanceof De){const o=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:al(i.serializer,o)}}if(r instanceof Nr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof In)return{bytesValue:eM(i.serializer,r._byteString)};if(r instanceof $e){const o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ex(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Qn)return function(a,s){const u=a instanceof Qn?a.toArray():a;return{mapValue:{fields:{[zE]:{stringValue:qE},[tl]:{arrayValue:{values:u.map(c=>{if(typeof c!="number")throw s.createError("VectorValues must only contain numeric values.");return KE(s.serializer,c)})}}}}}}(r,i);if(fM(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Ny(r)}`)}(t,e)}function w$(t,e){const n={};return pj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ua(t,(r,i)=>{const o=Ns(i,e.childContextForField(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function b$(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof Nr||t instanceof In||t instanceof $e||t instanceof fa||t instanceof Qn||fM(t))}function Mx(t,e,n){if(!b$(n)||!QD(n)){const r=Ny(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Mi(t,e,n){if((e=Xe(e))instanceof ks)return e._internalPath;if(typeof e=="string")return $x(t,e);throw ng("Field path arguments must be of type string or ",t,!1,void 0,n)}const O7=new RegExp("[~\\*/\\[\\]]");function $x(t,e,n){if(e.search(O7)>=0)throw ng(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ks(...e.split("."))._internalPath}catch{throw ng(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ng(t,e,n,r,i){const o=r&&!r.isEmpty(),a=i!==void 0;let s=`Function ${e}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new K(z.INVALID_ARGUMENT,s+t+u)}function E$(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{convertValue(e,n="none"){switch(Xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ua(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[tl].arrayValue)==null?void 0:i.values)==null?void 0:o.map(a=>st(a.doubleValue));return new Qn(n)}convertGeoPoint(e){return new Nr(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ly(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mh(e));default:return null}}convertTimestamp(e){const n=Di(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xe.fromString(e);le(cM(r),9688,{name:e});const i=new Yo(r.get(1),r.get(3)),o=new te(r.popFirst(5));return i.isEqual(n)||xt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Vx{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C7(){return new Ad("deleteField")}function k7(){return new Cx("serverTimestamp")}function R7(...t){return new kx("arrayUnion",t)}function N7(...t){return new Rx("arrayRemove",t)}function D7(t){return new Nx("increment",t)}function j7(t){return new Qn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M7(t){var r;const e=ft(Te(t.firestore,qe)),n=(r=e._onlineComponents)==null?void 0:r.datastore.serializer;return n===void 0?null:qy(n,yn(t._query)).ft}function $7(t,e){var o;const n=dj(e,(a,s)=>new Kj(s,a.aggregateType,a._internalFieldPath)),r=ft(Te(t.firestore,qe)),i=(o=r._onlineComponents)==null?void 0:o.datastore.serializer;return i===void 0?null:aM(i,Rj(t._query),n,!0).request}const zP="@firebase/firestore",qP="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class x${constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new Kt({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new V7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Mi("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class V7 extends xh{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lx{}class ec extends Lx{}function rb(t,e,...n){let r=[];e instanceof Lx&&r.push(e),r=r.concat(n),function(o){const a=o.filter(u=>u instanceof Ds).length,s=o.filter(u=>u instanceof tc).length;if(a>1||a>0&&s>0)throw new K(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class tc extends ec{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tc(e,n,r)}_apply(e){const n=this._parse(e);return A$(e._query,n),new Vt(e.firestore,e.converter,zw(e._query,n))}_parse(e){const n=Rs(e.firestore);return function(o,a,s,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new K(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){HP(f,c);const _=[];for(const y of f)_.push(WP(u,o,y));d={arrayValue:{values:_}}}else d=WP(u,o,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||HP(f,c),d=_$(s,a,f,c==="in"||c==="not-in");return Pe.create(l,c,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function L7(t,e,n){const r=e,i=Mi("where",t);return tc._create(i,r,n)}class Ds extends Lx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ds(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Me.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let a=i;const s=o.getFlattenedFilters();for(const u of s)A$(a,u),a=zw(a,u)}(e._query,n),new Vt(e.firestore,e.converter,zw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function F7(...t){return t.forEach(e=>I$("or",e)),Ds._create("or",t)}function B7(...t){return t.forEach(e=>I$("and",e)),Ds._create("and",t)}class tv extends ec{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new tv(e,n)}_apply(e){const n=function(i,o,a){if(i.startAt!==null)throw new K(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _h(o,a)}(e._query,this._field,this._direction);return new Vt(e.firestore,e.converter,B9(e._query,n))}}function ib(t,e="asc"){const n=e,r=Mi("orderBy",t);return tv._create(r,n)}class Id extends ec{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Id(e,n,r)}_apply(e){return new Vt(e.firestore,e.converter,Gm(e._query,this._limit,this._limitType))}}function ob(t){return YD("limit",t),Id._create("limit",t,"F")}function U7(t){return YD("limitToLast",t),Id._create("limitToLast",t,"L")}class Pd extends ec{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Pd(e,n,r)}_apply(e){const n=S$(e,this.type,this._docOrFields,this._inclusive);return new Vt(e.firestore,e.converter,U9(e._query,n))}}function z7(...t){return Pd._create("startAt",t,!0)}function q7(...t){return Pd._create("startAfter",t,!1)}class Od extends ec{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Od(e,n,r)}_apply(e){const n=S$(e,this.type,this._docOrFields,this._inclusive);return new Vt(e.firestore,e.converter,z9(e._query,n))}}function W7(...t){return Od._create("endBefore",t,!1)}function H7(...t){return Od._create("endAt",t,!0)}function S$(t,e,n,r){if(n[0]=Xe(n[0]),n[0]instanceof xh)return function(o,a,s,u,l){if(!u)throw new K(z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${s}().`);const c=[];for(const f of Ou(o))if(f.field.isKeyField())c.push(fs(a,u.key));else{const d=u.data.field(f.field);if(Vy(d))throw new K(z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const p=f.field.canonicalString();throw new K(z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}c.push(d)}return new Zo(c,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Rs(t.firestore);return function(a,s,u,l,c,f){const d=a.explicitOrderBy;if(c.length>d.length)throw new K(z.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let _=0;_<c.length;_++){const y=c[_];if(d[_].field.isKeyField()){if(typeof y!="string")throw new K(z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof y}`);if(!HE(a)&&y.indexOf("/")!==-1)throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${y}' contains a slash.`);const b=a.path.child(xe.fromString(y));if(!te.isDocumentKey(b))throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const v=new te(b);p.push(fs(s,v))}else{const b=_$(u,l,y);p.push(b)}}return new Zo(p,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function WP(t,e,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new K(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HE(e)&&n.indexOf("/")!==-1)throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xe.fromString(n));if(!te.isDocumentKey(r))throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fs(t,new te(r))}if(n instanceof $e)return fs(t,n._key);throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ny(n)}.`)}function HP(t,e){if(!Array.isArray(t)||t.length===0)throw new K(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function A$(t,e){const n=function(i,o){for(const a of i)for(const s of a.getFlattenedFilters())if(o.indexOf(s.op)>=0)return s.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function I$(t,e){if(!(e instanceof tc||e instanceof Ds))throw new K(z.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}function nv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Fx extends Vx{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7(t){return new dl("sum",Mi("sum",t))}function K7(t){return new dl("avg",Mi("average",t))}function P$(){return new dl("count")}function Q7(t,e){var n,r;return t instanceof dl&&e instanceof dl&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((r=e._internalFieldPath)==null?void 0:r.canonicalString())}function Y7(t,e){return Ox(t.query,e.query)&&jr(t.data(),e.data())}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7(t){return O$(t,{count:P$()})}function O$(t,e){const n=Te(t.firestore,qe),r=ft(n),i=dj(e,(o,a)=>new Kj(a,o.aggregateType,o._internalFieldPath));return r7(r,t._query,i).then(o=>function(s,u,l){const c=new ha(s);return new x$(u,c,l)}(n,t,o))}class J7{constructor(e){this.kind="memory",this._onlineComponentProvider=ta.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new Sx(void 0)}}toJSON(){return{kind:this.kind}}}class Z7{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=C$(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class eW{constructor(){this.kind="memoryEager",this._offlineComponentProvider=fl.provider}toJSON(){return{kind:this.kind}}}class tW{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new Sx(e)}}toJSON(){return{kind:this.kind}}}function nW(){return new eW}function rW(t){return new tW(t==null?void 0:t.cacheSizeBytes)}function iW(t){return new J7(t)}function oW(t){return new Z7(t)}class aW{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ta.provider,this._offlineComponentProvider={build:n=>new Ax(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class sW{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ta.provider,this._offlineComponentProvider={build:n=>new t$(n,e==null?void 0:e.cacheSizeBytes)}}}function C$(t){return new aW(t==null?void 0:t.forceOwnership)}function uW(){return new sW}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$="NOT SUPPORTED";class gi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mn extends xh{constructor(e,n,r,i,o,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Mi("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Mn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function lW(t,e,n){if(Os(e,Mn._jsonSchema)){if(e.bundle===k$)throw new K(z.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Cs(t._databaseId),i=s$(e.bundle,r),o=i.t(),a=new _x(i.getMetadata(),r);for(const c of o)a.o(c);const s=a.documents;if(s.length!==1)throw new K(z.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${s.length} documents.`);const u=zy(r,s[0].document),l=new te(xe.fromString(e.bundleName));return new Mn(t,new Fx(t),l,u,new gi(!1,!1),n||null)}}Mn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mn._jsonSchema={type:Ot("string",Mn._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Lf extends Mn{data(e={}){return super.data(e)}}class $n{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new gi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Lf(this._firestore,this._userDataWriter,r.key,r,new gi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(s=>{const u=new Lf(i._firestore,i._userDataWriter,s.doc.key,s.doc,new gi(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>o||s.type!==3).map(s=>{const u=new Lf(i._firestore,i._userDataWriter,s.doc.key,s.doc,new gi(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return s.type!==0&&(l=a.indexOf(s.doc.key),a=a.delete(s.doc.key)),s.type!==1&&(a=a.add(s.doc),c=a.indexOf(s.doc.key)),{type:fW(s.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cW(t,e,n){if(Os(e,$n._jsonSchema)){if(e.bundle===k$)throw new K(z.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Cs(t._databaseId),i=s$(e.bundle,r),o=i.t(),a=new _x(i.getMetadata(),r);for(const d of o)a.o(d);if(a.queries.length!==1)throw new K(z.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${a.queries.length} queries.`);const s=Wy(a.queries[0].bundledQuery),u=a.documents;let l=new ts;u.map(d=>{const p=zy(r,d.document);l=l.add(p)});const c=_s.fromInitialDocuments(s,l,ge(),!1,!1),f=new Vt(t,n||null,s);return new $n(t,new Fx(t),f,c)}}function fW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:t})}}function hW(t,e){return t instanceof Mn&&e instanceof Mn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof $n&&e instanceof $n&&t._firestore===e._firestore&&Ox(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n._jsonSchemaVersion="firestore/querySnapshot/1.0",$n._jsonSchema={type:Ot("string",$n._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};const dW={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Rs(e)}set(e,n,r){this._verifyNotCommitted();const i=Po(e,this._firestore),o=nv(i.converter,n,r),a=ev(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,lt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=Po(e,this._firestore);let a;return a=typeof(n=Xe(n))=="string"||n instanceof ks?jx(this._dataReader,"WriteBatch.update",o._key,n,r,i):Dx(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(a.toMutation(o._key,lt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Po(e,this._firestore);return this._mutations=this._mutations.concat(new Kl(n._key,lt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Po(t,e){if((t=Xe(t)).firestore!==e)throw new K(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Rs(e)}get(e){const n=Po(e,this._firestore),r=new Fx(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return ae(24041);const o=i[0];if(o.isFoundDocument())return new xh(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new xh(this._firestore,r,n._key,null,n.converter);throw ae(18433,{doc:o})})}set(e,n,r){const i=Po(e,this._firestore),o=nv(i.converter,n,r),a=ev(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,a),this}update(e,n,r,...i){const o=Po(e,this._firestore);let a;return a=typeof(n=Xe(n))=="string"||n instanceof ks?jx(this._dataReader,"Transaction.update",o._key,n,r,i):Dx(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,a),this}delete(e){const n=Po(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N$ extends pW{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Po(e,this._firestore),r=new ha(this._firestore);return super.get(e).then(i=>new Mn(this._firestore,r,n._key,i._document,new gi(!1,!1),n.converter))}}function mW(t,e,n){t=Te(t,qe);const r={...dW,...n};(function(a){if(a.maxAttempts<1)throw new K(z.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const i=ft(t);return a7(i,o=>e(new N$(t,o)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t){t=Te(t,$e);const e=Te(t.firestore,qe),n=ft(e);return o$(n,t._key).then(r=>Bx(e,t,r))}function gW(t){t=Te(t,$e);const e=Te(t.firestore,qe),n=ft(e),r=new ha(e);return t7(n,t._key).then(i=>new Mn(e,r,t._key,i,new gi(i!==null&&i.hasLocalMutations,!0),t.converter))}function yW(t){t=Te(t,$e);const e=Te(t.firestore,qe),n=ft(e);return o$(n,t._key,{source:"server"}).then(r=>Bx(e,t,r))}function rg(t){t=Te(t,Vt);const e=Te(t.firestore,qe),n=ft(e),r=new ha(e);return T$(t._query),a$(n,t._query).then(i=>new $n(e,r,t,i))}function vW(t){t=Te(t,Vt);const e=Te(t.firestore,qe),n=ft(e),r=new ha(e);return n7(n,t._query).then(i=>new $n(e,r,t,i))}function _W(t){t=Te(t,Vt);const e=Te(t.firestore,qe),n=ft(e),r=new ha(e);return a$(n,t._query,{source:"server"}).then(i=>new $n(e,r,t,i))}function D$(t,e,n){t=Te(t,$e);const r=Te(t.firestore,qe),i=nv(t.converter,e,n),o=Rs(r);return nc(r,[ev(o,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,lt.none())])}function ab(t,e,n,...r){t=Te(t,$e);const i=Te(t.firestore,qe),o=Rs(i);let a;return a=typeof(e=Xe(e))=="string"||e instanceof ks?jx(o,"updateDoc",t._key,e,n,r):Dx(o,"updateDoc",t._key,e),nc(i,[a.toMutation(t._key,lt.exists(!0))])}function wW(t){return nc(Te(t.firestore,qe),[new Kl(t._key,lt.none())])}function j$(t,e){const n=Te(t.firestore,qe),r=po(t),i=nv(t.converter,e),o=Rs(t.firestore);return nc(n,[ev(o,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,lt.exists(!1))]).then(()=>r)}function sb(t,...e){var l,c,f;t=Xe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||ku(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(ku(e[r])){const d=e[r];e[r]=(l=d.next)==null?void 0:l.bind(d),e[r+1]=(c=d.error)==null?void 0:c.bind(d),e[r+2]=(f=d.complete)==null?void 0:f.bind(d)}let o,a,s;if(t instanceof $e)a=Te(t.firestore,qe),s=Hl(t._key.path),o={next:d=>{e[r]&&e[r](Bx(a,t,d))},error:e[r+1],complete:e[r+2]};else{const d=Te(t,Vt);a=Te(d.firestore,qe),s=d._query;const p=new ha(a);o={next:_=>{e[r]&&e[r](new $n(a,p,d,_))},error:e[r+1],complete:e[r+2]},T$(t._query)}const u=ft(a);return e7(u,s,i,o)}function bW(t,e,...n){const r=Xe(t),i=function(u){const l={bundle:"",bundleName:"",bundleSource:""},c=["bundle","bundleName","bundleSource"];for(const f of c){if(!(f in u)){l.error=`snapshotJson missing required field: ${f}`;break}const d=u[f];if(typeof d!="string"){l.error=`snapshotJson field '${f}' must be a string.`;break}if(d.length===0){l.error=`snapshotJson field '${f}' cannot be an empty string.`;break}f==="bundle"?l.bundle=d:f==="bundleName"?l.bundleName=d:f==="bundleSource"&&(l.bundleSource=d)}return l}(e);if(i.error)throw new K(z.INVALID_ARGUMENT,i.error);let o,a=0;if(typeof n[a]!="object"||ku(n[a])||(o=n[a++]),i.bundleSource==="QuerySnapshot"){let s=null;if(typeof n[a]=="object"&&ku(n[a])){const u=n[a++];s={next:u.next,error:u.error,complete:u.complete}}else s={next:n[a++],error:n[a++],complete:n[a++]};return function(l,c,f,d,p){let _,y=!1;return nb(l,c.bundle).then(()=>m$(l,c.bundleName)).then(v=>{v&&!y&&(p&&v.withConverter(p),_=sb(v,f||{},d))}).catch(v=>(d.error&&d.error(v),()=>{})),()=>{y||(y=!0,_&&_())}}(r,i,o,s,n[a])}if(i.bundleSource==="DocumentSnapshot"){let s=null;if(typeof n[a]=="object"&&ku(n[a])){const u=n[a++];s={next:u.next,error:u.error,complete:u.complete}}else s={next:n[a++],error:n[a++],complete:n[a++]};return function(l,c,f,d,p){let _,y=!1;return nb(l,c.bundle).then(()=>{if(!y){const v=new $e(l,p||null,te.fromPath(c.bundleName));_=sb(v,f||{},d)}}).catch(v=>(d.error&&d.error(v),()=>{})),()=>{y||(y=!0,_&&_())}}(r,i,o,s,n[a])}throw new K(z.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function EW(t,e){t=Te(t,qe);const n=ft(t),r=ku(e)?e:{next:e};return o7(n,r)}function nc(t,e){const n=ft(t);return i7(n,e)}function Bx(t,e,n){const r=n.docs.get(e._key),i=new ha(t);return new Mn(t,i,e._key,r,new gi(n.hasPendingWrites,n.fromCache),e.converter)}function xW(t){return t=Te(t,qe),ft(t),new R$(t,e=>nc(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TW(t,e){t=Te(t,qe);const n=ft(t);if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return Vn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(o){const a=typeof o=="string"?function(l){try{return JSON.parse(l)}catch(c){throw new K(z.INVALID_ARGUMENT,"Failed to parse JSON: "+(c==null?void 0:c.message))}}(o):o,s=[];if(Array.isArray(a.indexes))for(const u of a.indexes){const l=GP(u,"collectionGroup"),c=[];if(Array.isArray(u.fields))for(const f of u.fields){const d=GP(f,"fieldPath"),p=$x("setIndexConfiguration",d);f.arrayConfig==="CONTAINS"?c.push(new Za(p,2)):f.order==="ASCENDING"?c.push(new Za(p,0)):f.order==="DESCENDING"&&c.push(new Za(p,1))}s.push(new Qu(Qu.UNKNOWN_ID,l,c,Yu.empty()))}return s}(e);return l7(n,r)}function GP(t,e){if(typeof t[e]!="string")throw new K(z.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function SW(t){var i;t=Te(t,qe);const e=KP.get(t);if(e)return e;if(((i=ft(t)._uninitializedComponentsProvider)==null?void 0:i._offline.kind)!=="persistent")return null;const r=new M$(t);return KP.set(t,r),r}function AW(t){$$(t,!0)}function IW(t){$$(t,!1)}function PW(t){const e=ft(t._firestore);f7(e).then(n=>Y("deleting all persistent cache indexes succeeded")).catch(n=>Vn("deleting all persistent cache indexes failed",n))}function $$(t,e){const n=ft(t._firestore);c7(n,e).then(r=>Y(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>Vn(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const KP=new WeakMap;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Ux.instance.onExistenceFilterMismatch(e)}}class Ux{constructor(){this.i=new Map}static get instance(){return xp||(xp=new Ux,n8(xp)),xp}u(e){this.i.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.i;return r.set(n,e),()=>r.delete(n)}}let xp=null;(function(e,n=!0){j5(ql),Hu(new cs("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),s=new qe(new L5(r.getProvider("auth-internal")),new U5(a,r.getProvider("app-check-internal")),O9(a,i),a);return o={useFetchStreams:n,...o},s._setSettings(o),s},"PUBLIC").setMultipleInstances(!0)),Uo(zP,qP,e),Uo(zP,qP,"esm2020")})();const ub=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Vx,AggregateField:dl,AggregateQuerySnapshot:x$,Bytes:In,CACHE_SIZE_UNLIMITED:g7,CollectionReference:Rr,DocumentReference:$e,DocumentSnapshot:Mn,FieldPath:ks,FieldValue:fa,Firestore:qe,FirestoreError:K,GeoPoint:Nr,LoadBundleTask:f$,PersistentCacheIndexManager:M$,Query:Vt,QueryCompositeFilterConstraint:Ds,QueryConstraint:ec,QueryDocumentSnapshot:Lf,QueryEndAtConstraint:Od,QueryFieldFilterConstraint:tc,QueryLimitConstraint:Id,QueryOrderByConstraint:tv,QuerySnapshot:$n,QueryStartAtConstraint:Pd,SnapshotMetadata:gi,Timestamp:De,Transaction:N$,VectorValue:Qn,WriteBatch:R$,_AutoId:Ry,_ByteString:yt,_DatabaseId:Yo,_DocumentKey:te,_EmptyAppCheckTokenProvider:z5,_EmptyAuthCredentialsProvider:HD,_FieldPath:ot,_TestingHooks:OW,_cast:Te,_debugAssert:$5,_internalAggregationQueryToProtoRunAggregationQueryRequest:$7,_internalQueryToProtoQueryTarget:M7,_isBase64Available:A9,_logWarn:Vn,_validateIsNotUsedTogether:KD,addDoc:j$,aggregateFieldEqual:Q7,aggregateQuerySnapshotEqual:Y7,and:B7,arrayRemove:N7,arrayUnion:R7,average:K7,clearIndexedDbPersistence:w7,collection:Eh,collectionGroup:p7,connectFirestoreEmulator:c$,count:P$,deleteAllPersistentCacheIndexes:PW,deleteDoc:wW,deleteField:C7,disableNetwork:x7,disablePersistentCacheIndexAutoCreation:IW,doc:po,documentId:S7,documentSnapshotFromJSON:lW,enableIndexedDbPersistence:v7,enableMultiTabIndexedDbPersistence:_7,enableNetwork:E7,enablePersistentCacheIndexAutoCreation:AW,endAt:H7,endBefore:W7,ensureFirestoreConfigured:ft,executeWrite:nc,getAggregateFromServer:O$,getCountFromServer:X7,getDoc:sm,getDocFromCache:gW,getDocFromServer:yW,getDocs:rg,getDocsFromCache:vW,getDocsFromServer:_W,getFirestore:h$,getPersistentCacheIndexManager:SW,increment:D7,initializeFirestore:y7,limit:ob,limitToLast:U7,loadBundle:nb,memoryEagerGarbageCollector:nW,memoryLocalCache:iW,memoryLruGarbageCollector:rW,namedQuery:m$,onSnapshot:sb,onSnapshotResume:bW,onSnapshotsInSync:EW,or:F7,orderBy:ib,persistentLocalCache:oW,persistentMultipleTabManager:uW,persistentSingleTabManager:C$,query:rb,queryEqual:Ox,querySnapshotFromJSON:cW,refEqual:m7,runTransaction:mW,serverTimestamp:k7,setDoc:D$,setIndexConfiguration:TW,setLogLevel:M5,snapshotEqual:hW,startAfter:q7,startAt:z7,sum:G7,terminate:T7,updateDoc:ab,vector:j7,waitForPendingWrites:b7,where:L7,writeBatch:xW},Symbol.toStringTag,{value:"Module"}));function V$(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CW=V$,L$=new dd("auth","Firebase",V$());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=new NE("@firebase/auth");function kW(t,...e){ig.logLevel<=Ie.WARN&&ig.warn(`Auth (${ql}): ${t}`,...e)}function um(t,...e){ig.logLevel<=Ie.ERROR&&ig.error(`Auth (${ql}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t,...e){throw zx(t,...e)}function ti(t,...e){return zx(t,...e)}function F$(t,e,n){const r={...CW(),[e]:n};return new dd("auth","Firebase",r).create(e,{appName:t.name})}function Wo(t){return F$(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return L$.create(t,...e)}function he(t,e,...n){if(!t)throw zx(e,...n)}function yi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw um(e),new Error(e)}function $i(t,e){t||yi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function RW(){return QP()==="http:"||QP()==="https:"}function QP(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RW()||dz()||"connection"in navigator)?navigator.onLine:!0}function DW(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.shortDelay=e,this.longDelay=n,$i(n>e,"Short delay should be less than long delay!"),this.isMobile=fz()||pz()}get(){return NW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t,e){$i(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$W=new Cd(3e4,6e4);function da(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ki(t,e,n,r,i={}){return U$(t,i,async()=>{let o={},a={};r&&(e==="GET"?a=r:o={body:JSON.stringify(r)});const s=pd({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const l={method:e,headers:u,...o};return hz()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Ps(t.emulatorConfig.host)&&(l.credentials="include"),B$.fetch()(await z$(t,t.config.apiHost,n,s),l)})}async function U$(t,e,n){t._canInitEmulator=!1;const r={...jW,...e};try{const i=new LW(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Tp(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const s=o.ok?a.errorMessage:a.error.message,[u,l]=s.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tp(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Tp(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Tp(t,"user-disabled",a);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw F$(t,c,l);Mr(t,c)}}catch(i){if(i instanceof zi)throw i;Mr(t,"network-request-failed",{message:String(i)})}}async function rv(t,e,n,r,i={}){const o=await Ki(t,e,n,r,i);return"mfaPendingCredential"in o&&Mr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function z$(t,e,n,r){const i=`${e}${n}?${r}`,o=t,a=o.config.emulator?qx(t.config,i):`${t.config.apiScheme}://${i}`;return MW.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}function VW(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LW{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),$W.get())})}}function Tp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ti(t,e,r);return i.customData._tokenResponse=n,i}function YP(t){return t!==void 0&&t.enterprise!==void 0}class FW{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return VW(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BW(t,e){return Ki(t,"GET","/v2/recaptchaConfig",da(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UW(t,e){return Ki(t,"POST","/v1/accounts:delete",e)}async function ag(t,e){return Ki(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zW(t,e=!1){const n=Xe(t),r=await n.getIdToken(e),i=Wx(r);he(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Ff(Z_(i.auth_time)),issuedAtTime:Ff(Z_(i.iat)),expirationTime:Ff(Z_(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Z_(t){return Number(t)*1e3}function Wx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return um("JWT malformed, contained fewer than 3 sections"),null;try{const i=ED(n);return i?JSON.parse(i):(um("Failed to decode base64 JWT payload"),null)}catch(i){return um("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function XP(t){const e=Wx(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zi&&qW(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function qW({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ff(this.lastLoginAt),this.creationTime=Ff(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sg(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Th(t,ag(e,{idToken:n}));he(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=(f=i.providerUserInfo)!=null&&f.length?q$(i.providerUserInfo):[],a=GW(t.providerData,o),s=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),l=s?u:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new lb(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,c)}async function HW(t){const e=Xe(t);await sg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GW(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function q$(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KW(t,e){const n=await U$(t,{},async()=>{const r=pd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,a=await z$(t,i,"/v1/token",`key=${o}`),s=await t._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:s,body:r};return t.emulatorConfig&&Ps(t.emulatorConfig.host)&&(u.credentials="include"),B$.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function QW(t,e){return Ki(t,"POST","/v2/accounts:revokeToken",da(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=XP(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await KW(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,a=new Ru;return r&&(he(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(he(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ru,this.toJSON())}_performRefresh(){return yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Pr{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new WW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new lb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Th(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zW(this,e)}reload(){return HW(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ar(this.auth.app))return Promise.reject(Wo(this.auth));const e=await this.getIdToken();return await Th(this,UW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,s=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,c=n.lastLoginAt??void 0,{uid:f,emailVerified:d,isAnonymous:p,providerData:_,stsTokenManager:y}=n;he(f&&y,e,"internal-error");const b=Ru.fromJSON(this.name,y);he(typeof f=="string",e,"internal-error"),lo(r,e.name),lo(i,e.name),he(typeof d=="boolean",e,"internal-error"),he(typeof p=="boolean",e,"internal-error"),lo(o,e.name),lo(a,e.name),lo(s,e.name),lo(u,e.name),lo(l,e.name),lo(c,e.name);const v=new Pr({uid:f,auth:e,email:i,emailVerified:d,displayName:r,isAnonymous:p,photoURL:a,phoneNumber:o,tenantId:s,stsTokenManager:b,createdAt:l,lastLoginAt:c});return _&&Array.isArray(_)&&(v.providerData=_.map(g=>({...g}))),u&&(v._redirectEventId=u),v}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ru;i.updateFromServerResponse(n);const o=new Pr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await sg(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];he(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?q$(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),s=new Ru;s.updateFromIdToken(r);const u=new Pr({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:a}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new lb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=new Map;function vi(t){$i(t instanceof Function,"Expected a class definition");let e=JP.get(t);return e?($i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,JP.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}W$.type="NONE";const ZP=W$;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t,e,n){return`firebase:${t}:${e}:${n}`}class Nu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=lm(this.userKey,i.apiKey,o),this.fullPersistenceKey=lm("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ag(this.auth,{idToken:e}).catch(()=>{});return n?Pr._fromGetAccountInfoResponse(this.auth,n,e):null}return Pr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Nu(vi(ZP),e,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let o=i[0]||vi(ZP);const a=lm(r,e.config.apiKey,e.name);let s=null;for(const l of n)try{const c=await l._get(a);if(c){let f;if(typeof c=="string"){const d=await ag(e,{idToken:c}).catch(()=>{});if(!d)break;f=await Pr._fromGetAccountInfoResponse(e,d,c)}else f=Pr._fromJSON(e,c);l!==o&&(s=f),o=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Nu(o,e,r):(o=u[0],s&&await o._set(a,s.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(a)}catch{}})),new Nu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q$(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(H$(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(X$(e))return"Blackberry";if(J$(e))return"Webos";if(G$(e))return"Safari";if((e.includes("chrome/")||K$(e))&&!e.includes("edge/"))return"Chrome";if(Y$(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function H$(t=$t()){return/firefox\//i.test(t)}function G$(t=$t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K$(t=$t()){return/crios\//i.test(t)}function Q$(t=$t()){return/iemobile/i.test(t)}function Y$(t=$t()){return/android/i.test(t)}function X$(t=$t()){return/blackberry/i.test(t)}function J$(t=$t()){return/webos/i.test(t)}function Hx(t=$t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YW(t=$t()){var e;return Hx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function XW(){return mz()&&document.documentMode===10}function Z$(t=$t()){return Hx(t)||Y$(t)||J$(t)||X$(t)||/windows phone/i.test(t)||Q$(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(t,e=[]){let n;switch(t){case"Browser":n=eO($t());break;case"Worker":n=`${eO($t())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ql}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((a,s)=>{try{const u=e(o);a(u)}catch(u){s(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZW(t,e={}){return Ki(t,"GET","/v2/passwordPolicy",da(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH=6;class tH{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??eH,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tO(this),this.idTokenSubscription=new tO(this),this.beforeStateQueue=new JW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L$,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vi(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Nu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ag(this,{idToken:e}),r=await Pr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Ar(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,s=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===s)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ar(this.app))return Promise.reject(Wo(this));const n=e?Xe(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ar(this.app)?Promise.reject(Wo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ar(this.app)?Promise.reject(Wo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZW(this),n=new tH(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await QW(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vi(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Nu.create(this,[vi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(s,this,"internal-error"),s.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&kW(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function rc(t){return Xe(t)}class tO{constructor(e){this.auth=e,this.observer=null,this.addObserver=bz(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rH(t){iv=t}function tV(t){return iv.loadJS(t)}function iH(){return iv.recaptchaEnterpriseScript}function oH(){return iv.gapiScript}function aH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class sH{constructor(){this.enterprise=new uH}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class uH{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const lH="recaptcha-enterprise",nV="NO_RECAPTCHA";class cH{constructor(e){this.type=lH,this.auth=rc(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,s)=>{BW(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const l=new FW(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,a(l.siteKey)}}).catch(u=>{s(u)})})}function i(o,a,s){const u=window.grecaptcha;YP(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{a(l)}).catch(()=>{a(nV)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sH().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{r(this.auth).then(s=>{if(!n&&YP(window.grecaptcha))i(s,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=iH();u.length!==0&&(u+=s),tV(u).then(()=>{i(s,o,a)}).catch(l=>{a(l)})}}).catch(s=>{a(s)})})}}async function nO(t,e,n,r=!1,i=!1){const o=new cH(t);let a;if(i)a=nV;else try{a=await o.verify(n)}catch{a=await o.verify(n,!0)}const s={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const u=s.phoneEnrollmentInfo.phoneNumber,l=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const u=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function cb(t,e,n,r,i){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await nO(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await nO(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fH(t,e){const n=md(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(jr(o,e??{}))return i;Mr(i,"already-initialized")}return n.initialize({options:e})}function hH(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function dH(t,e,n){const r=rc(t);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=rV(e),{host:a,port:s}=pH(e),u=s===null?"":`:${s}`,l={url:`${o}//${a}${u}/`},c=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(jr(l,r.config.emulator)&&jr(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,Ps(a)?(RE(`${o}//${a}${u}`),ID("Auth",!0)):mH()}function rV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pH(t){const e=rV(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:rO(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:rO(a)}}}function rO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function mH(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yi("not implemented")}_getIdTokenResponse(e){return yi("not implemented")}_linkToIdToken(e,n){return yi("not implemented")}_getReauthenticationResolver(e){return yi("not implemented")}}async function gH(t,e){return Ki(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yH(t,e){return rv(t,"POST","/v1/accounts:signInWithPassword",da(t,e))}async function vH(t,e){return Ki(t,"POST","/v1/accounts:sendOobCode",da(t,e))}async function _H(t,e){return vH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wH(t,e){return rv(t,"POST","/v1/accounts:signInWithEmailLink",da(t,e))}async function bH(t,e){return rv(t,"POST","/v1/accounts:signInWithEmailLink",da(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends Gx{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Sh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cb(e,n,"signInWithPassword",yH);case"emailLink":return wH(e,{email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cb(e,r,"signUpPassword",gH);case"emailLink":return bH(e,{idToken:n,email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(t,e){return rv(t,"POST","/v1/accounts:signInWithIdp",da(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH="http://localhost";class ws extends Gx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const a=new ws(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Du(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Du(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Du(e,n)}buildRequest(){const e={requestUri:EH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xH(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TH(t){const e=ff(hf(t)).link,n=e?ff(hf(e)).deep_link_id:null,r=ff(hf(t)).deep_link_id;return(r?ff(hf(r)).link:null)||r||n||e||t}class ov{constructor(e){const n=ff(hf(e)),r=n.apiKey??null,i=n.oobCode??null,o=xH(n.mode??null);he(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=TH(e);try{return new ov(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(){this.providerId=ic.PROVIDER_ID}static credential(e,n){return Sh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ov.parseLink(n);return he(r,"argument-error"),Sh._fromEmailAndCode(e,r.code,r.tenantId)}}ic.PROVIDER_ID="password";ic.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ic.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends iV{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends kd{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wo.credential(e.oauthAccessToken)}catch{return null}}}wo.FACEBOOK_SIGN_IN_METHOD="facebook.com";wo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends kd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ws._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return bo.credential(n,r)}catch{return null}}}bo.GOOGLE_SIGN_IN_METHOD="google.com";bo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends kd{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Eo.credential(e.oauthAccessToken)}catch{return null}}}Eo.GITHUB_SIGN_IN_METHOD="github.com";Eo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends kd{constructor(){super("twitter.com")}static credential(e,n){return ws._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xo.credential(n,r)}catch{return null}}}xo.TWITTER_SIGN_IN_METHOD="twitter.com";xo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Pr._fromIdTokenResponse(e,r,i),a=iO(r);return new pl({user:o,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=iO(r);return new pl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function iO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends zi{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ug.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ug(e,n,r,i)}}function oV(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ug._fromErrorAndOperation(t,o,e,r):o})}async function SH(t,e,n=!1){const r=await Th(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AH(t,e,n=!1){const{auth:r}=t;if(Ar(r.app))return Promise.reject(Wo(r));const i="reauthenticate";try{const o=await Th(t,oV(r,i,e,t),n);he(o.idToken,r,"internal-error");const a=Wx(o.idToken);he(a,r,"internal-error");const{sub:s}=a;return he(t.uid===s,r,"user-mismatch"),pl._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Mr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aV(t,e,n=!1){if(Ar(t.app))return Promise.reject(Wo(t));const r="signIn",i=await oV(t,r,e),o=await pl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function IH(t,e){return aV(rc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PH(t,e,n){var r;he(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),he(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),he(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(he(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(he(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OH(t,e,n){const r=rc(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(a,s){he(s.handleCodeInApp,r,"argument-error"),s&&PH(r,a,s)}o(i,n),await cb(r,i,"getOobCode",_H)}function CH(t,e){const n=ov.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function kH(t,e,n){if(Ar(t.app))return Promise.reject(Wo(t));const r=Xe(t),i=ic.credentialWithLink(e,n||og());return he(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),IH(r,i)}function RH(t,e,n,r){return Xe(t).onIdTokenChanged(e,n,r)}function NH(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}const lg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lg,"1"),this.storage.removeItem(lg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DH=1e3,jH=10;class uV extends sV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z$(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,s,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);XW()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,jH):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},DH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uV.type="LOCAL";const MH=uV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV extends sV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lV.type="SESSION";const cV=lV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $H(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new av(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const s=Array.from(a).map(async l=>l(n.origin,o)),u=await $H(s);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}av.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((s,u)=>{const l=Kx("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),s(d.data.response);break;default:clearTimeout(c),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(){return window}function LH(t){ni().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(){return typeof ni().WorkerGlobalScope<"u"&&typeof ni().importScripts=="function"}async function FH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BH(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function UH(){return fV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV="firebaseLocalStorageDb",zH=1,cg="firebaseLocalStorage",dV="fbase_key";class Rd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sv(t,e){return t.transaction([cg],e?"readwrite":"readonly").objectStore(cg)}function qH(){const t=indexedDB.deleteDatabase(hV);return new Rd(t).toPromise()}function fb(){const t=indexedDB.open(hV,zH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(cg,{keyPath:dV})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(cg)?e(r):(r.close(),await qH(),e(await fb()))})})}async function oO(t,e,n){const r=sv(t,!0).put({[dV]:e,value:n});return new Rd(r).toPromise()}async function WH(t,e){const n=sv(t,!1).get(e),r=await new Rd(n).toPromise();return r===void 0?null:r.value}function aO(t,e){const n=sv(t,!0).delete(e);return new Rd(n).toPromise()}const HH=800,GH=3;class pV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fb(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>GH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=av._getInstance(UH()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await FH(),!this.activeServiceWorker)return;this.sender=new VH(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fb();return await oO(e,lg,"1"),await aO(e,lg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>oO(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>WH(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>aO(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=sv(i,!1).getAll();return new Rd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pV.type="LOCAL";const KH=pV;new Cd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(t,e){return e?vi(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx extends Gx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Du(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Du(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Du(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YH(t){return aV(t.auth,new Qx(t),t.bypassAuthState)}function XH(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),AH(n,new Qx(t),t.bypassAuthState)}async function JH(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),SH(n,new Qx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:a,type:s}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YH;case"linkViaPopup":case"linkViaRedirect":return JH;case"reauthViaPopup":case"reauthViaRedirect":return XH;default:Mr(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZH=new Cd(2e3,1e4);class vu extends mV{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,vu.currentPopupAction&&vu.currentPopupAction.cancel(),vu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=Kx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZH.get())};e()}}vu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eG="pendingRedirect",cm=new Map;class tG extends mV{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cm.get(this.auth._key());if(!e){try{const r=await nG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cm.set(this.auth._key(),e)}return this.bypassAuthState||cm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nG(t,e){const n=oG(e),r=iG(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function rG(t,e){cm.set(t._key(),e)}function iG(t){return vi(t._redirectPersistence)}function oG(t){return lm(eG,t.config.apiKey,t.name)}async function aG(t,e,n=!1){if(Ar(t.app))return Promise.reject(Wo(t));const r=rc(t),i=QH(r,e),a=await new tG(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sG=10*60*1e3;class uG{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lG(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!gV(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ti(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sG&&this.cachedEventUids.clear(),this.cachedEventUids.has(sO(e))}saveEventToCache(e){this.cachedEventUids.add(sO(e)),this.lastProcessedEventTime=Date.now()}}function sO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gV({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gV(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cG(t,e={}){return Ki(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hG=/^https?/;async function dG(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cG(t);for(const n of e)try{if(pG(n))return}catch{}Mr(t,"unauthorized-domain")}function pG(t){const e=og(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!hG.test(n))return!1;if(fG.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mG=new Cd(3e4,6e4);function uO(){const t=ni().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gG(t){return new Promise((e,n)=>{var i,o,a;function r(){uO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uO(),n(ti(t,"network-request-failed"))},timeout:mG.get()})}if((o=(i=ni().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=ni().gapi)!=null&&a.load)r();else{const s=aH("iframefcb");return ni()[s]=()=>{gapi.load?r():n(ti(t,"network-request-failed"))},tV(`${oH()}?onload=${s}`).catch(u=>n(u))}}).catch(e=>{throw fm=null,e})}let fm=null;function yG(t){return fm=fm||gG(t),fm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG=new Cd(5e3,15e3),_G="__/auth/iframe",wG="emulator/auth/iframe",bG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xG(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qx(e,wG):`https://${t.config.authDomain}/${_G}`,r={apiKey:e.apiKey,appName:t.name,v:ql},i=EG.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${pd(r).slice(1)}`}async function TG(t){const e=await yG(t),n=ni().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:xG(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bG,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const a=ti(t,"network-request-failed"),s=ni().setTimeout(()=>{o(a)},vG.get());function u(){ni().clearTimeout(s),i(r)}r.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AG=500,IG=600,PG="_blank",OG="http://localhost";class lO{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CG(t,e,n,r=AG,i=IG){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const u={...SG,width:r.toString(),height:i.toString(),top:o,left:a},l=$t().toLowerCase();n&&(s=K$(l)?PG:n),H$(l)&&(e=e||OG,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[p,_])=>`${d}${p}=${_},`,"");if(YW(l)&&s!=="_self")return kG(e||"",s),new lO(null);const f=window.open(e||"",s,c);he(f,t,"popup-blocked");try{f.focus()}catch{}return new lO(f)}function kG(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RG="__/auth/handler",NG="emulator/auth/handler",DG=encodeURIComponent("fac");async function cO(t,e,n,r,i,o){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ql,eventId:i};if(e instanceof iV){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",wz(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,f]of Object.entries({}))a[c]=f}if(e instanceof kd){const c=e.getScopes().filter(f=>f!=="");c.length>0&&(a.scopes=c.join(","))}t.tenantId&&(a.tid=t.tenantId);const s=a;for(const c of Object.keys(s))s[c]===void 0&&delete s[c];const u=await t._getAppCheckToken(),l=u?`#${DG}=${encodeURIComponent(u)}`:"";return`${jG(t)}?${pd(s).slice(1)}${l}`}function jG({config:t}){return t.emulator?qx(t,NG):`https://${t.authDomain}/${RG}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="webStorageSupport";class MG{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cV,this._completeRedirectFn=aG,this._overrideRedirectResult=rG}async _openPopup(e,n,r,i){var a;$i((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await cO(e,n,r,og(),i);return CG(e,o,Kx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await cO(e,n,r,og(),i);return LH(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):($i(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await TG(e),r=new uG(e);return n.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(e0,{type:e0},i=>{var a;const o=(a=i==null?void 0:i[0])==null?void 0:a[e0];o!==void 0&&n(!!o),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dG(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Z$()||G$()||Hx()}}const $G=MG;var fO="@firebase/auth",hO="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LG(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FG(t){Hu(new cs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;he(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eV(t)},l=new nH(r,i,o,u);return hH(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Hu(new cs("auth-internal",e=>{const n=rc(e.getProvider("auth").getImmediate());return(r=>new VG(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Uo(fO,hO,LG(t)),Uo(fO,hO,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BG=5*60,UG=AD("authIdTokenMaxAge")||BG;let dO=null;const zG=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>UG)return;const i=n==null?void 0:n.token;dO!==i&&(dO=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function qG(t=jD()){const e=md(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fH(t,{popupRedirectResolver:$G,persistence:[KH,MH,cV]}),r=AD("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=zG(o.toString());NH(n,a,()=>a(n.currentUser)),RH(n,s=>a(s))}}const i=TD("auth");return i&&dH(n,`http://${i}`),n}function WG(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}rH({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=ti("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",WG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FG("Browser");const yV={apiKey:"AIzaSyA3qMN6_moBA6ZXUC1mD4yZP9YxBXd1Mps",authDomain:"epsa-30d0b.firebaseapp.com",projectId:"epsa-30d0b",storageBucket:"epsa-30d0b.firebasestorage.app",messagingSenderId:"148985999968",appId:"1:148985999968:web:2c49caf6875ca31f348905",measurementId:"G-0W0CWTK14Q"},vV=DD(yV,"admin-app"),Sn=h$(vV),Wr=qG(vV);Wr.settings.appVerificationDisabledForTesting=!1;Wr.tenantId=null;console.log(" Admin Firebase initialized in PRODUCTION mode");console.log("Project ID:",yV.projectId);console.log(" Emulators DISABLED for admin dashboard");const HG=({userRole:t="admin"})=>{const[e,n]=W.useState(tu),[r,i]=W.useState("part1"),[o,a]=W.useState(!1),[s,u]=W.useState([]),[l,c]=W.useState(null),[f,d]=W.useState(!1),[p,_]=W.useState(null),[y,b]=W.useState("custom");W.useEffect(()=>{v()},[]);const v=async()=>{try{const{doc:j,getDoc:M}=await Vm(async()=>{const{doc:H,getDoc:Q}=await Promise.resolve().then(()=>ub);return{doc:H,getDoc:Q}},void 0),F=j(Sn,"calculatorConfig","published"),L=await M(F);if(L.exists()){const H=L.data();if(H!=null&&H.config){n(H.config),localStorage.setItem("epsa_calculator_config",JSON.stringify(H.config));return}}const V=localStorage.getItem("epsa_calculator_config");if(V){n(JSON.parse(V));return}n(tu)}catch(j){console.error("Error loading config:",j);try{const M=localStorage.getItem("epsa_calculator_config");M&&n(JSON.parse(M))}catch{n(tu)}}},g=j=>{const M=[];j.part1.variables.forEach(H=>{(H.weight<Ta.minWeight||H.weight>Ta.maxWeight)&&M.push(`${H.name} weight (${H.weight}) is outside recommended range`)});const{lower:F,moderate:L,higher:V}=j.part1.riskCutoffs;return F.threshold>=L.threshold&&M.push("Lower risk threshold must be less than moderate threshold"),L.threshold>=V.threshold&&M.push("Moderate risk threshold must be less than higher threshold"),(j.part1.intercept<-10||j.part1.intercept>10)&&M.push("Intercept value is outside reasonable range (-10 to 10)"),u(M),M.length===0},E=(j,M)=>{const F=parseFloat(M);n(L=>({...L,part1:{...L.part1,variables:L.part1.variables.map(V=>V.id===j?{...V,weight:F}:V)}})),a(!0),b("custom")},P=j=>{const M=parseFloat(j);n(F=>({...F,part1:{...F.part1,intercept:M}})),a(!0),b("custom")},T=(j,M)=>{const F=parseFloat(M);n(L=>({...L,part1:{...L.part1,riskCutoffs:{...L.part1.riskCutoffs,[j]:{...L.part1.riskCutoffs[j],threshold:F}}}})),a(!0)},A=j=>{n(M=>{const F=j(M.part2);return{...M,part2:F}}),a(!0),b("custom")},x=j=>{if(j==="default")n(tu);else if(dI[j]){const M=dI[j];n(F=>({...F,part1:{...F.part1,intercept:M.part1.intercept,variables:F.part1.variables.map(L=>{const V=M.part1.variables.find(H=>H.id===L.id);return V?{...L,weight:V.weight}:L})}}))}b(j),a(!0)},S=async()=>{if(!g(e)){_({type:"error",message:"Validation failed. Please fix errors before saving."});return}d(!0);try{const j=new Date().toISOString(),{doc:M,setDoc:F,serverTimestamp:L}=await Vm(async()=>{const{doc:Q,setDoc:ie,serverTimestamp:J}=await Promise.resolve().then(()=>ub);return{doc:Q,setDoc:ie,serverTimestamp:J}},void 0),V=M(Sn,"calculatorConfig","published");await F(V,{version:e.version,config:e,updatedAt:L(),updatedAtIso:j},{merge:!0});const H=M(Sn,"calculatorConfigVersions",j);await F(H,{version:e.version,config:e,createdAt:L(),createdAtIso:j}),localStorage.setItem("epsa_calculator_config",JSON.stringify(e)),a(!1),_({type:"success",message:"Configuration published successfully!"})}catch(j){console.error("Error saving config:",j),_({type:"error",message:"Failed to publish configuration."})}finally{d(!1)}},O=()=>{window.confirm("Reset to default configuration? All changes will be lost.")&&(n(tu),a(!0),b("default"))},C=()=>{const j=document.createElement("input");j.type="file",j.accept=".csv,.json",j.onchange=M=>{const F=M.target.files[0];F&&k(F)},j.click()},k=j=>{const M=new FileReader;M.onload=F=>{try{const L=JSON.parse(F.target.result);N(L)}catch{alert("Error parsing cohort file. Please ensure it is valid JSON.")}},M.readAsText(j)},N=j=>{const M={totalPatients:j.length,detectedCases:j.filter(L=>L.cancerDetected).length,avgPredictedRisk:0,calibrationSlope:1,calibrationIntercept:0,sensitivity:.85,specificity:.72,auc:.79};let F=0;j.forEach(L=>{const V=e.part1.intercept+e.part1.variables.reduce((Q,ie)=>{const J=L[ie.id]||0;return Q+ie.weight*J},0),H=1/(1+Math.exp(-V));F+=H}),M.avgPredictedRisk=(F/j.length*100).toFixed(1),c(M)},R=j=>{const M=Ta.recommendedVariables.find(V=>V.id===j.id);if(!M)return null;const[F,L]=M.recommendedRange;return j.weight<F||j.weight>L?{type:"warning",message:`Outside recommended range [${F}, ${L}]`}:{type:"ok"}};return m.jsxs("div",{className:"calculator-admin",children:[m.jsxs("div",{className:"admin-header",children:[m.jsxs("h1",{children:[m.jsx(Ew,{size:24})," Calculator Model Administration"]}),m.jsxs("div",{className:"admin-actions",children:[m.jsxs("button",{className:"btn-simulate",onClick:C,disabled:f,children:[m.jsx(Ja,{size:16})," Simulate with Cohort"]}),m.jsxs("button",{className:"btn-reset",onClick:O,disabled:f,children:[m.jsx(jU,{size:16})," Reset to Default"]}),m.jsx("button",{className:"btn-save",onClick:S,disabled:!o||s.length>0||f,children:f?"Saving...":m.jsxs(m.Fragment,{children:[m.jsx($U,{size:16})," Save Changes"]})})]})]}),p&&m.jsxs("div",{className:`save-status ${p.type}`,children:[p.type==="success"?m.jsx(lr,{size:16}):m.jsx(Ti,{size:16}),p.message]}),s.length>0&&m.jsxs("div",{className:"validation-errors",children:[m.jsxs("h3",{children:[m.jsx(Ti,{size:16})," Validation Errors"]}),m.jsx("ul",{children:s.map((j,M)=>m.jsx("li",{children:j},M))})]}),m.jsxs("div",{className:"model-templates",children:[m.jsx("label",{children:"Model Template:"}),m.jsxs("select",{value:y,onChange:j=>x(j.target.value),children:[m.jsx("option",{value:"default",children:"Default (Current)"}),m.jsx("option",{value:"custom",children:"Custom (Modified)"}),m.jsx("option",{value:"conservative",children:"Conservative Model"}),m.jsx("option",{value:"aggressive",children:"Aggressive Detection"})]})]}),m.jsxs("div",{className:"admin-tabs",children:[m.jsx("button",{className:r==="part1"?"active":"",onClick:()=>i("part1"),children:"Part 1: Pre-Assessment"}),m.jsx("button",{className:r==="part2"?"active":"",onClick:()=>i("part2"),children:"Part 2: Clinical Integration"}),m.jsx("button",{className:r==="cohort"?"active":"",onClick:()=>i("cohort"),children:"Cohort Analysis"})]}),r==="part1"&&m.jsxs("div",{className:"config-section",children:[m.jsxs("div",{className:"intercept-section",children:[m.jsx("h3",{children:"Model Intercept (Baseline Risk)"}),m.jsxs("div",{className:"input-group",children:[m.jsx("input",{type:"number",step:"0.0001",value:e.part1.intercept,onChange:j=>P(j.target.value)}),m.jsx("span",{className:"input-hint",children:"Higher = lower baseline risk"})]})]}),m.jsxs("div",{className:"variables-section",children:[m.jsx("h3",{children:"Variable Weights (Logistic Regression Coefficients)"}),m.jsxs("div",{className:"variables-table",children:[m.jsxs("div",{className:"table-header",children:[m.jsx("span",{children:"Variable"}),m.jsx("span",{children:"Current Weight"}),m.jsx("span",{children:"Recommended Range"}),m.jsx("span",{children:"Impact"}),m.jsx("span",{children:"Status"})]}),e.part1.variables.map(j=>{var F;const M=R(j);return m.jsxs("div",{className:"variable-row",children:[m.jsxs("div",{className:"variable-info",children:[m.jsx("strong",{children:j.name}),m.jsx("small",{children:j.description}),j.clinicalNote&&m.jsx("span",{className:"clinical-note",children:j.clinicalNote})]}),m.jsx("div",{className:"weight-input",children:m.jsx("input",{type:"number",step:Ta.stepSize,min:Ta.minWeight,max:Ta.maxWeight,value:j.weight,onChange:L=>E(j.id,L.target.value)})}),m.jsx("div",{className:"recommended-range",children:((F=Ta.recommendedVariables.find(L=>L.id===j.id))==null?void 0:F.recommendedRange.join(" to "))||"N/A"}),m.jsx("div",{className:"impact-bar",children:m.jsx("div",{className:"impact-fill",style:{width:`${Math.abs(j.weight)*50}%`,background:j.weight>0?"#e74c3c":"#27ae60"}})}),m.jsx("div",{className:`status ${(M==null?void 0:M.type)||"ok"}`,children:(M==null?void 0:M.type)==="warning"?"":""})]},j.id)})]})]}),m.jsxs("div",{className:"cutoffs-section",children:[m.jsx("h3",{children:"Risk Category Cutoffs"}),m.jsx("div",{className:"cutoff-inputs",children:Object.entries(e.part1.riskCutoffs).map(([j,M])=>m.jsxs("div",{className:"cutoff-input",children:[m.jsxs("label",{children:[j.toUpperCase()," Risk Threshold"]}),m.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",value:M.threshold,onChange:F=>T(j,F.target.value)}),m.jsx("span",{className:"cutoff-label",children:M.label})]},j))})]})]}),r==="part2"&&m.jsxs("div",{className:"config-section",children:[m.jsx("h3",{children:"Part 2: Clinical Data Integration"}),m.jsx("p",{children:"Part 2 uses a points-based system. Configure scoring below:"}),m.jsxs("div",{className:"psa-points-section",children:[m.jsx("h4",{children:"Baseline Carry-Forward Points"}),m.jsxs("div",{className:"points-row",children:[m.jsx("span",{children:"Baseline carry points"}),m.jsx("input",{type:"number",value:e.part2.baselineCarryPoints,onChange:j=>{const M=parseInt(j.target.value,10);A(F=>({...F,baselineCarryPoints:Number.isFinite(M)?M:0}))}}),m.jsx("span",{children:"points"})]})]}),m.jsxs("div",{className:"psa-points-section",children:[m.jsx("h4",{children:"Pre-Score to Points Mapping"}),e.part2.preScoreToPoints.ranges.map((j,M)=>m.jsxs("div",{className:"points-row",children:[m.jsxs("span",{children:["Pre-score < ",j.max]}),m.jsx("span",{style:{marginLeft:"8px"},children:"base"}),m.jsx("input",{type:"number",value:j.base??0,onChange:F=>{const L=[...e.part2.preScoreToPoints.ranges];L[M]={...L[M],base:parseInt(F.target.value,10)||0},A(V=>({...V,preScoreToPoints:{...V.preScoreToPoints,ranges:L}}))}}),m.jsx("span",{children:"mult"}),m.jsx("input",{type:"number",value:j.multiplier,onChange:F=>{const L=[...e.part2.preScoreToPoints.ranges];L[M]={...L[M],multiplier:parseInt(F.target.value,10)||0},A(V=>({...V,preScoreToPoints:{...V.preScoreToPoints,ranges:L}}))}}),m.jsx("span",{children:"div"}),m.jsx("input",{type:"number",value:j.divisor,onChange:F=>{const L=[...e.part2.preScoreToPoints.ranges];L[M]={...L[M],divisor:parseFloat(F.target.value)||1},A(V=>({...V,preScoreToPoints:{...V.preScoreToPoints,ranges:L}}))}})]},M))]}),m.jsxs("div",{className:"psa-points-section",children:[m.jsx("h4",{children:"PSA Level Points"}),e.part2.psaPoints.map((j,M)=>m.jsxs("div",{className:"points-row",children:[m.jsxs("span",{children:["PSA  ",j.max===1/0?"":j.max," ng/mL"]}),m.jsx("input",{type:"number",value:j.points,onChange:F=>{const L=[...e.part2.psaPoints];L[M]={...L[M],points:parseInt(F.target.value,10)||0},A(V=>({...V,psaPoints:L}))}}),m.jsx("span",{children:"points"})]},M))]}),m.jsxs("div",{className:"pirads-section",children:[m.jsx("h4",{children:"PI-RADS Points"}),e.part2.piradsPoints.map((j,M)=>m.jsxs("div",{className:"points-row",children:[m.jsxs("span",{children:["PI-RADS ",j.value]}),m.jsx("input",{type:"number",value:j.points,onChange:F=>{const L=[...e.part2.piradsPoints];L[M]={...L[M],points:parseInt(F.target.value,10)||0},A(V=>({...V,piradsPoints:L}))}}),m.jsx("span",{children:"points"})]},M))]}),m.jsxs("div",{className:"psa-points-section",children:[m.jsx("h4",{children:"Risk Categories (Total Points  Risk)"}),e.part2.riskCategories.map((j,M)=>m.jsxs("div",{className:"points-row",children:[m.jsxs("span",{children:[" ",j.maxPoints===1/0?"":j.maxPoints]}),m.jsx("span",{style:{marginLeft:"8px"},children:"riskPct"}),m.jsx("input",{type:"text",value:j.riskPct,onChange:F=>{const L=[...e.part2.riskCategories];L[M]={...L[M],riskPct:F.target.value},A(V=>({...V,riskCategories:L}))}}),m.jsx("span",{children:"riskCat"}),m.jsx("input",{type:"text",value:j.riskCat,onChange:F=>{const L=[...e.part2.riskCategories];L[M]={...L[M],riskCat:F.target.value},A(V=>({...V,riskCategories:L}))}}),m.jsx("span",{children:"class"}),m.jsx("input",{type:"text",value:j.riskClass,onChange:F=>{const L=[...e.part2.riskCategories];L[M]={...L[M],riskClass:F.target.value},A(V=>({...V,riskCategories:L}))}})]},M))]}),m.jsxs("div",{className:"pirads-section",children:[m.jsx("h4",{children:"PI-RADS Override Values"}),Object.entries(e.part2.piradsOverrides).map(([j,M])=>m.jsxs("div",{className:"pirads-override",children:[m.jsxs("strong",{children:["PI-RADS ",j,":"]}),m.jsxs("div",{className:"points-row",style:{marginTop:"8px"},children:[m.jsx("span",{children:"riskPct"}),m.jsx("input",{type:"text",value:M.riskPct,onChange:F=>{const L={...e.part2.piradsOverrides};L[j]={...L[j],riskPct:F.target.value},A(V=>({...V,piradsOverrides:L}))}}),m.jsx("span",{children:"riskCat"}),m.jsx("input",{type:"text",value:M.riskCat,onChange:F=>{const L={...e.part2.piradsOverrides};L[j]={...L[j],riskCat:F.target.value},A(V=>({...V,piradsOverrides:L}))}}),m.jsx("span",{children:"class"}),m.jsx("input",{type:"text",value:M.riskClass,onChange:F=>{const L={...e.part2.piradsOverrides};L[j]={...L[j],riskClass:F.target.value},A(V=>({...V,piradsOverrides:L}))}})]})]},j))]})]}),r==="cohort"&&m.jsxs("div",{className:"config-section",children:[m.jsx("h3",{children:"Cohort Analysis"}),m.jsxs("div",{className:"cohort-upload",children:[m.jsx("p",{children:"Upload cohort data (JSON format) to validate model performance:"}),m.jsxs("button",{className:"btn-simulate",onClick:C,children:[m.jsx(Ja,{size:16})," Upload Cohort Data"]})]}),l&&m.jsxs("div",{className:"cohort-stats",children:[m.jsxs("h4",{children:[m.jsx($m,{size:16})," Model Performance Statistics"]}),m.jsxs("div",{className:"stats-grid",children:[m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"Total Patients"}),m.jsx("value",{children:l.totalPatients})]}),m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"Cancer Detected"}),m.jsx("value",{children:l.detectedCases})]}),m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"Avg Predicted Risk"}),m.jsxs("value",{children:[l.avgPredictedRisk,"%"]})]}),m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"Sensitivity"}),m.jsxs("value",{children:[(l.sensitivity*100).toFixed(1),"%"]})]}),m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"Specificity"}),m.jsxs("value",{children:[(l.specificity*100).toFixed(1),"%"]})]}),m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"AUC"}),m.jsx("value",{children:l.auc})]})]})]})]}),o&&m.jsxs("div",{className:"changes-indicator",children:[m.jsx(Ti,{size:16}),"You have unsaved changes"]})]})};function _V(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=_V(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ce(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=_V(t))&&(r&&(r+=" "),r+=e);return r}var GG=Array.isArray,Ln=GG,KG=typeof Jd=="object"&&Jd&&Jd.Object===Object&&Jd,wV=KG,QG=wV,YG=typeof self=="object"&&self&&self.Object===Object&&self,XG=QG||YG||Function("return this")(),ui=XG,JG=ui,ZG=JG.Symbol,Nd=ZG,pO=Nd,bV=Object.prototype,eK=bV.hasOwnProperty,tK=bV.toString,Kc=pO?pO.toStringTag:void 0;function nK(t){var e=eK.call(t,Kc),n=t[Kc];try{t[Kc]=void 0;var r=!0}catch{}var i=tK.call(t);return r&&(e?t[Kc]=n:delete t[Kc]),i}var rK=nK,iK=Object.prototype,oK=iK.toString;function aK(t){return oK.call(t)}var sK=aK,mO=Nd,uK=rK,lK=sK,cK="[object Null]",fK="[object Undefined]",gO=mO?mO.toStringTag:void 0;function hK(t){return t==null?t===void 0?fK:cK:gO&&gO in Object(t)?uK(t):lK(t)}var Qi=hK;function dK(t){return t!=null&&typeof t=="object"}var Yi=dK,pK=Qi,mK=Yi,gK="[object Symbol]";function yK(t){return typeof t=="symbol"||mK(t)&&pK(t)==gK}var oc=yK,vK=Ln,_K=oc,wK=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bK=/^\w*$/;function EK(t,e){if(vK(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||_K(t)?!0:bK.test(t)||!wK.test(t)||e!=null&&t in Object(e)}var Yx=EK;function xK(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var pa=xK;const ac=Ge(pa);var TK=Qi,SK=pa,AK="[object AsyncFunction]",IK="[object Function]",PK="[object GeneratorFunction]",OK="[object Proxy]";function CK(t){if(!SK(t))return!1;var e=TK(t);return e==IK||e==PK||e==AK||e==OK}var Xx=CK;const ye=Ge(Xx);var kK=ui,RK=kK["__core-js_shared__"],NK=RK,t0=NK,yO=function(){var t=/[^.]+$/.exec(t0&&t0.keys&&t0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function DK(t){return!!yO&&yO in t}var jK=DK,MK=Function.prototype,$K=MK.toString;function VK(t){if(t!=null){try{return $K.call(t)}catch{}try{return t+""}catch{}}return""}var EV=VK,LK=Xx,FK=jK,BK=pa,UK=EV,zK=/[\\^$.*+?()[\]{}|]/g,qK=/^\[object .+?Constructor\]$/,WK=Function.prototype,HK=Object.prototype,GK=WK.toString,KK=HK.hasOwnProperty,QK=RegExp("^"+GK.call(KK).replace(zK,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function YK(t){if(!BK(t)||FK(t))return!1;var e=LK(t)?QK:qK;return e.test(UK(t))}var XK=YK;function JK(t,e){return t==null?void 0:t[e]}var ZK=JK,eQ=XK,tQ=ZK;function nQ(t,e){var n=tQ(t,e);return eQ(n)?n:void 0}var js=nQ,rQ=js,iQ=rQ(Object,"create"),uv=iQ,vO=uv;function oQ(){this.__data__=vO?vO(null):{},this.size=0}var aQ=oQ;function sQ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var uQ=sQ,lQ=uv,cQ="__lodash_hash_undefined__",fQ=Object.prototype,hQ=fQ.hasOwnProperty;function dQ(t){var e=this.__data__;if(lQ){var n=e[t];return n===cQ?void 0:n}return hQ.call(e,t)?e[t]:void 0}var pQ=dQ,mQ=uv,gQ=Object.prototype,yQ=gQ.hasOwnProperty;function vQ(t){var e=this.__data__;return mQ?e[t]!==void 0:yQ.call(e,t)}var _Q=vQ,wQ=uv,bQ="__lodash_hash_undefined__";function EQ(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=wQ&&e===void 0?bQ:e,this}var xQ=EQ,TQ=aQ,SQ=uQ,AQ=pQ,IQ=_Q,PQ=xQ;function sc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}sc.prototype.clear=TQ;sc.prototype.delete=SQ;sc.prototype.get=AQ;sc.prototype.has=IQ;sc.prototype.set=PQ;var OQ=sc;function CQ(){this.__data__=[],this.size=0}var kQ=CQ;function RQ(t,e){return t===e||t!==t&&e!==e}var Jx=RQ,NQ=Jx;function DQ(t,e){for(var n=t.length;n--;)if(NQ(t[n][0],e))return n;return-1}var lv=DQ,jQ=lv,MQ=Array.prototype,$Q=MQ.splice;function VQ(t){var e=this.__data__,n=jQ(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():$Q.call(e,n,1),--this.size,!0}var LQ=VQ,FQ=lv;function BQ(t){var e=this.__data__,n=FQ(e,t);return n<0?void 0:e[n][1]}var UQ=BQ,zQ=lv;function qQ(t){return zQ(this.__data__,t)>-1}var WQ=qQ,HQ=lv;function GQ(t,e){var n=this.__data__,r=HQ(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var KQ=GQ,QQ=kQ,YQ=LQ,XQ=UQ,JQ=WQ,ZQ=KQ;function uc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}uc.prototype.clear=QQ;uc.prototype.delete=YQ;uc.prototype.get=XQ;uc.prototype.has=JQ;uc.prototype.set=ZQ;var cv=uc,eY=js,tY=ui,nY=eY(tY,"Map"),Zx=nY,_O=OQ,rY=cv,iY=Zx;function oY(){this.size=0,this.__data__={hash:new _O,map:new(iY||rY),string:new _O}}var aY=oY;function sY(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var uY=sY,lY=uY;function cY(t,e){var n=t.__data__;return lY(e)?n[typeof e=="string"?"string":"hash"]:n.map}var fv=cY,fY=fv;function hY(t){var e=fY(this,t).delete(t);return this.size-=e?1:0,e}var dY=hY,pY=fv;function mY(t){return pY(this,t).get(t)}var gY=mY,yY=fv;function vY(t){return yY(this,t).has(t)}var _Y=vY,wY=fv;function bY(t,e){var n=wY(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var EY=bY,xY=aY,TY=dY,SY=gY,AY=_Y,IY=EY;function lc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}lc.prototype.clear=xY;lc.prototype.delete=TY;lc.prototype.get=SY;lc.prototype.has=AY;lc.prototype.set=IY;var eT=lc,xV=eT,PY="Expected a function";function tT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(PY);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(tT.Cache||xV),n}tT.Cache=xV;var TV=tT;const OY=Ge(TV);var CY=TV,kY=500;function RY(t){var e=CY(t,function(r){return n.size===kY&&n.clear(),r}),n=e.cache;return e}var NY=RY,DY=NY,jY=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,MY=/\\(\\)?/g,$Y=DY(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(jY,function(n,r,i,o){e.push(i?o.replace(MY,"$1"):r||n)}),e}),VY=$Y;function LY(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var nT=LY,wO=Nd,FY=nT,BY=Ln,UY=oc,bO=wO?wO.prototype:void 0,EO=bO?bO.toString:void 0;function SV(t){if(typeof t=="string")return t;if(BY(t))return FY(t,SV)+"";if(UY(t))return EO?EO.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var zY=SV,qY=zY;function WY(t){return t==null?"":qY(t)}var AV=WY,HY=Ln,GY=Yx,KY=VY,QY=AV;function YY(t,e){return HY(t)?t:GY(t,e)?[t]:KY(QY(t))}var IV=YY,XY=oc;function JY(t){if(typeof t=="string"||XY(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var hv=JY,ZY=IV,eX=hv;function tX(t,e){e=ZY(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[eX(e[n++])];return n&&n==r?t:void 0}var rT=tX,nX=rT;function rX(t,e,n){var r=t==null?void 0:nX(t,e);return r===void 0?n:r}var PV=rX;const hr=Ge(PV);function iX(t){return t==null}var oX=iX;const ve=Ge(oX);var aX=Qi,sX=Ln,uX=Yi,lX="[object String]";function cX(t){return typeof t=="string"||!sX(t)&&uX(t)&&aX(t)==lX}var fX=cX;const bs=Ge(fX);var OV={exports:{}},Fe={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT=Symbol.for("react.element"),oT=Symbol.for("react.portal"),dv=Symbol.for("react.fragment"),pv=Symbol.for("react.strict_mode"),mv=Symbol.for("react.profiler"),gv=Symbol.for("react.provider"),yv=Symbol.for("react.context"),hX=Symbol.for("react.server_context"),vv=Symbol.for("react.forward_ref"),_v=Symbol.for("react.suspense"),wv=Symbol.for("react.suspense_list"),bv=Symbol.for("react.memo"),Ev=Symbol.for("react.lazy"),dX=Symbol.for("react.offscreen"),CV;CV=Symbol.for("react.module.reference");function gr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case iT:switch(t=t.type,t){case dv:case mv:case pv:case _v:case wv:return t;default:switch(t=t&&t.$$typeof,t){case hX:case yv:case vv:case Ev:case bv:case gv:return t;default:return e}}case oT:return e}}}Fe.ContextConsumer=yv;Fe.ContextProvider=gv;Fe.Element=iT;Fe.ForwardRef=vv;Fe.Fragment=dv;Fe.Lazy=Ev;Fe.Memo=bv;Fe.Portal=oT;Fe.Profiler=mv;Fe.StrictMode=pv;Fe.Suspense=_v;Fe.SuspenseList=wv;Fe.isAsyncMode=function(){return!1};Fe.isConcurrentMode=function(){return!1};Fe.isContextConsumer=function(t){return gr(t)===yv};Fe.isContextProvider=function(t){return gr(t)===gv};Fe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===iT};Fe.isForwardRef=function(t){return gr(t)===vv};Fe.isFragment=function(t){return gr(t)===dv};Fe.isLazy=function(t){return gr(t)===Ev};Fe.isMemo=function(t){return gr(t)===bv};Fe.isPortal=function(t){return gr(t)===oT};Fe.isProfiler=function(t){return gr(t)===mv};Fe.isStrictMode=function(t){return gr(t)===pv};Fe.isSuspense=function(t){return gr(t)===_v};Fe.isSuspenseList=function(t){return gr(t)===wv};Fe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===dv||t===mv||t===pv||t===_v||t===wv||t===dX||typeof t=="object"&&t!==null&&(t.$$typeof===Ev||t.$$typeof===bv||t.$$typeof===gv||t.$$typeof===yv||t.$$typeof===vv||t.$$typeof===CV||t.getModuleId!==void 0)};Fe.typeOf=gr;OV.exports=Fe;var pX=OV.exports,mX=Qi,gX=Yi,yX="[object Number]";function vX(t){return typeof t=="number"||gX(t)&&mX(t)==yX}var kV=vX;const _X=Ge(kV);var wX=kV;function bX(t){return wX(t)&&t!=+t}var EX=bX;const cc=Ge(EX);var Or=function(e){return e===0?0:e>0?1:-1},za=function(e){return bs(e)&&e.indexOf("%")===e.length-1},ee=function(e){return _X(e)&&!cc(e)},xX=function(e){return ve(e)},Mt=function(e){return ee(e)||bs(e)},TX=0,fc=function(e){var n=++TX;return"".concat(e||"").concat(n)},Es=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ee(e)&&!bs(e))return r;var o;if(za(e)){var a=e.indexOf("%");o=n*parseFloat(e.slice(0,a))/100}else o=+e;return cc(o)&&(o=r),i&&o>n&&(o=n),o},To=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},SX=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},dn=function(e,n){return ee(e)&&ee(n)?function(r){return e+r*(n-e)}:function(){return n}};function fg(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):hr(r,e))===n})}var AX=function(e){if(!e||!e.length)return null;for(var n=e.length,r=0,i=0,o=0,a=0,s=1/0,u=-1/0,l=0,c=0,f=0;f<n;f++)l=e[f].cx||0,c=e[f].cy||0,r+=l,i+=c,o+=l*c,a+=l*l,s=Math.min(s,l),u=Math.max(u,l);var d=n*a!==r*r?(n*o-r*i)/(n*a-r*r):0;return{xmin:s,xmax:u,a:d,b:(i-d*r)/n}},IX=function(e,n){return ee(e)&&ee(n)?e-n:bs(e)&&bs(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function ju(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function hb(t){"@babel/helpers - typeof";return hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hb(t)}var PX=["viewBox","children"],OX=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],xO=["points","pathLength"],n0={svg:PX,polygon:xO,polyline:xO},aT=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],hg=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(W.isValidElement(e)&&(r=e.props),!ac(r))return null;var i={};return Object.keys(r).forEach(function(o){aT.includes(o)&&(i[o]=n||function(a){return r[o](r,a)})}),i},CX=function(e,n,r){return function(i){return e(n,r,i),null}},Ah=function(e,n,r){if(!ac(e)||hb(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];aT.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=CX(a,n,r))}),i},kX=["children"],RX=["children"];function TO(t,e){if(t==null)return{};var n=NX(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NX(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function db(t){"@babel/helpers - typeof";return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},db(t)}var SO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Si=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},AO=null,r0=null,sT=function t(e){if(e===AO&&Array.isArray(r0))return r0;var n=[];return W.Children.forEach(e,function(r){ve(r)||(pX.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),r0=n,AO=e,n};function Yn(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Si(i)}):r=[Si(e)],sT(t).forEach(function(i){var o=hr(i,"type.displayName")||hr(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function zn(t,e){var n=Yn(t,e);return n&&n[0]}var IO=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!ee(r)||r<=0||!ee(i)||i<=0)},DX=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],jX=function(e){return e&&e.type&&bs(e.type)&&DX.indexOf(e.type)>=0},MX=function(e){return e&&db(e)==="object"&&"clipDot"in e},$X=function(e,n,r,i){var o,a=(o=n0==null?void 0:n0[i])!==null&&o!==void 0?o:[];return n.startsWith("data-")||!ye(e)&&(i&&a.includes(n)||OX.includes(n))||r&&aT.includes(n)},be=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(W.isValidElement(e)&&(i=e.props),!ac(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;$X((s=i)===null||s===void 0?void 0:s[a],a,n,r)&&(o[a]=i[a])}),o},pb=function t(e,n){if(e===n)return!0;var r=W.Children.count(e);if(r!==W.Children.count(n))return!1;if(r===0)return!0;if(r===1)return PO(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!PO(o,a))return!1}return!0},PO=function(e,n){if(ve(e)&&ve(n))return!0;if(!ve(e)&&!ve(n)){var r=e.props||{},i=r.children,o=TO(r,kX),a=n.props||{},s=a.children,u=TO(a,RX);return i&&s?ju(o,u)&&pb(i,s):!i&&!s?ju(o,u):!1}return!1},OO=function(e,n){var r=[],i={};return sT(e).forEach(function(o,a){if(jX(o))r.push(o);else if(o){var s=Si(o.type),u=n[s]||{},l=u.handler,c=u.once;if(l&&(!c||!i[s])){var f=l(o,s,a);r.push(f),i[s]=!0}}}),r},VX=function(e){var n=e&&e.type;return n&&SO[n]?SO[n]:null},LX=function(e,n){return sT(n).indexOf(e)},FX=["children","width","height","viewBox","className","style","title","desc"];function mb(){return mb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mb.apply(this,arguments)}function BX(t,e){if(t==null)return{};var n=UX(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UX(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gb(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,u=t.desc,l=BX(t,FX),c=i||{width:n,height:r,x:0,y:0},f=Ce("recharts-surface",o);return $.createElement("svg",mb({},be(l,!0,"svg"),{className:f,width:n,height:r,style:a,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),$.createElement("title",null,s),$.createElement("desc",null,u),e)}var zX=["children","className"];function yb(){return yb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yb.apply(this,arguments)}function qX(t,e){if(t==null)return{};var n=WX(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function WX(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var ze=$.forwardRef(function(t,e){var n=t.children,r=t.className,i=qX(t,zX),o=Ce("recharts-layer",r);return $.createElement("g",yb({className:o},be(i,!0),{ref:e}),n)}),Ai=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function HX(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var GX=HX,KX=GX;function QX(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:KX(t,e,n)}var YX=QX,XX="\\ud800-\\udfff",JX="\\u0300-\\u036f",ZX="\\ufe20-\\ufe2f",eJ="\\u20d0-\\u20ff",tJ=JX+ZX+eJ,nJ="\\ufe0e\\ufe0f",rJ="\\u200d",iJ=RegExp("["+rJ+XX+tJ+nJ+"]");function oJ(t){return iJ.test(t)}var RV=oJ;function aJ(t){return t.split("")}var sJ=aJ,NV="\\ud800-\\udfff",uJ="\\u0300-\\u036f",lJ="\\ufe20-\\ufe2f",cJ="\\u20d0-\\u20ff",fJ=uJ+lJ+cJ,hJ="\\ufe0e\\ufe0f",dJ="["+NV+"]",vb="["+fJ+"]",_b="\\ud83c[\\udffb-\\udfff]",pJ="(?:"+vb+"|"+_b+")",DV="[^"+NV+"]",jV="(?:\\ud83c[\\udde6-\\uddff]){2}",MV="[\\ud800-\\udbff][\\udc00-\\udfff]",mJ="\\u200d",$V=pJ+"?",VV="["+hJ+"]?",gJ="(?:"+mJ+"(?:"+[DV,jV,MV].join("|")+")"+VV+$V+")*",yJ=VV+$V+gJ,vJ="(?:"+[DV+vb+"?",vb,jV,MV,dJ].join("|")+")",_J=RegExp(_b+"(?="+_b+")|"+vJ+yJ,"g");function wJ(t){return t.match(_J)||[]}var bJ=wJ,EJ=sJ,xJ=RV,TJ=bJ;function SJ(t){return xJ(t)?TJ(t):EJ(t)}var AJ=SJ,IJ=YX,PJ=RV,OJ=AJ,CJ=AV;function kJ(t){return function(e){e=CJ(e);var n=PJ(e)?OJ(e):void 0,r=n?n[0]:e.charAt(0),i=n?IJ(n,1).join(""):e.slice(1);return r[t]()+i}}var RJ=kJ,NJ=RJ,DJ=NJ("toUpperCase"),jJ=DJ;const xv=Ge(jJ);function Qe(t){return function(){return t}}const LV=Math.cos,dg=Math.sin,$r=Math.sqrt,pg=Math.PI,Tv=2*pg,wb=Math.PI,bb=2*wb,Ra=1e-6,MJ=bb-Ra;function FV(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function $J(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return FV;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class VJ{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?FV:$J(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,u=r-e,l=i-n,c=a-e,f=s-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>Ra)if(!(Math.abs(f*u-l*c)>Ra)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-a,_=i-s,y=u*u+l*l,b=p*p+_*_,v=Math.sqrt(y),g=Math.sqrt(d),E=o*Math.tan((wb-Math.acos((y+d-b)/(2*v*g)))/2),P=E/g,T=E/v;Math.abs(P-1)>Ra&&this._append`L${e+P*c},${n+P*f}`,this._append`A${o},${o},0,0,${+(f*p>c*_)},${this._x1=e+T*u},${this._y1=n+T*l}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),l=e+s,c=n+u,f=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Ra||Math.abs(this._y1-c)>Ra)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%bb+bb),d>MJ?this._append`A${r},${r},0,1,${f},${e-s},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Ra&&this._append`A${r},${r},0,${+(d>=wb)},${f},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function uT(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new VJ(e)}function lT(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function BV(t){this._context=t}BV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Sv(t){return new BV(t)}function UV(t){return t[0]}function zV(t){return t[1]}function qV(t,e){var n=Qe(!0),r=null,i=Sv,o=null,a=uT(s);t=typeof t=="function"?t:t===void 0?UV:Qe(t),e=typeof e=="function"?e:e===void 0?zV:Qe(e);function s(u){var l,c=(u=lT(u)).length,f,d=!1,p;for(r==null&&(o=i(p=a())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+t(f,l,u),+e(f,l,u));if(p)return o=null,p+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:Qe(+u),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:Qe(+u),s):e},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Qe(!!u),s):n},s.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),s):i},s.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),s):r},s}function Sp(t,e,n){var r=null,i=Qe(!0),o=null,a=Sv,s=null,u=uT(l);t=typeof t=="function"?t:t===void 0?UV:Qe(+t),e=typeof e=="function"?e:Qe(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?zV:Qe(+n);function l(f){var d,p,_,y=(f=lT(f)).length,b,v=!1,g,E=new Array(y),P=new Array(y);for(o==null&&(s=a(g=u())),d=0;d<=y;++d){if(!(d<y&&i(b=f[d],d,f))===v)if(v=!v)p=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),_=d-1;_>=p;--_)s.point(E[_],P[_]);s.lineEnd(),s.areaEnd()}v&&(E[d]=+t(b,d,f),P[d]=+e(b,d,f),s.point(r?+r(b,d,f):E[d],n?+n(b,d,f):P[d]))}if(g)return s=null,g+""||null}function c(){return qV().defined(i).curve(a).context(o)}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Qe(+f),r=null,l):t},l.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Qe(+f),l):t},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Qe(+f),l):r},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:Qe(+f),n=null,l):e},l.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Qe(+f),l):e},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Qe(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(r).y(e)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Qe(!!f),l):i},l.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),l):a},l.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),l):o},l}class WV{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function LJ(t){return new WV(t,!0)}function FJ(t){return new WV(t,!1)}const cT={draw(t,e){const n=$r(e/pg);t.moveTo(n,0),t.arc(0,0,n,0,Tv)}},BJ={draw(t,e){const n=$r(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},HV=$r(1/3),UJ=HV*2,zJ={draw(t,e){const n=$r(e/UJ),r=n*HV;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},qJ={draw(t,e){const n=$r(e),r=-n/2;t.rect(r,r,n,n)}},WJ=.8908130915292852,GV=dg(pg/10)/dg(7*pg/10),HJ=dg(Tv/10)*GV,GJ=-LV(Tv/10)*GV,KJ={draw(t,e){const n=$r(e*WJ),r=HJ*n,i=GJ*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=Tv*o/5,s=LV(a),u=dg(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},i0=$r(3),QJ={draw(t,e){const n=-$r(e/(i0*3));t.moveTo(0,n*2),t.lineTo(-i0*n,-n),t.lineTo(i0*n,-n),t.closePath()}},nr=-.5,rr=$r(3)/2,Eb=1/$r(12),YJ=(Eb/2+1)*3,XJ={draw(t,e){const n=$r(e/YJ),r=n/2,i=n*Eb,o=r,a=n*Eb+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(nr*r-rr*i,rr*r+nr*i),t.lineTo(nr*o-rr*a,rr*o+nr*a),t.lineTo(nr*s-rr*u,rr*s+nr*u),t.lineTo(nr*r+rr*i,nr*i-rr*r),t.lineTo(nr*o+rr*a,nr*a-rr*o),t.lineTo(nr*s+rr*u,nr*u-rr*s),t.closePath()}};function JJ(t,e){let n=null,r=uT(i);t=typeof t=="function"?t:Qe(t||cT),e=typeof e=="function"?e:Qe(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Qe(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Qe(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function mg(){}function gg(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function KV(t){this._context=t}KV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ZJ(t){return new KV(t)}function QV(t){this._context=t}QV.prototype={areaStart:mg,areaEnd:mg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:gg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eZ(t){return new QV(t)}function YV(t){this._context=t}YV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:gg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tZ(t){return new YV(t)}function XV(t){this._context=t}XV.prototype={areaStart:mg,areaEnd:mg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function nZ(t){return new XV(t)}function CO(t){return t<0?-1:1}function kO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(CO(o)+CO(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function RO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function o0(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function yg(t){this._context=t}yg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:o0(this,this._t0,RO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,o0(this,RO(this,n=kO(this,t,e)),n);break;default:o0(this,this._t0,n=kO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function JV(t){this._context=new ZV(t)}(JV.prototype=Object.create(yg.prototype)).point=function(t,e){yg.prototype.point.call(this,e,t)};function ZV(t){this._context=t}ZV.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function rZ(t){return new yg(t)}function iZ(t){return new JV(t)}function eL(t){this._context=t}eL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=NO(t),i=NO(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function NO(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function oZ(t){return new eL(t)}function Av(t,e){this._context=t,this._t=e}Av.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function aZ(t){return new Av(t,.5)}function sZ(t){return new Av(t,0)}function uZ(t){return new Av(t,1)}function ml(t,e){if((a=t.length)>1)for(var n=1,r,i,o=t[e[0]],a,s=o.length;n<a;++n)for(i=o,o=t[e[n]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function xb(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function lZ(t,e){return t[e]}function cZ(t){const e=[];return e.key=t,e}function fZ(){var t=Qe([]),e=xb,n=ml,r=lZ;function i(o){var a=Array.from(t.apply(this,arguments),cZ),s,u=a.length,l=-1,c;for(const f of o)for(s=0,++l;s<u;++s)(a[s][l]=[0,+r(f,a[s].key,l,o)]).data=f;for(s=0,c=lT(e(a));s<u;++s)a[c[s]].index=s;return n(a,c),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Qe(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Qe(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?xb:typeof o=="function"?o:Qe(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??ml,i):n},i}function hZ(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}ml(t,e)}}function dZ(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var a=0,s=0;a<i;++a)s+=t[a][n][1]||0;r[n][1]+=r[n][0]=-s/2}ml(t,e)}}function pZ(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var s=0,u=0,l=0;s<a;++s){for(var c=t[e[s]],f=c[r][1]||0,d=c[r-1][1]||0,p=(f-d)/2,_=0;_<s;++_){var y=t[e[_]],b=y[r][1]||0,v=y[r-1][1]||0;p+=b-v}u+=f,l+=p*f}i[r-1][1]+=i[r-1][0]=n,u&&(n-=l/u)}i[r-1][1]+=i[r-1][0]=n,ml(t,e)}}function Ih(t){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(t)}var mZ=["type","size","sizeType"];function Tb(){return Tb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tb.apply(this,arguments)}function DO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DO(Object(n),!0).forEach(function(r){gZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gZ(t,e,n){return e=yZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yZ(t){var e=vZ(t,"string");return Ih(e)=="symbol"?e:e+""}function vZ(t,e){if(Ih(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Z(t,e){if(t==null)return{};var n=wZ(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var tL={symbolCircle:cT,symbolCross:BJ,symbolDiamond:zJ,symbolSquare:qJ,symbolStar:KJ,symbolTriangle:QJ,symbolWye:XJ},bZ=Math.PI/180,EZ=function(e){var n="symbol".concat(xv(e));return tL[n]||cT},xZ=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*bZ;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},TZ=function(e,n){tL["symbol".concat(xv(e))]=n},Iv=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,u=_Z(e,mZ),l=jO(jO({},u),{},{type:r,size:o,sizeType:s}),c=function(){var b=EZ(r),v=JJ().type(b).size(xZ(o,s,r));return v()},f=l.className,d=l.cx,p=l.cy,_=be(l,!0);return d===+d&&p===+p&&o===+o?$.createElement("path",Tb({},_,{className:Ce("recharts-symbols",f),transform:"translate(".concat(d,", ").concat(p,")"),d:c()})):null};Iv.registerSymbol=TZ;function gl(t){"@babel/helpers - typeof";return gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gl(t)}function Sb(){return Sb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sb.apply(this,arguments)}function MO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SZ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MO(Object(n),!0).forEach(function(r){Ph(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IZ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rL(r.key),r)}}function PZ(t,e,n){return e&&IZ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OZ(t,e,n){return e=vg(e),CZ(t,nL()?Reflect.construct(e,n||[],vg(t).constructor):e.apply(t,n))}function CZ(t,e){if(e&&(gl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kZ(t)}function kZ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nL=function(){return!!t})()}function vg(t){return vg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vg(t)}function RZ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ab(t,e)}function Ab(t,e){return Ab=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ab(t,e)}function Ph(t,e,n){return e=rL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rL(t){var e=NZ(t,"string");return gl(e)=="symbol"?e:e+""}function NZ(t,e){if(gl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ir=32,fT=function(t){function e(){return AZ(this,e),OZ(this,e,arguments)}return RZ(e,t),PZ(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=ir/2,a=ir/6,s=ir/3,u=r.inactive?i:r.color;if(r.type==="plainline")return $.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:ir,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return $.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(ir,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return $.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(ir/8,"h").concat(ir,"v").concat(ir*3/4,"h").concat(-ir,"z"),className:"recharts-legend-icon"});if($.isValidElement(r.legendIcon)){var l=SZ({},r);return delete l.legendIcon,$.cloneElement(r.legendIcon,l)}return $.createElement(Iv,{fill:u,cx:o,cy:o,size:ir,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,u=i.formatter,l=i.inactiveColor,c={x:0,y:0,width:ir,height:ir},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(p,_){var y=p.formatter||u,b=Ce(Ph(Ph({"recharts-legend-item":!0},"legend-item-".concat(_),!0),"inactive",p.inactive));if(p.type==="none")return null;var v=ye(p.value)?null:p.value;Ai(!ye(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var g=p.inactive?l:p.color;return $.createElement("li",Sb({className:b,style:f,key:"legend-item-".concat(_)},Ah(r.props,p,_)),$.createElement(gb,{width:a,height:a,viewBox:c,style:d},r.renderIcon(p)),$.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},y?y(v,p,_):v))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,a=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return $.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(W.PureComponent);Ph(fT,"displayName","Legend");Ph(fT,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var DZ=cv;function jZ(){this.__data__=new DZ,this.size=0}var MZ=jZ;function $Z(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var VZ=$Z;function LZ(t){return this.__data__.get(t)}var FZ=LZ;function BZ(t){return this.__data__.has(t)}var UZ=BZ,zZ=cv,qZ=Zx,WZ=eT,HZ=200;function GZ(t,e){var n=this.__data__;if(n instanceof zZ){var r=n.__data__;if(!qZ||r.length<HZ-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new WZ(r)}return n.set(t,e),this.size=n.size,this}var KZ=GZ,QZ=cv,YZ=MZ,XZ=VZ,JZ=FZ,ZZ=UZ,eee=KZ;function hc(t){var e=this.__data__=new QZ(t);this.size=e.size}hc.prototype.clear=YZ;hc.prototype.delete=XZ;hc.prototype.get=JZ;hc.prototype.has=ZZ;hc.prototype.set=eee;var iL=hc,tee="__lodash_hash_undefined__";function nee(t){return this.__data__.set(t,tee),this}var ree=nee;function iee(t){return this.__data__.has(t)}var oee=iee,aee=eT,see=ree,uee=oee;function _g(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new aee;++e<n;)this.add(t[e])}_g.prototype.add=_g.prototype.push=see;_g.prototype.has=uee;var oL=_g;function lee(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var aL=lee;function cee(t,e){return t.has(e)}var sL=cee,fee=oL,hee=aL,dee=sL,pee=1,mee=2;function gee(t,e,n,r,i,o){var a=n&pee,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t),c=o.get(e);if(l&&c)return l==e&&c==t;var f=-1,d=!0,p=n&mee?new fee:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var _=t[f],y=e[f];if(r)var b=a?r(y,_,f,e,t,o):r(_,y,f,t,e,o);if(b!==void 0){if(b)continue;d=!1;break}if(p){if(!hee(e,function(v,g){if(!dee(p,g)&&(_===v||i(_,v,n,r,o)))return p.push(g)})){d=!1;break}}else if(!(_===y||i(_,y,n,r,o))){d=!1;break}}return o.delete(t),o.delete(e),d}var uL=gee,yee=ui,vee=yee.Uint8Array,_ee=vee;function wee(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var bee=wee;function Eee(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var hT=Eee,$O=Nd,VO=_ee,xee=Jx,Tee=uL,See=bee,Aee=hT,Iee=1,Pee=2,Oee="[object Boolean]",Cee="[object Date]",kee="[object Error]",Ree="[object Map]",Nee="[object Number]",Dee="[object RegExp]",jee="[object Set]",Mee="[object String]",$ee="[object Symbol]",Vee="[object ArrayBuffer]",Lee="[object DataView]",LO=$O?$O.prototype:void 0,a0=LO?LO.valueOf:void 0;function Fee(t,e,n,r,i,o,a){switch(n){case Lee:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Vee:return!(t.byteLength!=e.byteLength||!o(new VO(t),new VO(e)));case Oee:case Cee:case Nee:return xee(+t,+e);case kee:return t.name==e.name&&t.message==e.message;case Dee:case Mee:return t==e+"";case Ree:var s=See;case jee:var u=r&Iee;if(s||(s=Aee),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=Pee,a.set(t,e);var c=Tee(s(t),s(e),r,i,o,a);return a.delete(t),c;case $ee:if(a0)return a0.call(t)==a0.call(e)}return!1}var Bee=Fee;function Uee(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var lL=Uee,zee=lL,qee=Ln;function Wee(t,e,n){var r=e(t);return qee(t)?r:zee(r,n(t))}var Hee=Wee;function Gee(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}var Kee=Gee;function Qee(){return[]}var Yee=Qee,Xee=Kee,Jee=Yee,Zee=Object.prototype,ete=Zee.propertyIsEnumerable,FO=Object.getOwnPropertySymbols,tte=FO?function(t){return t==null?[]:(t=Object(t),Xee(FO(t),function(e){return ete.call(t,e)}))}:Jee,nte=tte;function rte(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var ite=rte,ote=Qi,ate=Yi,ste="[object Arguments]";function ute(t){return ate(t)&&ote(t)==ste}var lte=ute,BO=lte,cte=Yi,cL=Object.prototype,fte=cL.hasOwnProperty,hte=cL.propertyIsEnumerable,dte=BO(function(){return arguments}())?BO:function(t){return cte(t)&&fte.call(t,"callee")&&!hte.call(t,"callee")},dT=dte,wg={exports:{}};function pte(){return!1}var mte=pte;wg.exports;(function(t,e){var n=ui,r=mte,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?n.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||r;t.exports=l})(wg,wg.exports);var fL=wg.exports,gte=9007199254740991,yte=/^(?:0|[1-9]\d*)$/;function vte(t,e){var n=typeof t;return e=e??gte,!!e&&(n=="number"||n!="symbol"&&yte.test(t))&&t>-1&&t%1==0&&t<e}var pT=vte,_te=9007199254740991;function wte(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=_te}var mT=wte,bte=Qi,Ete=mT,xte=Yi,Tte="[object Arguments]",Ste="[object Array]",Ate="[object Boolean]",Ite="[object Date]",Pte="[object Error]",Ote="[object Function]",Cte="[object Map]",kte="[object Number]",Rte="[object Object]",Nte="[object RegExp]",Dte="[object Set]",jte="[object String]",Mte="[object WeakMap]",$te="[object ArrayBuffer]",Vte="[object DataView]",Lte="[object Float32Array]",Fte="[object Float64Array]",Bte="[object Int8Array]",Ute="[object Int16Array]",zte="[object Int32Array]",qte="[object Uint8Array]",Wte="[object Uint8ClampedArray]",Hte="[object Uint16Array]",Gte="[object Uint32Array]",nt={};nt[Lte]=nt[Fte]=nt[Bte]=nt[Ute]=nt[zte]=nt[qte]=nt[Wte]=nt[Hte]=nt[Gte]=!0;nt[Tte]=nt[Ste]=nt[$te]=nt[Ate]=nt[Vte]=nt[Ite]=nt[Pte]=nt[Ote]=nt[Cte]=nt[kte]=nt[Rte]=nt[Nte]=nt[Dte]=nt[jte]=nt[Mte]=!1;function Kte(t){return xte(t)&&Ete(t.length)&&!!nt[bte(t)]}var Qte=Kte;function Yte(t){return function(e){return t(e)}}var hL=Yte,bg={exports:{}};bg.exports;(function(t,e){var n=wV,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(bg,bg.exports);var Xte=bg.exports,Jte=Qte,Zte=hL,UO=Xte,zO=UO&&UO.isTypedArray,ene=zO?Zte(zO):Jte,dL=ene,tne=ite,nne=dT,rne=Ln,ine=fL,one=pT,ane=dL,sne=Object.prototype,une=sne.hasOwnProperty;function lne(t,e){var n=rne(t),r=!n&&nne(t),i=!n&&!r&&ine(t),o=!n&&!r&&!i&&ane(t),a=n||r||i||o,s=a?tne(t.length,String):[],u=s.length;for(var l in t)(e||une.call(t,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||one(l,u)))&&s.push(l);return s}var cne=lne,fne=Object.prototype;function hne(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||fne;return t===n}var dne=hne;function pne(t,e){return function(n){return t(e(n))}}var pL=pne,mne=pL,gne=mne(Object.keys,Object),yne=gne,vne=dne,_ne=yne,wne=Object.prototype,bne=wne.hasOwnProperty;function Ene(t){if(!vne(t))return _ne(t);var e=[];for(var n in Object(t))bne.call(t,n)&&n!="constructor"&&e.push(n);return e}var xne=Ene,Tne=Xx,Sne=mT;function Ane(t){return t!=null&&Sne(t.length)&&!Tne(t)}var Dd=Ane,Ine=cne,Pne=xne,One=Dd;function Cne(t){return One(t)?Ine(t):Pne(t)}var Pv=Cne,kne=Hee,Rne=nte,Nne=Pv;function Dne(t){return kne(t,Nne,Rne)}var jne=Dne,qO=jne,Mne=1,$ne=Object.prototype,Vne=$ne.hasOwnProperty;function Lne(t,e,n,r,i,o){var a=n&Mne,s=qO(t),u=s.length,l=qO(e),c=l.length;if(u!=c&&!a)return!1;for(var f=u;f--;){var d=s[f];if(!(a?d in e:Vne.call(e,d)))return!1}var p=o.get(t),_=o.get(e);if(p&&_)return p==e&&_==t;var y=!0;o.set(t,e),o.set(e,t);for(var b=a;++f<u;){d=s[f];var v=t[d],g=e[d];if(r)var E=a?r(g,v,d,e,t,o):r(v,g,d,t,e,o);if(!(E===void 0?v===g||i(v,g,n,r,o):E)){y=!1;break}b||(b=d=="constructor")}if(y&&!b){var P=t.constructor,T=e.constructor;P!=T&&"constructor"in t&&"constructor"in e&&!(typeof P=="function"&&P instanceof P&&typeof T=="function"&&T instanceof T)&&(y=!1)}return o.delete(t),o.delete(e),y}var Fne=Lne,Bne=js,Une=ui,zne=Bne(Une,"DataView"),qne=zne,Wne=js,Hne=ui,Gne=Wne(Hne,"Promise"),Kne=Gne,Qne=js,Yne=ui,Xne=Qne(Yne,"Set"),mL=Xne,Jne=js,Zne=ui,ere=Jne(Zne,"WeakMap"),tre=ere,Ib=qne,Pb=Zx,Ob=Kne,Cb=mL,kb=tre,gL=Qi,dc=EV,WO="[object Map]",nre="[object Object]",HO="[object Promise]",GO="[object Set]",KO="[object WeakMap]",QO="[object DataView]",rre=dc(Ib),ire=dc(Pb),ore=dc(Ob),are=dc(Cb),sre=dc(kb),Na=gL;(Ib&&Na(new Ib(new ArrayBuffer(1)))!=QO||Pb&&Na(new Pb)!=WO||Ob&&Na(Ob.resolve())!=HO||Cb&&Na(new Cb)!=GO||kb&&Na(new kb)!=KO)&&(Na=function(t){var e=gL(t),n=e==nre?t.constructor:void 0,r=n?dc(n):"";if(r)switch(r){case rre:return QO;case ire:return WO;case ore:return HO;case are:return GO;case sre:return KO}return e});var ure=Na,s0=iL,lre=uL,cre=Bee,fre=Fne,YO=ure,XO=Ln,JO=fL,hre=dL,dre=1,ZO="[object Arguments]",eC="[object Array]",Ap="[object Object]",pre=Object.prototype,tC=pre.hasOwnProperty;function mre(t,e,n,r,i,o){var a=XO(t),s=XO(e),u=a?eC:YO(t),l=s?eC:YO(e);u=u==ZO?Ap:u,l=l==ZO?Ap:l;var c=u==Ap,f=l==Ap,d=u==l;if(d&&JO(t)){if(!JO(e))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new s0),a||hre(t)?lre(t,e,n,r,i,o):cre(t,e,u,n,r,i,o);if(!(n&dre)){var p=c&&tC.call(t,"__wrapped__"),_=f&&tC.call(e,"__wrapped__");if(p||_){var y=p?t.value():t,b=_?e.value():e;return o||(o=new s0),i(y,b,n,r,o)}}return d?(o||(o=new s0),fre(t,e,n,r,i,o)):!1}var gre=mre,yre=gre,nC=Yi;function yL(t,e,n,r,i){return t===e?!0:t==null||e==null||!nC(t)&&!nC(e)?t!==t&&e!==e:yre(t,e,n,r,yL,i)}var gT=yL,vre=iL,_re=gT,wre=1,bre=2;function Ere(t,e,n,r){var i=n.length,o=i,a=!r;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],l=t[u],c=s[1];if(a&&s[2]){if(l===void 0&&!(u in t))return!1}else{var f=new vre;if(r)var d=r(l,c,u,t,e,f);if(!(d===void 0?_re(c,l,wre|bre,r,f):d))return!1}}return!0}var xre=Ere,Tre=pa;function Sre(t){return t===t&&!Tre(t)}var vL=Sre,Are=vL,Ire=Pv;function Pre(t){for(var e=Ire(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Are(i)]}return e}var Ore=Pre;function Cre(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var _L=Cre,kre=xre,Rre=Ore,Nre=_L;function Dre(t){var e=Rre(t);return e.length==1&&e[0][2]?Nre(e[0][0],e[0][1]):function(n){return n===t||kre(n,t,e)}}var jre=Dre;function Mre(t,e){return t!=null&&e in Object(t)}var $re=Mre,Vre=IV,Lre=dT,Fre=Ln,Bre=pT,Ure=mT,zre=hv;function qre(t,e,n){e=Vre(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=zre(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&Ure(i)&&Bre(a,i)&&(Fre(t)||Lre(t)))}var Wre=qre,Hre=$re,Gre=Wre;function Kre(t,e){return t!=null&&Gre(t,e,Hre)}var Qre=Kre,Yre=gT,Xre=PV,Jre=Qre,Zre=Yx,eie=vL,tie=_L,nie=hv,rie=1,iie=2;function oie(t,e){return Zre(t)&&eie(e)?tie(nie(t),e):function(n){var r=Xre(n,t);return r===void 0&&r===e?Jre(n,t):Yre(e,r,rie|iie)}}var aie=oie;function sie(t){return t}var pc=sie;function uie(t){return function(e){return e==null?void 0:e[t]}}var lie=uie,cie=rT;function fie(t){return function(e){return cie(e,t)}}var hie=fie,die=lie,pie=hie,mie=Yx,gie=hv;function yie(t){return mie(t)?die(gie(t)):pie(t)}var vie=yie,_ie=jre,wie=aie,bie=pc,Eie=Ln,xie=vie;function Tie(t){return typeof t=="function"?t:t==null?bie:typeof t=="object"?Eie(t)?wie(t[0],t[1]):_ie(t):xie(t)}var ma=Tie;function Sie(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var wL=Sie;function Aie(t){return t!==t}var Iie=Aie;function Pie(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var Oie=Pie,Cie=wL,kie=Iie,Rie=Oie;function Nie(t,e,n){return e===e?Rie(t,e,n):Cie(t,kie,n)}var Die=Nie,jie=Die;function Mie(t,e){var n=t==null?0:t.length;return!!n&&jie(t,e,0)>-1}var $ie=Mie;function Vie(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var Lie=Vie;function Fie(){}var Bie=Fie,u0=mL,Uie=Bie,zie=hT,qie=1/0,Wie=u0&&1/zie(new u0([,-0]))[1]==qie?function(t){return new u0(t)}:Uie,Hie=Wie,Gie=oL,Kie=$ie,Qie=Lie,Yie=sL,Xie=Hie,Jie=hT,Zie=200;function eoe(t,e,n){var r=-1,i=Kie,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=Qie;else if(o>=Zie){var l=e?null:Xie(t);if(l)return Jie(l);a=!1,i=Yie,u=new Gie}else u=e?[]:s;e:for(;++r<o;){var c=t[r],f=e?e(c):c;if(c=n||c!==0?c:0,a&&f===f){for(var d=u.length;d--;)if(u[d]===f)continue e;e&&u.push(f),s.push(c)}else i(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}var toe=eoe,noe=ma,roe=toe;function ioe(t,e){return t&&t.length?roe(t,noe(e)):[]}var ooe=ioe;const rC=Ge(ooe);function bL(t,e,n){return e===!0?rC(t,n):ye(e)?rC(t,e):t}function yl(t){"@babel/helpers - typeof";return yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yl(t)}var aoe=["ref"];function iC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ci(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iC(Object(n),!0).forEach(function(r){Ov(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function soe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xL(r.key),r)}}function uoe(t,e,n){return e&&oC(t.prototype,e),n&&oC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function loe(t,e,n){return e=Eg(e),coe(t,EL()?Reflect.construct(e,n||[],Eg(t).constructor):e.apply(t,n))}function coe(t,e){if(e&&(yl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return foe(t)}function foe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EL=function(){return!!t})()}function Eg(t){return Eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Eg(t)}function hoe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rb(t,e)}function Rb(t,e){return Rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Rb(t,e)}function Ov(t,e,n){return e=xL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xL(t){var e=doe(t,"string");return yl(e)=="symbol"?e:e+""}function doe(t,e){if(yl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function poe(t,e){if(t==null)return{};var n=moe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function moe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function goe(t){return t.value}function yoe(t,e){if($.isValidElement(t))return $.cloneElement(t,e);if(typeof t=="function")return $.createElement(t,e);e.ref;var n=poe(e,aoe);return $.createElement(fT,n)}var aC=1,ns=function(t){function e(){var n;soe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=loe(this,e,[].concat(i)),Ov(n,"lastBoundingBox",{width:-1,height:-1}),n}return hoe(e,t),uoe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>aC||Math.abs(i.height-this.lastBoundingBox.height)>aC)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ci({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,u=i.margin,l=i.chartWidth,c=i.chartHeight,f,d;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&o==="vertical"){var p=this.getBBoxSnapshot();f={left:((l||0)-p.width)/2}}else f=a==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var _=this.getBBoxSnapshot();d={top:((c||0)-_.height)/2}}else d=s==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return ci(ci({},f),d)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,a=i.width,s=i.height,u=i.wrapperStyle,l=i.payloadUniqBy,c=i.payload,f=ci(ci({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(u)),u);return $.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){r.wrapperNode=p}},yoe(o,ci(ci({},this.props),{},{payload:bL(c,l,goe)})))}}],[{key:"getWithHeight",value:function(r,i){var o=ci(ci({},this.defaultProps),r.props),a=o.layout;return a==="vertical"&&ee(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(W.PureComponent);Ov(ns,"displayName","Legend");Ov(ns,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var sC=Nd,voe=dT,_oe=Ln,uC=sC?sC.isConcatSpreadable:void 0;function woe(t){return _oe(t)||voe(t)||!!(uC&&t&&t[uC])}var boe=woe,Eoe=lL,xoe=boe;function TL(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=xoe),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?TL(s,e-1,n,r,i):Eoe(i,s):r||(i[i.length]=s)}return i}var SL=TL;function Toe(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(n(o[u],u,o)===!1)break}return e}}var Soe=Toe,Aoe=Soe,Ioe=Aoe(),Poe=Ioe,Ooe=Poe,Coe=Pv;function koe(t,e){return t&&Ooe(t,e,Coe)}var AL=koe,Roe=Dd;function Noe(t,e){return function(n,r){if(n==null)return n;if(!Roe(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var Doe=Noe,joe=AL,Moe=Doe,$oe=Moe(joe),yT=$oe,Voe=yT,Loe=Dd;function Foe(t,e){var n=-1,r=Loe(t)?Array(t.length):[];return Voe(t,function(i,o,a){r[++n]=e(i,o,a)}),r}var IL=Foe;function Boe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var Uoe=Boe,lC=oc;function zoe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=lC(t),a=e!==void 0,s=e===null,u=e===e,l=lC(e);if(!s&&!l&&!o&&t>e||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}var qoe=zoe,Woe=qoe;function Hoe(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Woe(i[r],o[r]);if(u){if(r>=s)return u;var l=n[r];return u*(l=="desc"?-1:1)}}return t.index-e.index}var Goe=Hoe,l0=nT,Koe=rT,Qoe=ma,Yoe=IL,Xoe=Uoe,Joe=hL,Zoe=Goe,eae=pc,tae=Ln;function nae(t,e,n){e.length?e=l0(e,function(o){return tae(o)?function(a){return Koe(a,o.length===1?o[0]:o)}:o}):e=[eae];var r=-1;e=l0(e,Joe(Qoe));var i=Yoe(t,function(o,a,s){var u=l0(e,function(l){return l(o)});return{criteria:u,index:++r,value:o}});return Xoe(i,function(o,a){return Zoe(o,a,n)})}var rae=nae;function iae(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var oae=iae,aae=oae,cC=Math.max;function sae(t,e,n){return e=cC(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=cC(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),aae(t,this,s)}}var uae=sae;function lae(t){return function(){return t}}var cae=lae,fae=js,hae=function(){try{var t=fae(Object,"defineProperty");return t({},"",{}),t}catch{}}(),PL=hae,dae=cae,fC=PL,pae=pc,mae=fC?function(t,e){return fC(t,"toString",{configurable:!0,enumerable:!1,value:dae(e),writable:!0})}:pae,gae=mae,yae=800,vae=16,_ae=Date.now;function wae(t){var e=0,n=0;return function(){var r=_ae(),i=vae-(r-n);if(n=r,i>0){if(++e>=yae)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var bae=wae,Eae=gae,xae=bae,Tae=xae(Eae),Sae=Tae,Aae=pc,Iae=uae,Pae=Sae;function Oae(t,e){return Pae(Iae(t,e,Aae),t+"")}var Cae=Oae,kae=Jx,Rae=Dd,Nae=pT,Dae=pa;function jae(t,e,n){if(!Dae(n))return!1;var r=typeof e;return(r=="number"?Rae(n)&&Nae(e,n.length):r=="string"&&e in n)?kae(n[e],t):!1}var Cv=jae,Mae=SL,$ae=rae,Vae=Cae,hC=Cv,Lae=Vae(function(t,e){if(t==null)return[];var n=e.length;return n>1&&hC(t,e[0],e[1])?e=[]:n>2&&hC(e[0],e[1],e[2])&&(e=[e[0]]),$ae(t,Mae(e,1),[])}),Fae=Lae;const vT=Ge(Fae);function Oh(t){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(t)}function Nb(){return Nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nb.apply(this,arguments)}function Bae(t,e){return Wae(t)||qae(t,e)||zae(t,e)||Uae()}function Uae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zae(t,e){if(t){if(typeof t=="string")return dC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dC(t,e)}}function dC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function Wae(t){if(Array.isArray(t))return t}function pC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pC(Object(n),!0).forEach(function(r){Hae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hae(t,e,n){return e=Gae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gae(t){var e=Kae(t,"string");return Oh(e)=="symbol"?e:e+""}function Kae(t,e){if(Oh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Oh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qae(t){return Array.isArray(t)&&Mt(t[0])&&Mt(t[1])?t.join(" ~ "):t}var Yae=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,u=e.labelStyle,l=u===void 0?{}:u,c=e.payload,f=e.formatter,d=e.itemSorter,p=e.wrapperClassName,_=e.labelClassName,y=e.label,b=e.labelFormatter,v=e.accessibilityLayer,g=v===void 0?!1:v,E=function(){if(c&&c.length){var N={padding:0,margin:0},R=(d?vT(c,d):c).map(function(j,M){if(j.type==="none")return null;var F=c0({display:"block",paddingTop:4,paddingBottom:4,color:j.color||"#000"},s),L=j.formatter||f||Qae,V=j.value,H=j.name,Q=V,ie=H;if(L&&Q!=null&&ie!=null){var J=L(V,H,j,M,c);if(Array.isArray(J)){var fe=Bae(J,2);Q=fe[0],ie=fe[1]}else Q=J}return $.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:F},Mt(ie)?$.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,Mt(ie)?$.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,$.createElement("span",{className:"recharts-tooltip-item-value"},Q),$.createElement("span",{className:"recharts-tooltip-item-unit"},j.unit||""))});return $.createElement("ul",{className:"recharts-tooltip-item-list",style:N},R)}return null},P=c0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),T=c0({margin:0},l),A=!ve(y),x=A?y:"",S=Ce("recharts-default-tooltip",p),O=Ce("recharts-tooltip-label",_);A&&b&&c!==void 0&&c!==null&&(x=b(y,c));var C=g?{role:"status","aria-live":"assertive"}:{};return $.createElement("div",Nb({className:S,style:P},C),$.createElement("p",{className:O,style:T},$.isValidElement(x)?x:"".concat(x)),E())};function Ch(t){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(t)}function Ip(t,e,n){return e=Xae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xae(t){var e=Jae(t,"string");return Ch(e)=="symbol"?e:e+""}function Jae(t,e){if(Ch(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ch(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qc="recharts-tooltip-wrapper",Zae={visibility:"hidden"};function ese(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Ce(Qc,Ip(Ip(Ip(Ip({},"".concat(Qc,"-right"),ee(n)&&e&&ee(e.x)&&n>=e.x),"".concat(Qc,"-left"),ee(n)&&e&&ee(e.x)&&n<e.x),"".concat(Qc,"-bottom"),ee(r)&&e&&ee(e.y)&&r>=e.y),"".concat(Qc,"-top"),ee(r)&&e&&ee(e.y)&&r<e.y))}function mC(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,u=t.viewBox,l=t.viewBoxDimension;if(o&&ee(o[r]))return o[r];var c=n[r]-s-i,f=n[r]+i;if(e[r])return a[r]?c:f;if(a[r]){var d=c,p=u[r];return d<p?Math.max(f,u[r]):Math.max(c,u[r])}var _=f+s,y=u[r]+l;return _>y?Math.max(c,u[r]):Math.max(f,u[r])}function tse(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function nse(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipBox,s=t.useTranslate3d,u=t.viewBox,l,c,f;return a.height>0&&a.width>0&&n?(c=mC({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:u,viewBoxDimension:u.width}),f=mC({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:u,viewBoxDimension:u.height}),l=tse({translateX:c,translateY:f,useTranslate3d:s})):l=Zae,{cssProperties:l,cssClasses:ese({translateX:c,translateY:f,coordinate:n})}}function vl(t){"@babel/helpers - typeof";return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vl(t)}function gC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gC(Object(n),!0).forEach(function(r){jb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ise(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CL(r.key),r)}}function ose(t,e,n){return e&&ise(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ase(t,e,n){return e=xg(e),sse(t,OL()?Reflect.construct(e,n||[],xg(t).constructor):e.apply(t,n))}function sse(t,e){if(e&&(vl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return use(t)}function use(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OL=function(){return!!t})()}function xg(t){return xg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xg(t)}function lse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Db(t,e)}function Db(t,e){return Db=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Db(t,e)}function jb(t,e,n){return e=CL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CL(t){var e=cse(t,"string");return vl(e)=="symbol"?e:e+""}function cse(t,e){if(vl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vC=1,fse=function(t){function e(){var n;rse(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=ase(this,e,[].concat(i)),jb(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),jb(n,"handleKeyDown",function(a){if(a.key==="Escape"){var s,u,l,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(u=n.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&s!==void 0?s:0,y:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&l!==void 0?l:0}})}}),n}return lse(e,t),ose(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>vC||Math.abs(r.height-this.state.lastBoundingBox.height)>vC)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,u=i.animationEasing,l=i.children,c=i.coordinate,f=i.hasPayload,d=i.isAnimationActive,p=i.offset,_=i.position,y=i.reverseDirection,b=i.useTranslate3d,v=i.viewBox,g=i.wrapperStyle,E=nse({allowEscapeViewBox:a,coordinate:c,offsetTopLeft:p,position:_,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:v}),P=E.cssClasses,T=E.cssProperties,A=yC(yC({transition:d&&o?"transform ".concat(s,"ms ").concat(u):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},g);return $.createElement("div",{tabIndex:-1,className:P,style:A,ref:function(S){r.wrapperNode=S}},l)}}])}(W.PureComponent),hse=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ms={isSsr:hse()};function _l(t){"@babel/helpers - typeof";return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_l(t)}function _C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_C(Object(n),!0).forEach(function(r){_T(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_C(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pse(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RL(r.key),r)}}function mse(t,e,n){return e&&pse(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gse(t,e,n){return e=Tg(e),yse(t,kL()?Reflect.construct(e,n||[],Tg(t).constructor):e.apply(t,n))}function yse(t,e){if(e&&(_l(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vse(t)}function vse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kL=function(){return!!t})()}function Tg(t){return Tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tg(t)}function _se(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mb(t,e)}function Mb(t,e){return Mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Mb(t,e)}function _T(t,e,n){return e=RL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RL(t){var e=wse(t,"string");return _l(e)=="symbol"?e:e+""}function wse(t,e){if(_l(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_l(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function bse(t){return t.dataKey}function Ese(t,e){return $.isValidElement(t)?$.cloneElement(t,e):typeof t=="function"?$.createElement(t,e):$.createElement(Yae,e)}var Wn=function(t){function e(){return dse(this,e),gse(this,e,arguments)}return _se(e,t),mse(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,u=i.animationEasing,l=i.content,c=i.coordinate,f=i.filterNull,d=i.isAnimationActive,p=i.offset,_=i.payload,y=i.payloadUniqBy,b=i.position,v=i.reverseDirection,g=i.useTranslate3d,E=i.viewBox,P=i.wrapperStyle,T=_??[];f&&T.length&&(T=bL(_.filter(function(x){return x.value!=null&&(x.hide!==!0||r.props.includeHidden)}),y,bse));var A=T.length>0;return $.createElement(fse,{allowEscapeViewBox:a,animationDuration:s,animationEasing:u,isAnimationActive:d,active:o,coordinate:c,hasPayload:A,offset:p,position:b,reverseDirection:v,useTranslate3d:g,viewBox:E,wrapperStyle:P},Ese(l,wC(wC({},this.props),{},{payload:T})))}}])}(W.PureComponent);_T(Wn,"displayName","Tooltip");_T(Wn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ms.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var xse=ui,Tse=function(){return xse.Date.now()},Sse=Tse,Ase=/\s/;function Ise(t){for(var e=t.length;e--&&Ase.test(t.charAt(e)););return e}var Pse=Ise,Ose=Pse,Cse=/^\s+/;function kse(t){return t&&t.slice(0,Ose(t)+1).replace(Cse,"")}var Rse=kse,Nse=Rse,bC=pa,Dse=oc,EC=NaN,jse=/^[-+]0x[0-9a-f]+$/i,Mse=/^0b[01]+$/i,$se=/^0o[0-7]+$/i,Vse=parseInt;function Lse(t){if(typeof t=="number")return t;if(Dse(t))return EC;if(bC(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=bC(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Nse(t);var n=Mse.test(t);return n||$se.test(t)?Vse(t.slice(2),n?2:8):jse.test(t)?EC:+t}var NL=Lse,Fse=pa,f0=Sse,xC=NL,Bse="Expected a function",Use=Math.max,zse=Math.min;function qse(t,e,n){var r,i,o,a,s,u,l=0,c=!1,f=!1,d=!0;if(typeof t!="function")throw new TypeError(Bse);e=xC(e)||0,Fse(n)&&(c=!!n.leading,f="maxWait"in n,o=f?Use(xC(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d);function p(A){var x=r,S=i;return r=i=void 0,l=A,a=t.apply(S,x),a}function _(A){return l=A,s=setTimeout(v,e),c?p(A):a}function y(A){var x=A-u,S=A-l,O=e-x;return f?zse(O,o-S):O}function b(A){var x=A-u,S=A-l;return u===void 0||x>=e||x<0||f&&S>=o}function v(){var A=f0();if(b(A))return g(A);s=setTimeout(v,y(A))}function g(A){return s=void 0,d&&r?p(A):(r=i=void 0,a)}function E(){s!==void 0&&clearTimeout(s),l=0,r=u=i=s=void 0}function P(){return s===void 0?a:g(f0())}function T(){var A=f0(),x=b(A);if(r=arguments,i=this,u=A,x){if(s===void 0)return _(u);if(f)return clearTimeout(s),s=setTimeout(v,e),p(u)}return s===void 0&&(s=setTimeout(v,e)),a}return T.cancel=E,T.flush=P,T}var Wse=qse,Hse=Wse,Gse=pa,Kse="Expected a function";function Qse(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(Kse);return Gse(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Hse(t,e,{leading:r,maxWait:e,trailing:i})}var Yse=Qse;const DL=Ge(Yse);function kh(t){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(t)}function TC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TC(Object(n),!0).forEach(function(r){Xse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xse(t,e,n){return e=Jse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jse(t){var e=Zse(t,"string");return kh(e)=="symbol"?e:e+""}function Zse(t,e){if(kh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eue(t,e){return iue(t)||rue(t,e)||nue(t,e)||tue()}function tue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nue(t,e){if(t){if(typeof t=="string")return SC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SC(t,e)}}function SC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rue(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function iue(t){if(Array.isArray(t))return t}var Yc=W.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,a=o===void 0?"100%":o,s=t.height,u=s===void 0?"100%":s,l=t.minWidth,c=l===void 0?0:l,f=t.minHeight,d=t.maxHeight,p=t.children,_=t.debounce,y=_===void 0?0:_,b=t.id,v=t.className,g=t.onResize,E=t.style,P=E===void 0?{}:E,T=W.useRef(null),A=W.useRef();A.current=g,W.useImperativeHandle(e,function(){return Object.defineProperty(T.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),T.current},configurable:!0})});var x=W.useState({containerWidth:i.width,containerHeight:i.height}),S=eue(x,2),O=S[0],C=S[1],k=W.useCallback(function(R,j){C(function(M){var F=Math.round(R),L=Math.round(j);return M.containerWidth===F&&M.containerHeight===L?M:{containerWidth:F,containerHeight:L}})},[]);W.useEffect(function(){var R=function(H){var Q,ie=H[0].contentRect,J=ie.width,fe=ie.height;k(J,fe),(Q=A.current)===null||Q===void 0||Q.call(A,J,fe)};y>0&&(R=DL(R,y,{trailing:!0,leading:!1}));var j=new ResizeObserver(R),M=T.current.getBoundingClientRect(),F=M.width,L=M.height;return k(F,L),j.observe(T.current),function(){j.disconnect()}},[k,y]);var N=W.useMemo(function(){var R=O.containerWidth,j=O.containerHeight;if(R<0||j<0)return null;Ai(za(a)||za(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,u),Ai(!n||n>0,"The aspect(%s) must be greater than zero.",n);var M=za(a)?R:a,F=za(u)?j:u;n&&n>0&&(M?F=M/n:F&&(M=F*n),d&&F>d&&(F=d)),Ai(M>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,F,a,u,c,f,n);var L=!Array.isArray(p)&&Si(p.type).endsWith("Chart");return $.Children.map(p,function(V){return $.isValidElement(V)?W.cloneElement(V,Pp({width:M,height:F},L?{style:Pp({height:"100%",width:"100%",maxHeight:F,maxWidth:M},V.props.style)}:{})):V})},[n,p,u,d,f,c,O,a]);return $.createElement("div",{id:b?"".concat(b):void 0,className:Ce("recharts-responsive-container",v),style:Pp(Pp({},P),{},{width:a,height:u,minWidth:c,minHeight:f,maxHeight:d}),ref:T},N)}),wT=function(e){return null};wT.displayName="Cell";function Rh(t){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(t)}function AC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $b(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AC(Object(n),!0).forEach(function(r){oue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oue(t,e,n){return e=aue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aue(t){var e=sue(t,"string");return Rh(e)=="symbol"?e:e+""}function sue(t,e){if(Rh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Js={widthCache:{},cacheCount:0},uue=2e3,lue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},IC="recharts_measurement_span";function cue(t){var e=$b({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Bf=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ms.isSsr)return{width:0,height:0};var r=cue(n),i=JSON.stringify({text:e,copyStyle:r});if(Js.widthCache[i])return Js.widthCache[i];try{var o=document.getElementById(IC);o||(o=document.createElement("span"),o.setAttribute("id",IC),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=$b($b({},lue),r);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),u={width:s.width,height:s.height};return Js.widthCache[i]=u,++Js.cacheCount>uue&&(Js.cacheCount=0,Js.widthCache={}),u}catch{return{width:0,height:0}}},fue=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Nh(t){"@babel/helpers - typeof";return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nh(t)}function Sg(t,e){return mue(t)||pue(t,e)||due(t,e)||hue()}function hue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function due(t,e){if(t){if(typeof t=="string")return PC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PC(t,e)}}function PC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pue(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function mue(t){if(Array.isArray(t))return t}function gue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vue(r.key),r)}}function yue(t,e,n){return e&&OC(t.prototype,e),n&&OC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vue(t){var e=_ue(t,"string");return Nh(e)=="symbol"?e:e+""}function _ue(t,e){if(Nh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var CC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,bue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,jL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Eue=Object.keys(jL),_u="NaN";function xue(t,e){return t*jL[e]}var Op=function(){function t(e,n){gue(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!wue.test(n)&&(this.num=NaN,this.unit=""),Eue.includes(n)&&(this.num=xue(e,n),this.unit="px")}return yue(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=bue.exec(n))!==null&&r!==void 0?r:[],o=Sg(i,3),a=o[1],s=o[2];return new t(parseFloat(a),s??"")}}])}();function ML(t){if(t.includes(_u))return _u;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=CC.exec(e))!==null&&n!==void 0?n:[],i=Sg(r,4),o=i[1],a=i[2],s=i[3],u=Op.parse(o??""),l=Op.parse(s??""),c=a==="*"?u.multiply(l):u.divide(l);if(c.isNaN())return _u;e=e.replace(CC,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,d=(f=kC.exec(e))!==null&&f!==void 0?f:[],p=Sg(d,4),_=p[1],y=p[2],b=p[3],v=Op.parse(_??""),g=Op.parse(b??""),E=y==="+"?v.add(g):v.subtract(g);if(E.isNaN())return _u;e=e.replace(kC,E.toString())}return e}var RC=/\(([^()]*)\)/;function Tue(t){for(var e=t;e.includes("(");){var n=RC.exec(e),r=Sg(n,2),i=r[1];e=e.replace(RC,ML(i))}return e}function Sue(t){var e=t.replace(/\s+/g,"");return e=Tue(e),e=ML(e),e}function Aue(t){try{return Sue(t)}catch{return _u}}function h0(t){var e=Aue(t.slice(5,-1));return e===_u?"":e}var Iue=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Pue=["dx","dy","angle","className","breakAll"];function Vb(){return Vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vb.apply(this,arguments)}function NC(t,e){if(t==null)return{};var n=Oue(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Oue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function DC(t,e){return Nue(t)||Rue(t,e)||kue(t,e)||Cue()}function Cue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kue(t,e){if(t){if(typeof t=="string")return jC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jC(t,e)}}function jC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rue(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function Nue(t){if(Array.isArray(t))return t}var $L=/[ \f\n\r\t\v\u2028\u2029]+/,VL=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];ve(n)||(r?o=n.toString().split(""):o=n.toString().split($L));var a=o.map(function(u){return{word:u,width:Bf(u,i).width}}),s=r?0:Bf("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},Due=function(e,n,r,i,o){var a=e.maxLines,s=e.children,u=e.style,l=e.breakAll,c=ee(a),f=s,d=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce(function(F,L){var V=L.word,H=L.width,Q=F[F.length-1];if(Q&&(i==null||o||Q.width+H+r<Number(i)))Q.words.push(V),Q.width+=H+r;else{var ie={words:[V],width:H};F.push(ie)}return F},[])},p=d(n),_=function(M){return M.reduce(function(F,L){return F.width>L.width?F:L})};if(!c)return p;for(var y="",b=function(M){var F=f.slice(0,M),L=VL({breakAll:l,style:u,children:F+y}).wordsWithComputedWidth,V=d(L),H=V.length>a||_(V).width>Number(i);return[H,V]},v=0,g=f.length-1,E=0,P;v<=g&&E<=f.length-1;){var T=Math.floor((v+g)/2),A=T-1,x=b(A),S=DC(x,2),O=S[0],C=S[1],k=b(T),N=DC(k,1),R=N[0];if(!O&&!R&&(v=T+1),O&&R&&(g=T-1),!O&&R){P=C;break}E++}return P||p},MC=function(e){var n=ve(e)?[]:e.toString().split($L);return[{words:n}]},jue=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((n||r)&&!Ms.isSsr){var u,l,c=VL({breakAll:a,children:i,style:o});if(c){var f=c.wordsWithComputedWidth,d=c.spaceWidth;u=f,l=d}else return MC(i);return Due({breakAll:a,children:i,maxLines:s,style:o},u,l,n,r)}return MC(i)},$C="#808080",Ag=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,u=e.capHeight,l=u===void 0?"0.71em":u,c=e.scaleToFit,f=c===void 0?!1:c,d=e.textAnchor,p=d===void 0?"start":d,_=e.verticalAnchor,y=_===void 0?"end":_,b=e.fill,v=b===void 0?$C:b,g=NC(e,Iue),E=W.useMemo(function(){return jue({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:f,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,f,g.style,g.width]),P=g.dx,T=g.dy,A=g.angle,x=g.className,S=g.breakAll,O=NC(g,Pue);if(!Mt(r)||!Mt(o))return null;var C=r+(ee(P)?P:0),k=o+(ee(T)?T:0),N;switch(y){case"start":N=h0("calc(".concat(l,")"));break;case"middle":N=h0("calc(".concat((E.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:N=h0("calc(".concat(E.length-1," * -").concat(s,")"));break}var R=[];if(f){var j=E[0].width,M=g.width;R.push("scale(".concat((ee(M)?M/j:1)/j,")"))}return A&&R.push("rotate(".concat(A,", ").concat(C,", ").concat(k,")")),R.length&&(O.transform=R.join(" ")),$.createElement("text",Vb({},be(O,!0),{x:C,y:k,className:Ce("recharts-text",x),textAnchor:p,fill:v.includes("url")?$C:v}),E.map(function(F,L){var V=F.words.join(S?"":" ");return $.createElement("tspan",{x:C,dy:L===0?N:s,key:"".concat(V,"-").concat(L)},V)}))};function Ho(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Mue(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bT(t){let e,n,r;t.length!==2?(e=Ho,n=(s,u)=>Ho(t(s),u),r=(s,u)=>t(s)-u):(e=t===Ho||t===Mue?t:$ue,n=t,r=t);function i(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function a(s,u,l=0,c=s.length){const f=i(s,u,l,c-1);return f>l&&r(s[f-1],u)>-r(s[f],u)?f-1:f}return{left:i,center:a,right:o}}function $ue(){return 0}function LL(t){return t===null?NaN:+t}function*Vue(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Lue=bT(Ho),jd=Lue.right;bT(LL).center;class VC extends Map{constructor(e,n=Uue){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(LC(this,e))}has(e){return super.has(LC(this,e))}set(e,n){return super.set(Fue(this,e),n)}delete(e){return super.delete(Bue(this,e))}}function LC({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Fue({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Bue({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Uue(t){return t!==null&&typeof t=="object"?t.valueOf():t}function zue(t=Ho){if(t===Ho)return FL;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function FL(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const que=Math.sqrt(50),Wue=Math.sqrt(10),Hue=Math.sqrt(2);function Ig(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=que?10:o>=Wue?5:o>=Hue?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*a,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=n&&n<2?Ig(t,e,n*2):[s,u,l]}function Lb(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?Ig(e,t,n):Ig(t,e,n);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)u[l]=(o-l)/-a;else for(let l=0;l<s;++l)u[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)u[l]=(i+l)/-a;else for(let l=0;l<s;++l)u[l]=(i+l)*a;return u}function Fb(t,e,n){return e=+e,t=+t,n=+n,Ig(t,e,n)[2]}function Bb(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Fb(e,t,n):Fb(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function FC(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function BC(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function BL(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?FL:zue(i);r>n;){if(r-n>600){const u=r-n+1,l=e-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),p=Math.max(n,Math.floor(e-l*f/u+d)),_=Math.min(r,Math.floor(e+(u-l)*f/u+d));BL(t,e,p,_,i)}const o=t[e];let a=n,s=r;for(Xc(t,n,e),i(t[r],o)>0&&Xc(t,n,r);a<s;){for(Xc(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[n],o)===0?Xc(t,n,s):(++s,Xc(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Xc(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Gue(t,e,n){if(t=Float64Array.from(Vue(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return BC(t);if(e>=1)return FC(t);var r,i=(r-1)*e,o=Math.floor(i),a=FC(BL(t,o).subarray(0,o+1)),s=BC(t.subarray(o+1));return a+(s-a)*(i-o)}}function Kue(t,e,n=LL){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function Que(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function yr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Xi(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Ub=Symbol("implicit");function ET(){var t=new VC,e=[],n=[],r=Ub;function i(o){let a=t.get(o);if(a===void 0){if(r!==Ub)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new VC;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return ET(e,n).unknown(r)},yr.apply(i,arguments),i}function Dh(){var t=ET().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,u=0,l=0,c=.5;delete t.unknown;function f(){var d=e().length,p=i<r,_=p?i:r,y=p?r:i;o=(y-_)/Math.max(1,d-u+l*2),s&&(o=Math.floor(o)),_+=(y-_-o*(d-u))*c,a=o*(1-u),s&&(_=Math.round(_),a=Math.round(a));var b=Que(d).map(function(v){return _+o*v});return n(p?b.reverse():b)}return t.domain=function(d){return arguments.length?(e(d),f()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(d){return arguments.length?(s=!!d,f()):s},t.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},t.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},t.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.copy=function(){return Dh(e(),[r,i]).round(s).paddingInner(u).paddingOuter(l).align(c)},yr.apply(f(),arguments)}function UL(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return UL(e())},t}function Uf(){return UL(Dh.apply(null,arguments).paddingInner(1))}function xT(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function zL(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Md(){}var jh=.7,Pg=1/jh,Mu="\\s*([+-]?\\d+)\\s*",Mh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yue=/^#([0-9a-f]{3,8})$/,Xue=new RegExp(`^rgb\\(${Mu},${Mu},${Mu}\\)$`),Jue=new RegExp(`^rgb\\(${ri},${ri},${ri}\\)$`),Zue=new RegExp(`^rgba\\(${Mu},${Mu},${Mu},${Mh}\\)$`),ele=new RegExp(`^rgba\\(${ri},${ri},${ri},${Mh}\\)$`),tle=new RegExp(`^hsl\\(${Mh},${ri},${ri}\\)$`),nle=new RegExp(`^hsla\\(${Mh},${ri},${ri},${Mh}\\)$`),UC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xT(Md,$h,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zC,formatHex:zC,formatHex8:rle,formatHsl:ile,formatRgb:qC,toString:qC});function zC(){return this.rgb().formatHex()}function rle(){return this.rgb().formatHex8()}function ile(){return qL(this).formatHsl()}function qC(){return this.rgb().formatRgb()}function $h(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Yue.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?WC(e):n===3?new Rn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Cp(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Cp(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Xue.exec(t))?new Rn(e[1],e[2],e[3],1):(e=Jue.exec(t))?new Rn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Zue.exec(t))?Cp(e[1],e[2],e[3],e[4]):(e=ele.exec(t))?Cp(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=tle.exec(t))?KC(e[1],e[2]/100,e[3]/100,1):(e=nle.exec(t))?KC(e[1],e[2]/100,e[3]/100,e[4]):UC.hasOwnProperty(t)?WC(UC[t]):t==="transparent"?new Rn(NaN,NaN,NaN,0):null}function WC(t){return new Rn(t>>16&255,t>>8&255,t&255,1)}function Cp(t,e,n,r){return r<=0&&(t=e=n=NaN),new Rn(t,e,n,r)}function ole(t){return t instanceof Md||(t=$h(t)),t?(t=t.rgb(),new Rn(t.r,t.g,t.b,t.opacity)):new Rn}function zb(t,e,n,r){return arguments.length===1?ole(t):new Rn(t,e,n,r??1)}function Rn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}xT(Rn,zb,zL(Md,{brighter(t){return t=t==null?Pg:Math.pow(Pg,t),new Rn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?jh:Math.pow(jh,t),new Rn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Rn(rs(this.r),rs(this.g),rs(this.b),Og(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:HC,formatHex:HC,formatHex8:ale,formatRgb:GC,toString:GC}));function HC(){return`#${qa(this.r)}${qa(this.g)}${qa(this.b)}`}function ale(){return`#${qa(this.r)}${qa(this.g)}${qa(this.b)}${qa((isNaN(this.opacity)?1:this.opacity)*255)}`}function GC(){const t=Og(this.opacity);return`${t===1?"rgb(":"rgba("}${rs(this.r)}, ${rs(this.g)}, ${rs(this.b)}${t===1?")":`, ${t})`}`}function Og(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function rs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qa(t){return t=rs(t),(t<16?"0":"")+t.toString(16)}function KC(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ir(t,e,n,r)}function qL(t){if(t instanceof Ir)return new Ir(t.h,t.s,t.l,t.opacity);if(t instanceof Md||(t=$h(t)),!t)return new Ir;if(t instanceof Ir)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Ir(a,s,u,t.opacity)}function sle(t,e,n,r){return arguments.length===1?qL(t):new Ir(t,e,n,r??1)}function Ir(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}xT(Ir,sle,zL(Md,{brighter(t){return t=t==null?Pg:Math.pow(Pg,t),new Ir(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?jh:Math.pow(jh,t),new Ir(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Rn(d0(t>=240?t-240:t+120,i,r),d0(t,i,r),d0(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ir(QC(this.h),kp(this.s),kp(this.l),Og(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Og(this.opacity);return`${t===1?"hsl(":"hsla("}${QC(this.h)}, ${kp(this.s)*100}%, ${kp(this.l)*100}%${t===1?")":`, ${t})`}`}}));function QC(t){return t=(t||0)%360,t<0?t+360:t}function kp(t){return Math.max(0,Math.min(1,t||0))}function d0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const TT=t=>()=>t;function ule(t,e){return function(n){return t+n*e}}function lle(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function cle(t){return(t=+t)==1?WL:function(e,n){return n-e?lle(e,n,t):TT(isNaN(e)?n:e)}}function WL(t,e){var n=e-t;return n?ule(t,n):TT(isNaN(t)?e:t)}const YC=function t(e){var n=cle(e);function r(i,o){var a=n((i=zb(i)).r,(o=zb(o)).r),s=n(i.g,o.g),u=n(i.b,o.b),l=WL(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=t,r}(1);function fle(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function hle(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dle(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=mc(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function ple(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Cg(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function mle(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=mc(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var qb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,p0=new RegExp(qb.source,"g");function gle(t){return function(){return t}}function yle(t){return function(e){return t(e)+""}}function vle(t,e){var n=qb.lastIndex=p0.lastIndex=0,r,i,o,a=-1,s=[],u=[];for(t=t+"",e=e+"";(r=qb.exec(t))&&(i=p0.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:Cg(r,i)})),n=p0.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?yle(u[0].x):gle(e):(e=u.length,function(l){for(var c=0,f;c<e;++c)s[(f=u[c]).i]=f.x(l);return s.join("")})}function mc(t,e){var n=typeof e,r;return e==null||n==="boolean"?TT(e):(n==="number"?Cg:n==="string"?(r=$h(e))?(e=r,YC):vle:e instanceof $h?YC:e instanceof Date?ple:hle(e)?fle:Array.isArray(e)?dle:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?mle:Cg)(t,e)}function ST(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function _le(t,e){e===void 0&&(e=t,t=mc);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function wle(t){return function(){return t}}function kg(t){return+t}var XC=[0,1];function bn(t){return t}function Wb(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:wle(isNaN(e)?NaN:.5)}function ble(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ele(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Wb(i,r),o=n(a,o)):(r=Wb(r,i),o=n(o,a)),function(s){return o(r(s))}}function xle(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Wb(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var u=jd(t,s,1,r)-1;return o[u](i[u](s))}}function $d(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kv(){var t=XC,e=XC,n=mc,r,i,o,a=bn,s,u,l;function c(){var d=Math.min(t.length,e.length);return a!==bn&&(a=ble(t[0],t[d-1])),s=d>2?xle:Ele,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(u||(u=s(t.map(r),e,n)))(r(a(d)))}return f.invert=function(d){return a(i((l||(l=s(e,t.map(r),Cg)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,kg),c()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),c()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=ST,c()},f.clamp=function(d){return arguments.length?(a=d?!0:bn,c()):a!==bn},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,p){return r=d,i=p,c()}}function AT(){return kv()(bn,bn)}function Tle(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Rg(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function wl(t){return t=Rg(Math.abs(t)),t?t[1]:NaN}function Sle(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Ale(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Ile=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vh(t){if(!(e=Ile.exec(t)))throw new Error("invalid format: "+t);var e;return new IT({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Vh.prototype=IT.prototype;function IT(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}IT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ple(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Ng;function Ole(t,e){var n=Rg(t,e);if(!n)return Ng=void 0,t.toPrecision(e);var r=n[0],i=n[1],o=i-(Ng=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Rg(t,Math.max(0,e+o-1))[0]}function JC(t,e){var n=Rg(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ZC={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Tle,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>JC(t*100,e),r:JC,s:Ole,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ek(t){return t}var tk=Array.prototype.map,nk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Cle(t){var e=t.grouping===void 0||t.thousands===void 0?ek:Sle(tk.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?ek:Ale(tk.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f,d){f=Vh(f);var p=f.fill,_=f.align,y=f.sign,b=f.symbol,v=f.zero,g=f.width,E=f.comma,P=f.precision,T=f.trim,A=f.type;A==="n"?(E=!0,A="g"):ZC[A]||(P===void 0&&(P=12),T=!0,A="g"),(v||p==="0"&&_==="=")&&(v=!0,p="0",_="=");var x=(d&&d.prefix!==void 0?d.prefix:"")+(b==="$"?n:b==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():""),S=(b==="$"?r:/[%p]/.test(A)?a:"")+(d&&d.suffix!==void 0?d.suffix:""),O=ZC[A],C=/[defgprs%]/.test(A);P=P===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function k(N){var R=x,j=S,M,F,L;if(A==="c")j=O(N)+j,N="";else{N=+N;var V=N<0||1/N<0;if(N=isNaN(N)?u:O(Math.abs(N),P),T&&(N=Ple(N)),V&&+N==0&&y!=="+"&&(V=!1),R=(V?y==="("?y:s:y==="-"||y==="("?"":y)+R,j=(A==="s"&&!isNaN(N)&&Ng!==void 0?nk[8+Ng/3]:"")+j+(V&&y==="("?")":""),C){for(M=-1,F=N.length;++M<F;)if(L=N.charCodeAt(M),48>L||L>57){j=(L===46?i+N.slice(M+1):N.slice(M))+j,N=N.slice(0,M);break}}}E&&!v&&(N=e(N,1/0));var H=R.length+N.length+j.length,Q=H<g?new Array(g-H+1).join(p):"";switch(E&&v&&(N=e(Q+N,Q.length?g-j.length:1/0),Q=""),_){case"<":N=R+N+j+Q;break;case"=":N=R+Q+N+j;break;case"^":N=Q.slice(0,H=Q.length>>1)+R+N+j+Q.slice(H);break;default:N=Q+R+N+j;break}return o(N)}return k.toString=function(){return f+""},k}function c(f,d){var p=Math.max(-8,Math.min(8,Math.floor(wl(d)/3)))*3,_=Math.pow(10,-p),y=l((f=Vh(f),f.type="f",f),{suffix:nk[8+p/3]});return function(b){return y(_*b)}}return{format:l,formatPrefix:c}}var Rp,PT,HL;kle({thousands:",",grouping:[3],currency:["$",""]});function kle(t){return Rp=Cle(t),PT=Rp.format,HL=Rp.formatPrefix,Rp}function Rle(t){return Math.max(0,-wl(Math.abs(t)))}function Nle(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wl(e)/3)))*3-wl(Math.abs(t)))}function Dle(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,wl(e)-wl(t))+1}function GL(t,e,n,r){var i=Bb(t,e,n),o;switch(r=Vh(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Nle(i,a))&&(r.precision=o),HL(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Dle(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Rle(i))&&(r.precision=o-(r.type==="%")*2);break}}return PT(r)}function ga(t){var e=t.domain;return t.ticks=function(n){var r=e();return Lb(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return GL(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],u,l,c=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);c-- >0;){if(l=Fb(a,s,n),l===u)return r[i]=a,r[o]=s,e(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function Dg(){var t=AT();return t.copy=function(){return $d(t,Dg())},yr.apply(t,arguments),ga(t)}function KL(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,kg),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return KL(t).unknown(e)},t=arguments.length?Array.from(t,kg):[0,1],ga(n)}function QL(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function rk(t){return Math.log(t)}function ik(t){return Math.exp(t)}function jle(t){return-Math.log(-t)}function Mle(t){return-Math.exp(-t)}function $le(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Vle(t){return t===10?$le:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Lle(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function ok(t){return(e,n)=>-t(-e,n)}function OT(t){const e=t(rk,ik),n=e.domain;let r=10,i,o;function a(){return i=Lle(r),o=Vle(r),n()[0]<0?(i=ok(i),o=ok(o),t(jle,Mle)):t(rk,ik),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(n(s),a()):n()},e.ticks=s=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),p=i(c),_,y;const b=s==null?10:+s;let v=[];if(!(r%1)&&p-d<b){if(d=Math.floor(d),p=Math.ceil(p),l>0){for(;d<=p;++d)for(_=1;_<r;++_)if(y=d<0?_/o(-d):_*o(d),!(y<l)){if(y>c)break;v.push(y)}}else for(;d<=p;++d)for(_=r-1;_>=1;--_)if(y=d>0?_/o(-d):_*o(d),!(y<l)){if(y>c)break;v.push(y)}v.length*2<b&&(v=Lb(l,c,b))}else v=Lb(d,p,Math.min(p-d,b)).map(o);return f?v.reverse():v},e.tickFormat=(s,u)=>{if(s==null&&(s=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Vh(u)).precision==null&&(u.trim=!0),u=PT(u)),s===1/0)return u;const l=Math.max(1,r*s/e.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},e.nice=()=>n(QL(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function YL(){const t=OT(kv()).domain([1,10]);return t.copy=()=>$d(t,YL()).base(t.base()),yr.apply(t,arguments),t}function ak(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function sk(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function CT(t){var e=1,n=t(ak(e),sk(e));return n.constant=function(r){return arguments.length?t(ak(e=+r),sk(e)):e},ga(n)}function XL(){var t=CT(kv());return t.copy=function(){return $d(t,XL()).constant(t.constant())},yr.apply(t,arguments)}function uk(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Fle(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Ble(t){return t<0?-t*t:t*t}function kT(t){var e=t(bn,bn),n=1;function r(){return n===1?t(bn,bn):n===.5?t(Fle,Ble):t(uk(n),uk(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},ga(e)}function RT(){var t=kT(kv());return t.copy=function(){return $d(t,RT()).exponent(t.exponent())},yr.apply(t,arguments),t}function Ule(){return RT.apply(null,arguments).exponent(.5)}function lk(t){return Math.sign(t)*t*t}function zle(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function JL(){var t=AT(),e=[0,1],n=!1,r;function i(o){var a=zle(t(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return t.invert(lk(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,kg)).map(lk)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return JL(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},yr.apply(i,arguments),ga(i)}function ZL(){var t=[],e=[],n=[],r;function i(){var a=0,s=Math.max(1,e.length);for(n=new Array(s-1);++a<s;)n[a-1]=Kue(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:e[jd(n,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Ho),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return ZL().domain(t).range(e).unknown(r)},yr.apply(o,arguments)}function eF(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(u){return u!=null&&u<=u?i[jd(r,u,0,n)]:o}function s(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*e-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,s()):[t,e]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,s()):i.slice()},a.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[t,r[0]]:l>=n?[r[n-1],e]:[r[l-1],r[l]]},a.unknown=function(u){return arguments.length&&(o=u),a},a.thresholds=function(){return r.slice()},a.copy=function(){return eF().domain([t,e]).range(i).unknown(o)},yr.apply(ga(a),arguments)}function tF(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[jd(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return tF().domain(t).range(e).unknown(n)},yr.apply(i,arguments)}const m0=new Date,g0=new Date;function Ft(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const u=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return u;let l;do u.push(l=new Date(+o)),e(o,s),t(o);while(l<o&&o<a);return u},i.filter=o=>Ft(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(m0.setTime(+o),g0.setTime(+a),t(m0),t(g0),Math.floor(n(m0,g0))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const jg=Ft(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);jg.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ft(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):jg);jg.range;const _i=1e3,cr=_i*60,wi=cr*60,Vi=wi*24,NT=Vi*7,ck=Vi*30,y0=Vi*365,Wa=Ft(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*_i)},(t,e)=>(e-t)/_i,t=>t.getUTCSeconds());Wa.range;const DT=Ft(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_i)},(t,e)=>{t.setTime(+t+e*cr)},(t,e)=>(e-t)/cr,t=>t.getMinutes());DT.range;const jT=Ft(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*cr)},(t,e)=>(e-t)/cr,t=>t.getUTCMinutes());jT.range;const MT=Ft(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_i-t.getMinutes()*cr)},(t,e)=>{t.setTime(+t+e*wi)},(t,e)=>(e-t)/wi,t=>t.getHours());MT.range;const $T=Ft(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*wi)},(t,e)=>(e-t)/wi,t=>t.getUTCHours());$T.range;const Vd=Ft(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*cr)/Vi,t=>t.getDate()-1);Vd.range;const Rv=Ft(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Vi,t=>t.getUTCDate()-1);Rv.range;const nF=Ft(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Vi,t=>Math.floor(t/Vi));nF.range;function $s(t){return Ft(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*cr)/NT)}const Nv=$s(0),Mg=$s(1),qle=$s(2),Wle=$s(3),bl=$s(4),Hle=$s(5),Gle=$s(6);Nv.range;Mg.range;qle.range;Wle.range;bl.range;Hle.range;Gle.range;function Vs(t){return Ft(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/NT)}const Dv=Vs(0),$g=Vs(1),Kle=Vs(2),Qle=Vs(3),El=Vs(4),Yle=Vs(5),Xle=Vs(6);Dv.range;$g.range;Kle.range;Qle.range;El.range;Yle.range;Xle.range;const VT=Ft(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());VT.range;const LT=Ft(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());LT.range;const Li=Ft(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Li.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ft(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Li.range;const Fi=Ft(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Fi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ft(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Fi.range;function rF(t,e,n,r,i,o){const a=[[Wa,1,_i],[Wa,5,5*_i],[Wa,15,15*_i],[Wa,30,30*_i],[o,1,cr],[o,5,5*cr],[o,15,15*cr],[o,30,30*cr],[i,1,wi],[i,3,3*wi],[i,6,6*wi],[i,12,12*wi],[r,1,Vi],[r,2,2*Vi],[n,1,NT],[e,1,ck],[e,3,3*ck],[t,1,y0]];function s(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const p=f&&typeof f.range=="function"?f:u(l,c,f),_=p?p.range(l,+c+1):[];return d?_.reverse():_}function u(l,c,f){const d=Math.abs(c-l)/f,p=bT(([,,b])=>b).right(a,d);if(p===a.length)return t.every(Bb(l/y0,c/y0,f));if(p===0)return jg.every(Math.max(Bb(l,c,f),1));const[_,y]=a[d/a[p-1][2]<a[p][2]/d?p-1:p];return _.every(y)}return[s,u]}const[Jle,Zle]=rF(Fi,LT,Dv,nF,$T,jT),[ece,tce]=rF(Li,VT,Nv,Vd,MT,DT);function v0(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _0(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Jc(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function nce(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=Zc(i),c=ef(i),f=Zc(o),d=ef(o),p=Zc(a),_=ef(a),y=Zc(s),b=ef(s),v=Zc(u),g=ef(u),E={a:L,A:V,b:H,B:Q,c:null,d:gk,e:gk,f:Sce,g:jce,G:$ce,H:Ece,I:xce,j:Tce,L:iF,m:Ace,M:Ice,p:ie,q:J,Q:_k,s:wk,S:Pce,u:Oce,U:Cce,V:kce,w:Rce,W:Nce,x:null,X:null,y:Dce,Y:Mce,Z:Vce,"%":vk},P={a:fe,A:Ee,b:Be,B:Ze,c:null,d:yk,e:yk,f:Uce,g:Jce,G:efe,H:Lce,I:Fce,j:Bce,L:aF,m:zce,M:qce,p:an,q:Bt,Q:_k,s:wk,S:Wce,u:Hce,U:Gce,V:Kce,w:Qce,W:Yce,x:null,X:null,y:Xce,Y:Zce,Z:tfe,"%":vk},T={a:C,A:k,b:N,B:R,c:j,d:pk,e:pk,f:vce,g:dk,G:hk,H:mk,I:mk,j:pce,L:yce,m:dce,M:mce,p:O,q:hce,Q:wce,s:bce,S:gce,u:sce,U:uce,V:lce,w:ace,W:cce,x:M,X:F,y:dk,Y:hk,Z:fce,"%":_ce};E.x=A(n,E),E.X=A(r,E),E.c=A(e,E),P.x=A(n,P),P.X=A(r,P),P.c=A(e,P);function A(oe,me){return function(_e){var X=[],Ke=-1,Ae=0,bt=oe.length,ht,Ut,vr;for(_e instanceof Date||(_e=new Date(+_e));++Ke<bt;)oe.charCodeAt(Ke)===37&&(X.push(oe.slice(Ae,Ke)),(Ut=fk[ht=oe.charAt(++Ke)])!=null?ht=oe.charAt(++Ke):Ut=ht==="e"?" ":"0",(vr=me[ht])&&(ht=vr(_e,Ut)),X.push(ht),Ae=Ke+1);return X.push(oe.slice(Ae,Ke)),X.join("")}}function x(oe,me){return function(_e){var X=Jc(1900,void 0,1),Ke=S(X,oe,_e+="",0),Ae,bt;if(Ke!=_e.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(me&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(Ae=_0(Jc(X.y,0,1)),bt=Ae.getUTCDay(),Ae=bt>4||bt===0?$g.ceil(Ae):$g(Ae),Ae=Rv.offset(Ae,(X.V-1)*7),X.y=Ae.getUTCFullYear(),X.m=Ae.getUTCMonth(),X.d=Ae.getUTCDate()+(X.w+6)%7):(Ae=v0(Jc(X.y,0,1)),bt=Ae.getDay(),Ae=bt>4||bt===0?Mg.ceil(Ae):Mg(Ae),Ae=Vd.offset(Ae,(X.V-1)*7),X.y=Ae.getFullYear(),X.m=Ae.getMonth(),X.d=Ae.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),bt="Z"in X?_0(Jc(X.y,0,1)).getUTCDay():v0(Jc(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(bt+5)%7:X.w+X.U*7-(bt+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,_0(X)):v0(X)}}function S(oe,me,_e,X){for(var Ke=0,Ae=me.length,bt=_e.length,ht,Ut;Ke<Ae;){if(X>=bt)return-1;if(ht=me.charCodeAt(Ke++),ht===37){if(ht=me.charAt(Ke++),Ut=T[ht in fk?me.charAt(Ke++):ht],!Ut||(X=Ut(oe,_e,X))<0)return-1}else if(ht!=_e.charCodeAt(X++))return-1}return X}function O(oe,me,_e){var X=l.exec(me.slice(_e));return X?(oe.p=c.get(X[0].toLowerCase()),_e+X[0].length):-1}function C(oe,me,_e){var X=p.exec(me.slice(_e));return X?(oe.w=_.get(X[0].toLowerCase()),_e+X[0].length):-1}function k(oe,me,_e){var X=f.exec(me.slice(_e));return X?(oe.w=d.get(X[0].toLowerCase()),_e+X[0].length):-1}function N(oe,me,_e){var X=v.exec(me.slice(_e));return X?(oe.m=g.get(X[0].toLowerCase()),_e+X[0].length):-1}function R(oe,me,_e){var X=y.exec(me.slice(_e));return X?(oe.m=b.get(X[0].toLowerCase()),_e+X[0].length):-1}function j(oe,me,_e){return S(oe,e,me,_e)}function M(oe,me,_e){return S(oe,n,me,_e)}function F(oe,me,_e){return S(oe,r,me,_e)}function L(oe){return a[oe.getDay()]}function V(oe){return o[oe.getDay()]}function H(oe){return u[oe.getMonth()]}function Q(oe){return s[oe.getMonth()]}function ie(oe){return i[+(oe.getHours()>=12)]}function J(oe){return 1+~~(oe.getMonth()/3)}function fe(oe){return a[oe.getUTCDay()]}function Ee(oe){return o[oe.getUTCDay()]}function Be(oe){return u[oe.getUTCMonth()]}function Ze(oe){return s[oe.getUTCMonth()]}function an(oe){return i[+(oe.getUTCHours()>=12)]}function Bt(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var me=A(oe+="",E);return me.toString=function(){return oe},me},parse:function(oe){var me=x(oe+="",!1);return me.toString=function(){return oe},me},utcFormat:function(oe){var me=A(oe+="",P);return me.toString=function(){return oe},me},utcParse:function(oe){var me=x(oe+="",!0);return me.toString=function(){return oe},me}}}var fk={"-":"",_:" ",0:"0"},Xt=/^\s*\d+/,rce=/^%/,ice=/[\\^$*+?|[\]().{}]/g;function Ne(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function oce(t){return t.replace(ice,"\\$&")}function Zc(t){return new RegExp("^(?:"+t.map(oce).join("|")+")","i")}function ef(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function ace(t,e,n){var r=Xt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function sce(t,e,n){var r=Xt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function uce(t,e,n){var r=Xt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function lce(t,e,n){var r=Xt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function cce(t,e,n){var r=Xt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function hk(t,e,n){var r=Xt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function dk(t,e,n){var r=Xt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function fce(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function hce(t,e,n){var r=Xt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function dce(t,e,n){var r=Xt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function pk(t,e,n){var r=Xt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function pce(t,e,n){var r=Xt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function mk(t,e,n){var r=Xt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function mce(t,e,n){var r=Xt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function gce(t,e,n){var r=Xt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function yce(t,e,n){var r=Xt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function vce(t,e,n){var r=Xt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _ce(t,e,n){var r=rce.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function wce(t,e,n){var r=Xt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function bce(t,e,n){var r=Xt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function gk(t,e){return Ne(t.getDate(),e,2)}function Ece(t,e){return Ne(t.getHours(),e,2)}function xce(t,e){return Ne(t.getHours()%12||12,e,2)}function Tce(t,e){return Ne(1+Vd.count(Li(t),t),e,3)}function iF(t,e){return Ne(t.getMilliseconds(),e,3)}function Sce(t,e){return iF(t,e)+"000"}function Ace(t,e){return Ne(t.getMonth()+1,e,2)}function Ice(t,e){return Ne(t.getMinutes(),e,2)}function Pce(t,e){return Ne(t.getSeconds(),e,2)}function Oce(t){var e=t.getDay();return e===0?7:e}function Cce(t,e){return Ne(Nv.count(Li(t)-1,t),e,2)}function oF(t){var e=t.getDay();return e>=4||e===0?bl(t):bl.ceil(t)}function kce(t,e){return t=oF(t),Ne(bl.count(Li(t),t)+(Li(t).getDay()===4),e,2)}function Rce(t){return t.getDay()}function Nce(t,e){return Ne(Mg.count(Li(t)-1,t),e,2)}function Dce(t,e){return Ne(t.getFullYear()%100,e,2)}function jce(t,e){return t=oF(t),Ne(t.getFullYear()%100,e,2)}function Mce(t,e){return Ne(t.getFullYear()%1e4,e,4)}function $ce(t,e){var n=t.getDay();return t=n>=4||n===0?bl(t):bl.ceil(t),Ne(t.getFullYear()%1e4,e,4)}function Vce(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ne(e/60|0,"0",2)+Ne(e%60,"0",2)}function yk(t,e){return Ne(t.getUTCDate(),e,2)}function Lce(t,e){return Ne(t.getUTCHours(),e,2)}function Fce(t,e){return Ne(t.getUTCHours()%12||12,e,2)}function Bce(t,e){return Ne(1+Rv.count(Fi(t),t),e,3)}function aF(t,e){return Ne(t.getUTCMilliseconds(),e,3)}function Uce(t,e){return aF(t,e)+"000"}function zce(t,e){return Ne(t.getUTCMonth()+1,e,2)}function qce(t,e){return Ne(t.getUTCMinutes(),e,2)}function Wce(t,e){return Ne(t.getUTCSeconds(),e,2)}function Hce(t){var e=t.getUTCDay();return e===0?7:e}function Gce(t,e){return Ne(Dv.count(Fi(t)-1,t),e,2)}function sF(t){var e=t.getUTCDay();return e>=4||e===0?El(t):El.ceil(t)}function Kce(t,e){return t=sF(t),Ne(El.count(Fi(t),t)+(Fi(t).getUTCDay()===4),e,2)}function Qce(t){return t.getUTCDay()}function Yce(t,e){return Ne($g.count(Fi(t)-1,t),e,2)}function Xce(t,e){return Ne(t.getUTCFullYear()%100,e,2)}function Jce(t,e){return t=sF(t),Ne(t.getUTCFullYear()%100,e,2)}function Zce(t,e){return Ne(t.getUTCFullYear()%1e4,e,4)}function efe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?El(t):El.ceil(t),Ne(t.getUTCFullYear()%1e4,e,4)}function tfe(){return"+0000"}function vk(){return"%"}function _k(t){return+t}function wk(t){return Math.floor(+t/1e3)}var Zs,uF,lF;nfe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nfe(t){return Zs=nce(t),uF=Zs.format,Zs.parse,lF=Zs.utcFormat,Zs.utcParse,Zs}function rfe(t){return new Date(t)}function ife(t){return t instanceof Date?+t:+new Date(+t)}function FT(t,e,n,r,i,o,a,s,u,l){var c=AT(),f=c.invert,d=c.domain,p=l(".%L"),_=l(":%S"),y=l("%I:%M"),b=l("%I %p"),v=l("%a %d"),g=l("%b %d"),E=l("%B"),P=l("%Y");function T(A){return(u(A)<A?p:s(A)<A?_:a(A)<A?y:o(A)<A?b:r(A)<A?i(A)<A?v:g:n(A)<A?E:P)(A)}return c.invert=function(A){return new Date(f(A))},c.domain=function(A){return arguments.length?d(Array.from(A,ife)):d().map(rfe)},c.ticks=function(A){var x=d();return t(x[0],x[x.length-1],A??10)},c.tickFormat=function(A,x){return x==null?T:l(x)},c.nice=function(A){var x=d();return(!A||typeof A.range!="function")&&(A=e(x[0],x[x.length-1],A??10)),A?d(QL(x,A)):c},c.copy=function(){return $d(c,FT(t,e,n,r,i,o,a,s,u,l))},c}function ofe(){return yr.apply(FT(ece,tce,Li,VT,Nv,Vd,MT,DT,Wa,uF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function afe(){return yr.apply(FT(Jle,Zle,Fi,LT,Dv,Rv,$T,jT,Wa,lF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function jv(){var t=0,e=1,n,r,i,o,a=bn,s=!1,u;function l(f){return f==null||isNaN(f=+f)?u:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([t,e]=f,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),l):[t,e]},l.clamp=function(f){return arguments.length?(s=!!f,l):s},l.interpolator=function(f){return arguments.length?(a=f,l):a};function c(f){return function(d){var p,_;return arguments.length?([p,_]=d,a=f(p,_),l):[a(0),a(1)]}}return l.range=c(mc),l.rangeRound=c(ST),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return o=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),l}}function ya(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function cF(){var t=ga(jv()(bn));return t.copy=function(){return ya(t,cF())},Xi.apply(t,arguments)}function fF(){var t=OT(jv()).domain([1,10]);return t.copy=function(){return ya(t,fF()).base(t.base())},Xi.apply(t,arguments)}function hF(){var t=CT(jv());return t.copy=function(){return ya(t,hF()).constant(t.constant())},Xi.apply(t,arguments)}function BT(){var t=kT(jv());return t.copy=function(){return ya(t,BT()).exponent(t.exponent())},Xi.apply(t,arguments)}function sfe(){return BT.apply(null,arguments).exponent(.5)}function dF(){var t=[],e=bn;function n(r){if(r!=null&&!isNaN(r=+r))return e((jd(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ho),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>Gue(t,o/r))},n.copy=function(){return dF(e).domain(t)},Xi.apply(n,arguments)}function Mv(){var t=0,e=.5,n=1,r=1,i,o,a,s,u,l=bn,c,f=!1,d;function p(y){return isNaN(y=+y)?d:(y=.5+((y=+c(y))-o)*(r*y<r*o?s:u),l(f?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([t,e,n]=y,i=c(t=+t),o=c(e=+e),a=c(n=+n),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,p):[t,e,n]},p.clamp=function(y){return arguments.length?(f=!!y,p):f},p.interpolator=function(y){return arguments.length?(l=y,p):l};function _(y){return function(b){var v,g,E;return arguments.length?([v,g,E]=b,l=_le(y,[v,g,E]),p):[l(0),l(.5),l(1)]}}return p.range=_(mc),p.rangeRound=_(ST),p.unknown=function(y){return arguments.length?(d=y,p):d},function(y){return c=y,i=y(t),o=y(e),a=y(n),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,p}}function pF(){var t=ga(Mv()(bn));return t.copy=function(){return ya(t,pF())},Xi.apply(t,arguments)}function mF(){var t=OT(Mv()).domain([.1,1,10]);return t.copy=function(){return ya(t,mF()).base(t.base())},Xi.apply(t,arguments)}function gF(){var t=CT(Mv());return t.copy=function(){return ya(t,gF()).constant(t.constant())},Xi.apply(t,arguments)}function UT(){var t=kT(Mv());return t.copy=function(){return ya(t,UT()).exponent(t.exponent())},Xi.apply(t,arguments)}function ufe(){return UT.apply(null,arguments).exponent(.5)}const bk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Dh,scaleDiverging:pF,scaleDivergingLog:mF,scaleDivergingPow:UT,scaleDivergingSqrt:ufe,scaleDivergingSymlog:gF,scaleIdentity:KL,scaleImplicit:Ub,scaleLinear:Dg,scaleLog:YL,scaleOrdinal:ET,scalePoint:Uf,scalePow:RT,scaleQuantile:ZL,scaleQuantize:eF,scaleRadial:JL,scaleSequential:cF,scaleSequentialLog:fF,scaleSequentialPow:BT,scaleSequentialQuantile:dF,scaleSequentialSqrt:sfe,scaleSequentialSymlog:hF,scaleSqrt:Ule,scaleSymlog:XL,scaleThreshold:tF,scaleTime:ofe,scaleUtc:afe,tickFormat:GL},Symbol.toStringTag,{value:"Module"}));var lfe=oc;function cfe(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!lfe(a):n(a,s)))var s=a,u=o}return u}var yF=cfe;function ffe(t,e){return t>e}var hfe=ffe,dfe=yF,pfe=hfe,mfe=pc;function gfe(t){return t&&t.length?dfe(t,mfe,pfe):void 0}var yfe=gfe;const Oo=Ge(yfe);function vfe(t,e){return t<e}var _fe=vfe,wfe=yF,bfe=_fe,Efe=pc;function xfe(t){return t&&t.length?wfe(t,Efe,bfe):void 0}var Tfe=xfe;const $v=Ge(Tfe);var Sfe=nT,Afe=ma,Ife=IL,Pfe=Ln;function Ofe(t,e){var n=Pfe(t)?Sfe:Ife;return n(t,Afe(e))}var Cfe=Ofe,kfe=SL,Rfe=Cfe;function Nfe(t,e){return kfe(Rfe(t,e),1)}var Dfe=Nfe;const jfe=Ge(Dfe);var Mfe=gT;function $fe(t,e){return Mfe(t,e)}var Vfe=$fe;const xl=Ge(Vfe);var gc=1e9,Lfe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},qT,ct=!0,mr="[DecimalError] ",is=mr+"Invalid argument: ",zT=mr+"Exponent out of range: ",yc=Math.floor,Da=Math.pow,Ffe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Hn,Wt=1e7,rt=7,vF=9007199254740991,Vg=yc(vF/rt),ue={};ue.absoluteValue=ue.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ue.comparedTo=ue.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};ue.decimalPlaces=ue.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*rt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ue.dividedBy=ue.div=function(t){return Ii(this,new this.constructor(t))};ue.dividedToIntegerBy=ue.idiv=function(t){var e=this,n=e.constructor;return He(Ii(e,new n(t),0,1),n.precision)};ue.equals=ue.eq=function(t){return!this.cmp(t)};ue.exponent=function(){return Ct(this)};ue.greaterThan=ue.gt=function(t){return this.cmp(t)>0};ue.greaterThanOrEqualTo=ue.gte=function(t){return this.cmp(t)>=0};ue.isInteger=ue.isint=function(){return this.e>this.d.length-2};ue.isNegative=ue.isneg=function(){return this.s<0};ue.isPositive=ue.ispos=function(){return this.s>0};ue.isZero=function(){return this.s===0};ue.lessThan=ue.lt=function(t){return this.cmp(t)<0};ue.lessThanOrEqualTo=ue.lte=function(t){return this.cmp(t)<1};ue.logarithm=ue.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Hn))throw Error(mr+"NaN");if(n.s<1)throw Error(mr+(n.s?"NaN":"-Infinity"));return n.eq(Hn)?new r(0):(ct=!1,e=Ii(Lh(n,o),Lh(t,o),o),ct=!0,He(e,i))};ue.minus=ue.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?bF(e,t):_F(e,(t.s=-t.s,t))};ue.modulo=ue.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(mr+"NaN");return n.s?(ct=!1,e=Ii(n,t,0,1).times(t),ct=!0,n.minus(e)):He(new r(n),i)};ue.naturalExponential=ue.exp=function(){return wF(this)};ue.naturalLogarithm=ue.ln=function(){return Lh(this)};ue.negated=ue.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ue.plus=ue.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?_F(e,t):bF(e,(t.s=-t.s,t))};ue.precision=ue.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(is+t);if(e=Ct(i)+1,r=i.d.length-1,n=r*rt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ue.squareRoot=ue.sqrt=function(){var t,e,n,r,i,o,a,s=this,u=s.constructor;if(s.s<1){if(!s.s)return new u(0);throw Error(mr+"NaN")}for(t=Ct(s),ct=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=Qr(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=yc((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new u(e)):r=new u(i.toString()),n=u.precision,i=a=n+3;;)if(o=r,r=o.plus(Ii(s,o,a+2)).times(.5),Qr(o.d).slice(0,a)===(e=Qr(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(He(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if(e!="9999")break;a+=4}return ct=!0,He(r,n)};ue.times=ue.mul=function(t){var e,n,r,i,o,a,s,u,l,c=this,f=c.constructor,d=c.d,p=(t=new f(t)).d;if(!c.s||!t.s)return new f(0);for(t.s*=c.s,n=c.e+t.e,u=d.length,l=p.length,u<l&&(o=d,d=p,p=o,a=u,u=l,l=a),o=[],a=u+l,r=a;r--;)o.push(0);for(r=l;--r>=0;){for(e=0,i=u+r;i>r;)s=o[i]+p[r]*d[i-r-1]+e,o[i--]=s%Wt|0,e=s/Wt|0;o[i]=(o[i]+e)%Wt|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,ct?He(t,f.precision):t};ue.toDecimalPlaces=ue.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ai(t,0,gc),e===void 0?e=r.rounding:ai(e,0,8),He(n,t+Ct(n)+1,e))};ue.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=xs(r,!0):(ai(t,0,gc),e===void 0?e=i.rounding:ai(e,0,8),r=He(new i(r),t+1,e),n=xs(r,!0,t+1)),n};ue.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?xs(i):(ai(t,0,gc),e===void 0?e=o.rounding:ai(e,0,8),r=He(new o(i),t+Ct(i)+1,e),n=xs(r.abs(),!1,t+Ct(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ue.toInteger=ue.toint=function(){var t=this,e=t.constructor;return He(new e(t),Ct(t)+1,e.rounding)};ue.toNumber=function(){return+this};ue.toPower=ue.pow=function(t){var e,n,r,i,o,a,s=this,u=s.constructor,l=12,c=+(t=new u(t));if(!t.s)return new u(Hn);if(s=new u(s),!s.s){if(t.s<1)throw Error(mr+"Infinity");return s}if(s.eq(Hn))return s;if(r=u.precision,t.eq(Hn))return He(s,r);if(e=t.e,n=t.d.length-1,a=e>=n,o=s.s,a){if((n=c<0?-c:c)<=vF){for(i=new u(Hn),e=Math.ceil(r/rt+4),ct=!1;n%2&&(i=i.times(s),xk(i.d,e)),n=yc(n/2),n!==0;)s=s.times(s),xk(s.d,e);return ct=!0,t.s<0?new u(Hn).div(i):He(i,r)}}else if(o<0)throw Error(mr+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,ct=!1,i=t.times(Lh(s,r+l)),ct=!0,i=wF(i),i.s=o,i};ue.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Ct(i),r=xs(i,n<=o.toExpNeg||n>=o.toExpPos)):(ai(t,1,gc),e===void 0?e=o.rounding:ai(e,0,8),i=He(new o(i),t,e),n=Ct(i),r=xs(i,t<=n||n<=o.toExpNeg,t)),r};ue.toSignificantDigits=ue.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ai(t,1,gc),e===void 0?e=r.rounding:ai(e,0,8)),He(new r(n),t,e)};ue.toString=ue.valueOf=ue.val=ue.toJSON=ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ct(t),n=t.constructor;return xs(t,e<=n.toExpNeg||e>=n.toExpPos)};function _F(t,e){var n,r,i,o,a,s,u,l,c=t.constructor,f=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),ct?He(e,f):e;if(u=t.d,l=e.d,a=t.e,i=e.e,u=u.slice(),o=a-i,o){for(o<0?(r=u,o=-o,s=l.length):(r=l,i=a,s=u.length),a=Math.ceil(f/rt),s=a>s?a+1:s+1,o>s&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(s=u.length,o=l.length,s-o<0&&(o=s,r=l,l=u,u=r),n=0;o;)n=(u[--o]=u[o]+l[o]+n)/Wt|0,u[o]%=Wt;for(n&&(u.unshift(n),++i),s=u.length;u[--s]==0;)u.pop();return e.d=u,e.e=i,ct?He(e,f):e}function ai(t,e,n){if(t!==~~t||t<e||t>n)throw Error(is+t)}function Qr(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",n=rt-r.length,n&&(o+=mo(n)),o+=r;a=t[e],r=a+"",n=rt-r.length,n&&(o+=mo(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var Ii=function(){function t(r,i){var o,a=0,s=r.length;for(r=r.slice();s--;)o=r[s]*i+a,r[s]=o%Wt|0,a=o/Wt|0;return a&&r.unshift(a),r}function e(r,i,o,a){var s,u;if(o!=a)u=o>a?1:-1;else for(s=u=0;s<o;s++)if(r[s]!=i[s]){u=r[s]>i[s]?1:-1;break}return u}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*Wt+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var s,u,l,c,f,d,p,_,y,b,v,g,E,P,T,A,x,S,O=r.constructor,C=r.s==i.s?1:-1,k=r.d,N=i.d;if(!r.s)return new O(r);if(!i.s)throw Error(mr+"Division by zero");for(u=r.e-i.e,x=N.length,T=k.length,p=new O(C),_=p.d=[],l=0;N[l]==(k[l]||0);)++l;if(N[l]>(k[l]||0)&&--u,o==null?g=o=O.precision:a?g=o+(Ct(r)-Ct(i))+1:g=o,g<0)return new O(0);if(g=g/rt+2|0,l=0,x==1)for(c=0,N=N[0],g++;(l<T||c)&&g--;l++)E=c*Wt+(k[l]||0),_[l]=E/N|0,c=E%N|0;else{for(c=Wt/(N[0]+1)|0,c>1&&(N=t(N,c),k=t(k,c),x=N.length,T=k.length),P=x,y=k.slice(0,x),b=y.length;b<x;)y[b++]=0;S=N.slice(),S.unshift(0),A=N[0],N[1]>=Wt/2&&++A;do c=0,s=e(N,y,x,b),s<0?(v=y[0],x!=b&&(v=v*Wt+(y[1]||0)),c=v/A|0,c>1?(c>=Wt&&(c=Wt-1),f=t(N,c),d=f.length,b=y.length,s=e(f,y,d,b),s==1&&(c--,n(f,x<d?S:N,d))):(c==0&&(s=c=1),f=N.slice()),d=f.length,d<b&&f.unshift(0),n(y,f,b),s==-1&&(b=y.length,s=e(N,y,x,b),s<1&&(c++,n(y,x<b?S:N,b))),b=y.length):s===0&&(c++,y=[0]),_[l++]=c,s&&y[0]?y[b++]=k[P]||0:(y=[k[P]],b=1);while((P++<T||y[0]!==void 0)&&g--)}return _[0]||_.shift(),p.e=u,He(p,a?o+Ct(p)+1:o)}}();function wF(t,e){var n,r,i,o,a,s,u=0,l=0,c=t.constructor,f=c.precision;if(Ct(t)>16)throw Error(zT+Ct(t));if(!t.s)return new c(Hn);for(ct=!1,s=f,a=new c(.03125);t.abs().gte(.1);)t=t.times(a),l+=5;for(r=Math.log(Da(2,l))/Math.LN10*2+5|0,s+=r,n=i=o=new c(Hn),c.precision=s;;){if(i=He(i.times(t),s),n=n.times(++u),a=o.plus(Ii(i,n,s)),Qr(a.d).slice(0,s)===Qr(o.d).slice(0,s)){for(;l--;)o=He(o.times(o),s);return c.precision=f,e==null?(ct=!0,He(o,f)):o}o=a}}function Ct(t){for(var e=t.e*rt,n=t.d[0];n>=10;n/=10)e++;return e}function w0(t,e,n){if(e>t.LN10.sd())throw ct=!0,n&&(t.precision=n),Error(mr+"LN10 precision limit exceeded");return He(new t(t.LN10),e)}function mo(t){for(var e="";t--;)e+="0";return e}function Lh(t,e){var n,r,i,o,a,s,u,l,c,f=1,d=10,p=t,_=p.d,y=p.constructor,b=y.precision;if(p.s<1)throw Error(mr+(p.s?"NaN":"-Infinity"));if(p.eq(Hn))return new y(0);if(e==null?(ct=!1,l=b):l=e,p.eq(10))return e==null&&(ct=!0),w0(y,l);if(l+=d,y.precision=l,n=Qr(_),r=n.charAt(0),o=Ct(p),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=Qr(p.d),r=n.charAt(0),f++;o=Ct(p),r>1?(p=new y("0."+n),o++):p=new y(r+"."+n.slice(1))}else return u=w0(y,l+2,b).times(o+""),p=Lh(new y(r+"."+n.slice(1)),l-d).plus(u),y.precision=b,e==null?(ct=!0,He(p,b)):p;for(s=a=p=Ii(p.minus(Hn),p.plus(Hn),l),c=He(p.times(p),l),i=3;;){if(a=He(a.times(c),l),u=s.plus(Ii(a,new y(i),l)),Qr(u.d).slice(0,l)===Qr(s.d).slice(0,l))return s=s.times(2),o!==0&&(s=s.plus(w0(y,l+2,b).times(o+""))),s=Ii(s,new y(f),l),y.precision=b,e==null?(ct=!0,He(s,b)):s;s=u,i+=2}}function Ek(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=yc(n/rt),t.d=[],r=(n+1)%rt,n<0&&(r+=rt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=rt;r<i;)t.d.push(+e.slice(r,r+=rt));e=e.slice(r),r=rt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),ct&&(t.e>Vg||t.e<-Vg))throw Error(zT+n)}else t.s=0,t.e=0,t.d=[0];return t}function He(t,e,n){var r,i,o,a,s,u,l,c,f=t.d;for(a=1,o=f[0];o>=10;o/=10)a++;if(r=e-a,r<0)r+=rt,i=e,l=f[c=0];else{if(c=Math.ceil((r+1)/rt),o=f.length,c>=o)return t;for(l=o=f[c],a=1;o>=10;o/=10)a++;r%=rt,i=r-rt+a}if(n!==void 0&&(o=Da(10,a-i-1),s=l/o%10|0,u=e<0||f[c+1]!==void 0||l%o,u=n<4?(s||u)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||u||n==6&&(r>0?i>0?l/Da(10,a-i):0:f[c-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return u?(o=Ct(t),f.length=1,e=e-o-1,f[0]=Da(10,(rt-e%rt)%rt),t.e=yc(-e/rt)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=c,o=1,c--):(f.length=c+1,o=Da(10,rt-r),f[c]=i>0?(l/Da(10,a-i)%Da(10,i)|0)*o:0),u)for(;;)if(c==0){(f[0]+=o)==Wt&&(f[0]=1,++t.e);break}else{if(f[c]+=o,f[c]!=Wt)break;f[c--]=0,o=1}for(r=f.length;f[--r]===0;)f.pop();if(ct&&(t.e>Vg||t.e<-Vg))throw Error(zT+Ct(t));return t}function bF(t,e){var n,r,i,o,a,s,u,l,c,f,d=t.constructor,p=d.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new d(t),ct?He(e,p):e;if(u=t.d,f=e.d,r=e.e,l=t.e,u=u.slice(),a=l-r,a){for(c=a<0,c?(n=u,a=-a,s=f.length):(n=f,r=l,s=u.length),i=Math.max(Math.ceil(p/rt),s)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=u.length,s=f.length,c=i<s,c&&(s=i),i=0;i<s;i++)if(u[i]!=f[i]){c=u[i]<f[i];break}a=0}for(c&&(n=u,u=f,f=n,e.s=-e.s),s=u.length,i=f.length-s;i>0;--i)u[s++]=0;for(i=f.length;i>a;){if(u[--i]<f[i]){for(o=i;o&&u[--o]===0;)u[o]=Wt-1;--u[o],u[i]+=Wt}u[i]-=f[i]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=r,ct?He(e,p):e):new d(0)}function xs(t,e,n){var r,i=Ct(t),o=Qr(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+mo(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+mo(-i-1)+o,n&&(r=n-a)>0&&(o+=mo(r))):i>=a?(o+=mo(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+mo(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=mo(r))),t.s<0?"-"+o:o}function xk(t,e){if(t.length>e)return t.length=e,!0}function EF(t){var e,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(is+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return Ek(a,o.toString())}else if(typeof o!="string")throw Error(is+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,Ffe.test(o))Ek(a,o);else throw Error(is+o)}if(i.prototype=ue,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=EF,i.config=i.set=Bfe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Bfe(t){if(!t||typeof t!="object")throw Error(mr+"Object expected");var e,n,r,i=["precision",1,gc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(yc(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(is+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(is+n+": "+r);return this}var qT=EF(Lfe);Hn=new qT(1);const Ue=qT;function Ufe(t){return Hfe(t)||Wfe(t)||qfe(t)||zfe()}function zfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qfe(t,e){if(t){if(typeof t=="string")return Hb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hb(t,e)}}function Wfe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Hfe(t){if(Array.isArray(t))return Hb(t)}function Hb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Gfe=function(e){return e},xF={},TF=function(e){return e===xF},Tk=function(e){return function n(){return arguments.length===0||arguments.length===1&&TF(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Kfe=function t(e,n){return e===1?n:Tk(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==xF}).length;return a>=e?n.apply(void 0,i):t(e-a,Tk(function(){for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];var c=i.map(function(f){return TF(f)?u.shift():f});return n.apply(void 0,Ufe(c).concat(u))}))})},Vv=function(e){return Kfe(e.length,e)},Gb=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Qfe=Vv(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Yfe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Gfe;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,u){return u(s)},o.apply(void 0,arguments))}},Kb=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},SF=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n&&o.every(function(s,u){return s===n[u]})||(n=o,r=e.apply(void 0,o)),r}};function Xfe(t){var e;return t===0?e=1:e=Math.floor(new Ue(t).abs().log(10).toNumber())+1,e}function Jfe(t,e,n){for(var r=new Ue(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var Zfe=Vv(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),ehe=Vv(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),the=Vv(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Lv={rangeStep:Jfe,getDigitCount:Xfe,interpolateNumber:Zfe,uninterpolateNumber:ehe,uninterpolateTruncation:the};function Qb(t){return ihe(t)||rhe(t)||AF(t)||nhe()}function nhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rhe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function ihe(t){if(Array.isArray(t))return Yb(t)}function Fh(t,e){return she(t)||ahe(t,e)||AF(t,e)||ohe()}function ohe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AF(t,e){if(t){if(typeof t=="string")return Yb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yb(t,e)}}function Yb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ahe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(u){i=!0,o=u}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw o}}return n}}function she(t){if(Array.isArray(t))return t}function IF(t){var e=Fh(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function PF(t,e,n){if(t.lte(0))return new Ue(0);var r=Lv.getDigitCount(t.toNumber()),i=new Ue(10).pow(r),o=t.div(i),a=r!==1?.05:.1,s=new Ue(Math.ceil(o.div(a).toNumber())).add(n).mul(a),u=s.mul(i);return e?u:new Ue(Math.ceil(u))}function uhe(t,e,n){var r=1,i=new Ue(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Ue(10).pow(Lv.getDigitCount(t)-1),i=new Ue(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Ue(Math.floor(t)))}else t===0?i=new Ue(Math.floor((e-1)/2)):n||(i=new Ue(Math.floor(t)));var a=Math.floor((e-1)/2),s=Yfe(Qfe(function(u){return i.add(new Ue(u-a).mul(r)).toNumber()}),Gb);return s(0,e)}function OF(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Ue(0),tickMin:new Ue(0),tickMax:new Ue(0)};var o=PF(new Ue(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new Ue(0):(a=new Ue(t).add(e).div(2),a=a.sub(new Ue(a).mod(o)));var s=Math.ceil(a.sub(t).div(o).toNumber()),u=Math.ceil(new Ue(e).sub(a).div(o).toNumber()),l=s+u+1;return l>n?OF(t,e,n,r,i+1):(l<n&&(u=e>0?u+(n-l):u,s=e>0?s:s+(n-l)),{step:o,tickMin:a.sub(new Ue(s).mul(o)),tickMax:a.add(new Ue(u).mul(o))})}function lhe(t){var e=Fh(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=IF([n,r]),u=Fh(s,2),l=u[0],c=u[1];if(l===-1/0||c===1/0){var f=c===1/0?[l].concat(Qb(Gb(0,i-1).map(function(){return 1/0}))):[].concat(Qb(Gb(0,i-1).map(function(){return-1/0})),[c]);return n>r?Kb(f):f}if(l===c)return uhe(l,i,o);var d=OF(l,c,a,o),p=d.step,_=d.tickMin,y=d.tickMax,b=Lv.rangeStep(_,y.add(new Ue(.1).mul(p)),p);return n>r?Kb(b):b}function che(t,e){var n=Fh(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=IF([r,i]),s=Fh(a,2),u=s[0],l=s[1];if(u===-1/0||l===1/0)return[r,i];if(u===l)return[u];var c=Math.max(e,2),f=PF(new Ue(l).sub(u).div(c-1),o,0),d=[].concat(Qb(Lv.rangeStep(new Ue(u),new Ue(l).sub(new Ue(.99).mul(f)),f)),[l]);return r>i?Kb(d):d}var fhe=SF(lhe),hhe=SF(che),dhe="Invariant failed";function Ts(t,e){throw new Error(dhe)}var phe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Tl(t){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tl(t)}function Lg(){return Lg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lg.apply(this,arguments)}function mhe(t,e){return _he(t)||vhe(t,e)||yhe(t,e)||ghe()}function ghe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yhe(t,e){if(t){if(typeof t=="string")return Sk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sk(t,e)}}function Sk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vhe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function _he(t){if(Array.isArray(t))return t}function whe(t,e){if(t==null)return{};var n=bhe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ehe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xhe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RF(r.key),r)}}function The(t,e,n){return e&&xhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function She(t,e,n){return e=Fg(e),Ahe(t,CF()?Reflect.construct(e,n||[],Fg(t).constructor):e.apply(t,n))}function Ahe(t,e){if(e&&(Tl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ihe(t)}function Ihe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CF=function(){return!!t})()}function Fg(t){return Fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fg(t)}function Phe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xb(t,e)}function Xb(t,e){return Xb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Xb(t,e)}function kF(t,e,n){return e=RF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RF(t){var e=Ohe(t,"string");return Tl(e)=="symbol"?e:e+""}function Ohe(t,e){if(Tl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ld=function(t){function e(){return Ehe(this,e),She(this,e,arguments)}return Phe(e,t),The(e,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,a=r.width,s=r.dataKey,u=r.data,l=r.dataPointFormatter,c=r.xAxis,f=r.yAxis,d=whe(r,phe),p=be(d,!1);this.props.direction==="x"&&c.type!=="number"&&Ts();var _=u.map(function(y){var b=l(y,s),v=b.x,g=b.y,E=b.value,P=b.errorVal;if(!P)return null;var T=[],A,x;if(Array.isArray(P)){var S=mhe(P,2);A=S[0],x=S[1]}else A=x=P;if(o==="vertical"){var O=c.scale,C=g+i,k=C+a,N=C-a,R=O(E-A),j=O(E+x);T.push({x1:j,y1:k,x2:j,y2:N}),T.push({x1:R,y1:C,x2:j,y2:C}),T.push({x1:R,y1:k,x2:R,y2:N})}else if(o==="horizontal"){var M=f.scale,F=v+i,L=F-a,V=F+a,H=M(E-A),Q=M(E+x);T.push({x1:L,y1:Q,x2:V,y2:Q}),T.push({x1:F,y1:H,x2:F,y2:Q}),T.push({x1:L,y1:H,x2:V,y2:H})}return $.createElement(ze,Lg({className:"recharts-errorBar",key:"bar-".concat(T.map(function(ie){return"".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))},p),T.map(function(ie){return $.createElement("line",Lg({},ie,{key:"line-".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))}))});return $.createElement(ze,{className:"recharts-errorBars"},_)}}])}($.Component);kF(Ld,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});kF(Ld,"displayName","ErrorBar");function Bh(t){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(t)}function Ak(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Aa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ak(Object(n),!0).forEach(function(r){Che(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ak(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Che(t,e,n){return e=khe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function khe(t){var e=Rhe(t,"string");return Bh(e)=="symbol"?e:e+""}function Rhe(t,e){if(Bh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NF=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=zn(n,ns);if(!a)return null;var s=ns.defaultProps,u=s!==void 0?Aa(Aa({},s),a.props):{},l;return a.props&&a.props.payload?l=a.props&&a.props.payload:o==="children"?l=(r||[]).reduce(function(c,f){var d=f.item,p=f.props,_=p.sectors||p.data||[];return c.concat(_.map(function(y){return{type:a.props.iconType||d.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):l=(r||[]).map(function(c){var f=c.item,d=f.type.defaultProps,p=d!==void 0?Aa(Aa({},d),f.props):{},_=p.dataKey,y=p.name,b=p.legendType,v=p.hide;return{inactive:v,dataKey:_,type:u.iconType||b||"square",color:WT(f),value:y||_,payload:p}}),Aa(Aa(Aa({},u),ns.getWithHeight(a,i)),{},{payload:l,item:a})};function Uh(t){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(t)}function Ik(t){return Mhe(t)||jhe(t)||Dhe(t)||Nhe()}function Nhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dhe(t,e){if(t){if(typeof t=="string")return Jb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jb(t,e)}}function jhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mhe(t){if(Array.isArray(t))return Jb(t)}function Jb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pk(Object(n),!0).forEach(function(r){$u(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $u(t,e,n){return e=$he(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $he(t){var e=Vhe(t,"string");return Uh(e)=="symbol"?e:e+""}function Vhe(t,e){if(Uh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rn(t,e,n){return ve(t)||ve(e)?n:Mt(e)?hr(t,e,n):ye(e)?e(t):n}function zf(t,e,n,r){var i=jfe(t,function(s){return rn(s,e)});if(n==="number"){var o=i.filter(function(s){return ee(s)||parseFloat(s)});return o.length?[$v(o),Oo(o)]:[1/0,-1/0]}var a=r?i.filter(function(s){return!ve(s)}):i;return a.map(function(s){return Mt(s)||s instanceof Date?s:""})}var Lhe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var u=o.range,l=0;l<s;l++){var c=l>0?i[l-1].coordinate:i[s-1].coordinate,f=i[l].coordinate,d=l>=s-1?i[0].coordinate:i[l+1].coordinate,p=void 0;if(Or(f-c)!==Or(d-f)){var _=[];if(Or(d-f)===Or(u[1]-u[0])){p=d;var y=f+u[1]-u[0];_[0]=Math.min(y,(y+c)/2),_[1]=Math.max(y,(y+c)/2)}else{p=c;var b=d+u[1]-u[0];_[0]=Math.min(f,(b+f)/2),_[1]=Math.max(f,(b+f)/2)}var v=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(e>v[0]&&e<=v[1]||e>=_[0]&&e<=_[1]){a=i[l].index;break}}else{var g=Math.min(c,d),E=Math.max(c,d);if(e>(g+f)/2&&e<=(E+f)/2){a=i[l].index;break}}}else for(var P=0;P<s;P++)if(P===0&&e<=(r[P].coordinate+r[P+1].coordinate)/2||P>0&&P<s-1&&e>(r[P].coordinate+r[P-1].coordinate)/2&&e<=(r[P].coordinate+r[P+1].coordinate)/2||P===s-1&&e>(r[P].coordinate+r[P-1].coordinate)/2){a=r[P].index;break}return a},WT=function(e){var n,r=e,i=r.type.displayName,o=(n=e.type)!==null&&n!==void 0&&n.defaultProps?wt(wt({},e.type.defaultProps),e.props):e.props,a=o.stroke,s=o.fill,u;switch(i){case"Line":u=a;break;case"Area":case"Radar":u=a&&a!=="none"?a:s;break;default:u=s;break}return u},Fhe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),u=0,l=s.length;u<l;u++)for(var c=o[s[u]].stackGroups,f=Object.keys(c),d=0,p=f.length;d<p;d++){var _=c[f[d]],y=_.items,b=_.cateAxisId,v=y.filter(function(x){return Si(x.type).indexOf("Bar")>=0});if(v&&v.length){var g=v[0].type.defaultProps,E=g!==void 0?wt(wt({},g),v[0].props):v[0].props,P=E.barSize,T=E[b];a[T]||(a[T]=[]);var A=ve(P)?n:P;a[T].push({item:v[0],stackList:v.slice(1),barSize:ve(A)?void 0:Es(A,r,0)})}}return a},Bhe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,u=a.length;if(u<1)return null;var l=Es(n,i,0,!0),c,f=[];if(a[0].barSize===+a[0].barSize){var d=!1,p=i/u,_=a.reduce(function(P,T){return P+T.barSize||0},0);_+=(u-1)*l,_>=i&&(_-=(u-1)*l,l=0),_>=i&&p>0&&(d=!0,p*=.9,_=u*p);var y=(i-_)/2>>0,b={offset:y-l,size:0};c=a.reduce(function(P,T){var A={item:T.item,position:{offset:b.offset+b.size+l,size:d?p:T.barSize}},x=[].concat(Ik(P),[A]);return b=x[x.length-1].position,T.stackList&&T.stackList.length&&T.stackList.forEach(function(S){x.push({item:S,position:b})}),x},f)}else{var v=Es(r,i,0,!0);i-2*v-(u-1)*l<=0&&(l=0);var g=(i-2*v-(u-1)*l)/u;g>1&&(g>>=0);var E=s===+s?Math.min(g,s):g;c=a.reduce(function(P,T,A){var x=[].concat(Ik(P),[{item:T.item,position:{offset:v+(g+l)*A+(g-E)/2,size:E}}]);return T.stackList&&T.stackList.length&&T.stackList.forEach(function(S){x.push({item:S,position:x[x.length-1].position})}),x},f)}return c},Uhe=function(e,n,r,i){var o=r.children,a=r.width,s=r.margin,u=a-(s.left||0)-(s.right||0),l=NF({children:o,legendWidth:u});if(l){var c=i||{},f=c.width,d=c.height,p=l.align,_=l.verticalAlign,y=l.layout;if((y==="vertical"||y==="horizontal"&&_==="middle")&&p!=="center"&&ee(e[p]))return wt(wt({},e),{},$u({},p,e[p]+(f||0)));if((y==="horizontal"||y==="vertical"&&p==="center")&&_!=="middle"&&ee(e[_]))return wt(wt({},e),{},$u({},_,e[_]+(d||0)))}return e},zhe=function(e,n,r){return ve(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},DF=function(e,n,r,i,o){var a=n.props.children,s=Yn(a,Ld).filter(function(l){return zhe(i,o,l.props.direction)});if(s&&s.length){var u=s.map(function(l){return l.props.dataKey});return e.reduce(function(l,c){var f=rn(c,r);if(ve(f))return l;var d=Array.isArray(f)?[$v(f),Oo(f)]:[f,f],p=u.reduce(function(_,y){var b=rn(c,y,0),v=d[0]-Math.abs(Array.isArray(b)?b[0]:b),g=d[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(v,_[0]),Math.max(g,_[1])]},[1/0,-1/0]);return[Math.min(p[0],l[0]),Math.max(p[1],l[1])]},[1/0,-1/0])}return null},qhe=function(e,n,r,i,o){var a=n.map(function(s){return DF(e,s,r,o,i)}).filter(function(s){return!ve(s)});return a&&a.length?a.reduce(function(s,u){return[Math.min(s[0],u[0]),Math.max(s[1],u[1])]},[1/0,-1/0]):null},jF=function(e,n,r,i,o){var a=n.map(function(u){var l=u.props.dataKey;return r==="number"&&l&&DF(e,u,l,i)||zf(e,l,r,o)});if(r==="number")return a.reduce(function(u,l){return[Math.min(u[0],l[0]),Math.max(u[1],l[1])]},[1/0,-1/0]);var s={};return a.reduce(function(u,l){for(var c=0,f=l.length;c<f;c++)s[l[c]]||(s[l[c]]=!0,u.push(l[c]));return u},[])},MF=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},$F=function(e,n,r,i){if(i)return e.map(function(u){return u.coordinate});var o,a,s=e.map(function(u){return u.coordinate===n&&(o=!0),u.coordinate===r&&(a=!0),u.coordinate});return o||s.push(n),a||s.push(r),s},bi=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,u=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,l=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/u:0;if(l=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Or(s[0]-s[1])*2*l:l,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(f){var d=o?o.indexOf(f):f;return{coordinate:i(d)+l,value:f,offset:l}});return c.filter(function(f){return!cc(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,d){return{coordinate:i(f)+l,value:f,index:d,offset:l}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+l,value:f,offset:l}}):i.domain().map(function(f,d){return{coordinate:i(f)+l,value:o?o[f]:f,index:d,offset:l}})},b0=new WeakMap,Np=function(e,n){if(typeof n!="function")return e;b0.has(e)||b0.set(e,new WeakMap);var r=b0.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},Whe=function(e,n,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:Dh(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:Dg(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Uf(),realScaleType:"point"}:o==="category"?{scale:Dh(),realScaleType:"band"}:{scale:Dg(),realScaleType:"linear"};if(bs(i)){var u="scale".concat(xv(i));return{scale:(bk[u]||Uf)(),realScaleType:bk[u]?u:"point"}}return ye(i)?{scale:i}:{scale:Uf(),realScaleType:"point"}},Ok=1e-4,Hhe=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-Ok,a=Math.max(i[0],i[1])+Ok,s=e(n[0]),u=e(n[r-1]);(s<o||s>a||u<o||u>a)&&e.domain([n[0],n[r-1]])}},Ghe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Khe=function(e,n){if(!n||n.length!==2||!ee(n[0])||!ee(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!ee(e[0])||e[0]<r)&&(o[0]=r),(!ee(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},Qhe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0,s=0;s<n;++s){var u=cc(e[s][r][1])?e[s][r][0]:e[s][r][1];u>=0?(e[s][r][0]=o,e[s][r][1]=o+u,o=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+u,a=e[s][r][1])}},Yhe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0;a<n;++a){var s=cc(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},Xhe={sign:Qhe,expand:hZ,none:ml,silhouette:dZ,wiggle:pZ,positive:Yhe},Jhe=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),o=Xhe[r],a=fZ().keys(i).value(function(s,u){return+rn(s,u,0)}).order(xb).offset(o);return a(e)},Zhe=function(e,n,r,i,o,a){if(!e)return null;var s=a?n.reverse():n,u={},l=s.reduce(function(f,d){var p,_=(p=d.type)!==null&&p!==void 0&&p.defaultProps?wt(wt({},d.type.defaultProps),d.props):d.props,y=_.stackId,b=_.hide;if(b)return f;var v=_[r],g=f[v]||{hasStack:!1,stackGroups:{}};if(Mt(y)){var E=g.stackGroups[y]||{numericAxisId:r,cateAxisId:i,items:[]};E.items.push(d),g.hasStack=!0,g.stackGroups[y]=E}else g.stackGroups[fc("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[d]};return wt(wt({},f),{},$u({},v,g))},u),c={};return Object.keys(l).reduce(function(f,d){var p=l[d];if(p.hasStack){var _={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(y,b){var v=p.stackGroups[b];return wt(wt({},y),{},$u({},b,{numericAxisId:r,cateAxisId:i,items:v.items,stackedData:Jhe(e,v.items,o)}))},_)}return wt(wt({},f),{},$u({},d,p))},c)},ede=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,a=n.originalDomain,s=n.allowDecimals,u=r||n.scale;if(u!=="auto"&&u!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var l=e.domain();if(!l.length)return null;var c=fhe(l,o,s);return e.domain([$v(c),Oo(c)]),{niceTicks:c}}if(o&&i==="number"){var f=e.domain(),d=hhe(f,o,s);return{niceTicks:d}}return null};function Bg(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ve(i[e.dataKey])){var s=fg(n,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var u=rn(i,ve(a)?e.dataKey:a);return ve(u)?null:e.scale(u)}var Ck=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var u=rn(a,n.dataKey,n.domain[s]);return ve(u)?null:n.scale(u)-o/2+i},tde=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},nde=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?wt(wt({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(Mt(o)){var a=n[o];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null},rde=function(e){return e.reduce(function(n,r){return[$v(r.concat([n[0]]).filter(ee)),Oo(r.concat([n[1]]).filter(ee))]},[1/0,-1/0])},VF=function(e,n,r){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,u=s.reduce(function(l,c){var f=rde(c.slice(n,r+1));return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(u[0],i[0]),Math.max(u[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},kk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Rk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Zb=function(e,n,r){if(ye(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(ee(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(kk.test(e[0])){var o=+kk.exec(e[0])[1];i[0]=n[0]-o}else ye(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(ee(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(Rk.test(e[1])){var a=+Rk.exec(e[1])[1];i[1]=n[1]+a}else ye(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},Ug=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=vT(n,function(f){return f.coordinate}),a=1/0,s=1,u=o.length;s<u;s++){var l=o[s],c=o[s-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},Nk=function(e,n,r){return!e||!e.length||xl(e,hr(r,"type.defaultProps.domain"))?n:e},LF=function(e,n){var r=e.type.defaultProps?wt(wt({},e.type.defaultProps),e.props):e.props,i=r.dataKey,o=r.name,a=r.unit,s=r.formatter,u=r.tooltipType,l=r.chartType,c=r.hide;return wt(wt({},be(e,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:WT(e),value:rn(n,i),type:u,payload:n,chartType:l,hide:c})};function zh(t){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zh(t)}function Dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dk(Object(n),!0).forEach(function(r){ide(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ide(t,e,n){return e=ode(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ode(t){var e=ade(t,"string");return zh(e)=="symbol"?e:e+""}function ade(t,e){if(zh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zg=Math.PI/180,sde=function(e){return e*180/Math.PI},tn=function(e,n,r,i){return{x:e+Math.cos(-zg*i)*r,y:n+Math.sin(-zg*i)*r}},ude=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2))},lde=function(e,n){var r=e.x,i=e.y,o=n.cx,a=n.cy,s=ude({x:r,y:i},{x:o,y:a});if(s<=0)return{radius:s};var u=(r-o)/s,l=Math.acos(u);return i>a&&(l=2*Math.PI-l),{radius:s,angle:sde(l),angleInRadian:l}},cde=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return{startAngle:n-a*360,endAngle:r-a*360}},fde=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},Mk=function(e,n){var r=e.x,i=e.y,o=lde({x:r,y:i},n),a=o.radius,s=o.angle,u=n.innerRadius,l=n.outerRadius;if(a<u||a>l)return!1;if(a===0)return!0;var c=cde(n),f=c.startAngle,d=c.endAngle,p=s,_;if(f<=d){for(;p>d;)p-=360;for(;p<f;)p+=360;_=p>=f&&p<=d}else{for(;p>f;)p-=360;for(;p<d;)p+=360;_=p>=d&&p<=f}return _?jk(jk({},n),{},{radius:a,angle:fde(p,n)}):null};function qh(t){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(t)}var hde=["offset"];function dde(t){return yde(t)||gde(t)||mde(t)||pde()}function pde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mde(t,e){if(t){if(typeof t=="string")return e1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e1(t,e)}}function gde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yde(t){if(Array.isArray(t))return e1(t)}function e1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vde(t,e){if(t==null)return{};var n=_de(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _de(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$k(Object(n),!0).forEach(function(r){wde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$k(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wde(t,e,n){return e=bde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bde(t){var e=Ede(t,"string");return qh(e)=="symbol"?e:e+""}function Ede(t,e){if(qh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wh(){return Wh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wh.apply(this,arguments)}var xde=function(e){var n=e.value,r=e.formatter,i=ve(e.children)?n:e.children;return ye(r)?r(i):i},Tde=function(e,n){var r=Or(n-e),i=Math.min(Math.abs(n-e),360);return r*i},Sde=function(e,n,r){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,u=o,l=u.cx,c=u.cy,f=u.innerRadius,d=u.outerRadius,p=u.startAngle,_=u.endAngle,y=u.clockWise,b=(f+d)/2,v=Tde(p,_),g=v>=0?1:-1,E,P;i==="insideStart"?(E=p+g*a,P=y):i==="insideEnd"?(E=_-g*a,P=!y):i==="end"&&(E=_+g*a,P=y),P=v<=0?P:!P;var T=tn(l,c,b,E),A=tn(l,c,b,E+(P?1:-1)*359),x="M".concat(T.x,",").concat(T.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(P?0:1,`,
    `).concat(A.x,",").concat(A.y),S=ve(e.id)?fc("recharts-radial-line-"):e.id;return $.createElement("text",Wh({},r,{dominantBaseline:"central",className:Ce("recharts-radial-bar-label",s)}),$.createElement("defs",null,$.createElement("path",{id:S,d:x})),$.createElement("textPath",{xlinkHref:"#".concat(S)},n))},Ade=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,a=o.cx,s=o.cy,u=o.innerRadius,l=o.outerRadius,c=o.startAngle,f=o.endAngle,d=(c+f)/2;if(i==="outside"){var p=tn(a,s,l+r,d),_=p.x,y=p.y;return{x:_,y,textAnchor:_>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var b=(u+l)/2,v=tn(a,s,b,d),g=v.x,E=v.y;return{x:g,y:E,textAnchor:"middle",verticalAnchor:"middle"}},Ide=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,a=n,s=a.x,u=a.y,l=a.width,c=a.height,f=c>=0?1:-1,d=f*i,p=f>0?"end":"start",_=f>0?"start":"end",y=l>=0?1:-1,b=y*i,v=y>0?"end":"start",g=y>0?"start":"end";if(o==="top"){var E={x:s+l/2,y:u-f*i,textAnchor:"middle",verticalAnchor:p};return Nt(Nt({},E),r?{height:Math.max(u-r.y,0),width:l}:{})}if(o==="bottom"){var P={x:s+l/2,y:u+c+d,textAnchor:"middle",verticalAnchor:_};return Nt(Nt({},P),r?{height:Math.max(r.y+r.height-(u+c),0),width:l}:{})}if(o==="left"){var T={x:s-b,y:u+c/2,textAnchor:v,verticalAnchor:"middle"};return Nt(Nt({},T),r?{width:Math.max(T.x-r.x,0),height:c}:{})}if(o==="right"){var A={x:s+l+b,y:u+c/2,textAnchor:g,verticalAnchor:"middle"};return Nt(Nt({},A),r?{width:Math.max(r.x+r.width-A.x,0),height:c}:{})}var x=r?{width:l,height:c}:{};return o==="insideLeft"?Nt({x:s+b,y:u+c/2,textAnchor:g,verticalAnchor:"middle"},x):o==="insideRight"?Nt({x:s+l-b,y:u+c/2,textAnchor:v,verticalAnchor:"middle"},x):o==="insideTop"?Nt({x:s+l/2,y:u+d,textAnchor:"middle",verticalAnchor:_},x):o==="insideBottom"?Nt({x:s+l/2,y:u+c-d,textAnchor:"middle",verticalAnchor:p},x):o==="insideTopLeft"?Nt({x:s+b,y:u+d,textAnchor:g,verticalAnchor:_},x):o==="insideTopRight"?Nt({x:s+l-b,y:u+d,textAnchor:v,verticalAnchor:_},x):o==="insideBottomLeft"?Nt({x:s+b,y:u+c-d,textAnchor:g,verticalAnchor:p},x):o==="insideBottomRight"?Nt({x:s+l-b,y:u+c-d,textAnchor:v,verticalAnchor:p},x):ac(o)&&(ee(o.x)||za(o.x))&&(ee(o.y)||za(o.y))?Nt({x:s+Es(o.x,l),y:u+Es(o.y,c),textAnchor:"end",verticalAnchor:"end"},x):Nt({x:s+l/2,y:u+c/2,textAnchor:"middle",verticalAnchor:"middle"},x)},Pde=function(e){return"cx"in e&&ee(e.cx)};function pn(t){var e=t.offset,n=e===void 0?5:e,r=vde(t,hde),i=Nt({offset:n},r),o=i.viewBox,a=i.position,s=i.value,u=i.children,l=i.content,c=i.className,f=c===void 0?"":c,d=i.textBreakAll;if(!o||ve(s)&&ve(u)&&!W.isValidElement(l)&&!ye(l))return null;if(W.isValidElement(l))return W.cloneElement(l,i);var p;if(ye(l)){if(p=W.createElement(l,i),W.isValidElement(p))return p}else p=xde(i);var _=Pde(o),y=be(i,!0);if(_&&(a==="insideStart"||a==="insideEnd"||a==="end"))return Sde(i,p,y);var b=_?Ade(i):Ide(i);return $.createElement(Ag,Wh({className:Ce("recharts-label",f)},y,b,{breakAll:d}),p)}pn.displayName="Label";var FF=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,u=e.radius,l=e.innerRadius,c=e.outerRadius,f=e.x,d=e.y,p=e.top,_=e.left,y=e.width,b=e.height,v=e.clockWise,g=e.labelViewBox;if(g)return g;if(ee(y)&&ee(b)){if(ee(f)&&ee(d))return{x:f,y:d,width:y,height:b};if(ee(p)&&ee(_))return{x:p,y:_,width:y,height:b}}return ee(f)&&ee(d)?{x:f,y:d,width:0,height:0}:ee(n)&&ee(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:a||i||0,innerRadius:l||0,outerRadius:c||u||s||0,clockWise:v}:e.viewBox?e.viewBox:{}},Ode=function(e,n){return e?e===!0?$.createElement(pn,{key:"label-implicit",viewBox:n}):Mt(e)?$.createElement(pn,{key:"label-implicit",viewBox:n,value:e}):W.isValidElement(e)?e.type===pn?W.cloneElement(e,{key:"label-implicit",viewBox:n}):$.createElement(pn,{key:"label-implicit",content:e,viewBox:n}):ye(e)?$.createElement(pn,{key:"label-implicit",content:e,viewBox:n}):ac(e)?$.createElement(pn,Wh({viewBox:n},e,{key:"label-implicit"})):null:null},Cde=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=FF(e),a=Yn(i,pn).map(function(u,l){return W.cloneElement(u,{viewBox:n||o,key:"label-".concat(l)})});if(!r)return a;var s=Ode(e.label,n||o);return[s].concat(dde(a))};pn.parseViewBox=FF;pn.renderCallByParent=Cde;function kde(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Rde=kde;const Nde=Ge(Rde);function Hh(t){"@babel/helpers - typeof";return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hh(t)}var Dde=["valueAccessor"],jde=["data","dataKey","clockWise","id","textBreakAll"];function Mde(t){return Fde(t)||Lde(t)||Vde(t)||$de()}function $de(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vde(t,e){if(t){if(typeof t=="string")return t1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t1(t,e)}}function Lde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fde(t){if(Array.isArray(t))return t1(t)}function t1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qg(){return qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qg.apply(this,arguments)}function Vk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vk(Object(n),!0).forEach(function(r){Bde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bde(t,e,n){return e=Ude(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ude(t){var e=zde(t,"string");return Hh(e)=="symbol"?e:e+""}function zde(t,e){if(Hh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fk(t,e){if(t==null)return{};var n=qde(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Wde=function(e){return Array.isArray(e.value)?Nde(e.value):e.value};function Pi(t){var e=t.valueAccessor,n=e===void 0?Wde:e,r=Fk(t,Dde),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,u=r.textBreakAll,l=Fk(r,jde);return!i||!i.length?null:$.createElement(ze,{className:"recharts-label-list"},i.map(function(c,f){var d=ve(o)?n(c,f):rn(c&&c.payload,o),p=ve(s)?{}:{id:"".concat(s,"-").concat(f)};return $.createElement(pn,qg({},be(c,!0),l,p,{parentViewBox:c.parentViewBox,value:d,textBreakAll:u,viewBox:pn.parseViewBox(ve(a)?c:Lk(Lk({},c),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}Pi.displayName="LabelList";function Hde(t,e){return t?t===!0?$.createElement(Pi,{key:"labelList-implicit",data:e}):$.isValidElement(t)||ye(t)?$.createElement(Pi,{key:"labelList-implicit",data:e,content:t}):ac(t)?$.createElement(Pi,qg({data:e},t,{key:"labelList-implicit"})):null:null}function Gde(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Yn(r,Pi).map(function(a,s){return W.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var o=Hde(t.label,e);return[o].concat(Mde(i))}Pi.renderCallByParent=Gde;function Gh(t){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gh(t)}function n1(){return n1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n1.apply(this,arguments)}function Bk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bk(Object(n),!0).forEach(function(r){Kde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kde(t,e,n){return e=Qde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qde(t){var e=Yde(t,"string");return Gh(e)=="symbol"?e:e+""}function Yde(t,e){if(Gh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xde=function(e,n){var r=Or(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Dp=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,u=e.cornerRadius,l=e.cornerIsExternal,c=u*(s?1:-1)+i,f=Math.asin(u/c)/zg,d=l?o:o+a*f,p=tn(n,r,c,d),_=tn(n,r,i,d),y=l?o-a*f:o,b=tn(n,r,c*Math.cos(f*zg),y);return{center:p,circleTangency:_,lineTangency:b,theta:f}},BF=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,u=Xde(a,s),l=a+u,c=tn(n,r,o,a),f=tn(n,r,o,l),d="M ".concat(c.x,",").concat(c.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(a>l),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var p=tn(n,r,i,a),_=tn(n,r,i,l);d+="L ".concat(_.x,",").concat(_.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(a<=l),`,
            `).concat(p.x,",").concat(p.y," Z")}else d+="L ".concat(n,",").concat(r," Z");return d},Jde=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,u=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,f=Or(c-l),d=Dp({cx:n,cy:r,radius:o,angle:l,sign:f,cornerRadius:a,cornerIsExternal:u}),p=d.circleTangency,_=d.lineTangency,y=d.theta,b=Dp({cx:n,cy:r,radius:o,angle:c,sign:-f,cornerRadius:a,cornerIsExternal:u}),v=b.circleTangency,g=b.lineTangency,E=b.theta,P=u?Math.abs(l-c):Math.abs(l-c)-y-E;if(P<0)return s?"M ".concat(_.x,",").concat(_.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):BF({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c});var T="M ".concat(_.x,",").concat(_.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(P>180),",").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
  `);if(i>0){var A=Dp({cx:n,cy:r,radius:i,angle:l,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),x=A.circleTangency,S=A.lineTangency,O=A.theta,C=Dp({cx:n,cy:r,radius:i,angle:c,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),k=C.circleTangency,N=C.lineTangency,R=C.theta,j=u?Math.abs(l-c):Math.abs(l-c)-O-R;if(j<0&&a===0)return"".concat(T,"L").concat(n,",").concat(r,"Z");T+="L".concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(j>180),",").concat(+(f>0),",").concat(x.x,",").concat(x.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(S.x,",").concat(S.y,"Z")}else T+="L".concat(n,",").concat(r,"Z");return T},Zde={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},UF=function(e){var n=Uk(Uk({},Zde),e),r=n.cx,i=n.cy,o=n.innerRadius,a=n.outerRadius,s=n.cornerRadius,u=n.forceCornerRadius,l=n.cornerIsExternal,c=n.startAngle,f=n.endAngle,d=n.className;if(a<o||c===f)return null;var p=Ce("recharts-sector",d),_=a-o,y=Es(s,_,0,!0),b;return y>0&&Math.abs(c-f)<360?b=Jde({cx:r,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(y,_/2),forceCornerRadius:u,cornerIsExternal:l,startAngle:c,endAngle:f}):b=BF({cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:c,endAngle:f}),$.createElement("path",n1({},be(n,!0),{className:p,d:b,role:"img"}))};function Kh(t){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kh(t)}function r1(){return r1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r1.apply(this,arguments)}function zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zk(Object(n),!0).forEach(function(r){epe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function epe(t,e,n){return e=tpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tpe(t){var e=npe(t,"string");return Kh(e)=="symbol"?e:e+""}function npe(t,e){if(Kh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wk={curveBasisClosed:eZ,curveBasisOpen:tZ,curveBasis:ZJ,curveBumpX:LJ,curveBumpY:FJ,curveLinearClosed:nZ,curveLinear:Sv,curveMonotoneX:rZ,curveMonotoneY:iZ,curveNatural:oZ,curveStep:aZ,curveStepAfter:uZ,curveStepBefore:sZ},jp=function(e){return e.x===+e.x&&e.y===+e.y},tf=function(e){return e.x},nf=function(e){return e.y},rpe=function(e,n){if(ye(e))return e;var r="curve".concat(xv(e));return(r==="curveMonotone"||r==="curveBump")&&n?Wk["".concat(r).concat(n==="vertical"?"Y":"X")]:Wk[r]||Sv},ipe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,u=e.connectNulls,l=u===void 0?!1:u,c=rpe(r,s),f=l?o.filter(function(y){return jp(y)}):o,d;if(Array.isArray(a)){var p=l?a.filter(function(y){return jp(y)}):a,_=f.map(function(y,b){return qk(qk({},y),{},{base:p[b]})});return s==="vertical"?d=Sp().y(nf).x1(tf).x0(function(y){return y.base.x}):d=Sp().x(tf).y1(nf).y0(function(y){return y.base.y}),d.defined(jp).curve(c),d(_)}return s==="vertical"&&ee(a)?d=Sp().y(nf).x1(tf).x0(a):ee(a)?d=Sp().x(tf).y1(nf).y0(a):d=qV().x(tf).y(nf),d.defined(jp).curve(c),d(f)},Vu=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?ipe(e):i;return W.createElement("path",r1({},be(e,!1),hg(e),{className:Ce("recharts-curve",n),d:a,ref:o}))},zF={exports:{}},ope="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ape=ope,spe=ape;function qF(){}function WF(){}WF.resetWarningCache=qF;var upe=function(){function t(r,i,o,a,s,u){if(u!==spe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:WF,resetWarningCache:qF};return n.PropTypes=n,n};zF.exports=upe();var lpe=zF.exports;const je=Ge(lpe),{getOwnPropertyNames:cpe,getOwnPropertySymbols:fpe}=Object,{hasOwnProperty:hpe}=Object.prototype;function E0(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function Mp(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:o}=i,a=o.get(n),s=o.get(r);if(a&&s)return a===r&&s===n;o.set(n,r),o.set(r,n);const u=t(n,r,i);return o.delete(n),o.delete(r),u}}function dpe(t){return t!=null?t[Symbol.toStringTag]:void 0}function Hk(t){return cpe(t).concat(fpe(t))}const ppe=Object.hasOwn||((t,e)=>hpe.call(t,e));function Ls(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const mpe="__v",gpe="__o",ype="_owner",{getOwnPropertyDescriptor:Gk,keys:Kk}=Object;function vpe(t,e){return t.byteLength===e.byteLength&&Wg(new Uint8Array(t),new Uint8Array(e))}function _pe(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function wpe(t,e){return t.byteLength===e.byteLength&&Wg(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function bpe(t,e){return Ls(t.getTime(),e.getTime())}function Epe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function xpe(t,e){return t===e}function Qk(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.entries();let a,s,u=0;for(;(a=o.next())&&!a.done;){const l=e.entries();let c=!1,f=0;for(;(s=l.next())&&!s.done;){if(i[f]){f++;continue}const d=a.value,p=s.value;if(n.equals(d[0],p[0],u,f,t,e,n)&&n.equals(d[1],p[1],d[0],p[0],t,e,n)){c=i[f]=!0;break}f++}if(!c)return!1;u++}return!0}const Tpe=Ls;function Spe(t,e,n){const r=Kk(t);let i=r.length;if(Kk(e).length!==i)return!1;for(;i-- >0;)if(!HF(t,e,n,r[i]))return!1;return!0}function rf(t,e,n){const r=Hk(t);let i=r.length;if(Hk(e).length!==i)return!1;let o,a,s;for(;i-- >0;)if(o=r[i],!HF(t,e,n,o)||(a=Gk(t,o),s=Gk(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function Ape(t,e){return Ls(t.valueOf(),e.valueOf())}function Ipe(t,e){return t.source===e.source&&t.flags===e.flags}function Yk(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.values();let a,s;for(;(a=o.next())&&!a.done;){const u=e.values();let l=!1,c=0;for(;(s=u.next())&&!s.done;){if(!i[c]&&n.equals(a.value,s.value,a.value,s.value,t,e,n)){l=i[c]=!0;break}c++}if(!l)return!1}return!0}function Wg(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function Ppe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function HF(t,e,n,r){return(r===ype||r===gpe||r===mpe)&&(t.$$typeof||e.$$typeof)?!0:ppe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const Ope="[object ArrayBuffer]",Cpe="[object Arguments]",kpe="[object Boolean]",Rpe="[object DataView]",Npe="[object Date]",Dpe="[object Error]",jpe="[object Map]",Mpe="[object Number]",$pe="[object Object]",Vpe="[object RegExp]",Lpe="[object Set]",Fpe="[object String]",Bpe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Upe="[object URL]",zpe=Object.prototype.toString;function qpe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:a,areNumbersEqual:s,areObjectsEqual:u,arePrimitiveWrappersEqual:l,areRegExpsEqual:c,areSetsEqual:f,areTypedArraysEqual:d,areUrlsEqual:p,unknownTagComparators:_}){return function(b,v,g){if(b===v)return!0;if(b==null||v==null)return!1;const E=typeof b;if(E!==typeof v)return!1;if(E!=="object")return E==="number"?s(b,v,g):E==="function"?o(b,v,g):!1;const P=b.constructor;if(P!==v.constructor)return!1;if(P===Object)return u(b,v,g);if(Array.isArray(b))return e(b,v,g);if(P===Date)return r(b,v,g);if(P===RegExp)return c(b,v,g);if(P===Map)return a(b,v,g);if(P===Set)return f(b,v,g);const T=zpe.call(b);if(T===Npe)return r(b,v,g);if(T===Vpe)return c(b,v,g);if(T===jpe)return a(b,v,g);if(T===Lpe)return f(b,v,g);if(T===$pe)return typeof b.then!="function"&&typeof v.then!="function"&&u(b,v,g);if(T===Upe)return p(b,v,g);if(T===Dpe)return i(b,v,g);if(T===Cpe)return u(b,v,g);if(Bpe[T])return d(b,v,g);if(T===Ope)return t(b,v,g);if(T===Rpe)return n(b,v,g);if(T===kpe||T===Mpe||T===Fpe)return l(b,v,g);if(_){let A=_[T];if(!A){const x=dpe(b);x&&(A=_[x])}if(A)return A(b,v,g)}return!1}}function Wpe({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:vpe,areArraysEqual:n?rf:_pe,areDataViewsEqual:wpe,areDatesEqual:bpe,areErrorsEqual:Epe,areFunctionsEqual:xpe,areMapsEqual:n?E0(Qk,rf):Qk,areNumbersEqual:Tpe,areObjectsEqual:n?rf:Spe,arePrimitiveWrappersEqual:Ape,areRegExpsEqual:Ipe,areSetsEqual:n?E0(Yk,rf):Yk,areTypedArraysEqual:n?E0(Wg,rf):Wg,areUrlsEqual:Ppe,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=Mp(r.areArraysEqual),o=Mp(r.areMapsEqual),a=Mp(r.areObjectsEqual),s=Mp(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:s})}return r}function Hpe(t){return function(e,n,r,i,o,a,s){return t(e,n,s)}}function Gpe({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(s,u){const{cache:l=t?new WeakMap:void 0,meta:c}=n();return e(s,u,{cache:l,equals:r,meta:c,strict:i})};if(t)return function(s,u){return e(s,u,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const o={cache:void 0,equals:r,meta:void 0,strict:i};return function(s,u){return e(s,u,o)}}const Kpe=va();va({strict:!0});va({circular:!0});va({circular:!0,strict:!0});va({createInternalComparator:()=>Ls});va({strict:!0,createInternalComparator:()=>Ls});va({circular:!0,createInternalComparator:()=>Ls});va({circular:!0,createInternalComparator:()=>Ls,strict:!0});function va(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,o=Wpe(t),a=qpe(o),s=n?n(a):Hpe(a);return Gpe({circular:e,comparator:a,createState:r,equals:s,strict:i})}function Qpe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Xk(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):Qpe(i)};requestAnimationFrame(r)}function i1(t){"@babel/helpers - typeof";return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i1(t)}function Ype(t){return eme(t)||Zpe(t)||Jpe(t)||Xpe()}function Xpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jpe(t,e){if(t){if(typeof t=="string")return Jk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jk(t,e)}}function Jk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function eme(t){if(Array.isArray(t))return t}function tme(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,s=Ype(a),u=s[0],l=s.slice(1);if(typeof u=="number"){Xk(i.bind(null,l),u);return}i(u),Xk(i.bind(null,l));return}i1(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function Qh(t){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qh(t)}function Zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zk(Object(n),!0).forEach(function(r){GF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GF(t,e,n){return e=nme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nme(t){var e=rme(t,"string");return Qh(e)==="symbol"?e:String(e)}function rme(t,e){if(Qh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ime=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},ome=function(e){return e},ame=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},qf=function(e,n){return Object.keys(n).reduce(function(r,i){return eR(eR({},r),{},GF({},i,e(i,n[i])))},{})},tR=function(e,n,r){return e.map(function(i){return"".concat(ame(i)," ").concat(n,"ms ").concat(r)}).join(",")};function sme(t,e){return cme(t)||lme(t,e)||KF(t,e)||ume()}function ume(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lme(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function cme(t){if(Array.isArray(t))return t}function fme(t){return pme(t)||dme(t)||KF(t)||hme()}function hme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KF(t,e){if(t){if(typeof t=="string")return o1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o1(t,e)}}function dme(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pme(t){if(Array.isArray(t))return o1(t)}function o1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Hg=1e-4,QF=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},YF=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},nR=function(e,n){return function(r){var i=QF(e,n);return YF(i,r)}},mme=function(e,n){return function(r){var i=QF(e,n),o=[].concat(fme(i.map(function(a,s){return a*s}).slice(1)),[0]);return YF(o,r)}},rR=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var u=n[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var l=u[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),c=sme(l,4);i=c[0],o=c[1],a=c[2],s=c[3]}}}var f=nR(i,a),d=nR(o,s),p=mme(i,a),_=function(v){return v>1?1:v<0?0:v},y=function(v){for(var g=v>1?1:v,E=g,P=0;P<8;++P){var T=f(E)-g,A=p(E);if(Math.abs(T-g)<Hg||A<Hg)return d(E);E=_(E-T/A)}return d(E)};return y.isStepper=!1,y},gme=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,u=function(c,f,d){var p=-(c-f)*r,_=d*o,y=d+(p-_)*s/1e3,b=d*s/1e3+c;return Math.abs(b-f)<Hg&&Math.abs(y)<Hg?[f,0]:[b,y]};return u.isStepper=!0,u.dt=s,u},yme=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return rR(i);case"spring":return gme();default:if(i.split("(")[0]==="cubic-bezier")return rR(i)}return typeof i=="function"?i:null};function Yh(t){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yh(t)}function iR(t){return wme(t)||_me(t)||XF(t)||vme()}function vme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _me(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wme(t){if(Array.isArray(t))return s1(t)}function oR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oR(Object(n),!0).forEach(function(r){a1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a1(t,e,n){return e=bme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bme(t){var e=Eme(t,"string");return Yh(e)==="symbol"?e:String(e)}function Eme(t,e){if(Yh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xme(t,e){return Ame(t)||Sme(t,e)||XF(t,e)||Tme()}function Tme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XF(t,e){if(t){if(typeof t=="string")return s1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s1(t,e)}}function s1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sme(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function Ame(t){if(Array.isArray(t))return t}var Gg=function(e,n,r){return e+(n-e)*r},u1=function(e){var n=e.from,r=e.to;return n!==r},Ime=function t(e,n,r){var i=qf(function(o,a){if(u1(a)){var s=e(a.from,a.to,a.velocity),u=xme(s,2),l=u[0],c=u[1];return Jt(Jt({},a),{},{from:l,velocity:c})}return a},n);return r<1?qf(function(o,a){return u1(a)?Jt(Jt({},a),{},{velocity:Gg(a.velocity,i[o].velocity,r),from:Gg(a.from,i[o].from,r)}):a},n):t(e,i,r-1)};const Pme=function(t,e,n,r,i){var o=ime(t,e),a=o.reduce(function(b,v){return Jt(Jt({},b),{},a1({},v,[t[v],e[v]]))},{}),s=o.reduce(function(b,v){return Jt(Jt({},b),{},a1({},v,{from:t[v],velocity:0,to:e[v]}))},{}),u=-1,l,c,f=function(){return null},d=function(){return qf(function(v,g){return g.from},s)},p=function(){return!Object.values(s).filter(u1).length},_=function(v){l||(l=v);var g=v-l,E=g/n.dt;s=Ime(n,s,E),i(Jt(Jt(Jt({},t),e),d())),l=v,p()||(u=requestAnimationFrame(f))},y=function(v){c||(c=v);var g=(v-c)/r,E=qf(function(T,A){return Gg.apply(void 0,iR(A).concat([n(g)]))},a);if(i(Jt(Jt(Jt({},t),e),E)),g<1)u=requestAnimationFrame(f);else{var P=qf(function(T,A){return Gg.apply(void 0,iR(A).concat([n(1)]))},a);i(Jt(Jt(Jt({},t),e),P))}};return f=n.isStepper?_:y,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(u)}}};function Sl(t){"@babel/helpers - typeof";return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sl(t)}var Ome=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Cme(t,e){if(t==null)return{};var n=kme(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kme(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function x0(t){return jme(t)||Dme(t)||Nme(t)||Rme()}function Rme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nme(t,e){if(t){if(typeof t=="string")return l1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l1(t,e)}}function Dme(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jme(t){if(Array.isArray(t))return l1(t)}function l1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aR(Object(n),!0).forEach(function(r){yf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yf(t,e,n){return e=JF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JF(r.key),r)}}function Vme(t,e,n){return e&&$me(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function JF(t){var e=Lme(t,"string");return Sl(e)==="symbol"?e:String(e)}function Lme(t,e){if(Sl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c1(t,e)}function c1(t,e){return c1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},c1(t,e)}function Bme(t){var e=Ume();return function(){var r=Kg(t),i;if(e){var o=Kg(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return f1(this,i)}}function f1(t,e){if(e&&(Sl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h1(t)}function h1(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ume(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Kg(t){return Kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kg(t)}var si=function(t){Fme(n,t);var e=Bme(n);function n(r,i){var o;Mme(this,n),o=e.call(this,r,i);var a=o.props,s=a.isActive,u=a.attributeName,l=a.from,c=a.to,f=a.steps,d=a.children,p=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(h1(o)),o.changeStyle=o.changeStyle.bind(h1(o)),!s||p<=0)return o.state={style:{}},typeof d=="function"&&(o.state={style:c}),f1(o);if(f&&f.length)o.state={style:f[0].style};else if(l){if(typeof d=="function")return o.state={style:l},f1(o);o.state={style:u?yf({},u,l):l}}else o.state={style:{}};return o}return Vme(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,u=o.attributeName,l=o.shouldReAnimate,c=o.to,f=o.from,d=this.state.style;if(s){if(!a){var p={style:u?yf({},u,c):c};this.state&&d&&(u&&d[u]!==c||!u&&d!==c)&&this.setState(p);return}if(!(Kpe(i.to,c)&&i.canBegin&&i.isActive)){var _=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=_||l?f:i.to;if(this.state&&d){var b={style:u?yf({},u,y):y};(u&&d[u]!==y||!u&&d!==y)&&this.setState(b)}this.runAnimation(wr(wr({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,u=i.duration,l=i.easing,c=i.begin,f=i.onAnimationEnd,d=i.onAnimationStart,p=Pme(a,s,yme(l),u,this.changeStyle),_=function(){o.stopJSAnimation=p()};this.manager.start([d,c,_,u,f])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,u=i.onAnimationStart,l=a[0],c=l.style,f=l.duration,d=f===void 0?0:f,p=function(y,b,v){if(v===0)return y;var g=b.duration,E=b.easing,P=E===void 0?"ease":E,T=b.style,A=b.properties,x=b.onAnimationEnd,S=v>0?a[v-1]:b,O=A||Object.keys(T);if(typeof P=="function"||P==="spring")return[].concat(x0(y),[o.runJSAnimation.bind(o,{from:S.style,to:T,duration:g,easing:P}),g]);var C=tR(O,g,P),k=wr(wr(wr({},S.style),T),{},{transition:C});return[].concat(x0(y),[k,g,x]).filter(ome)};return this.manager.start([u].concat(x0(a.reduce(p,[c,Math.max(d,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=tme());var o=i.begin,a=i.duration,s=i.attributeName,u=i.to,l=i.easing,c=i.onAnimationStart,f=i.onAnimationEnd,d=i.steps,p=i.children,_=this.manager;if(this.unSubscribe=_.subscribe(this.handleStyleChange),typeof l=="function"||typeof p=="function"||l==="spring"){this.runJSAnimation(i);return}if(d.length>1){this.runStepAnimation(i);return}var y=s?yf({},s,u):u,b=tR(Object.keys(y),a,l);_.start([c,o,wr(wr({},y),{},{transition:b}),a,f])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var u=Cme(i,Ome),l=W.Children.count(o),c=this.state.style;if(typeof o=="function")return o(c);if(!s||l===0||a<=0)return o;var f=function(p){var _=p.props,y=_.style,b=y===void 0?{}:y,v=_.className,g=W.cloneElement(p,wr(wr({},u),{},{style:wr(wr({},b),c),className:v}));return g};return l===1?f(W.Children.only(o)):$.createElement("div",null,W.Children.map(o,function(d){return f(d)}))}}]),n}(W.PureComponent);si.displayName="Animate";si.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};si.propTypes={from:je.oneOfType([je.object,je.string]),to:je.oneOfType([je.object,je.string]),attributeName:je.string,duration:je.number,begin:je.number,easing:je.oneOfType([je.string,je.func]),steps:je.arrayOf(je.shape({duration:je.number.isRequired,style:je.object.isRequired,easing:je.oneOfType([je.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),je.func]),properties:je.arrayOf("string"),onAnimationEnd:je.func})),children:je.oneOfType([je.node,je.func]),isActive:je.bool,canBegin:je.bool,onAnimationEnd:je.func,shouldReAnimate:je.bool,onAnimationStart:je.func,onAnimationReStart:je.func};function Xh(t){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xh(t)}function Qg(){return Qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qg.apply(this,arguments)}function zme(t,e){return Gme(t)||Hme(t,e)||Wme(t,e)||qme()}function qme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wme(t,e){if(t){if(typeof t=="string")return sR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sR(t,e)}}function sR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hme(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function Gme(t){if(Array.isArray(t))return t}function uR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uR(Object(n),!0).forEach(function(r){Kme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kme(t,e,n){return e=Qme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qme(t){var e=Yme(t,"string");return Xh(e)=="symbol"?e:e+""}function Yme(t,e){if(Xh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cR=function(e,n,r,i,o){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,u=r>=0?1:-1,l=i>=0&&r>=0||i<0&&r<0?1:0,c;if(a>0&&o instanceof Array){for(var f=[0,0,0,0],d=0,p=4;d<p;d++)f[d]=o[d]>a?a:o[d];c="M".concat(e,",").concat(n+s*f[0]),f[0]>0&&(c+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(l,",").concat(e+u*f[0],",").concat(n)),c+="L ".concat(e+r-u*f[1],",").concat(n),f[1]>0&&(c+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(n+s*f[1])),c+="L ".concat(e+r,",").concat(n+i-s*f[2]),f[2]>0&&(c+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(l,`,
        `).concat(e+r-u*f[2],",").concat(n+i)),c+="L ".concat(e+u*f[3],",").concat(n+i),f[3]>0&&(c+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(n+i-s*f[3])),c+="Z"}else if(a>0&&o===+o&&o>0){var _=Math.min(a,o);c="M ".concat(e,",").concat(n+s*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(l,",").concat(e+u*_,",").concat(n,`
            L `).concat(e+r-u*_,",").concat(n,`
            A `).concat(_,",").concat(_,",0,0,").concat(l,",").concat(e+r,",").concat(n+s*_,`
            L `).concat(e+r,",").concat(n+i-s*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(l,",").concat(e+r-u*_,",").concat(n+i,`
            L `).concat(e+u*_,",").concat(n+i,`
            A `).concat(_,",").concat(_,",0,0,").concat(l,",").concat(e,",").concat(n+i-s*_," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return c},Xme=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,a=n.y,s=n.width,u=n.height;if(Math.abs(s)>0&&Math.abs(u)>0){var l=Math.min(o,o+s),c=Math.max(o,o+s),f=Math.min(a,a+u),d=Math.max(a,a+u);return r>=l&&r<=c&&i>=f&&i<=d}return!1},Jme={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},HT=function(e){var n=lR(lR({},Jme),e),r=W.useRef(),i=W.useState(-1),o=zme(i,2),a=o[0],s=o[1];W.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var P=r.current.getTotalLength();P&&s(P)}catch{}},[]);var u=n.x,l=n.y,c=n.width,f=n.height,d=n.radius,p=n.className,_=n.animationEasing,y=n.animationDuration,b=n.animationBegin,v=n.isAnimationActive,g=n.isUpdateAnimationActive;if(u!==+u||l!==+l||c!==+c||f!==+f||c===0||f===0)return null;var E=Ce("recharts-rectangle",p);return g?$.createElement(si,{canBegin:a>0,from:{width:c,height:f,x:u,y:l},to:{width:c,height:f,x:u,y:l},duration:y,animationEasing:_,isActive:g},function(P){var T=P.width,A=P.height,x=P.x,S=P.y;return $.createElement(si,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,isActive:v,easing:_},$.createElement("path",Qg({},be(n,!0),{className:E,d:cR(x,S,T,A,d),ref:r})))}):$.createElement("path",Qg({},be(n,!0),{className:E,d:cR(u,l,c,f,d)}))};function d1(){return d1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d1.apply(this,arguments)}var GT=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,a=Ce("recharts-dot",o);return n===+n&&r===+r&&i===+i?W.createElement("circle",d1({},be(e,!1),hg(e),{className:a,cx:n,cy:r,r:i})):null};function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}var Zme=["x","y","top","left","width","height","className"];function p1(){return p1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p1.apply(this,arguments)}function fR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ege(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fR(Object(n),!0).forEach(function(r){tge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tge(t,e,n){return e=nge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nge(t){var e=rge(t,"string");return Jh(e)=="symbol"?e:e+""}function rge(t,e){if(Jh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ige(t,e){if(t==null)return{};var n=oge(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var age=function(e,n,r,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},sge=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,u=e.left,l=u===void 0?0:u,c=e.width,f=c===void 0?0:c,d=e.height,p=d===void 0?0:d,_=e.className,y=ige(e,Zme),b=ege({x:r,y:o,top:s,left:l,width:f,height:p},y);return!ee(r)||!ee(o)||!ee(f)||!ee(p)||!ee(s)||!ee(l)?null:$.createElement("path",p1({},be(b,!0),{className:Ce("recharts-cross",_),d:age(r,o,f,p,s,l)}))},uge=pL,lge=uge(Object.getPrototypeOf,Object),cge=lge,fge=Qi,hge=cge,dge=Yi,pge="[object Object]",mge=Function.prototype,gge=Object.prototype,ZF=mge.toString,yge=gge.hasOwnProperty,vge=ZF.call(Object);function _ge(t){if(!dge(t)||fge(t)!=pge)return!1;var e=hge(t);if(e===null)return!0;var n=yge.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&ZF.call(n)==vge}var wge=_ge;const bge=Ge(wge);var Ege=Qi,xge=Yi,Tge="[object Boolean]";function Sge(t){return t===!0||t===!1||xge(t)&&Ege(t)==Tge}var Age=Sge;const Ige=Ge(Age);function Zh(t){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(t)}function Yg(){return Yg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yg.apply(this,arguments)}function Pge(t,e){return Rge(t)||kge(t,e)||Cge(t,e)||Oge()}function Oge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cge(t,e){if(t){if(typeof t=="string")return hR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hR(t,e)}}function hR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function Rge(t){if(Array.isArray(t))return t}function dR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dR(Object(n),!0).forEach(function(r){Nge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nge(t,e,n){return e=Dge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dge(t){var e=jge(t,"string");return Zh(e)=="symbol"?e:e+""}function jge(t,e){if(Zh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mR=function(e,n,r,i,o){var a=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-a/2,",").concat(n+o),s+="L ".concat(e+r-a/2-i,",").concat(n+o),s+="L ".concat(e,",").concat(n," Z"),s},Mge={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$ge=function(e){var n=pR(pR({},Mge),e),r=W.useRef(),i=W.useState(-1),o=Pge(i,2),a=o[0],s=o[1];W.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var E=r.current.getTotalLength();E&&s(E)}catch{}},[]);var u=n.x,l=n.y,c=n.upperWidth,f=n.lowerWidth,d=n.height,p=n.className,_=n.animationEasing,y=n.animationDuration,b=n.animationBegin,v=n.isUpdateAnimationActive;if(u!==+u||l!==+l||c!==+c||f!==+f||d!==+d||c===0&&f===0||d===0)return null;var g=Ce("recharts-trapezoid",p);return v?$.createElement(si,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:u,y:l},to:{upperWidth:c,lowerWidth:f,height:d,x:u,y:l},duration:y,animationEasing:_,isActive:v},function(E){var P=E.upperWidth,T=E.lowerWidth,A=E.height,x=E.x,S=E.y;return $.createElement(si,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,easing:_},$.createElement("path",Yg({},be(n,!0),{className:g,d:mR(x,S,P,T,A),ref:r})))}):$.createElement("g",null,$.createElement("path",Yg({},be(n,!0),{className:g,d:mR(u,l,c,f,d)})))},Vge=["option","shapeType","propTransformer","activeClassName","isActive"];function ed(t){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ed(t)}function Lge(t,e){if(t==null)return{};var n=Fge(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gR(Object(n),!0).forEach(function(r){Bge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bge(t,e,n){return e=Uge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uge(t){var e=zge(t,"string");return ed(e)=="symbol"?e:e+""}function zge(t,e){if(ed(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qge(t,e){return Xg(Xg({},e),t)}function Wge(t,e){return t==="symbols"}function yR(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return $.createElement(HT,n);case"trapezoid":return $.createElement($ge,n);case"sector":return $.createElement(UF,n);case"symbols":if(Wge(e))return $.createElement(Iv,n);break;default:return null}}function Hge(t){return W.isValidElement(t)?t.props:t}function m1(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?qge:r,o=t.activeClassName,a=o===void 0?"recharts-active-shape":o,s=t.isActive,u=Lge(t,Vge),l;if(W.isValidElement(e))l=W.cloneElement(e,Xg(Xg({},u),Hge(e)));else if(ye(e))l=e(u);else if(bge(e)&&!Ige(e)){var c=i(e,u);l=$.createElement(yR,{shapeType:n,elementProps:c})}else{var f=u;l=$.createElement(yR,{shapeType:n,elementProps:f})}return s?$.createElement(ze,{className:a},l):l}function Fv(t,e){return e!=null&&"trapezoids"in t.props}function Bv(t,e){return e!=null&&"sectors"in t.props}function td(t,e){return e!=null&&"points"in t.props}function Gge(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function Kge(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Qge(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function Yge(t,e){var n;return Fv(t,e)?n=Gge:Bv(t,e)?n=Kge:td(t,e)&&(n=Qge),n}function Xge(t,e){var n;return Fv(t,e)?n="trapezoids":Bv(t,e)?n="sectors":td(t,e)&&(n="points"),n}function Jge(t,e){if(Fv(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Bv(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return td(t,e)?e.payload:{}}function Zge(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=Xge(n,e),o=Jge(n,e),a=r.filter(function(u,l){var c=xl(o,u),f=n.props[i].filter(function(_){var y=Yge(n,e);return y(_,e)}),d=n.props[i].indexOf(f[f.length-1]),p=l===d;return c&&p}),s=r.indexOf(a[a.length-1]);return s}var eye=Math.ceil,tye=Math.max;function nye(t,e,n,r){for(var i=-1,o=tye(eye((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}var rye=nye,iye=NL,vR=1/0,oye=17976931348623157e292;function aye(t){if(!t)return t===0?t:0;if(t=iye(t),t===vR||t===-vR){var e=t<0?-1:1;return e*oye}return t===t?t:0}var e4=aye,sye=rye,uye=Cv,T0=e4;function lye(t){return function(e,n,r){return r&&typeof r!="number"&&uye(e,n,r)&&(n=r=void 0),e=T0(e),n===void 0?(n=e,e=0):n=T0(n),r=r===void 0?e<n?1:-1:T0(r),sye(e,n,r,t)}}var cye=lye,fye=cye,hye=fye(),dye=hye;const Jg=Ge(dye);function nd(t){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nd(t)}function _R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_R(Object(n),!0).forEach(function(r){t4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_R(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t4(t,e,n){return e=pye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pye(t){var e=mye(t,"string");return nd(e)=="symbol"?e:e+""}function mye(t,e){if(nd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gye=["Webkit","Moz","O","ms"],yye=function(e,n){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=gye.reduce(function(o,a){return wR(wR({},o),{},t4({},a+r,n))},{});return i[e]=n,i};function Al(t){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Al(t)}function Zg(){return Zg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zg.apply(this,arguments)}function bR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function S0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bR(Object(n),!0).forEach(function(r){Bn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ER(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r4(r.key),r)}}function _ye(t,e,n){return e&&ER(t.prototype,e),n&&ER(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wye(t,e,n){return e=ey(e),bye(t,n4()?Reflect.construct(e,n||[],ey(t).constructor):e.apply(t,n))}function bye(t,e){if(e&&(Al(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eye(t)}function Eye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n4=function(){return!!t})()}function ey(t){return ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ey(t)}function xye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g1(t,e)}function g1(t,e){return g1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},g1(t,e)}function Bn(t,e,n){return e=r4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r4(t){var e=Tye(t,"string");return Al(e)=="symbol"?e:e+""}function Tye(t,e){if(Al(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Al(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Sye=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var u=n.length,l=Uf().domain(Jg(0,u)).range([o,o+a-s]),c=l.domain().map(function(f){return l(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(r),endX:l(i),scale:l,scaleValues:c}},xR=function(e){return e.changedTouches&&!!e.changedTouches.length},Il=function(t){function e(n){var r;return vye(this,e),r=wye(this,e,[n]),Bn(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Bn(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Bn(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),r.detachDragEndListener()}),Bn(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Bn(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Bn(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Bn(r,"handleSlideDragStart",function(i){var o=xR(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return xye(e,t),_ye(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,a=this.state.scaleValues,s=this.props,u=s.gap,l=s.data,c=l.length-1,f=Math.min(i,o),d=Math.max(i,o),p=e.getIndexInRange(a,f),_=e.getIndexInRange(a,d);return{startIndex:p-p%u,endIndex:_===c?c:_-_%u}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,u=rn(o[r],s,r);return ye(a)?a(u,r):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,u=this.props,l=u.x,c=u.width,f=u.travellerWidth,d=u.startIndex,p=u.endIndex,_=u.onChange,y=r.pageX-o;y>0?y=Math.min(y,l+c-f-s,l+c-f-a):y<0&&(y=Math.max(y,l-a,l-s));var b=this.getIndex({startX:a+y,endX:s+y});(b.startIndex!==d||b.endIndex!==p)&&_&&_(b),this.setState({startX:a+y,endX:s+y,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=xR(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,u=i.startX,l=this.state[a],c=this.props,f=c.x,d=c.width,p=c.travellerWidth,_=c.onChange,y=c.gap,b=c.data,v={startX:this.state.startX,endX:this.state.endX},g=r.pageX-o;g>0?g=Math.min(g,f+d-p-l):g<0&&(g=Math.max(g,f-l)),v[a]=l+g;var E=this.getIndex(v),P=E.startIndex,T=E.endIndex,A=function(){var S=b.length-1;return a==="startX"&&(s>u?P%y===0:T%y===0)||s<u&&T===S||a==="endX"&&(s>u?T%y===0:P%y===0)||s>u&&T===S};this.setState(Bn(Bn({},a,l+g),"brushMoveStartX",r.pageX),function(){_&&A()&&_(E)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,a=this.state,s=a.scaleValues,u=a.startX,l=a.endX,c=this.state[i],f=s.indexOf(c);if(f!==-1){var d=f+r;if(!(d===-1||d>=s.length)){var p=s[d];i==="startX"&&p>=l||i==="endX"&&p<=u||this.setState(Bn({},i,p),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,u=r.fill,l=r.stroke;return $.createElement("rect",{stroke:l,fill:u,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,u=r.data,l=r.children,c=r.padding,f=W.Children.only(l);return f?$.cloneElement(f,{x:i,y:o,width:a,height:s,margin:c,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,a,s=this,u=this.props,l=u.y,c=u.travellerWidth,f=u.height,d=u.traveller,p=u.ariaLabel,_=u.data,y=u.startIndex,b=u.endIndex,v=Math.max(r,this.props.x),g=S0(S0({},be(this.props,!1)),{},{x:v,y:l,width:c,height:f}),E=p||"Min value: ".concat((o=_[y])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=_[b])===null||a===void 0?void 0:a.name);return $.createElement(ze,{tabIndex:0,role:"slider","aria-label":E,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(T){["ArrowLeft","ArrowRight"].includes(T.key)&&(T.preventDefault(),T.stopPropagation(),s.handleTravellerMoveKeyboard(T.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,g))}},{key:"renderSlide",value:function(r,i){var o=this.props,a=o.y,s=o.height,u=o.stroke,l=o.travellerWidth,c=Math.min(r,i)+l,f=Math.max(Math.abs(i-r)-l,0);return $.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:c,y:a,width:f,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,a=r.y,s=r.height,u=r.travellerWidth,l=r.stroke,c=this.state,f=c.startX,d=c.endX,p=5,_={pointerEvents:"none",fill:l};return $.createElement(ze,{className:"recharts-brush-texts"},$.createElement(Ag,Zg({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,d)-p,y:a+s/2},_),this.getTextOfTick(i)),$.createElement(Ag,Zg({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,d)+u+p,y:a+s/2},_),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,a=r.children,s=r.x,u=r.y,l=r.width,c=r.height,f=r.alwaysShowText,d=this.state,p=d.startX,_=d.endX,y=d.isTextActive,b=d.isSlideMoving,v=d.isTravellerMoving,g=d.isTravellerFocused;if(!i||!i.length||!ee(s)||!ee(u)||!ee(l)||!ee(c)||l<=0||c<=0)return null;var E=Ce("recharts-brush",o),P=$.Children.count(a)===1,T=yye("userSelect","none");return $.createElement(ze,{className:E,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:T},this.renderBackground(),P&&this.renderPanorama(),this.renderSlide(p,_),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(_,"endX"),(y||b||v||g||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,a=r.width,s=r.height,u=r.stroke,l=Math.floor(o+s/2)-1;return $.createElement($.Fragment,null,$.createElement("rect",{x:i,y:o,width:a,height:s,fill:u,stroke:"none"}),$.createElement("line",{x1:i+1,y1:l,x2:i+a-1,y2:l,fill:"none",stroke:"#fff"}),$.createElement("line",{x1:i+1,y1:l+2,x2:i+a-1,y2:l+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return $.isValidElement(r)?o=$.cloneElement(r,i):ye(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,a=r.width,s=r.x,u=r.travellerWidth,l=r.updateId,c=r.startIndex,f=r.endIndex;if(o!==i.prevData||l!==i.prevUpdateId)return S0({prevData:o,prevTravellerWidth:u,prevUpdateId:l,prevX:s,prevWidth:a},o&&o.length?Sye({data:o,width:a,x:s,travellerWidth:u,startIndex:c,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||u!==i.prevTravellerWidth)){i.scale.range([s,s+a-u]);var d=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:o,prevTravellerWidth:u,prevUpdateId:l,prevX:s,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,a=0,s=o-1;s-a>1;){var u=Math.floor((a+s)/2);r[u]>i?s=u:a=u}return i>=r[s]?s:a}}])}(W.PureComponent);Bn(Il,"displayName","Brush");Bn(Il,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Aye=yT;function Iye(t,e){var n;return Aye(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var Pye=Iye,Oye=aL,Cye=ma,kye=Pye,Rye=Ln,Nye=Cv;function Dye(t,e,n){var r=Rye(t)?Oye:kye;return n&&Nye(t,e,n)&&(e=void 0),r(t,Cye(e))}var jye=Dye;const Mye=Ge(jye);var ii=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},TR=PL;function $ye(t,e,n){e=="__proto__"&&TR?TR(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Vye=$ye,Lye=Vye,Fye=AL,Bye=ma;function Uye(t,e){var n={};return e=Bye(e),Fye(t,function(r,i,o){Lye(n,i,e(r,i,o))}),n}var zye=Uye;const qye=Ge(zye);function Wye(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var Hye=Wye,Gye=yT;function Kye(t,e){var n=!0;return Gye(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var Qye=Kye,Yye=Hye,Xye=Qye,Jye=ma,Zye=Ln,eve=Cv;function tve(t,e,n){var r=Zye(t)?Yye:Xye;return n&&eve(t,e,n)&&(e=void 0),r(t,Jye(e))}var nve=tve;const i4=Ge(nve);var rve=["x","y"];function rd(t){"@babel/helpers - typeof";return rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rd(t)}function y1(){return y1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y1.apply(this,arguments)}function SR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function of(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SR(Object(n),!0).forEach(function(r){ive(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ive(t,e,n){return e=ove(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ove(t){var e=ave(t,"string");return rd(e)=="symbol"?e:e+""}function ave(t,e){if(rd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sve(t,e){if(t==null)return{};var n=uve(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function lve(t,e){var n=t.x,r=t.y,i=sve(t,rve),o="".concat(n),a=parseInt(o,10),s="".concat(r),u=parseInt(s,10),l="".concat(e.height||i.height),c=parseInt(l,10),f="".concat(e.width||i.width),d=parseInt(f,10);return of(of(of(of(of({},e),i),a?{x:a}:{}),u?{y:u}:{}),{},{height:c,width:d,name:e.name,radius:e.radius})}function AR(t){return $.createElement(m1,y1({shapeType:"rectangle",propTransformer:lve,activeClassName:"recharts-active-bar"},t))}var cve=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=ee(r)||xX(r);return o?e(r,i):(o||Ts(),n)}},fve=["value","background"],o4;function Pl(t){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(t)}function hve(t,e){if(t==null)return{};var n=dve(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ty(){return ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ty.apply(this,arguments)}function IR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IR(Object(n),!0).forEach(function(r){Co(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s4(r.key),r)}}function mve(t,e,n){return e&&PR(t.prototype,e),n&&PR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gve(t,e,n){return e=ny(e),yve(t,a4()?Reflect.construct(e,n||[],ny(t).constructor):e.apply(t,n))}function yve(t,e){if(e&&(Pl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vve(t)}function vve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a4=function(){return!!t})()}function ny(t){return ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ny(t)}function _ve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v1(t,e)}function v1(t,e){return v1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},v1(t,e)}function Co(t,e,n){return e=s4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s4(t){var e=wve(t,"string");return Pl(e)=="symbol"?e:e+""}function wve(t,e){if(Pl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fs=function(t){function e(){var n;pve(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=gve(this,e,[].concat(i)),Co(n,"state",{isAnimationFinished:!1}),Co(n,"id",fc("recharts-bar-")),Co(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Co(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return _ve(e,t),mve(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,a=o.shape,s=o.dataKey,u=o.activeIndex,l=o.activeBar,c=be(this.props,!1);return r&&r.map(function(f,d){var p=d===u,_=p?l:a,y=It(It(It({},c),f),{},{isActive:p,option:_,index:d,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return $.createElement(ze,ty({className:"recharts-bar-rectangle"},Ah(i.props,f,d),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(d)}),$.createElement(AR,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,u=i.animationBegin,l=i.animationDuration,c=i.animationEasing,f=i.animationId,d=this.state.prevData;return $.createElement(si,{begin:u,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var _=p.t,y=o.map(function(b,v){var g=d&&d[v];if(g){var E=dn(g.x,b.x),P=dn(g.y,b.y),T=dn(g.width,b.width),A=dn(g.height,b.height);return It(It({},b),{},{x:E(_),y:P(_),width:T(_),height:A(_)})}if(a==="horizontal"){var x=dn(0,b.height),S=x(_);return It(It({},b),{},{y:b.y+b.height-S,height:S})}var O=dn(0,b.width),C=O(_);return It(It({},b),{},{width:C})});return $.createElement(ze,null,r.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!xl(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,u=be(this.props.background,!1);return o.map(function(l,c){l.value;var f=l.background,d=hve(l,fve);if(!f)return null;var p=It(It(It(It(It({},d),{},{fill:"#eee"},f),u),Ah(r.props,l,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:c,className:"recharts-bar-background-rectangle"});return $.createElement(AR,ty({key:"background-bar-".concat(c),option:r.props.background,isActive:c===s},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,u=o.yAxis,l=o.layout,c=o.children,f=Yn(c,Ld);if(!f)return null;var d=l==="vertical"?a[0].height/2:a[0].width/2,p=function(b,v){var g=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:g,errorVal:rn(b,v)}},_={clipPath:r?"url(#clipPath-".concat(i,")"):null};return $.createElement(ze,_,f.map(function(y){return $.cloneElement(y,{key:"error-bar-".concat(i,"-").concat(y.props.dataKey),data:a,xAxis:s,yAxis:u,layout:l,offset:d,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,a=r.className,s=r.xAxis,u=r.yAxis,l=r.left,c=r.top,f=r.width,d=r.height,p=r.isAnimationActive,_=r.background,y=r.id;if(i||!o||!o.length)return null;var b=this.state.isAnimationFinished,v=Ce("recharts-bar",a),g=s&&s.allowDataOverflow,E=u&&u.allowDataOverflow,P=g||E,T=ve(y)?this.id:y;return $.createElement(ze,{className:v},g||E?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(T)},$.createElement("rect",{x:g?l:l-f/2,y:E?c:c-d/2,width:g?f:f*2,height:E?d:d*2}))):null,$.createElement(ze,{className:"recharts-bar-rectangles",clipPath:P?"url(#clipPath-".concat(T,")"):null},_?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(P,T),(!p||b)&&Pi.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(W.PureComponent);o4=Fs;Co(Fs,"displayName","Bar");Co(Fs,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ms.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Co(Fs,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,u=t.yAxisTicks,l=t.stackedData,c=t.dataStartIndex,f=t.displayedData,d=t.offset,p=Ghe(r,n);if(!p)return null;var _=e.layout,y=n.type.defaultProps,b=y!==void 0?It(It({},y),n.props):n.props,v=b.dataKey,g=b.children,E=b.minPointSize,P=_==="horizontal"?a:o,T=l?P.scale.domain():null,A=tde({numericAxis:P}),x=Yn(g,wT),S=f.map(function(O,C){var k,N,R,j,M,F;l?k=Khe(l[c+C],T):(k=rn(O,v),Array.isArray(k)||(k=[A,k]));var L=cve(E,o4.defaultProps.minPointSize)(k[1],C);if(_==="horizontal"){var V,H=[a.scale(k[0]),a.scale(k[1])],Q=H[0],ie=H[1];N=Ck({axis:o,ticks:s,bandSize:i,offset:p.offset,entry:O,index:C}),R=(V=ie??Q)!==null&&V!==void 0?V:void 0,j=p.size;var J=Q-ie;if(M=Number.isNaN(J)?0:J,F={x:N,y:a.y,width:j,height:a.height},Math.abs(L)>0&&Math.abs(M)<Math.abs(L)){var fe=Or(M||L)*(Math.abs(L)-Math.abs(M));R-=fe,M+=fe}}else{var Ee=[o.scale(k[0]),o.scale(k[1])],Be=Ee[0],Ze=Ee[1];if(N=Be,R=Ck({axis:a,ticks:u,bandSize:i,offset:p.offset,entry:O,index:C}),j=Ze-Be,M=p.size,F={x:o.x,y:R,width:o.width,height:M},Math.abs(L)>0&&Math.abs(j)<Math.abs(L)){var an=Or(j||L)*(Math.abs(L)-Math.abs(j));j+=an}}return It(It(It({},O),{},{x:N,y:R,width:j,height:M,value:l?k:k[1],payload:O,background:F},x&&x[C]&&x[C].props),{},{tooltipPayload:[LF(n,O)],tooltipPosition:{x:N+j/2,y:R+M/2}})});return It({data:S,layout:_},d)});function id(t){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},id(t)}function bve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u4(r.key),r)}}function Eve(t,e,n){return e&&OR(t.prototype,e),n&&OR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function CR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CR(Object(n),!0).forEach(function(r){Uv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uv(t,e,n){return e=u4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u4(t){var e=xve(t,"string");return id(e)=="symbol"?e:e+""}function xve(t,e){if(id(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KT=function(e,n,r,i,o){var a=e.width,s=e.height,u=e.layout,l=e.children,c=Object.keys(n),f={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},d=!!zn(l,Fs);return c.reduce(function(p,_){var y=n[_],b=y.orientation,v=y.domain,g=y.padding,E=g===void 0?{}:g,P=y.mirror,T=y.reversed,A="".concat(b).concat(P?"Mirror":""),x,S,O,C,k;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var N=v[1]-v[0],R=1/0,j=y.categoricalDomain.sort(IX);if(j.forEach(function(Ee,Be){Be>0&&(R=Math.min((Ee||0)-(j[Be-1]||0),R))}),Number.isFinite(R)){var M=R/N,F=y.layout==="vertical"?r.height:r.width;if(y.padding==="gap"&&(x=M*F/2),y.padding==="no-gap"){var L=Es(e.barCategoryGap,M*F),V=M*F/2;x=V-L-(V-L)/F*L}}}i==="xAxis"?S=[r.left+(E.left||0)+(x||0),r.left+r.width-(E.right||0)-(x||0)]:i==="yAxis"?S=u==="horizontal"?[r.top+r.height-(E.bottom||0),r.top+(E.top||0)]:[r.top+(E.top||0)+(x||0),r.top+r.height-(E.bottom||0)-(x||0)]:S=y.range,T&&(S=[S[1],S[0]]);var H=Whe(y,o,d),Q=H.scale,ie=H.realScaleType;Q.domain(v).range(S),Hhe(Q);var J=ede(Q,Tr(Tr({},y),{},{realScaleType:ie}));i==="xAxis"?(k=b==="top"&&!P||b==="bottom"&&P,O=r.left,C=f[A]-k*y.height):i==="yAxis"&&(k=b==="left"&&!P||b==="right"&&P,O=f[A]-k*y.width,C=r.top);var fe=Tr(Tr(Tr({},y),J),{},{realScaleType:ie,x:O,y:C,scale:Q,width:i==="xAxis"?r.width:y.width,height:i==="yAxis"?r.height:y.height});return fe.bandSize=Ug(fe,J),!y.hide&&i==="xAxis"?f[A]+=(k?-1:1)*fe.height:y.hide||(f[A]+=(k?-1:1)*fe.width),Tr(Tr({},p),{},Uv({},_,fe))},{})},l4=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return{x:Math.min(r,o),y:Math.min(i,a),width:Math.abs(o-r),height:Math.abs(a-i)}},Tve=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return l4({x:n,y:r},{x:i,y:o})},c4=function(){function t(e){bve(this,t),this.scale=e}return Eve(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+u}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();Uv(c4,"EPS",1e-4);var QT=function(e){var n=Object.keys(e).reduce(function(r,i){return Tr(Tr({},r),{},Uv({},i,c4.create(e[i])))},{});return Tr(Tr({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return qye(i,function(u,l){return n[l].apply(u,{bandAware:a,position:s})})},isInRange:function(i){return i4(i,function(o,a){return n[a].isInRange(o)})}})};function Sve(t){return(t%180+180)%180}var Ave=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Sve(i),a=o*Math.PI/180,s=Math.atan(r/n),u=a>s&&a<Math.PI-s?r/Math.sin(a):n/Math.cos(a);return Math.abs(u)},Ive=ma,Pve=Dd,Ove=Pv;function Cve(t){return function(e,n,r){var i=Object(e);if(!Pve(e)){var o=Ive(n);e=Ove(e),n=function(s){return o(i[s],s,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}var kve=Cve,Rve=e4;function Nve(t){var e=Rve(t),n=e%1;return e===e?n?e-n:e:0}var Dve=Nve,jve=wL,Mve=ma,$ve=Dve,Vve=Math.max;function Lve(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:$ve(n);return i<0&&(i=Vve(r+i,0)),jve(t,Mve(e),i)}var Fve=Lve,Bve=kve,Uve=Fve,zve=Bve(Uve),qve=zve;const Wve=Ge(qve);var Hve=OY(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),YT=W.createContext(void 0),XT=W.createContext(void 0),f4=W.createContext(void 0),h4=W.createContext({}),d4=W.createContext(void 0),p4=W.createContext(0),m4=W.createContext(0),kR=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,a=e.clipPathId,s=e.children,u=e.width,l=e.height,c=Hve(o);return $.createElement(YT.Provider,{value:r},$.createElement(XT.Provider,{value:i},$.createElement(h4.Provider,{value:o},$.createElement(f4.Provider,{value:c},$.createElement(d4.Provider,{value:a},$.createElement(p4.Provider,{value:l},$.createElement(m4.Provider,{value:u},s)))))))},Gve=function(){return W.useContext(d4)},g4=function(e){var n=W.useContext(YT);n==null&&Ts();var r=n[e];return r==null&&Ts(),r},Kve=function(){var e=W.useContext(YT);return To(e)},Qve=function(){var e=W.useContext(XT),n=Wve(e,function(r){return i4(r.domain,Number.isFinite)});return n||To(e)},y4=function(e){var n=W.useContext(XT);n==null&&Ts();var r=n[e];return r==null&&Ts(),r},Yve=function(){var e=W.useContext(f4);return e},Xve=function(){return W.useContext(h4)},JT=function(){return W.useContext(m4)},ZT=function(){return W.useContext(p4)};function Ol(t){"@babel/helpers - typeof";return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ol(t)}function Jve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_4(r.key),r)}}function e_e(t,e,n){return e&&Zve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function t_e(t,e,n){return e=ry(e),n_e(t,v4()?Reflect.construct(e,n||[],ry(t).constructor):e.apply(t,n))}function n_e(t,e){if(e&&(Ol(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r_e(t)}function r_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v4=function(){return!!t})()}function ry(t){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ry(t)}function i_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_1(t,e)}function _1(t,e){return _1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_1(t,e)}function RR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RR(Object(n),!0).forEach(function(r){eS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eS(t,e,n){return e=_4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _4(t){var e=o_e(t,"string");return Ol(e)=="symbol"?e:e+""}function o_e(t,e){if(Ol(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ol(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function a_e(t,e){return c_e(t)||l_e(t,e)||u_e(t,e)||s_e()}function s_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u_e(t,e){if(t){if(typeof t=="string")return DR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DR(t,e)}}function DR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function c_e(t){if(Array.isArray(t))return t}function w1(){return w1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w1.apply(this,arguments)}var f_e=function(e,n){var r;return $.isValidElement(e)?r=$.cloneElement(e,n):ye(e)?r=e(n):r=$.createElement("line",w1({},n,{className:"recharts-reference-line-line"})),r},h_e=function(e,n,r,i,o,a,s,u,l){var c=o.x,f=o.y,d=o.width,p=o.height;if(r){var _=l.y,y=e.y.apply(_,{position:a});if(ii(l,"discard")&&!e.y.isInRange(y))return null;var b=[{x:c+d,y},{x:c,y}];return u==="left"?b.reverse():b}if(n){var v=l.x,g=e.x.apply(v,{position:a});if(ii(l,"discard")&&!e.x.isInRange(g))return null;var E=[{x:g,y:f+p},{x:g,y:f}];return s==="top"?E.reverse():E}if(i){var P=l.segment,T=P.map(function(A){return e.apply(A,{position:a})});return ii(l,"discard")&&Mye(T,function(A){return!e.isInRange(A)})?null:T}return null};function d_e(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,a=t.shape,s=t.className,u=t.alwaysShow,l=Gve(),c=g4(i),f=y4(o),d=Yve();if(!l||!d)return null;Ai(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=QT({x:c.scale,y:f.scale}),_=Mt(e),y=Mt(n),b=r&&r.length===2,v=h_e(p,_,y,b,d,t.position,c.orientation,f.orientation,t);if(!v)return null;var g=a_e(v,2),E=g[0],P=E.x,T=E.y,A=g[1],x=A.x,S=A.y,O=ii(t,"hidden")?"url(#".concat(l,")"):void 0,C=NR(NR({clipPath:O},be(t,!0)),{},{x1:P,y1:T,x2:x,y2:S});return $.createElement(ze,{className:Ce("recharts-reference-line",s)},f_e(a,C),pn.renderCallByParent(t,Tve({x1:P,y1:T,x2:x,y2:S})))}var Ha=function(t){function e(){return Jve(this,e),t_e(this,e,arguments)}return i_e(e,t),e_e(e,[{key:"render",value:function(){return $.createElement(d_e,this.props)}}])}($.Component);eS(Ha,"displayName","ReferenceLine");eS(Ha,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function b1(){return b1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b1.apply(this,arguments)}function Cl(t){"@babel/helpers - typeof";return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl(t)}function jR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jR(Object(n),!0).forEach(function(r){zv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m_e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b4(r.key),r)}}function g_e(t,e,n){return e&&m_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function y_e(t,e,n){return e=iy(e),v_e(t,w4()?Reflect.construct(e,n||[],iy(t).constructor):e.apply(t,n))}function v_e(t,e){if(e&&(Cl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return __e(t)}function __e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w4=function(){return!!t})()}function iy(t){return iy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iy(t)}function w_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E1(t,e)}function E1(t,e){return E1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},E1(t,e)}function zv(t,e,n){return e=b4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b4(t){var e=b_e(t,"string");return Cl(e)=="symbol"?e:e+""}function b_e(t,e){if(Cl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var E_e=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,a=QT({x:i.scale,y:o.scale}),s=a.apply({x:n,y:r},{bandAware:!0});return ii(e,"discard")&&!a.isInRange(s)?null:s},qv=function(t){function e(){return p_e(this,e),y_e(this,e,arguments)}return w_e(e,t),g_e(e,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,a=r.r,s=r.alwaysShow,u=r.clipPathId,l=Mt(i),c=Mt(o);if(Ai(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!c)return null;var f=E_e(this.props);if(!f)return null;var d=f.x,p=f.y,_=this.props,y=_.shape,b=_.className,v=ii(this.props,"hidden")?"url(#".concat(u,")"):void 0,g=MR(MR({clipPath:v},be(this.props,!0)),{},{cx:d,cy:p});return $.createElement(ze,{className:Ce("recharts-reference-dot",b)},e.renderDot(y,g),pn.renderCallByParent(this.props,{x:d-a,y:p-a,width:2*a,height:2*a}))}}])}($.Component);zv(qv,"displayName","ReferenceDot");zv(qv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});zv(qv,"renderDot",function(t,e){var n;return $.isValidElement(t)?n=$.cloneElement(t,e):ye(t)?n=t(e):n=$.createElement(GT,b1({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function x1(){return x1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x1.apply(this,arguments)}function kl(t){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kl(t)}function $R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$R(Object(n),!0).forEach(function(r){Wv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$R(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T_e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x4(r.key),r)}}function S_e(t,e,n){return e&&T_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function A_e(t,e,n){return e=oy(e),I_e(t,E4()?Reflect.construct(e,n||[],oy(t).constructor):e.apply(t,n))}function I_e(t,e){if(e&&(kl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P_e(t)}function P_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E4=function(){return!!t})()}function oy(t){return oy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},oy(t)}function O_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T1(t,e)}function T1(t,e){return T1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},T1(t,e)}function Wv(t,e,n){return e=x4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x4(t){var e=C_e(t,"string");return kl(e)=="symbol"?e:e+""}function C_e(t,e){if(kl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var k_e=function(e,n,r,i,o){var a=o.x1,s=o.x2,u=o.y1,l=o.y2,c=o.xAxis,f=o.yAxis;if(!c||!f)return null;var d=QT({x:c.scale,y:f.scale}),p={x:e?d.x.apply(a,{position:"start"}):d.x.rangeMin,y:r?d.y.apply(u,{position:"start"}):d.y.rangeMin},_={x:n?d.x.apply(s,{position:"end"}):d.x.rangeMax,y:i?d.y.apply(l,{position:"end"}):d.y.rangeMax};return ii(o,"discard")&&(!d.isInRange(p)||!d.isInRange(_))?null:l4(p,_)},Hv=function(t){function e(){return x_e(this,e),A_e(this,e,arguments)}return O_e(e,t),S_e(e,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,a=r.y1,s=r.y2,u=r.className,l=r.alwaysShow,c=r.clipPathId;Ai(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Mt(i),d=Mt(o),p=Mt(a),_=Mt(s),y=this.props.shape;if(!f&&!d&&!p&&!_&&!y)return null;var b=k_e(f,d,p,_,this.props);if(!b&&!y)return null;var v=ii(this.props,"hidden")?"url(#".concat(c,")"):void 0;return $.createElement(ze,{className:Ce("recharts-reference-area",u)},e.renderRect(y,VR(VR({clipPath:v},be(this.props,!0)),b)),pn.renderCallByParent(this.props,b))}}])}($.Component);Wv(Hv,"displayName","ReferenceArea");Wv(Hv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Wv(Hv,"renderRect",function(t,e){var n;return $.isValidElement(t)?n=$.cloneElement(t,e):ye(t)?n=t(e):n=$.createElement(HT,x1({},e,{className:"recharts-reference-area-rect"})),n});function T4(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function R_e(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Ave(r,n)}function N_e(t,e,n){var r=n==="width",i=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}function ay(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function D_e(t,e){return T4(t,e+1)}function j_e(t,e,n,r,i){for(var o=(r||[]).slice(),a=e.start,s=e.end,u=0,l=1,c=a,f=function(){var _=r==null?void 0:r[u];if(_===void 0)return{v:T4(r,l)};var y=u,b,v=function(){return b===void 0&&(b=n(_,y)),b},g=_.coordinate,E=u===0||ay(t,g,v,c,s);E||(u=0,c=a,l+=1),E&&(c=g+t*(v()/2+i),u+=l)},d;l<=o.length;)if(d=f(),d)return d.v;return[]}function od(t){"@babel/helpers - typeof";return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},od(t)}function LR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LR(Object(n),!0).forEach(function(r){M_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M_e(t,e,n){return e=$_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $_e(t){var e=V_e(t,"string");return od(e)=="symbol"?e:e+""}function V_e(t,e){if(od(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L_e(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,u=e.end,l=function(d){var p=o[d],_,y=function(){return _===void 0&&(_=n(p,d)),_};if(d===a-1){var b=t*(p.coordinate+t*y()/2-u);o[d]=p=cn(cn({},p),{},{tickCoord:b>0?p.coordinate-b*t:p.coordinate})}else o[d]=p=cn(cn({},p),{},{tickCoord:p.coordinate});var v=ay(t,p.tickCoord,y,s,u);v&&(u=p.tickCoord-t*(y()/2+i),o[d]=cn(cn({},p),{},{isShow:!0}))},c=a-1;c>=0;c--)l(c);return o}function F_e(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,u=e.start,l=e.end;if(o){var c=r[s-1],f=n(c,s-1),d=t*(c.coordinate+t*f/2-l);a[s-1]=c=cn(cn({},c),{},{tickCoord:d>0?c.coordinate-d*t:c.coordinate});var p=ay(t,c.tickCoord,function(){return f},u,l);p&&(l=c.tickCoord-t*(f/2+i),a[s-1]=cn(cn({},c),{},{isShow:!0}))}for(var _=o?s-1:s,y=function(g){var E=a[g],P,T=function(){return P===void 0&&(P=n(E,g)),P};if(g===0){var A=t*(E.coordinate-t*T()/2-u);a[g]=E=cn(cn({},E),{},{tickCoord:A<0?E.coordinate-A*t:E.coordinate})}else a[g]=E=cn(cn({},E),{},{tickCoord:E.coordinate});var x=ay(t,E.tickCoord,T,u,l);x&&(u=E.tickCoord+t*(T()/2+i),a[g]=cn(cn({},E),{},{isShow:!0}))},b=0;b<_;b++)y(b);return a}function tS(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,u=t.interval,l=t.tickFormatter,c=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(ee(u)||Ms.isSsr)return D_e(i,typeof u=="number"&&ee(u)?u:0);var d=[],p=s==="top"||s==="bottom"?"width":"height",_=c&&p==="width"?Bf(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},y=function(E,P){var T=ye(l)?l(E.value,P):E.value;return p==="width"?R_e(Bf(T,{fontSize:e,letterSpacing:n}),_,f):Bf(T,{fontSize:e,letterSpacing:n})[p]},b=i.length>=2?Or(i[1].coordinate-i[0].coordinate):1,v=N_e(o,b,p);return u==="equidistantPreserveStart"?j_e(b,v,y,i,a):(u==="preserveStart"||u==="preserveStartEnd"?d=F_e(b,v,y,i,a,u==="preserveStartEnd"):d=L_e(b,v,y,i,a),d.filter(function(g){return g.isShow}))}var B_e=["viewBox"],U_e=["viewBox"],z_e=["ticks"];function Rl(t){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rl(t)}function wu(){return wu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wu.apply(this,arguments)}function FR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FR(Object(n),!0).forEach(function(r){nS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function A0(t,e){if(t==null)return{};var n=q_e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function q_e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function W_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A4(r.key),r)}}function H_e(t,e,n){return e&&BR(t.prototype,e),n&&BR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function G_e(t,e,n){return e=sy(e),K_e(t,S4()?Reflect.construct(e,n||[],sy(t).constructor):e.apply(t,n))}function K_e(t,e){if(e&&(Rl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q_e(t)}function Q_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S4=function(){return!!t})()}function sy(t){return sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sy(t)}function Y_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S1(t,e)}function S1(t,e){return S1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},S1(t,e)}function nS(t,e,n){return e=A4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A4(t){var e=X_e(t,"string");return Rl(e)=="symbol"?e:e+""}function X_e(t,e){if(Rl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vc=function(t){function e(n){var r;return W_e(this,e),r=G_e(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Y_e(e,t),H_e(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,a=A0(r,B_e),s=this.props,u=s.viewBox,l=A0(s,U_e);return!ju(o,u)||!ju(a,l)||!ju(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,a=i.y,s=i.width,u=i.height,l=i.orientation,c=i.tickSize,f=i.mirror,d=i.tickMargin,p,_,y,b,v,g,E=f?-1:1,P=r.tickSize||c,T=ee(r.tickCoord)?r.tickCoord:r.coordinate;switch(l){case"top":p=_=r.coordinate,b=a+ +!f*u,y=b-E*P,g=y-E*d,v=T;break;case"left":y=b=r.coordinate,_=o+ +!f*s,p=_-E*P,v=p-E*d,g=T;break;case"right":y=b=r.coordinate,_=o+ +f*s,p=_+E*P,v=p+E*d,g=T;break;default:p=_=r.coordinate,b=a+ +f*u,y=b+E*P,g=y+E*d,v=T;break}return{line:{x1:p,y1:y,x2:_,y2:b},tick:{x:v,y:g}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,u=r.orientation,l=r.mirror,c=r.axisLine,f=Rt(Rt(Rt({},be(this.props,!1)),be(c,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var d=+(u==="top"&&!l||u==="bottom"&&l);f=Rt(Rt({},f),{},{x1:i,y1:o+d*s,x2:i+a,y2:o+d*s})}else{var p=+(u==="left"&&!l||u==="right"&&l);f=Rt(Rt({},f),{},{x1:i+p*a,y1:o,x2:i+p*a,y2:o+s})}return $.createElement("line",wu({},f,{className:Ce("recharts-cartesian-axis-line",hr(c,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var a=this,s=this.props,u=s.tickLine,l=s.stroke,c=s.tick,f=s.tickFormatter,d=s.unit,p=tS(Rt(Rt({},this.props),{},{ticks:r}),i,o),_=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),b=be(this.props,!1),v=be(c,!1),g=Rt(Rt({},b),{},{fill:"none"},be(u,!1)),E=p.map(function(P,T){var A=a.getTickLineCoord(P),x=A.line,S=A.tick,O=Rt(Rt(Rt(Rt({textAnchor:_,verticalAnchor:y},b),{},{stroke:"none",fill:l},v),S),{},{index:T,payload:P,visibleTicksCount:p.length,tickFormatter:f});return $.createElement(ze,wu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},Ah(a.props,P,T)),u&&$.createElement("line",wu({},g,x,{className:Ce("recharts-cartesian-axis-tick-line",hr(u,"className"))})),c&&e.renderTickItem(c,O,"".concat(ye(f)?f(P.value,T):P.value).concat(d||"")))});return $.createElement("g",{className:"recharts-cartesian-axis-ticks"},E)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,u=i.ticksGenerator,l=i.className,c=i.hide;if(c)return null;var f=this.props,d=f.ticks,p=A0(f,z_e),_=d;return ye(u)&&(_=d&&d.length>0?u(this.props):u(p)),a<=0||s<=0||!_||!_.length?null:$.createElement(ze,{className:Ce("recharts-cartesian-axis",l),ref:function(b){r.layerReference=b}},o&&this.renderAxisLine(),this.renderTicks(_,this.state.fontSize,this.state.letterSpacing),pn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var a,s=Ce(i.className,"recharts-cartesian-axis-tick-value");return $.isValidElement(r)?a=$.cloneElement(r,Rt(Rt({},i),{},{className:s})):ye(r)?a=r(Rt(Rt({},i),{},{className:s})):a=$.createElement(Ag,wu({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(W.Component);nS(vc,"displayName","CartesianAxis");nS(vc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var J_e=["x1","y1","x2","y2","key"],Z_e=["offset"];function Ss(t){"@babel/helpers - typeof";return Ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ss(t)}function UR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UR(Object(n),!0).forEach(function(r){e0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e0e(t,e,n){return e=t0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t0e(t){var e=n0e(t,"string");return Ss(e)=="symbol"?e:e+""}function n0e(t,e){if(Ss(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ss(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ga(){return Ga=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ga.apply(this,arguments)}function zR(t,e){if(t==null)return{};var n=r0e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function r0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var i0e=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,o=e.y,a=e.width,s=e.height,u=e.ry;return $.createElement("rect",{x:i,y:o,ry:u,width:a,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function I4(t,e){var n;if($.isValidElement(t))n=$.cloneElement(t,e);else if(ye(t))n=t(e);else{var r=e.x1,i=e.y1,o=e.x2,a=e.y2,s=e.key,u=zR(e,J_e),l=be(u,!1);l.offset;var c=zR(l,Z_e);n=$.createElement("line",Ga({},c,{x1:r,y1:i,x2:o,y2:a,fill:"none",key:s}))}return n}function o0e(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,o=t.horizontalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,u){var l=mn(mn({},t),{},{x1:e,y1:s,x2:e+n,y2:s,key:"line-".concat(u),index:u});return I4(i,l)});return $.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function a0e(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,o=t.verticalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,u){var l=mn(mn({},t),{},{x1:s,y1:e,x2:s,y2:e+n,key:"line-".concat(u),index:u});return I4(i,l)});return $.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function s0e(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,o=t.width,a=t.height,s=t.horizontalPoints,u=t.horizontal,l=u===void 0?!0:u;if(!l||!e||!e.length)return null;var c=s.map(function(d){return Math.round(d+i-i)}).sort(function(d,p){return d-p});i!==c[0]&&c.unshift(0);var f=c.map(function(d,p){var _=!c[p+1],y=_?i+a-d:c[p+1]-d;if(y<=0)return null;var b=p%e.length;return $.createElement("rect",{key:"react-".concat(p),y:d,x:r,height:y,width:o,stroke:"none",fill:e[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function u0e(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,o=t.x,a=t.y,s=t.width,u=t.height,l=t.verticalPoints;if(!n||!r||!r.length)return null;var c=l.map(function(d){return Math.round(d+o-o)}).sort(function(d,p){return d-p});o!==c[0]&&c.unshift(0);var f=c.map(function(d,p){var _=!c[p+1],y=_?o+s-d:c[p+1]-d;if(y<=0)return null;var b=p%r.length;return $.createElement("rect",{key:"react-".concat(p),x:d,y:a,width:y,height:u,stroke:"none",fill:r[b],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var l0e=function(e,n){var r=e.xAxis,i=e.width,o=e.height,a=e.offset;return $F(tS(mn(mn(mn({},vc.defaultProps),r),{},{ticks:bi(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.left,a.left+a.width,n)},c0e=function(e,n){var r=e.yAxis,i=e.width,o=e.height,a=e.offset;return $F(tS(mn(mn(mn({},vc.defaultProps),r),{},{ticks:bi(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.top,a.top+a.height,n)},eu={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function vf(t){var e,n,r,i,o,a,s=JT(),u=ZT(),l=Xve(),c=mn(mn({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:eu.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:eu.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:eu.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:eu.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:eu.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:eu.verticalFill,x:ee(t.x)?t.x:l.left,y:ee(t.y)?t.y:l.top,width:ee(t.width)?t.width:l.width,height:ee(t.height)?t.height:l.height}),f=c.x,d=c.y,p=c.width,_=c.height,y=c.syncWithTicks,b=c.horizontalValues,v=c.verticalValues,g=Kve(),E=Qve();if(!ee(p)||p<=0||!ee(_)||_<=0||!ee(f)||f!==+f||!ee(d)||d!==+d)return null;var P=c.verticalCoordinatesGenerator||l0e,T=c.horizontalCoordinatesGenerator||c0e,A=c.horizontalPoints,x=c.verticalPoints;if((!A||!A.length)&&ye(T)){var S=b&&b.length,O=T({yAxis:E?mn(mn({},E),{},{ticks:S?b:E.ticks}):void 0,width:s,height:u,offset:l},S?!0:y);Ai(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ss(O),"]")),Array.isArray(O)&&(A=O)}if((!x||!x.length)&&ye(P)){var C=v&&v.length,k=P({xAxis:g?mn(mn({},g),{},{ticks:C?v:g.ticks}):void 0,width:s,height:u,offset:l},C?!0:y);Ai(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ss(k),"]")),Array.isArray(k)&&(x=k)}return $.createElement("g",{className:"recharts-cartesian-grid"},$.createElement(i0e,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),$.createElement(o0e,Ga({},c,{offset:l,horizontalPoints:A,xAxis:g,yAxis:E})),$.createElement(a0e,Ga({},c,{offset:l,verticalPoints:x,xAxis:g,yAxis:E})),$.createElement(s0e,Ga({},c,{horizontalPoints:A})),$.createElement(u0e,Ga({},c,{verticalPoints:x})))}vf.displayName="CartesianGrid";var f0e=["layout","type","stroke","connectNulls","isRange","ref"],h0e=["key"],P4;function Nl(t){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nl(t)}function O4(t,e){if(t==null)return{};var n=d0e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function d0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ka(){return Ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ka.apply(this,arguments)}function qR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function co(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qR(Object(n),!0).forEach(function(r){Yr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k4(r.key),r)}}function m0e(t,e,n){return e&&WR(t.prototype,e),n&&WR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function g0e(t,e,n){return e=uy(e),y0e(t,C4()?Reflect.construct(e,n||[],uy(t).constructor):e.apply(t,n))}function y0e(t,e){if(e&&(Nl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v0e(t)}function v0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C4=function(){return!!t})()}function uy(t){return uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uy(t)}function _0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A1(t,e)}function A1(t,e){return A1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},A1(t,e)}function Yr(t,e,n){return e=k4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k4(t){var e=w0e(t,"string");return Nl(e)=="symbol"?e:e+""}function w0e(t,e){if(Nl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bi=function(t){function e(){var n;p0e(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=g0e(this,e,[].concat(i)),Yr(n,"state",{isAnimationFinished:!0}),Yr(n,"id",fc("recharts-area-")),Yr(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ye(a)&&a()}),Yr(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ye(a)&&a()}),n}return _0e(e,t),m0e(e,[{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(a&&!s)return null;var u=this.props,l=u.dot,c=u.points,f=u.dataKey,d=be(this.props,!1),p=be(l,!0),_=c.map(function(b,v){var g=co(co(co({key:"dot-".concat(v),r:3},d),p),{},{index:v,cx:b.x,cy:b.y,dataKey:f,value:b.value,payload:b.payload,points:c});return e.renderDotItem(l,g)}),y={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return $.createElement(ze,Ka({className:"recharts-area-dots"},y),_)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,u=a[0].x,l=a[a.length-1].x,c=r*Math.abs(u-l),f=Oo(a.map(function(d){return d.y||0}));return ee(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(Oo(o.map(function(d){return d.y||0})),f)),ee(f)?$.createElement("rect",{x:u<l?u:u-c,y:0,width:c,height:Math.floor(f+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,u=a[0].y,l=a[a.length-1].y,c=r*Math.abs(u-l),f=Oo(a.map(function(d){return d.x||0}));return ee(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(Oo(o.map(function(d){return d.x||0})),f)),ee(f)?$.createElement("rect",{x:0,y:u<l?u:u-c,width:f+(s?parseInt("".concat(s),10):1),height:Math.floor(c)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,o,a){var s=this.props,u=s.layout,l=s.type,c=s.stroke,f=s.connectNulls,d=s.isRange;s.ref;var p=O4(s,f0e);return $.createElement(ze,{clipPath:o?"url(#clipPath-".concat(a,")"):null},$.createElement(Vu,Ka({},be(p,!0),{points:r,connectNulls:f,type:l,baseLine:i,layout:u,stroke:"none",className:"recharts-area-area"})),c!=="none"&&$.createElement(Vu,Ka({},be(this.props,!1),{className:"recharts-area-curve",layout:u,type:l,connectNulls:f,fill:"none",points:r})),c!=="none"&&d&&$.createElement(Vu,Ka({},be(this.props,!1),{className:"recharts-area-curve",layout:u,type:l,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var o=this,a=this.props,s=a.points,u=a.baseLine,l=a.isAnimationActive,c=a.animationBegin,f=a.animationDuration,d=a.animationEasing,p=a.animationId,_=this.state,y=_.prevPoints,b=_.prevBaseLine;return $.createElement(si,{begin:c,duration:f,isActive:l,easing:d,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var g=v.t;if(y){var E=y.length/s.length,P=s.map(function(S,O){var C=Math.floor(O*E);if(y[C]){var k=y[C],N=dn(k.x,S.x),R=dn(k.y,S.y);return co(co({},S),{},{x:N(g),y:R(g)})}return S}),T;if(ee(u)&&typeof u=="number"){var A=dn(b,u);T=A(g)}else if(ve(u)||cc(u)){var x=dn(b,0);T=x(g)}else T=u.map(function(S,O){var C=Math.floor(O*E);if(b[C]){var k=b[C],N=dn(k.x,S.x),R=dn(k.y,S.y);return co(co({},S),{},{x:N(g),y:R(g)})}return S});return o.renderAreaStatically(P,T,r,i)}return $.createElement(ze,null,$.createElement("defs",null,$.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.renderClipRect(g))),$.createElement(ze,{clipPath:"url(#animationClipPath-".concat(i,")")},o.renderAreaStatically(s,u,r,i)))})}},{key:"renderArea",value:function(r,i){var o=this.props,a=o.points,s=o.baseLine,u=o.isAnimationActive,l=this.state,c=l.prevPoints,f=l.prevBaseLine,d=l.totalLength;return u&&a&&a.length&&(!c&&d>0||!xl(c,a)||!xl(f,s))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,s,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,s=i.points,u=i.className,l=i.top,c=i.left,f=i.xAxis,d=i.yAxis,p=i.width,_=i.height,y=i.isAnimationActive,b=i.id;if(o||!s||!s.length)return null;var v=this.state.isAnimationFinished,g=s.length===1,E=Ce("recharts-area",u),P=f&&f.allowDataOverflow,T=d&&d.allowDataOverflow,A=P||T,x=ve(b)?this.id:b,S=(r=be(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},O=S.r,C=O===void 0?3:O,k=S.strokeWidth,N=k===void 0?2:k,R=MX(a)?a:{},j=R.clipDot,M=j===void 0?!0:j,F=C*2+N;return $.createElement(ze,{className:E},P||T?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(x)},$.createElement("rect",{x:P?c:c-p/2,y:T?l:l-_/2,width:P?p:p*2,height:T?_:_*2})),!M&&$.createElement("clipPath",{id:"clipPath-dots-".concat(x)},$.createElement("rect",{x:c-F/2,y:l-F/2,width:p+F,height:_+F}))):null,g?null:this.renderArea(A,x),(a||g)&&this.renderDots(A,M,x),(!y||v)&&Pi.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(W.PureComponent);P4=Bi;Yr(Bi,"displayName","Area");Yr(Bi,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ms.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Yr(Bi,"getBaseValue",function(t,e,n,r){var i=t.layout,o=t.baseValue,a=e.props.baseValue,s=a??o;if(ee(s)&&typeof s=="number")return s;var u=i==="horizontal"?r:n,l=u.scale.domain();if(u.type==="number"){var c=Math.max(l[0],l[1]),f=Math.min(l[0],l[1]);return s==="dataMin"?f:s==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return s==="dataMin"?l[0]:s==="dataMax"?l[1]:l[0]});Yr(Bi,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,o=t.xAxisTicks,a=t.yAxisTicks,s=t.bandSize,u=t.dataKey,l=t.stackedData,c=t.dataStartIndex,f=t.displayedData,d=t.offset,p=e.layout,_=l&&l.length,y=P4.getBaseValue(e,n,r,i),b=p==="horizontal",v=!1,g=f.map(function(P,T){var A;_?A=l[c+T]:(A=rn(P,u),Array.isArray(A)?v=!0:A=[y,A]);var x=A[1]==null||_&&rn(P,u)==null;return b?{x:Bg({axis:r,ticks:o,bandSize:s,entry:P,index:T}),y:x?null:i.scale(A[1]),value:A,payload:P}:{x:x?null:r.scale(A[1]),y:Bg({axis:i,ticks:a,bandSize:s,entry:P,index:T}),value:A,payload:P}}),E;return _||v?E=g.map(function(P){var T=Array.isArray(P.value)?P.value[0]:null;return b?{x:P.x,y:T!=null&&P.y!=null?i.scale(T):null}:{x:T!=null?r.scale(T):null,y:P.y}}):E=b?i.scale(y):r.scale(y),co({points:g,baseLine:E,layout:p,isRange:v},d)});Yr(Bi,"renderDotItem",function(t,e){var n;if($.isValidElement(t))n=$.cloneElement(t,e);else if(ye(t))n=t(e);else{var r=Ce("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,o=O4(e,h0e);n=$.createElement(GT,Ka({},o,{key:i,className:r}))}return n});function Dl(t){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dl(t)}function b0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D4(r.key),r)}}function x0e(t,e,n){return e&&E0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function T0e(t,e,n){return e=ly(e),S0e(t,R4()?Reflect.construct(e,n||[],ly(t).constructor):e.apply(t,n))}function S0e(t,e){if(e&&(Dl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A0e(t)}function A0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R4=function(){return!!t})()}function ly(t){return ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ly(t)}function I0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I1(t,e)}function I1(t,e){return I1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},I1(t,e)}function N4(t,e,n){return e=D4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D4(t){var e=P0e(t,"string");return Dl(e)=="symbol"?e:e+""}function P0e(t,e){if(Dl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gv=function(t){function e(){return b0e(this,e),T0e(this,e,arguments)}return I0e(e,t),x0e(e,[{key:"render",value:function(){return null}}])}(W.Component);N4(Gv,"displayName","ZAxis");N4(Gv,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var O0e=["option","isActive"];function Wf(){return Wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wf.apply(this,arguments)}function C0e(t,e){if(t==null)return{};var n=k0e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function k0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function R0e(t){var e=t.option,n=t.isActive,r=C0e(t,O0e);return typeof e=="string"?W.createElement(m1,Wf({option:W.createElement(Iv,Wf({type:e},r)),isActive:n,shapeType:"symbols"},r)):W.createElement(m1,Wf({option:e,isActive:n,shapeType:"symbols"},r))}function jl(t){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jl(t)}function Hf(){return Hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hf.apply(this,arguments)}function HR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HR(Object(n),!0).forEach(function(r){ko(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M4(r.key),r)}}function D0e(t,e,n){return e&&GR(t.prototype,e),n&&GR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function j0e(t,e,n){return e=cy(e),M0e(t,j4()?Reflect.construct(e,n||[],cy(t).constructor):e.apply(t,n))}function M0e(t,e){if(e&&(jl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $0e(t)}function $0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j4=function(){return!!t})()}function cy(t){return cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cy(t)}function V0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P1(t,e)}function P1(t,e){return P1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},P1(t,e)}function ko(t,e,n){return e=M4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M4(t){var e=L0e(t,"string");return jl(e)=="symbol"?e:e+""}function L0e(t,e){if(jl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ml=function(t){function e(){var n;N0e(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=j0e(this,e,[].concat(i)),ko(n,"state",{isAnimationFinished:!1}),ko(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0})}),ko(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1})}),ko(n,"id",fc("recharts-scatter-")),n}return V0e(e,t),D0e(e,[{key:"renderSymbolsStatically",value:function(r){var i=this,o=this.props,a=o.shape,s=o.activeShape,u=o.activeIndex,l=be(this.props,!1);return r.map(function(c,f){var d=u===f,p=d?s:a,_=or(or({},l),c);return $.createElement(ze,Hf({className:"recharts-scatter-symbol",key:"symbol-".concat(c==null?void 0:c.cx,"-").concat(c==null?void 0:c.cy,"-").concat(c==null?void 0:c.size,"-").concat(f)},Ah(i.props,c,f),{role:"img"}),$.createElement(R0e,Hf({option:p,isActive:d,key:"symbol-".concat(f)},_)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,i=this.props,o=i.points,a=i.isAnimationActive,s=i.animationBegin,u=i.animationDuration,l=i.animationEasing,c=i.animationId,f=this.state.prevPoints;return $.createElement(si,{begin:s,duration:u,isActive:a,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var p=d.t,_=o.map(function(y,b){var v=f&&f[b];if(v){var g=dn(v.cx,y.cx),E=dn(v.cy,y.cy),P=dn(v.size,y.size);return or(or({},y),{},{cx:g(p),cy:E(p),size:P(p)})}var T=dn(0,y.size);return or(or({},y),{},{size:T(p)})});return $.createElement(ze,null,r.renderSymbolsStatically(_))})}},{key:"renderSymbols",value:function(){var r=this.props,i=r.points,o=r.isAnimationActive,a=this.state.prevPoints;return o&&i&&i.length&&(!a||!xl(a,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,a=i.xAxis,s=i.yAxis,u=i.children,l=Yn(u,Ld);return l?l.map(function(c,f){var d=c.props,p=d.direction,_=d.dataKey;return $.cloneElement(c,{key:"".concat(p,"-").concat(_,"-").concat(o[f]),data:o,xAxis:a,yAxis:s,layout:p==="x"?"vertical":"horizontal",dataPointFormatter:function(b,v){return{x:b.cx,y:b.cy,value:p==="x"?+b.node.x:+b.node.y,errorVal:rn(b,v)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,i=r.points,o=r.line,a=r.lineType,s=r.lineJointType,u=be(this.props,!1),l=be(o,!1),c,f;if(a==="joint")c=i.map(function(E){return{x:E.cx,y:E.cy}});else if(a==="fitting"){var d=AX(i),p=d.xmin,_=d.xmax,y=d.a,b=d.b,v=function(P){return y*P+b};c=[{x:p,y:v(p)},{x:_,y:v(_)}]}var g=or(or(or({},u),{},{fill:"none",stroke:u&&u.fill},l),{},{points:c});return $.isValidElement(o)?f=$.cloneElement(o,g):ye(o)?f=o(g):f=$.createElement(Vu,Hf({},g,{type:s})),$.createElement(ze,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.points,a=r.line,s=r.className,u=r.xAxis,l=r.yAxis,c=r.left,f=r.top,d=r.width,p=r.height,_=r.id,y=r.isAnimationActive;if(i||!o||!o.length)return null;var b=this.state.isAnimationFinished,v=Ce("recharts-scatter",s),g=u&&u.allowDataOverflow,E=l&&l.allowDataOverflow,P=g||E,T=ve(_)?this.id:_;return $.createElement(ze,{className:v,clipPath:P?"url(#clipPath-".concat(T,")"):null},g||E?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(T)},$.createElement("rect",{x:g?c:c-d/2,y:E?f:f-p/2,width:g?d:d*2,height:E?p:p*2}))):null,a&&this.renderLine(),this.renderErrorBar(),$.createElement(ze,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!y||b)&&Pi.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}}])}(W.PureComponent);ko(Ml,"displayName","Scatter");ko(Ml,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Ms.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});ko(Ml,"getComposedData",function(t){var e=t.xAxis,n=t.yAxis,r=t.zAxis,i=t.item,o=t.displayedData,a=t.xAxisTicks,s=t.yAxisTicks,u=t.offset,l=i.props.tooltipType,c=Yn(i.props.children,wT),f=ve(e.dataKey)?i.props.dataKey:e.dataKey,d=ve(n.dataKey)?i.props.dataKey:n.dataKey,p=r&&r.dataKey,_=r?r.range:Gv.defaultProps.range,y=_&&_[0],b=e.scale.bandwidth?e.scale.bandwidth():0,v=n.scale.bandwidth?n.scale.bandwidth():0,g=o.map(function(E,P){var T=rn(E,f),A=rn(E,d),x=!ve(p)&&rn(E,p)||"-",S=[{name:ve(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:T,payload:E,dataKey:f,type:l},{name:ve(n.dataKey)?i.props.name:n.name||n.dataKey,unit:n.unit||"",value:A,payload:E,dataKey:d,type:l}];x!=="-"&&S.push({name:r.name||r.dataKey,unit:r.unit||"",value:x,payload:E,dataKey:p,type:l});var O=Bg({axis:e,ticks:a,bandSize:b,entry:E,index:P,dataKey:f}),C=Bg({axis:n,ticks:s,bandSize:v,entry:E,index:P,dataKey:d}),k=x!=="-"?r.scale(x):y,N=Math.sqrt(Math.max(k,0)/Math.PI);return or(or({},E),{},{cx:O,cy:C,x:O-N,y:C-N,xAxis:e,yAxis:n,zAxis:r,width:2*N,height:2*N,size:k,node:{x:T,y:A,z:x},tooltipPayload:S,tooltipPosition:{x:O,y:C},payload:E},c&&c[P]&&c[P].props)});return or({points:g},u)});function $l(t){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$l(t)}function F0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L4(r.key),r)}}function U0e(t,e,n){return e&&B0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function z0e(t,e,n){return e=fy(e),q0e(t,$4()?Reflect.construct(e,n||[],fy(t).constructor):e.apply(t,n))}function q0e(t,e){if(e&&($l(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W0e(t)}function W0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($4=function(){return!!t})()}function fy(t){return fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fy(t)}function H0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O1(t,e)}function O1(t,e){return O1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},O1(t,e)}function V4(t,e,n){return e=L4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L4(t){var e=G0e(t,"string");return $l(e)=="symbol"?e:e+""}function G0e(t,e){if($l(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($l(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function C1(){return C1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C1.apply(this,arguments)}function K0e(t){var e=t.xAxisId,n=JT(),r=ZT(),i=g4(e);return i==null?null:W.createElement(vc,C1({},i,{className:Ce("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return bi(a,!0)}}))}var Ei=function(t){function e(){return F0e(this,e),z0e(this,e,arguments)}return H0e(e,t),U0e(e,[{key:"render",value:function(){return W.createElement(K0e,this.props)}}])}(W.Component);V4(Ei,"displayName","XAxis");V4(Ei,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Vl(t){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vl(t)}function Q0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U4(r.key),r)}}function X0e(t,e,n){return e&&Y0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function J0e(t,e,n){return e=hy(e),Z0e(t,F4()?Reflect.construct(e,n||[],hy(t).constructor):e.apply(t,n))}function Z0e(t,e){if(e&&(Vl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ewe(t)}function ewe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F4=function(){return!!t})()}function hy(t){return hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hy(t)}function twe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k1(t,e)}function k1(t,e){return k1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},k1(t,e)}function B4(t,e,n){return e=U4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U4(t){var e=nwe(t,"string");return Vl(e)=="symbol"?e:e+""}function nwe(t,e){if(Vl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function R1(){return R1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R1.apply(this,arguments)}var rwe=function(e){var n=e.yAxisId,r=JT(),i=ZT(),o=y4(n);return o==null?null:W.createElement(vc,R1({},o,{className:Ce("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return bi(s,!0)}}))},Hr=function(t){function e(){return Q0e(this,e),J0e(this,e,arguments)}return twe(e,t),X0e(e,[{key:"render",value:function(){return W.createElement(rwe,this.props)}}])}(W.Component);B4(Hr,"displayName","YAxis");B4(Hr,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function KR(t){return swe(t)||awe(t)||owe(t)||iwe()}function iwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function owe(t,e){if(t){if(typeof t=="string")return N1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N1(t,e)}}function awe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function swe(t){if(Array.isArray(t))return N1(t)}function N1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var D1=function(e,n,r,i,o){var a=Yn(e,Ha),s=Yn(e,qv),u=[].concat(KR(a),KR(s)),l=Yn(e,Hv),c="".concat(i,"Id"),f=i[0],d=n;if(u.length&&(d=u.reduce(function(y,b){if(b.props[c]===r&&ii(b.props,"extendDomain")&&ee(b.props[f])){var v=b.props[f];return[Math.min(y[0],v),Math.max(y[1],v)]}return y},d)),l.length){var p="".concat(f,"1"),_="".concat(f,"2");d=l.reduce(function(y,b){if(b.props[c]===r&&ii(b.props,"extendDomain")&&ee(b.props[p])&&ee(b.props[_])){var v=b.props[p],g=b.props[_];return[Math.min(y[0],v,g),Math.max(y[1],v,g)]}return y},d)}return o&&o.length&&(d=o.reduce(function(y,b){return ee(b)?[Math.min(y[0],b),Math.max(y[1],b)]:y},d)),d},z4={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function o(u,l,c,f,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var p=new i(c,f||u,d),_=n?n+l:l;return u._events[_]?u._events[_].fn?u._events[_]=[u._events[_],p]:u._events[_].push(p):(u._events[_]=p,u._eventsCount++),u}function a(u,l){--u._eventsCount===0?u._events=new r:delete u._events[l]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],c,f;if(this._eventsCount===0)return l;for(f in c=this._events)e.call(c,f)&&l.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},s.prototype.listeners=function(l){var c=n?n+l:l,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,p=f.length,_=new Array(p);d<p;d++)_[d]=f[d].fn;return _},s.prototype.listenerCount=function(l){var c=n?n+l:l,f=this._events[c];return f?f.fn?1:f.length:0},s.prototype.emit=function(l,c,f,d,p,_){var y=n?n+l:l;if(!this._events[y])return!1;var b=this._events[y],v=arguments.length,g,E;if(b.fn){switch(b.once&&this.removeListener(l,b.fn,void 0,!0),v){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,c),!0;case 3:return b.fn.call(b.context,c,f),!0;case 4:return b.fn.call(b.context,c,f,d),!0;case 5:return b.fn.call(b.context,c,f,d,p),!0;case 6:return b.fn.call(b.context,c,f,d,p,_),!0}for(E=1,g=new Array(v-1);E<v;E++)g[E-1]=arguments[E];b.fn.apply(b.context,g)}else{var P=b.length,T;for(E=0;E<P;E++)switch(b[E].once&&this.removeListener(l,b[E].fn,void 0,!0),v){case 1:b[E].fn.call(b[E].context);break;case 2:b[E].fn.call(b[E].context,c);break;case 3:b[E].fn.call(b[E].context,c,f);break;case 4:b[E].fn.call(b[E].context,c,f,d);break;default:if(!g)for(T=1,g=new Array(v-1);T<v;T++)g[T-1]=arguments[T];b[E].fn.apply(b[E].context,g)}}return!0},s.prototype.on=function(l,c,f){return o(this,l,c,f,!1)},s.prototype.once=function(l,c,f){return o(this,l,c,f,!0)},s.prototype.removeListener=function(l,c,f,d){var p=n?n+l:l;if(!this._events[p])return this;if(!c)return a(this,p),this;var _=this._events[p];if(_.fn)_.fn===c&&(!d||_.once)&&(!f||_.context===f)&&a(this,p);else{for(var y=0,b=[],v=_.length;y<v;y++)(_[y].fn!==c||d&&!_[y].once||f&&_[y].context!==f)&&b.push(_[y]);b.length?this._events[p]=b.length===1?b[0]:b:a(this,p)}return this},s.prototype.removeAllListeners=function(l){var c;return l?(c=n?n+l:l,this._events[c]&&a(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(z4);var uwe=z4.exports;const lwe=Ge(uwe);var I0=new lwe,P0="recharts.syncMouseEvents";function ad(t){"@babel/helpers - typeof";return ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ad(t)}function cwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fwe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q4(r.key),r)}}function hwe(t,e,n){return e&&fwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function O0(t,e,n){return e=q4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q4(t){var e=dwe(t,"string");return ad(e)=="symbol"?e:e+""}function dwe(t,e){if(ad(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ad(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pwe=function(){function t(){cwe(this,t),O0(this,"activeIndex",0),O0(this,"coordinateList",[]),O0(this,"layout","horizontal")}return hwe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,a=n.container,s=a===void 0?null:a,u=n.layout,l=u===void 0?null:u,c=n.offset,f=c===void 0?null:c,d=n.mouseHandlerCallback,p=d===void 0?null:d;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=l??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,u=this.coordinateList[this.activeIndex].coordinate,l=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=o+u+l,d=a+this.offset.top+s/2+c;this.mouseHandlerCallback({pageX:f,pageY:d})}}}])}();function mwe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&ee(r)&&ee(i))return!0}return!1}function gwe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function W4(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,a=tn(e,n,r,i),s=tn(e,n,r,o);return{points:[a,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function ywe(t,e,n){var r,i,o,a;if(t==="horizontal")r=e.x,o=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,u=e.cy,l=e.innerRadius,c=e.outerRadius,f=e.angle,d=tn(s,u,l,f),p=tn(s,u,c,f);r=d.x,i=d.y,o=p.x,a=p.y}else return W4(e);return[{x:r,y:i},{x:o,y:a}]}function sd(t){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sd(t)}function QR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $p(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QR(Object(n),!0).forEach(function(r){vwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vwe(t,e,n){return e=_we(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _we(t){var e=wwe(t,"string");return sd(e)=="symbol"?e:e+""}function wwe(t,e){if(sd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bwe(t){var e,n,r=t.element,i=t.tooltipEventType,o=t.isActive,a=t.activeCoordinate,s=t.activePayload,u=t.offset,l=t.activeTooltipIndex,c=t.tooltipAxisBandSize,f=t.layout,d=t.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!o||!a||d!=="ScatterChart"&&i!=="axis")return null;var _,y=Vu;if(d==="ScatterChart")_=a,y=sge;else if(d==="BarChart")_=gwe(f,a,u,c),y=HT;else if(f==="radial"){var b=W4(a),v=b.cx,g=b.cy,E=b.radius,P=b.startAngle,T=b.endAngle;_={cx:v,cy:g,startAngle:P,endAngle:T,innerRadius:E,outerRadius:E},y=UF}else _={points:ywe(f,a,u)},y=Vu;var A=$p($p($p($p({stroke:"#ccc",pointerEvents:"none"},u),_),be(p,!1)),{},{payload:s,payloadIndex:l,className:Ce("recharts-tooltip-cursor",p.className)});return W.isValidElement(p)?W.cloneElement(p,A):W.createElement(y,A)}var Ewe=["item"],xwe=["children","className","width","height","style","compact","title","desc"];function Ll(t){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ll(t)}function bu(){return bu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bu.apply(this,arguments)}function YR(t,e){return Awe(t)||Swe(t,e)||G4(t,e)||Twe()}function Twe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Swe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function Awe(t){if(Array.isArray(t))return t}function XR(t,e){if(t==null)return{};var n=Iwe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Iwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Pwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Owe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,K4(r.key),r)}}function Cwe(t,e,n){return e&&Owe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kwe(t,e,n){return e=dy(e),Rwe(t,H4()?Reflect.construct(e,n||[],dy(t).constructor):e.apply(t,n))}function Rwe(t,e){if(e&&(Ll(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nwe(t)}function Nwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H4=function(){return!!t})()}function dy(t){return dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dy(t)}function Dwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j1(t,e)}function j1(t,e){return j1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},j1(t,e)}function Fl(t){return $we(t)||Mwe(t)||G4(t)||jwe()}function jwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G4(t,e){if(t){if(typeof t=="string")return M1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M1(t,e)}}function Mwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $we(t){if(Array.isArray(t))return M1(t)}function M1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JR(Object(n),!0).forEach(function(r){de(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function de(t,e,n){return e=K4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K4(t){var e=Vwe(t,"string");return Ll(e)=="symbol"?e:e+""}function Vwe(t,e){if(Ll(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ll(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lwe={xAxis:["bottom","top"],yAxis:["left","right"]},Fwe={width:"100%",height:"100%"},Q4={x:0,y:0};function Vp(t){return t}var Bwe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},Uwe=function(e,n,r,i){var o=n.find(function(c){return c&&c.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return G(G(G({},i),tn(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var u=o.coordinate,l=i.angle;return G(G(G({},i),tn(i.cx,i.cy,u,l)),{},{angle:l,radius:u})}return Q4},Kv=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,a=(r??[]).reduce(function(s,u){var l=u.props.data;return l&&l.length?[].concat(Fl(s),Fl(l)):s},[]);return a.length>0?a:e&&e.length&&ee(i)&&ee(o)?e.slice(i,o+1):[]};function Y4(t){return t==="number"?[0,"auto"]:void 0}var $1=function(e,n,r,i){var o=e.graphicalItems,a=e.tooltipAxis,s=Kv(n,e);return r<0||!o||!o.length||r>=s.length?null:o.reduce(function(u,l){var c,f=(c=l.props.data)!==null&&c!==void 0?c:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var d;if(a.dataKey&&!a.allowDuplicatedCategory){var p=f===void 0?s:f;d=fg(p,a.dataKey,i)}else d=f&&f[r]||s[r];return d?[].concat(Fl(u),[LF(l,d)]):u},[])},ZR=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},a=Bwe(o,r),s=e.orderedTooltipTicks,u=e.tooltipAxis,l=e.tooltipTicks,c=Lhe(a,s,l,u);if(c>=0&&l){var f=l[c]&&l[c].value,d=$1(e,n,c,f),p=Uwe(r,s,c,o);return{activeTooltipIndex:c,activeLabel:f,activePayload:d,activeCoordinate:p}}return null},zwe=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,u=n.dataStartIndex,l=n.dataEndIndex,c=e.layout,f=e.children,d=e.stackOffset,p=MF(c,o);return r.reduce(function(_,y){var b,v=y.type.defaultProps!==void 0?G(G({},y.type.defaultProps),y.props):y.props,g=v.type,E=v.dataKey,P=v.allowDataOverflow,T=v.allowDuplicatedCategory,A=v.scale,x=v.ticks,S=v.includeHidden,O=v[a];if(_[O])return _;var C=Kv(e.data,{graphicalItems:i.filter(function(J){var fe,Ee=a in J.props?J.props[a]:(fe=J.type.defaultProps)===null||fe===void 0?void 0:fe[a];return Ee===O}),dataStartIndex:u,dataEndIndex:l}),k=C.length,N,R,j;mwe(v.domain,P,g)&&(N=Zb(v.domain,null,P),p&&(g==="number"||A!=="auto")&&(j=zf(C,E,"category")));var M=Y4(g);if(!N||N.length===0){var F,L=(F=v.domain)!==null&&F!==void 0?F:M;if(E){if(N=zf(C,E,g),g==="category"&&p){var V=SX(N);T&&V?(R=N,N=Jg(0,k)):T||(N=Nk(L,N,y).reduce(function(J,fe){return J.indexOf(fe)>=0?J:[].concat(Fl(J),[fe])},[]))}else if(g==="category")T?N=N.filter(function(J){return J!==""&&!ve(J)}):N=Nk(L,N,y).reduce(function(J,fe){return J.indexOf(fe)>=0||fe===""||ve(fe)?J:[].concat(Fl(J),[fe])},[]);else if(g==="number"){var H=qhe(C,i.filter(function(J){var fe,Ee,Be=a in J.props?J.props[a]:(fe=J.type.defaultProps)===null||fe===void 0?void 0:fe[a],Ze="hide"in J.props?J.props.hide:(Ee=J.type.defaultProps)===null||Ee===void 0?void 0:Ee.hide;return Be===O&&(S||!Ze)}),E,o,c);H&&(N=H)}p&&(g==="number"||A!=="auto")&&(j=zf(C,E,"category"))}else p?N=Jg(0,k):s&&s[O]&&s[O].hasStack&&g==="number"?N=d==="expand"?[0,1]:VF(s[O].stackGroups,u,l):N=jF(C,i.filter(function(J){var fe=a in J.props?J.props[a]:J.type.defaultProps[a],Ee="hide"in J.props?J.props.hide:J.type.defaultProps.hide;return fe===O&&(S||!Ee)}),g,c,!0);if(g==="number")N=D1(f,N,O,o,x),L&&(N=Zb(L,N,P));else if(g==="category"&&L){var Q=L,ie=N.every(function(J){return Q.indexOf(J)>=0});ie&&(N=Q)}}return G(G({},_),{},de({},O,G(G({},v),{},{axisType:o,domain:N,categoricalDomain:j,duplicateDomain:R,originalDomain:(b=v.domain)!==null&&b!==void 0?b:M,isCategorical:p,layout:c})))},{})},qwe=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,u=n.dataStartIndex,l=n.dataEndIndex,c=e.layout,f=e.children,d=Kv(e.data,{graphicalItems:r,dataStartIndex:u,dataEndIndex:l}),p=d.length,_=MF(c,o),y=-1;return r.reduce(function(b,v){var g=v.type.defaultProps!==void 0?G(G({},v.type.defaultProps),v.props):v.props,E=g[a],P=Y4("number");if(!b[E]){y++;var T;return _?T=Jg(0,p):s&&s[E]&&s[E].hasStack?(T=VF(s[E].stackGroups,u,l),T=D1(f,T,E,o)):(T=Zb(P,jF(d,r.filter(function(A){var x,S,O=a in A.props?A.props[a]:(x=A.type.defaultProps)===null||x===void 0?void 0:x[a],C="hide"in A.props?A.props.hide:(S=A.type.defaultProps)===null||S===void 0?void 0:S.hide;return O===E&&!C}),"number",c),i.defaultProps.allowDataOverflow),T=D1(f,T,E,o)),G(G({},b),{},de({},E,G(G({axisType:o},i.defaultProps),{},{hide:!0,orientation:hr(Lwe,"".concat(o,".").concat(y%2),null),domain:T,originalDomain:P,isCategorical:_,layout:c})))}return b},{})},Wwe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,a=n.graphicalItems,s=n.stackGroups,u=n.dataStartIndex,l=n.dataEndIndex,c=e.children,f="".concat(i,"Id"),d=Yn(c,o),p={};return d&&d.length?p=zwe(e,{axes:d,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:u,dataEndIndex:l}):a&&a.length&&(p=qwe(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:u,dataEndIndex:l})),p},Hwe=function(e){var n=To(e),r=bi(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:vT(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Ug(n,r)}},eN=function(e){var n=e.children,r=e.defaultShowTooltip,i=zn(n,Il),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},Gwe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Si(n&&n.type);return r&&r.indexOf("Bar")>=0})},tN=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Kwe=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,u=s===void 0?{}:s,l=r.width,c=r.height,f=r.children,d=r.margin||{},p=zn(f,Il),_=zn(f,ns),y=Object.keys(u).reduce(function(T,A){var x=u[A],S=x.orientation;return!x.mirror&&!x.hide?G(G({},T),{},de({},S,T[S]+x.width)):T},{left:d.left||0,right:d.right||0}),b=Object.keys(a).reduce(function(T,A){var x=a[A],S=x.orientation;return!x.mirror&&!x.hide?G(G({},T),{},de({},S,hr(T,"".concat(S))+x.height)):T},{top:d.top||0,bottom:d.bottom||0}),v=G(G({},b),y),g=v.bottom;p&&(v.bottom+=p.props.height||Il.defaultProps.height),_&&n&&(v=Uhe(v,i,r,n));var E=l-v.left-v.right,P=c-v.top-v.bottom;return G(G({brushBottom:g},v),{},{width:Math.max(E,0),height:Math.max(P,0)})},Qwe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},rS=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,a=e.validateTooltipEventTypes,s=a===void 0?["axis"]:a,u=e.axisComponents,l=e.legendContent,c=e.formatAxisMap,f=e.defaultProps,d=function(v,g){var E=g.graphicalItems,P=g.stackGroups,T=g.offset,A=g.updateId,x=g.dataStartIndex,S=g.dataEndIndex,O=v.barSize,C=v.layout,k=v.barGap,N=v.barCategoryGap,R=v.maxBarSize,j=tN(C),M=j.numericAxisName,F=j.cateAxisName,L=Gwe(E),V=[];return E.forEach(function(H,Q){var ie=Kv(v.data,{graphicalItems:[H],dataStartIndex:x,dataEndIndex:S}),J=H.type.defaultProps!==void 0?G(G({},H.type.defaultProps),H.props):H.props,fe=J.dataKey,Ee=J.maxBarSize,Be=J["".concat(M,"Id")],Ze=J["".concat(F,"Id")],an={},Bt=u.reduce(function(tr,li){var Bs=g["".concat(li.axisType,"Map")],Fd=J["".concat(li.axisType,"Id")];Bs&&Bs[Fd]||li.axisType==="zAxis"||Ts();var Ji=Bs[Fd];return G(G({},tr),{},de(de({},li.axisType,Ji),"".concat(li.axisType,"Ticks"),bi(Ji)))},an),oe=Bt[F],me=Bt["".concat(F,"Ticks")],_e=P&&P[Be]&&P[Be].hasStack&&nde(H,P[Be].stackGroups),X=Si(H.type).indexOf("Bar")>=0,Ke=Ug(oe,me),Ae=[],bt=L&&Fhe({barSize:O,stackGroups:P,totalSize:Qwe(Bt,F)});if(X){var ht,Ut,vr=ve(Ee)?R:Ee,dt=(ht=(Ut=Ug(oe,me,!0))!==null&&Ut!==void 0?Ut:vr)!==null&&ht!==void 0?ht:0;Ae=Bhe({barGap:k,barCategoryGap:N,bandSize:dt!==Ke?dt:Ke,sizeList:bt[Ze],maxBarSize:vr}),dt!==Ke&&(Ae=Ae.map(function(tr){return G(G({},tr),{},{position:G(G({},tr.position),{},{offset:tr.position.offset-dt/2})})}))}var St=H&&H.type&&H.type.getComposedData;St&&V.push({props:G(G({},St(G(G({},Bt),{},{displayedData:ie,props:v,dataKey:fe,item:H,bandSize:Ke,barPosition:Ae,offset:T,stackedData:_e,layout:C,dataStartIndex:x,dataEndIndex:S}))),{},de(de(de({key:H.key||"item-".concat(Q)},M,Bt[M]),F,Bt[F]),"animationId",A)),childIndex:LX(H,v.children),item:H})}),V},p=function(v,g){var E=v.props,P=v.dataStartIndex,T=v.dataEndIndex,A=v.updateId;if(!IO({props:E}))return null;var x=E.children,S=E.layout,O=E.stackOffset,C=E.data,k=E.reverseStackOrder,N=tN(S),R=N.numericAxisName,j=N.cateAxisName,M=Yn(x,r),F=Zhe(C,M,"".concat(R,"Id"),"".concat(j,"Id"),O,k),L=u.reduce(function(J,fe){var Ee="".concat(fe.axisType,"Map");return G(G({},J),{},de({},Ee,Wwe(E,G(G({},fe),{},{graphicalItems:M,stackGroups:fe.axisType===R&&F,dataStartIndex:P,dataEndIndex:T}))))},{}),V=Kwe(G(G({},L),{},{props:E,graphicalItems:M}),g==null?void 0:g.legendBBox);Object.keys(L).forEach(function(J){L[J]=c(E,L[J],V,J.replace("Map",""),n)});var H=L["".concat(j,"Map")],Q=Hwe(H),ie=d(E,G(G({},L),{},{dataStartIndex:P,dataEndIndex:T,updateId:A,graphicalItems:M,stackGroups:F,offset:V}));return G(G({formattedGraphicalItems:ie,graphicalItems:M,offset:V,stackGroups:F},Q),L)},_=function(b){function v(g){var E,P,T;return Pwe(this,v),T=kwe(this,v,[g]),de(T,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),de(T,"accessibilityManager",new pwe),de(T,"handleLegendBBoxUpdate",function(A){if(A){var x=T.state,S=x.dataStartIndex,O=x.dataEndIndex,C=x.updateId;T.setState(G({legendBBox:A},p({props:T.props,dataStartIndex:S,dataEndIndex:O,updateId:C},G(G({},T.state),{},{legendBBox:A}))))}}),de(T,"handleReceiveSyncEvent",function(A,x,S){if(T.props.syncId===A){if(S===T.eventEmitterSymbol&&typeof T.props.syncMethod!="function")return;T.applySyncEvent(x)}}),de(T,"handleBrushChange",function(A){var x=A.startIndex,S=A.endIndex;if(x!==T.state.dataStartIndex||S!==T.state.dataEndIndex){var O=T.state.updateId;T.setState(function(){return G({dataStartIndex:x,dataEndIndex:S},p({props:T.props,dataStartIndex:x,dataEndIndex:S,updateId:O},T.state))}),T.triggerSyncEvent({dataStartIndex:x,dataEndIndex:S})}}),de(T,"handleMouseEnter",function(A){var x=T.getMouseInfo(A);if(x){var S=G(G({},x),{},{isTooltipActive:!0});T.setState(S),T.triggerSyncEvent(S);var O=T.props.onMouseEnter;ye(O)&&O(S,A)}}),de(T,"triggeredAfterMouseMove",function(A){var x=T.getMouseInfo(A),S=x?G(G({},x),{},{isTooltipActive:!0}):{isTooltipActive:!1};T.setState(S),T.triggerSyncEvent(S);var O=T.props.onMouseMove;ye(O)&&O(S,A)}),de(T,"handleItemMouseEnter",function(A){T.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),de(T,"handleItemMouseLeave",function(){T.setState(function(){return{isTooltipActive:!1}})}),de(T,"handleMouseMove",function(A){A.persist(),T.throttleTriggeredAfterMouseMove(A)}),de(T,"handleMouseLeave",function(A){T.throttleTriggeredAfterMouseMove.cancel();var x={isTooltipActive:!1};T.setState(x),T.triggerSyncEvent(x);var S=T.props.onMouseLeave;ye(S)&&S(x,A)}),de(T,"handleOuterEvent",function(A){var x=VX(A),S=hr(T.props,"".concat(x));if(x&&ye(S)){var O,C;/.*touch.*/i.test(x)?C=T.getMouseInfo(A.changedTouches[0]):C=T.getMouseInfo(A),S((O=C)!==null&&O!==void 0?O:{},A)}}),de(T,"handleClick",function(A){var x=T.getMouseInfo(A);if(x){var S=G(G({},x),{},{isTooltipActive:!0});T.setState(S),T.triggerSyncEvent(S);var O=T.props.onClick;ye(O)&&O(S,A)}}),de(T,"handleMouseDown",function(A){var x=T.props.onMouseDown;if(ye(x)){var S=T.getMouseInfo(A);x(S,A)}}),de(T,"handleMouseUp",function(A){var x=T.props.onMouseUp;if(ye(x)){var S=T.getMouseInfo(A);x(S,A)}}),de(T,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&T.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),de(T,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&T.handleMouseDown(A.changedTouches[0])}),de(T,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&T.handleMouseUp(A.changedTouches[0])}),de(T,"handleDoubleClick",function(A){var x=T.props.onDoubleClick;if(ye(x)){var S=T.getMouseInfo(A);x(S,A)}}),de(T,"handleContextMenu",function(A){var x=T.props.onContextMenu;if(ye(x)){var S=T.getMouseInfo(A);x(S,A)}}),de(T,"triggerSyncEvent",function(A){T.props.syncId!==void 0&&I0.emit(P0,T.props.syncId,A,T.eventEmitterSymbol)}),de(T,"applySyncEvent",function(A){var x=T.props,S=x.layout,O=x.syncMethod,C=T.state.updateId,k=A.dataStartIndex,N=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)T.setState(G({dataStartIndex:k,dataEndIndex:N},p({props:T.props,dataStartIndex:k,dataEndIndex:N,updateId:C},T.state)));else if(A.activeTooltipIndex!==void 0){var R=A.chartX,j=A.chartY,M=A.activeTooltipIndex,F=T.state,L=F.offset,V=F.tooltipTicks;if(!L)return;if(typeof O=="function")M=O(V,A);else if(O==="value"){M=-1;for(var H=0;H<V.length;H++)if(V[H].value===A.activeLabel){M=H;break}}var Q=G(G({},L),{},{x:L.left,y:L.top}),ie=Math.min(R,Q.x+Q.width),J=Math.min(j,Q.y+Q.height),fe=V[M]&&V[M].value,Ee=$1(T.state,T.props.data,M),Be=V[M]?{x:S==="horizontal"?V[M].coordinate:ie,y:S==="horizontal"?J:V[M].coordinate}:Q4;T.setState(G(G({},A),{},{activeLabel:fe,activeCoordinate:Be,activePayload:Ee,activeTooltipIndex:M}))}else T.setState(A)}),de(T,"renderCursor",function(A){var x,S=T.state,O=S.isTooltipActive,C=S.activeCoordinate,k=S.activePayload,N=S.offset,R=S.activeTooltipIndex,j=S.tooltipAxisBandSize,M=T.getTooltipEventType(),F=(x=A.props.active)!==null&&x!==void 0?x:O,L=T.props.layout,V=A.key||"_recharts-cursor";return $.createElement(bwe,{key:V,activeCoordinate:C,activePayload:k,activeTooltipIndex:R,chartName:n,element:A,isActive:F,layout:L,offset:N,tooltipAxisBandSize:j,tooltipEventType:M})}),de(T,"renderPolarAxis",function(A,x,S){var O=hr(A,"type.axisType"),C=hr(T.state,"".concat(O,"Map")),k=A.type.defaultProps,N=k!==void 0?G(G({},k),A.props):A.props,R=C&&C[N["".concat(O,"Id")]];return W.cloneElement(A,G(G({},R),{},{className:Ce(O,R.className),key:A.key||"".concat(x,"-").concat(S),ticks:bi(R,!0)}))}),de(T,"renderPolarGrid",function(A){var x=A.props,S=x.radialLines,O=x.polarAngles,C=x.polarRadius,k=T.state,N=k.radiusAxisMap,R=k.angleAxisMap,j=To(N),M=To(R),F=M.cx,L=M.cy,V=M.innerRadius,H=M.outerRadius;return W.cloneElement(A,{polarAngles:Array.isArray(O)?O:bi(M,!0).map(function(Q){return Q.coordinate}),polarRadius:Array.isArray(C)?C:bi(j,!0).map(function(Q){return Q.coordinate}),cx:F,cy:L,innerRadius:V,outerRadius:H,key:A.key||"polar-grid",radialLines:S})}),de(T,"renderLegend",function(){var A=T.state.formattedGraphicalItems,x=T.props,S=x.children,O=x.width,C=x.height,k=T.props.margin||{},N=O-(k.left||0)-(k.right||0),R=NF({children:S,formattedGraphicalItems:A,legendWidth:N,legendContent:l});if(!R)return null;var j=R.item,M=XR(R,Ewe);return W.cloneElement(j,G(G({},M),{},{chartWidth:O,chartHeight:C,margin:k,onBBoxUpdate:T.handleLegendBBoxUpdate}))}),de(T,"renderTooltip",function(){var A,x=T.props,S=x.children,O=x.accessibilityLayer,C=zn(S,Wn);if(!C)return null;var k=T.state,N=k.isTooltipActive,R=k.activeCoordinate,j=k.activePayload,M=k.activeLabel,F=k.offset,L=(A=C.props.active)!==null&&A!==void 0?A:N;return W.cloneElement(C,{viewBox:G(G({},F),{},{x:F.left,y:F.top}),active:L,label:M,payload:L?j:[],coordinate:R,accessibilityLayer:O})}),de(T,"renderBrush",function(A){var x=T.props,S=x.margin,O=x.data,C=T.state,k=C.offset,N=C.dataStartIndex,R=C.dataEndIndex,j=C.updateId;return W.cloneElement(A,{key:A.key||"_recharts-brush",onChange:Np(T.handleBrushChange,A.props.onChange),data:O,x:ee(A.props.x)?A.props.x:k.left,y:ee(A.props.y)?A.props.y:k.top+k.height+k.brushBottom-(S.bottom||0),width:ee(A.props.width)?A.props.width:k.width,startIndex:N,endIndex:R,updateId:"brush-".concat(j)})}),de(T,"renderReferenceElement",function(A,x,S){if(!A)return null;var O=T,C=O.clipPathId,k=T.state,N=k.xAxisMap,R=k.yAxisMap,j=k.offset,M=A.type.defaultProps||{},F=A.props,L=F.xAxisId,V=L===void 0?M.xAxisId:L,H=F.yAxisId,Q=H===void 0?M.yAxisId:H;return W.cloneElement(A,{key:A.key||"".concat(x,"-").concat(S),xAxis:N[V],yAxis:R[Q],viewBox:{x:j.left,y:j.top,width:j.width,height:j.height},clipPathId:C})}),de(T,"renderActivePoints",function(A){var x=A.item,S=A.activePoint,O=A.basePoint,C=A.childIndex,k=A.isRange,N=[],R=x.props.key,j=x.item.type.defaultProps!==void 0?G(G({},x.item.type.defaultProps),x.item.props):x.item.props,M=j.activeDot,F=j.dataKey,L=G(G({index:C,dataKey:F,cx:S.x,cy:S.y,r:4,fill:WT(x.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},be(M,!1)),hg(M));return N.push(v.renderActiveDot(M,L,"".concat(R,"-activePoint-").concat(C))),O?N.push(v.renderActiveDot(M,G(G({},L),{},{cx:O.x,cy:O.y}),"".concat(R,"-basePoint-").concat(C))):k&&N.push(null),N}),de(T,"renderGraphicChild",function(A,x,S){var O=T.filterFormatItem(A,x,S);if(!O)return null;var C=T.getTooltipEventType(),k=T.state,N=k.isTooltipActive,R=k.tooltipAxis,j=k.activeTooltipIndex,M=k.activeLabel,F=T.props.children,L=zn(F,Wn),V=O.props,H=V.points,Q=V.isRange,ie=V.baseLine,J=O.item.type.defaultProps!==void 0?G(G({},O.item.type.defaultProps),O.item.props):O.item.props,fe=J.activeDot,Ee=J.hide,Be=J.activeBar,Ze=J.activeShape,an=!!(!Ee&&N&&L&&(fe||Be||Ze)),Bt={};C!=="axis"&&L&&L.props.trigger==="click"?Bt={onClick:Np(T.handleItemMouseEnter,A.props.onClick)}:C!=="axis"&&(Bt={onMouseLeave:Np(T.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:Np(T.handleItemMouseEnter,A.props.onMouseEnter)});var oe=W.cloneElement(A,G(G({},O.props),Bt));function me(li){return typeof R.dataKey=="function"?R.dataKey(li.payload):null}if(an)if(j>=0){var _e,X;if(R.dataKey&&!R.allowDuplicatedCategory){var Ke=typeof R.dataKey=="function"?me:"payload.".concat(R.dataKey.toString());_e=fg(H,Ke,M),X=Q&&ie&&fg(ie,Ke,M)}else _e=H==null?void 0:H[j],X=Q&&ie&&ie[j];if(Ze||Be){var Ae=A.props.activeIndex!==void 0?A.props.activeIndex:j;return[W.cloneElement(A,G(G(G({},O.props),Bt),{},{activeIndex:Ae})),null,null]}if(!ve(_e))return[oe].concat(Fl(T.renderActivePoints({item:O,activePoint:_e,basePoint:X,childIndex:j,isRange:Q})))}else{var bt,ht=(bt=T.getItemByXY(T.state.activeCoordinate))!==null&&bt!==void 0?bt:{graphicalItem:oe},Ut=ht.graphicalItem,vr=Ut.item,dt=vr===void 0?A:vr,St=Ut.childIndex,tr=G(G(G({},O.props),Bt),{},{activeIndex:St});return[W.cloneElement(dt,tr),null,null]}return Q?[oe,null,null]:[oe,null]}),de(T,"renderCustomized",function(A,x,S){return W.cloneElement(A,G(G({key:"recharts-customized-".concat(S)},T.props),T.state))}),de(T,"renderMap",{CartesianGrid:{handler:Vp,once:!0},ReferenceArea:{handler:T.renderReferenceElement},ReferenceLine:{handler:Vp},ReferenceDot:{handler:T.renderReferenceElement},XAxis:{handler:Vp},YAxis:{handler:Vp},Brush:{handler:T.renderBrush,once:!0},Bar:{handler:T.renderGraphicChild},Line:{handler:T.renderGraphicChild},Area:{handler:T.renderGraphicChild},Radar:{handler:T.renderGraphicChild},RadialBar:{handler:T.renderGraphicChild},Scatter:{handler:T.renderGraphicChild},Pie:{handler:T.renderGraphicChild},Funnel:{handler:T.renderGraphicChild},Tooltip:{handler:T.renderCursor,once:!0},PolarGrid:{handler:T.renderPolarGrid,once:!0},PolarAngleAxis:{handler:T.renderPolarAxis},PolarRadiusAxis:{handler:T.renderPolarAxis},Customized:{handler:T.renderCustomized}}),T.clipPathId="".concat((E=g.id)!==null&&E!==void 0?E:fc("recharts"),"-clip"),T.throttleTriggeredAfterMouseMove=DL(T.triggeredAfterMouseMove,(P=g.throttleDelay)!==null&&P!==void 0?P:1e3/60),T.state={},T}return Dwe(v,b),Cwe(v,[{key:"componentDidMount",value:function(){var E,P;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var E=this.props,P=E.children,T=E.data,A=E.height,x=E.layout,S=zn(P,Wn);if(S){var O=S.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var C=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,k=$1(this.state,T,O,C),N=this.state.tooltipTicks[O].coordinate,R=(this.state.offset.top+A)/2,j=x==="horizontal",M=j?{x:N,y:R}:{y:N,x:R},F=this.state.formattedGraphicalItems.find(function(V){var H=V.item;return H.type.name==="Scatter"});F&&(M=G(G({},M),F.props.points[O].tooltipPosition),k=F.props.points[O].tooltipPayload);var L={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:C,activePayload:k,activeCoordinate:M};this.setState(L),this.renderCursor(S),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(E,P){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==P.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==E.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==E.margin){var T,A;this.accessibilityManager.setDetails({offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(E){pb([zn(E.children,Wn)],[zn(this.props.children,Wn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var E=zn(this.props.children,Wn);if(E&&typeof E.props.shared=="boolean"){var P=E.props.shared?"axis":"item";return s.indexOf(P)>=0?P:o}return o}},{key:"getMouseInfo",value:function(E){if(!this.container)return null;var P=this.container,T=P.getBoundingClientRect(),A=fue(T),x={chartX:Math.round(E.pageX-A.left),chartY:Math.round(E.pageY-A.top)},S=T.width/P.offsetWidth||1,O=this.inRange(x.chartX,x.chartY,S);if(!O)return null;var C=this.state,k=C.xAxisMap,N=C.yAxisMap,R=this.getTooltipEventType(),j=ZR(this.state,this.props.data,this.props.layout,O);if(R!=="axis"&&k&&N){var M=To(k).scale,F=To(N).scale,L=M&&M.invert?M.invert(x.chartX):null,V=F&&F.invert?F.invert(x.chartY):null;return G(G({},x),{},{xValue:L,yValue:V},j)}return j?G(G({},x),j):null}},{key:"inRange",value:function(E,P){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,x=E/T,S=P/T;if(A==="horizontal"||A==="vertical"){var O=this.state.offset,C=x>=O.left&&x<=O.left+O.width&&S>=O.top&&S<=O.top+O.height;return C?{x,y:S}:null}var k=this.state,N=k.angleAxisMap,R=k.radiusAxisMap;if(N&&R){var j=To(N);return Mk({x,y:S},j)}return null}},{key:"parseEventsOfWrapper",value:function(){var E=this.props.children,P=this.getTooltipEventType(),T=zn(E,Wn),A={};T&&P==="axis"&&(T.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var x=hg(this.props,this.handleOuterEvent);return G(G({},x),A)}},{key:"addListener",value:function(){I0.on(P0,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){I0.removeListener(P0,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(E,P,T){for(var A=this.state.formattedGraphicalItems,x=0,S=A.length;x<S;x++){var O=A[x];if(O.item===E||O.props.key===E.key||P===Si(O.item.type)&&T===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var E=this.clipPathId,P=this.state.offset,T=P.left,A=P.top,x=P.height,S=P.width;return $.createElement("defs",null,$.createElement("clipPath",{id:E},$.createElement("rect",{x:T,y:A,height:x,width:S})))}},{key:"getXScales",value:function(){var E=this.state.xAxisMap;return E?Object.entries(E).reduce(function(P,T){var A=YR(T,2),x=A[0],S=A[1];return G(G({},P),{},de({},x,S.scale))},{}):null}},{key:"getYScales",value:function(){var E=this.state.yAxisMap;return E?Object.entries(E).reduce(function(P,T){var A=YR(T,2),x=A[0],S=A[1];return G(G({},P),{},de({},x,S.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(E){var P;return(P=this.state.xAxisMap)===null||P===void 0||(P=P[E])===null||P===void 0?void 0:P.scale}},{key:"getYScaleByAxisId",value:function(E){var P;return(P=this.state.yAxisMap)===null||P===void 0||(P=P[E])===null||P===void 0?void 0:P.scale}},{key:"getItemByXY",value:function(E){var P=this.state,T=P.formattedGraphicalItems,A=P.activeItem;if(T&&T.length)for(var x=0,S=T.length;x<S;x++){var O=T[x],C=O.props,k=O.item,N=k.type.defaultProps!==void 0?G(G({},k.type.defaultProps),k.props):k.props,R=Si(k.type);if(R==="Bar"){var j=(C.data||[]).find(function(V){return Xme(E,V)});if(j)return{graphicalItem:O,payload:j}}else if(R==="RadialBar"){var M=(C.data||[]).find(function(V){return Mk(E,V)});if(M)return{graphicalItem:O,payload:M}}else if(Fv(O,A)||Bv(O,A)||td(O,A)){var F=Zge({graphicalItem:O,activeTooltipItem:A,itemData:N.data}),L=N.activeIndex===void 0?F:N.activeIndex;return{graphicalItem:G(G({},O),{},{childIndex:L}),payload:td(O,A)?N.data[F]:O.props.data[F]}}}return null}},{key:"render",value:function(){var E=this;if(!IO(this))return null;var P=this.props,T=P.children,A=P.className,x=P.width,S=P.height,O=P.style,C=P.compact,k=P.title,N=P.desc,R=XR(P,xwe),j=be(R,!1);if(C)return $.createElement(kR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement(gb,bu({},j,{width:x,height:S,title:k,desc:N}),this.renderClipPath(),OO(T,this.renderMap)));if(this.props.accessibilityLayer){var M,F;j.tabIndex=(M=this.props.tabIndex)!==null&&M!==void 0?M:0,j.role=(F=this.props.role)!==null&&F!==void 0?F:"application",j.onKeyDown=function(V){E.accessibilityManager.keyboardEvent(V)},j.onFocus=function(){E.accessibilityManager.focus()}}var L=this.parseEventsOfWrapper();return $.createElement(kR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement("div",bu({className:Ce("recharts-wrapper",A),style:G({position:"relative",cursor:"default",width:x,height:S},O)},L,{ref:function(H){E.container=H}}),$.createElement(gb,bu({},j,{width:x,height:S,title:k,desc:N,style:Fwe}),this.renderClipPath(),OO(T,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(W.Component);de(_,"displayName",n),de(_,"defaultProps",G({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),de(_,"getDerivedStateFromProps",function(b,v){var g=b.dataKey,E=b.data,P=b.children,T=b.width,A=b.height,x=b.layout,S=b.stackOffset,O=b.margin,C=v.dataStartIndex,k=v.dataEndIndex;if(v.updateId===void 0){var N=eN(b);return G(G(G({},N),{},{updateId:0},p(G(G({props:b},N),{},{updateId:0}),v)),{},{prevDataKey:g,prevData:E,prevWidth:T,prevHeight:A,prevLayout:x,prevStackOffset:S,prevMargin:O,prevChildren:P})}if(g!==v.prevDataKey||E!==v.prevData||T!==v.prevWidth||A!==v.prevHeight||x!==v.prevLayout||S!==v.prevStackOffset||!ju(O,v.prevMargin)){var R=eN(b),j={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},M=G(G({},ZR(v,E,x)),{},{updateId:v.updateId+1}),F=G(G(G({},R),j),M);return G(G(G({},F),p(G({props:b},F),v)),{},{prevDataKey:g,prevData:E,prevWidth:T,prevHeight:A,prevLayout:x,prevStackOffset:S,prevMargin:O,prevChildren:P})}if(!pb(P,v.prevChildren)){var L,V,H,Q,ie=zn(P,Il),J=ie&&(L=(V=ie.props)===null||V===void 0?void 0:V.startIndex)!==null&&L!==void 0?L:C,fe=ie&&(H=(Q=ie.props)===null||Q===void 0?void 0:Q.endIndex)!==null&&H!==void 0?H:k,Ee=J!==C||fe!==k,Be=!ve(E),Ze=Be&&!Ee?v.updateId:v.updateId+1;return G(G({updateId:Ze},p(G(G({props:b},v),{},{updateId:Ze,dataStartIndex:J,dataEndIndex:fe}),v)),{},{prevChildren:P,dataStartIndex:J,dataEndIndex:fe})}return null}),de(_,"renderActiveDot",function(b,v,g){var E;return W.isValidElement(b)?E=W.cloneElement(b,v):ye(b)?E=b(v):E=$.createElement(GT,v),$.createElement(ze,{className:"recharts-active-dot",key:g},E)});var y=W.forwardRef(function(v,g){return $.createElement(_,bu({},v,{ref:g}))});return y.displayName=_.displayName,y},Ywe=rS({chartName:"BarChart",GraphicalChild:Fs,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ei},{axisType:"yAxis",AxisComp:Hr}],formatAxisMap:KT}),nN=rS({chartName:"ScatterChart",GraphicalChild:Ml,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Ei},{axisType:"yAxis",AxisComp:Hr},{axisType:"zAxis",AxisComp:Gv}],formatAxisMap:KT}),Xwe=rS({chartName:"AreaChart",GraphicalChild:Bi,axisComponents:[{axisType:"xAxis",AxisComp:Ei},{axisType:"yAxis",AxisComp:Hr}],formatAxisMap:KT});const rN=async(t,e={})=>{try{await j$(Eh(Sn,"admin","events","logs"),{eventType:t,timestamp:De.now(),data:e,adminId:e.adminId||"unknown"})}catch(n){console.error("Error tracking admin event:",n)}},iS=async(t="30d")=>{try{let e=[];try{const i=rb(Eh(Sn,"analytics","calculator_usage","events"),ib("timestamp","desc"),ob(1e3));e=(await rg(i)).docs.map(a=>({id:a.id,...a.data()}))}catch{}let n=[];try{const i=rb(Eh(Sn,"analytics","outcomes","records"),ib("timestamp","desc"),ob(500));n=(await rg(i)).docs.map(a=>({id:a.id,...a.data()}))}catch{}return{usage:{totalUses:e.length,uniqueUsers:new Set(e.map(i=>i.userId)).size,part1ToPart2Rate:Jwe(e),averageTimeSpent:Zwe(e)},outcomes:{totalOutcomes:n.length,cancerRate:ebe(n),averageRiskScore:tbe(n)},performance:{modelAccuracy:nbe(n),calibration:rbe(n),aucEstimate:ibe(n)},recommendations:obe(e,n),lastUpdated:new Date().toISOString(),connectionStatus:"connected"}}catch(e){return console.error("Error getting admin insights:",e),e.message.includes("Network error")||e.message.includes("permission-denied")||e.message.includes("unavailable")||e.code==="unavailable"||e.code==="network-request-failed"?iN(e.message,{isNetworkError:!0}):iN(e.message)}},Jwe=t=>{const e=t.filter(r=>r.eventType==="part1_completed"),n=t.filter(r=>r.eventType==="part2_completed");return e.length===0?"0%":Math.round(n.length/e.length*100)+"%"},Zwe=t=>"5.2 min",ebe=t=>{if(t.length===0)return 0;const e=t.filter(n=>n.actualOutcome==="cancer_detected").length;return Math.round(e/t.length*100)},tbe=t=>{if(t.length===0)return 0;const e=t.reduce((n,r)=>n+(r.predictedRisk||0),0);return Math.round(e/t.length)},nbe=t=>t.length>0?"92%":"N/A",rbe=t=>t.length>0?"Good":"N/A",ibe=t=>t.length>10?"0.89":"N/A",obe=(t,e)=>{const n=[];return t.length<10&&n.push({type:"info",priority:"low",message:"Low usage volume",action:"Consider promoting the calculator to increase data collection"}),e.length<5&&n.push({type:"warning",priority:"medium",message:"Limited outcome data",action:"Encourage users to report biopsy results for better model validation"}),n},iN=(t="Unknown error",e=null)=>({usage:{totalUses:0,uniqueUsers:0,part1ToPart2Rate:"0%",averageTimeSpent:"N/A"},outcomes:{totalOutcomes:0,cancerRate:0,averageRiskScore:0},performance:{modelAccuracy:"N/A",calibration:"N/A",aucEstimate:"N/A"},recommendations:e!=null&&e.isNetworkError?[{type:"error",priority:"high",message:"Network or permissions issue",action:`Error: ${t}. Verify Firebase configuration and Firestore security rules.`},{type:"info",priority:"medium",message:"Troubleshooting",action:"Check your internet connection and reload the page. If the issue persists, verify that the signed-in user is authorized for admin analytics."}]:[{type:"warning",priority:"high",message:"Firebase connection issue",action:`Error: ${t}. Check Firebase configuration and security rules.`},{type:"info",priority:"medium",message:"Data collection status",action:"No analytics data found. Calculator may not be tracking events properly."}],lastUpdated:new Date().toISOString(),connectionStatus:"failed",error:t,networkError:e}),abe=async(t="json")=>{try{const e=await iS("30d");return t==="csv"?sbe(e):JSON.stringify(e,null,2)}catch(e){return console.error("Error exporting admin analytics:",e),null}},sbe=t=>{var i,o,a,s,u,l,c,f,d;const e=["Metric","Value","Category"],n=[];return n.push(["Total Uses",((i=t.usage)==null?void 0:i.totalUses)||0,"Usage"]),n.push(["Unique Users",((o=t.usage)==null?void 0:o.uniqueUsers)||0,"Usage"]),n.push(["Conversion Rate",((a=t.usage)==null?void 0:a.part1ToPart2Rate)||"0%","Usage"]),n.push(["Total Outcomes",((s=t.outcomes)==null?void 0:s.totalOutcomes)||0,"Outcomes"]),n.push(["Cancer Detection Rate",((u=t.outcomes)==null?void 0:u.cancerRate)||0,"Outcomes"]),n.push(["Average Risk Score",((l=t.outcomes)==null?void 0:l.averageRiskScore)||0,"Outcomes"]),n.push(["Model Accuracy",((c=t.performance)==null?void 0:c.modelAccuracy)||"N/A","Performance"]),n.push(["Calibration",((f=t.performance)==null?void 0:f.calibration)||"N/A","Performance"]),n.push(["AUC Estimate",((d=t.performance)==null?void 0:d.aucEstimate)||"N/A","Performance"]),[e.join(","),...n.map(p=>p.join(","))].join(`
`)},ube=({userRole:t="admin"})=>{var f,d,p,_,y,b,v,g,E,P,T,A,x,S,O;const[e,n]=W.useState("30d"),[r,i]=W.useState(null),[o,a]=W.useState(!0),[s,u]=W.useState("overview");W.useEffect(()=>{l()},[e]);const l=async()=>{a(!0);try{const C=await iS(e);i(C)}catch(C){console.error("Error loading insights:",C)}finally{a(!1)}},c=async C=>{const k=await abe(C);if(k){const N=new Blob([k],{type:C==="csv"?"text/csv":"application/json"}),R=URL.createObjectURL(N),j=document.createElement("a");j.href=R,j.download=`epsa-insights-${e}.${C}`,j.click()}};return o?m.jsx("div",{className:"insights-dashboard loading",children:m.jsx("div",{className:"loading-spinner",children:"Loading insights..."})}):r?m.jsxs("div",{className:"insights-dashboard",children:[m.jsxs("div",{className:"dashboard-header",children:[m.jsxs("h1",{children:[m.jsx($m,{size:24})," ePSA Insights Dashboard"]}),m.jsxs("div",{className:"header-controls",children:[m.jsxs("select",{value:e,onChange:C=>n(C.target.value),children:[m.jsx("option",{value:"7d",children:"Last 7 Days"}),m.jsx("option",{value:"30d",children:"Last 30 Days"}),m.jsx("option",{value:"90d",children:"Last 90 Days"}),m.jsx("option",{value:"1y",children:"Last Year"})]}),m.jsx("button",{onClick:l,children:m.jsx(NU,{size:16})}),m.jsxs("div",{className:"export-dropdown",children:[m.jsxs("button",{children:["Export ",m.jsx(yU,{size:16})]}),m.jsxs("div",{className:"export-options",children:[m.jsx("button",{onClick:()=>c("csv"),children:"CSV"}),m.jsx("button",{onClick:()=>c("json"),children:"JSON"})]})]})]})]}),((f=r.recommendations)==null?void 0:f.length)>0&&m.jsx("div",{className:"recommendations-banner",children:r.recommendations.map((C,k)=>m.jsxs("div",{className:`recommendation ${C.type} ${C.priority}`,children:[C.type==="warning"?m.jsx(Ti,{size:16}):m.jsx(lr,{size:16}),m.jsxs("div",{className:"rec-content",children:[m.jsx("strong",{children:C.message}),m.jsx("span",{children:C.action})]})]},k))}),m.jsxs("div",{className:"dashboard-tabs",children:[m.jsxs("button",{className:s==="overview"?"active":"",onClick:()=>u("overview"),children:[m.jsx(Pu,{size:16})," Overview"]}),m.jsxs("button",{className:s==="performance"?"active":"",onClick:()=>u("performance"),children:[m.jsx(fI,{size:16})," Model Performance"]}),m.jsxs("button",{className:s==="trends"?"active":"",onClick:()=>u("trends"),children:[m.jsx($m,{size:16})," Trends"]}),m.jsxs("button",{className:s==="calibration"?"active":"",onClick:()=>u("calibration"),children:[m.jsx(lU,{size:16})," Calibration"]})]}),s==="overview"&&m.jsxs("div",{className:"overview-section",children:[m.jsxs("div",{className:"metrics-grid",children:[m.jsxs("div",{className:"metric-card",children:[m.jsx("div",{className:"metric-icon",children:m.jsx(Pf,{size:24})}),m.jsx("div",{className:"metric-value",children:((d=r.usage)==null?void 0:d.totalUses)||0}),m.jsx("div",{className:"metric-label",children:"Total Uses"}),m.jsxs("div",{className:"metric-change",children:[m.jsx(nU,{size:14})," +12% vs last period"]})]}),m.jsxs("div",{className:"metric-card",children:[m.jsx("div",{className:"metric-icon",children:m.jsx(Pu,{size:24})}),m.jsx("div",{className:"metric-value",children:((p=r.usage)==null?void 0:p.uniqueUsers)||0}),m.jsx("div",{className:"metric-label",children:"Unique Users"})]}),m.jsxs("div",{className:"metric-card",children:[m.jsx("div",{className:"metric-icon",children:m.jsx(fI,{size:24})}),m.jsx("div",{className:"metric-value",children:((_=r.usage)==null?void 0:_.part1ToPart2Rate)||"0%"}),m.jsx("div",{className:"metric-label",children:"Part 12 Conversion"})]}),m.jsxs("div",{className:"metric-card",children:[m.jsx("div",{className:"metric-icon",children:m.jsx(lr,{size:24})}),m.jsx("div",{className:"metric-value",children:((y=r.outcomes)==null?void 0:y.totalOutcomes)||0}),m.jsx("div",{className:"metric-label",children:"Biopsy Outcomes"})]}),m.jsxs("div",{className:"metric-card highlight",children:[m.jsx("div",{className:"metric-icon",children:m.jsx(Ti,{size:24})}),m.jsxs("div",{className:"metric-value",children:[((b=r.outcomes)==null?void 0:b.cancerRate)||0,"%"]}),m.jsx("div",{className:"metric-label",children:"Cancer Detection Rate"})]}),m.jsxs("div",{className:"metric-card",children:[m.jsx("div",{className:"metric-icon",children:m.jsx(oU,{size:24})}),m.jsxs("div",{className:"metric-value",children:[((v=r.usage)==null?void 0:v.avgSessionDuration)||0,"m"]}),m.jsx("div",{className:"metric-label",children:"Avg Session Duration"})]})]}),m.jsxs("div",{className:"charts-row",children:[m.jsxs("div",{className:"chart-container",children:[m.jsx("h3",{children:"Hourly Usage Distribution"}),m.jsx(Yc,{width:"100%",height:200,children:m.jsxs(Ywe,{data:Object.entries(((g=r.usage)==null?void 0:g.hourlyDistribution)||{}).map(([C,k])=>({hour:C,count:k})),children:[m.jsx(vf,{strokeDasharray:"3 3"}),m.jsx(Ei,{dataKey:"hour"}),m.jsx(Hr,{}),m.jsx(Wn,{}),m.jsx(Fs,{dataKey:"count",fill:"#00578B"})]})})]}),m.jsxs("div",{className:"chart-container",children:[m.jsx("h3",{children:"Outcome Distribution"}),m.jsx(Yc,{width:"100%",height:200,children:m.jsx(fU,{children:m.jsxs("div",{className:"outcome-legend",children:[m.jsxs("div",{className:"outcome-item",children:[m.jsx("span",{className:"color-box",style:{background:"#e74c3c"}}),"Cancer Detected: ",((E=r.outcomes)==null?void 0:E.cancerDetected)||0]}),m.jsxs("div",{className:"outcome-item",children:[m.jsx("span",{className:"color-box",style:{background:"#27ae60"}}),"No Cancer: ",((P=r.outcomes)==null?void 0:P.noCancer)||0]}),m.jsxs("div",{className:"outcome-item",children:[m.jsx("span",{className:"color-box",style:{background:"#f39c12"}}),"Pending: ",((T=r.outcomes)==null?void 0:T.pending)||0]})]})})})]})]})]}),s==="performance"&&r.modelPerformance&&m.jsxs("div",{className:"performance-section",children:[m.jsxs("div",{className:"performance-metrics",children:[m.jsxs("div",{className:"perf-metric",children:[m.jsx("label",{children:"Sensitivity"}),m.jsxs("value",{children:[r.modelPerformance.sensitivity,"%"]}),m.jsx("small",{children:"True positive rate"})]}),m.jsxs("div",{className:"perf-metric",children:[m.jsx("label",{children:"Specificity"}),m.jsxs("value",{children:[r.modelPerformance.specificity,"%"]}),m.jsx("small",{children:"True negative rate"})]}),m.jsxs("div",{className:"perf-metric",children:[m.jsx("label",{children:"PPV"}),m.jsxs("value",{children:[r.modelPerformance.ppv,"%"]}),m.jsx("small",{children:"Positive predictive value"})]}),m.jsxs("div",{className:"perf-metric",children:[m.jsx("label",{children:"NPV"}),m.jsxs("value",{children:[r.modelPerformance.npv,"%"]}),m.jsx("small",{children:"Negative predictive value"})]}),m.jsxs("div",{className:"perf-metric highlight",children:[m.jsx("label",{children:"AUC"}),m.jsx("value",{children:r.modelPerformance.auc}),m.jsx("small",{children:"Discrimination power"})]}),m.jsxs("div",{className:"perf-metric",children:[m.jsx("label",{children:"Brier Score"}),m.jsx("value",{children:r.modelPerformance.brierScore}),m.jsx("small",{children:"Calibration quality"})]})]}),m.jsxs("div",{className:"confusion-matrix",children:[m.jsx("h3",{children:"Confusion Matrix"}),m.jsxs("div",{className:"matrix-grid",children:[m.jsx("div",{className:"matrix-cell header"}),m.jsx("div",{className:"matrix-cell header",children:"Predicted High Risk"}),m.jsx("div",{className:"matrix-cell header",children:"Predicted Low Risk"}),m.jsx("div",{className:"matrix-cell header",children:"Actual Cancer"}),m.jsxs("div",{className:"matrix-cell tp",children:["TP: ",((A=r.modelPerformance.confusionMatrix)==null?void 0:A.truePositives)||0]}),m.jsxs("div",{className:"matrix-cell fn",children:["FN: ",((x=r.modelPerformance.confusionMatrix)==null?void 0:x.falseNegatives)||0]}),m.jsx("div",{className:"matrix-cell header",children:"No Cancer"}),m.jsxs("div",{className:"matrix-cell fp",children:["FP: ",((S=r.modelPerformance.confusionMatrix)==null?void 0:S.falsePositives)||0]}),m.jsxs("div",{className:"matrix-cell tn",children:["TN: ",((O=r.modelPerformance.confusionMatrix)==null?void 0:O.trueNegatives)||0]})]})]})]}),s==="trends"&&r.trends&&m.jsxs("div",{className:"trends-section",children:[m.jsxs("div",{className:"chart-large",children:[m.jsx("h3",{children:"Weekly Trends"}),m.jsx(Yc,{width:"100%",height:300,children:m.jsxs(Xwe,{data:r.trends,children:[m.jsx(vf,{strokeDasharray:"3 3"}),m.jsx(Ei,{dataKey:"week"}),m.jsx(Hr,{yAxisId:"left"}),m.jsx(Hr,{yAxisId:"right",orientation:"right"}),m.jsx(Wn,{}),m.jsx(ns,{}),m.jsx(Bi,{yAxisId:"left",type:"monotone",dataKey:"usage",stroke:"#00578B",fill:"#00578B",fillOpacity:.3,name:"Usage"}),m.jsx(Bi,{yAxisId:"right",type:"monotone",dataKey:"cancerRate",stroke:"#e74c3c",fill:"#e74c3c",fillOpacity:.3,name:"Cancer Rate %"})]})})]}),m.jsxs("div",{className:"chart-large",children:[m.jsx("h3",{children:"Predicted vs Actual Risk"}),m.jsx(Yc,{width:"100%",height:300,children:m.jsxs(nN,{children:[m.jsx(vf,{strokeDasharray:"3 3"}),m.jsx(Ei,{type:"number",dataKey:"predictedRisk",name:"Predicted Risk %",domain:[0,100]}),m.jsx(Hr,{type:"number",dataKey:"actual",name:"Actual Outcome",domain:[0,1],tickFormatter:C=>C===1?"Cancer":"No Cancer"}),m.jsx(Wn,{cursor:{strokeDasharray:"3 3"}}),m.jsx(Ml,{name:"Outcomes",data:[],fill:"#00578B"}),m.jsx(Ha,{y:.5,stroke:"#666",strokeDasharray:"3 3"})]})})]})]}),s==="calibration"&&r.modelPerformance&&m.jsxs("div",{className:"calibration-section",children:[m.jsxs("div",{className:"calibration-stats",children:[m.jsxs("div",{className:"cal-stat",children:[m.jsx("label",{children:"Calibration Slope"}),m.jsx("value",{children:r.modelPerformance.calibrationSlope}),m.jsx("small",{children:"Ideal: 1.0"})]}),m.jsxs("div",{className:"cal-stat",children:[m.jsx("label",{children:"Calibration Intercept"}),m.jsx("value",{children:r.modelPerformance.calibrationIntercept}),m.jsx("small",{children:"Ideal: 0.0"})]}),m.jsxs("div",{className:"cal-stat",children:[m.jsx("label",{children:"Current Status"}),m.jsx("value",{className:parseFloat(r.modelPerformance.calibrationSlope)>.9&&parseFloat(r.modelPerformance.calibrationSlope)<1.1?"good":"warning",children:parseFloat(r.modelPerformance.calibrationSlope)>.9&&parseFloat(r.modelPerformance.calibrationSlope)<1.1?"Well Calibrated":"Needs Recalibration"})]})]}),m.jsxs("div",{className:"calibration-chart",children:[m.jsx("h3",{children:"Calibration Plot (Predicted vs Observed)"}),m.jsx(Yc,{width:"100%",height:350,children:m.jsxs(nN,{children:[m.jsx(vf,{strokeDasharray:"3 3"}),m.jsx(Ei,{type:"number",dataKey:"predicted",name:"Predicted Probability %",domain:[0,100]}),m.jsx(Hr,{type:"number",dataKey:"observed",name:"Observed Frequency %",domain:[0,100]}),m.jsx(Wn,{cursor:{strokeDasharray:"3 3"}}),m.jsx(Ha,{x:0,y:0,stroke:"#000"}),m.jsx(Ha,{x:100,y:100,stroke:"#000"}),m.jsx(Ha,{segment:[{x:0,y:0},{x:100,y:100}],stroke:"#27ae60",strokeDasharray:"3 3",label:"Perfect Calibration"}),m.jsx(Ml,{name:"Deciles",data:[],fill:"#00578B"})]})}),m.jsx("p",{className:"calibration-note",children:"Points on the green diagonal line indicate perfect calibration. Points below the line indicate over-prediction (predicted risk higher than observed). Points above indicate under-prediction."})]})]})]}):m.jsxs("div",{className:"insights-dashboard error",children:[m.jsx(Ti,{size:48}),m.jsx("h3",{children:"Unable to load insights"}),m.jsx("p",{children:"Check your connection and try again"}),m.jsx("button",{onClick:l,children:"Retry"})]})},lbe=({insights:t})=>m.jsxs("div",{className:"system-status",children:[m.jsx("div",{className:"system-status-header",children:m.jsx("div",{className:"header-content",children:m.jsxs("div",{className:"header-title",children:[m.jsx(xw,{size:28}),m.jsx("h2",{children:"System Status"})]})})}),m.jsxs("div",{className:"system-status-content",children:[m.jsxs("div",{className:"status-overview",children:[m.jsxs("div",{className:"status-card",children:[m.jsx("div",{className:"card-icon",children:m.jsx(xw,{size:32})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"Server Health"}),m.jsx("p",{children:"All systems operational"}),m.jsx("span",{className:"status-indicator active",children:"Online"})]})]}),m.jsxs("div",{className:"status-card",children:[m.jsx("div",{className:"card-icon",children:m.jsx(Ja,{size:32})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"Database Status"}),m.jsx("p",{children:"Firebase connection stable"}),m.jsx("span",{className:"status-indicator active",children:"Connected"})]})]}),m.jsxs("div",{className:"status-card",children:[m.jsx("div",{className:"card-icon",children:m.jsx(Pu,{size:32})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"API Performance"}),m.jsx("p",{children:"Response times optimal"}),m.jsx("span",{className:"status-indicator active",children:"Healthy"})]})]}),m.jsxs("div",{className:"status-card",children:[m.jsx("div",{className:"card-icon",children:m.jsx(GU,{size:32})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"Network Status"}),m.jsx("p",{children:"All endpoints reachable"}),m.jsx("span",{className:"status-indicator active",children:"Connected"})]})]})]}),m.jsxs("div",{className:"monitoring-section",children:[m.jsxs("div",{className:"section-header",children:[m.jsx(Ti,{size:20}),m.jsx("h3",{children:"System Monitoring"})]}),m.jsxs("div",{className:"monitoring-grid",children:[m.jsxs("div",{className:"monitor-item",children:[m.jsx(Mm,{size:16}),m.jsx("span",{children:"Uptime: 99.9%"})]}),m.jsxs("div",{className:"monitor-item",children:[m.jsx(_U,{size:16}),m.jsx("span",{children:"Storage: 45% used"})]}),m.jsxs("div",{className:"monitor-item",children:[m.jsx(Pu,{size:16}),m.jsx("span",{children:"CPU: 23% average"})]}),m.jsxs("div",{className:"monitor-item",children:[m.jsx(Ja,{size:16}),m.jsx("span",{children:"Queries: 1.2k/min"})]})]})]}),m.jsx("div",{className:"coming-soon-section",children:m.jsxs("div",{className:"placeholder-card",children:[m.jsx("div",{className:"card-icon",children:m.jsx(Pu,{size:48})}),m.jsx("h3",{children:"Advanced Monitoring Coming Soon"}),m.jsx("p",{children:"Real-time system monitoring and alerting features are being developed"}),m.jsxs("div",{className:"features-list",children:[m.jsxs("div",{className:"feature-item",children:[m.jsx(lr,{size:16}),m.jsx("span",{children:"Real-time performance metrics"})]}),m.jsxs("div",{className:"feature-item",children:[m.jsx(lr,{size:16}),m.jsx("span",{children:"Automated error detection"})]}),m.jsxs("div",{className:"feature-item",children:[m.jsx(lr,{size:16}),m.jsx("span",{children:"Custom alert configurations"})]}),m.jsxs("div",{className:"feature-item",children:[m.jsx(lr,{size:16}),m.jsx("span",{children:"Historical data analysis"})]})]})]})}),t&&m.jsxs("div",{className:"insights-section",children:[m.jsxs("div",{className:"section-header",children:[m.jsx(Ja,{size:20}),m.jsx("h3",{children:"Current Insights"})]}),m.jsx("div",{className:"insights-data",children:m.jsx("pre",{children:JSON.stringify(t,null,2)})})]})]})]});class cbe{constructor(){this.adminCollection="admins"}async isAdminAuthorized(e,n){try{const r=await sm(po(Sn,this.adminCollection,n));if(r.exists()){const o=r.data();return{authorized:o.isActive===!0&&o.email===e,source:"firestore",adminData:o}}const i=Wr.currentUser;if(i)try{if((await i.getIdTokenResult()).claims.admin===!0)return{authorized:!0,source:"custom_claims",adminData:{email:e,uid:n,role:"admin"}}}catch(o){console.warn("Could not check custom claims:",o)}return{authorized:!1,source:"not_found",error:"Admin user not found in admin_users collection and no admin custom claims"}}catch(r){return console.error("Error checking admin authorization:",r),r.code==="permission-denied"||r.message.includes("Missing or insufficient permissions")?{authorized:!1,source:"permission_error",error:"Firestore permissions error. Please check security rules.",needsSetup:!0}:{authorized:!1,source:"error",error:r.message}}}async createAdminUser(e,n,r="manual"){try{const i={email:n,isActive:!0,role:"admin",createdAt:new Date().toISOString(),createdBy:r,lastLogin:new Date().toISOString()};return await D$(po(Sn,this.adminCollection,e),i),!0}catch(i){return console.error("Error creating admin user:",i),!1}}async updateAdminLogin(e){try{const n=await sm(po(Sn,this.adminCollection,e));if(n.exists()){const r=n.data();await ab(po(Sn,this.adminCollection,e),{lastLogin:new Date().toISOString(),loginCount:(r.loginCount||0)+1})}}catch(n){console.error("Error updating admin login:",n)}}async getAllAdminUsers(){try{const e=await rg(Eh(Sn,this.adminCollection)),n=[];return e.forEach(r=>{n.push({uid:r.id,...r.data()})}),n}catch(e){return console.error("Error getting admin users:",e),[]}}async deactivateAdminUser(e){try{return await ab(po(Sn,this.adminCollection,e),{isActive:!1,deactivatedAt:new Date().toISOString()}),{success:!0}}catch(n){return console.error("Error deactivating admin:",n),{success:!1,error:n.message}}}async setAdminCustomClaims(e){return{success:!1,message:"Custom claims require Firebase Admin SDK - use Cloud Functions"}}async hasPermission(e){try{const n=Wr.currentUser;if(!n)return!1;const r=await sm(po(Sn,this.adminCollection,n.uid));if(r.exists()){const i=r.data();return i.isActive&&i.permissions.includes(e)}return!1}catch(n){return console.error("Error checking permission:",n),!1}}}const py=new cbe,fbe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState(!0),[i,o]=W.useState(null),[a,s]=W.useState(!1),[u,l]=W.useState("");W.useEffect(()=>{c()},[]);const c=async()=>{r(!0),o(null);try{const y=await py.getAllAdminUsers();y.success?e(y.admins):o(y.error)}catch(y){o("Failed to load admin users"),console.error("Error loading admin users:",y)}finally{r(!1)}},f=async(y,b)=>{if(window.confirm(`Are you sure you want to deactivate admin access for ${b}?`))try{const v=await py.deactivateAdminUser(y);v.success?await c():alert("Failed to deactivate admin: "+v.error)}catch(v){alert("Error deactivating admin"),console.error("Error deactivating admin:",v)}},d=async()=>{if(!u){alert("Please enter an email address");return}try{alert(`To add ${u} as admin:

1. User must first login with email OTP
2. System will auto-create admin account
3. You can then manage their permissions

This ensures only verified users can become admins.`),l(""),s(!1)}catch(y){alert("Error adding admin"),console.error("Error adding admin:",y)}},p=y=>y?new Date(y).toLocaleString():"Never",_=y=>m.jsxs("span",{className:`status-badge ${y?"active":"inactive"}`,children:[y?m.jsx(lr,{size:14}):m.jsx(Tw,{size:14}),y?"Active":"Inactive"]});return n?m.jsx("div",{className:"admin-management loading",children:m.jsxs("div",{className:"loading-spinner",children:[m.jsx("div",{className:"spinner"}),m.jsx("p",{children:"Loading admin users..."})]})}):m.jsxs("div",{className:"admin-management",children:[m.jsxs("div",{className:"admin-management-header",children:[m.jsxs("div",{className:"header-content",children:[m.jsxs("div",{className:"header-title",children:[m.jsx(Pf,{size:24}),m.jsx("h2",{children:"Admin User Management"})]}),m.jsxs("button",{className:"add-admin-btn",onClick:()=>s(!0),children:[m.jsx(kU,{size:16}),"Add Admin"]})]}),m.jsxs("div",{className:"authorization-info",children:[m.jsx(cI,{size:16}),m.jsx("p",{children:"Admin authorization is verified through Firebase using multiple methods: Firestore admin_users collection, Firebase Custom Claims, and verified email domains."})]})]}),i&&m.jsxs("div",{className:"error-message",children:[m.jsx(cf,{size:20}),m.jsx("span",{children:i})]}),m.jsx("div",{className:"admin-users-grid",children:t.length===0?m.jsxs("div",{className:"no-admins",children:[m.jsx(Pf,{size:48}),m.jsx("h3",{children:"No Admin Users Found"}),m.jsx("p",{children:"Admin users will be automatically created when authorized users first login. Initially, only hardcoded admin emails are authorized."})]}):t.map(y=>m.jsxs("div",{className:"admin-user-card",children:[m.jsxs("div",{className:"admin-user-header",children:[m.jsxs("div",{className:"admin-info",children:[m.jsx("h3",{children:y.email}),m.jsxs("p",{children:["UID: ",y.uid]})]}),_(y.isActive)]}),m.jsxs("div",{className:"admin-user-details",children:[m.jsxs("div",{className:"detail-item",children:[m.jsx(cI,{size:16}),m.jsxs("span",{children:["Role: ",y.role||"admin"]})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx(Mm,{size:16}),m.jsxs("span",{children:["Created: ",p(y.createdAt)]})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx(Mm,{size:16}),m.jsxs("span",{children:["Last Login: ",p(y.lastLogin)]})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx(Pf,{size:16}),m.jsxs("span",{children:["Login Count: ",y.loginCount||0]})]})]}),m.jsxs("div",{className:"admin-permissions",children:[m.jsx("h4",{children:"Permissions:"}),m.jsx("div",{className:"permission-tags",children:(y.permissions||[]).map((b,v)=>m.jsx("span",{className:"permission-tag",children:b.replace("_"," ")},v))})]}),m.jsx("div",{className:"admin-user-actions",children:y.isActive&&m.jsxs("button",{className:"deactivate-btn",onClick:()=>f(y.uid,y.email),children:[m.jsx(UU,{size:16}),"Deactivate"]})})]},y.uid))}),a&&m.jsx("div",{className:"add-admin-modal",children:m.jsxs("div",{className:"modal-content",children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h3",{children:"Add New Admin"}),m.jsx("button",{className:"close-btn",onClick:()=>s(!1),children:m.jsx(Tw,{size:20})})]}),m.jsxs("div",{className:"modal-body",children:[m.jsx("p",{children:"To add a new admin user, they must first login with their email through the admin login. The system will automatically create an admin account for authorized users."}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Admin Email (for reference)"}),m.jsx("input",{type:"email",value:u,onChange:y=>l(y.target.value),placeholder:"admin@example.com"})]})]}),m.jsxs("div",{className:"modal-actions",children:[m.jsx("button",{className:"cancel-btn",onClick:()=>s(!1),children:"Cancel"}),m.jsx("button",{className:"confirm-btn",onClick:d,children:"Understand Process"})]})]})})]})},oS="epsa_calculator_config",oN={collection:"calculatorConfig",doc:"published"},hbe=()=>{try{const t=localStorage.getItem(oS);if(t)return JSON.parse(t)}catch(t){console.error("Error loading calculator config:",t)}return tu},dbe=async()=>{try{const e=(await Vm(()=>Promise.resolve().then(()=>Ebe),void 0)).db;if(!e)return null;const{doc:n,getDoc:r}=await Vm(async()=>{const{doc:u,getDoc:l}=await Promise.resolve().then(()=>ub);return{doc:u,getDoc:l}},void 0),i=n(e,oN.collection,oN.doc),o=await r(i);if(!o.exists())return null;const a=o.data(),s=a==null?void 0:a.config;return s?(localStorage.setItem(oS,JSON.stringify(s)),s):null}catch(t){return console.warn("Failed to refresh calculator config from Firestore:",t),null}},pbe=async t=>{try{localStorage.setItem(oS,JSON.stringify(t));const e=JSON.parse(localStorage.getItem("epsa_config_versions")||"[]");return e.push({version:t.version,timestamp:new Date().toISOString(),config:JSON.parse(JSON.stringify(t))}),localStorage.setItem("epsa_config_versions",JSON.stringify(e.slice(-20))),!0}catch(e){return console.error("Error saving config:",e),!1}},mbe=({onLogout:t,adminUser:e})=>{const[n,r]=W.useState("overview"),[i,o]=W.useState(()=>hbe()),[a,s]=W.useState(null),[u,l]=W.useState(!0),[c,f]=W.useState(!0),[d,p]=W.useState(new Date);W.useEffect(()=>{_(),(async()=>{const E=await dbe();E&&o(E)})();const g=setInterval(()=>p(new Date),1e3);return()=>clearInterval(g)},[]);const _=async()=>{try{const g=await iS("30d");s(g),await rN("ADMIN_LOGIN",{timestamp:new Date().toISOString(),userAgent:navigator.userAgent,connectionStatus:(g==null?void 0:g.connectionStatus)||"unknown"})}catch(g){console.error("Error loading dashboard data:",g),s({error:g.message,usage:{totalUses:0,uniqueUsers:0,part1ToPart2Rate:"0%"},outcomes:{totalOutcomes:0,cancerRate:0},performance:{modelAccuracy:"N/A",calibration:"N/A"},recommendations:[{type:"warning",priority:"high",message:"Firebase connection failed",action:"Check console for details and verify Firebase configuration"}]})}finally{l(!1)}},y=async g=>{await pbe(g)?(o(g),await rN("CONFIG_UPDATED",{configVersion:g.version,timestamp:new Date().toISOString()}),alert("Calculator configuration saved successfully!")):alert("Failed to save configuration")},b=()=>{switch(n){case"calculator":return m.jsx(HG,{onSave:y,onClose:()=>{}});case"analytics":return m.jsx(ube,{onClose:()=>{}});case"users":return m.jsx(fbe,{});case"system":return m.jsx(lbe,{insights:a});default:return m.jsx(v,{insights:a})}},v=({insights:g})=>{var E,P,T,A,x,S;return m.jsxs("div",{className:"overview-section",children:[m.jsx("h2",{children:"System Overview"}),m.jsxs("div",{className:"overview-grid",children:[m.jsxs("div",{className:"overview-card",children:[m.jsxs("div",{className:"card-header",children:[m.jsx(Ew,{size:24}),m.jsx("h3",{children:"Calculator Status"})]}),m.jsxs("div",{className:"card-content",children:[m.jsxs("div",{className:"status-item",children:[m.jsx("span",{children:"Model Version:"}),m.jsx("span",{className:"value",children:i.version})]}),m.jsxs("div",{className:"status-item",children:[m.jsx("span",{children:"Active Variables:"}),m.jsx("span",{className:"value",children:i.part1.variables.length})]}),m.jsxs("div",{className:"status-item",children:[m.jsx("span",{children:"Status:"}),m.jsxs("span",{className:"value status-active",children:[m.jsx(lr,{size:16,style:{marginRight:"4px"}}),"Active"]})]})]})]}),m.jsxs("div",{className:"overview-card",children:[m.jsxs("div",{className:"card-header",children:[m.jsx($m,{size:24}),m.jsx("h3",{children:"Recent Activity"})]}),m.jsxs("div",{className:"card-content",children:[m.jsxs("div",{className:"status-item",children:[m.jsx("span",{children:"Total Uses:"}),m.jsx("span",{className:"value",children:((E=g==null?void 0:g.usage)==null?void 0:E.totalUses)||0})]}),m.jsxs("div",{className:"status-item",children:[m.jsx("span",{children:"Unique Users:"}),m.jsx("span",{className:"value",children:((P=g==null?void 0:g.usage)==null?void 0:P.uniqueUsers)||0})]}),m.jsxs("div",{className:"status-item",children:[m.jsx("span",{children:"Conversion Rate:"}),m.jsx("span",{className:"value",children:((T=g==null?void 0:g.usage)==null?void 0:T.part1ToPart2Rate)||"0%"})]})]})]}),m.jsxs("div",{className:"overview-card",children:[m.jsxs("div",{className:"card-header",children:[m.jsx(Ja,{size:24}),m.jsx("h3",{children:"Data Collection"})]}),m.jsxs("div",{className:"card-content",children:[m.jsxs("div",{className:"status-item",children:[m.jsx("span",{children:"Outcomes Tracked:"}),m.jsx("span",{className:"value",children:((A=g==null?void 0:g.outcomes)==null?void 0:A.totalOutcomes)||0})]}),m.jsxs("div",{className:"status-item",children:[m.jsx("span",{children:"Cancer Detection:"}),m.jsxs("span",{className:"value",children:[((x=g==null?void 0:g.outcomes)==null?void 0:x.cancerRate)||0,"%"]})]}),m.jsxs("div",{className:"status-item",children:[m.jsx("span",{children:"Collection Status:"}),m.jsxs("span",{className:"value status-active",children:[m.jsx(Pu,{size:16,style:{marginRight:"4px"}}),"Active"]})]})]})]}),m.jsxs("div",{className:"overview-card",children:[m.jsxs("div",{className:"card-header",children:[m.jsx(Ti,{size:24}),m.jsx("h3",{children:"System Health"})]}),m.jsxs("div",{className:"card-content",children:[m.jsxs("div",{className:"status-item",children:[m.jsx("span",{children:"Model Performance:"}),m.jsxs("span",{className:"value status-good",children:[m.jsx(YU,{size:16,style:{marginRight:"4px"}}),"Good"]})]}),m.jsxs("div",{className:"status-item",children:[m.jsx("span",{children:"Last Update:"}),m.jsxs("span",{className:"value",children:[m.jsx(Mm,{size:16,style:{marginRight:"4px"}}),d.toLocaleTimeString()]})]}),m.jsxs("div",{className:"status-item",children:[m.jsx("span",{children:"Storage:"}),m.jsxs("span",{className:"value status-good",children:[m.jsx(Ja,{size:16,style:{marginRight:"4px"}}),"Healthy"]})]})]})]})]}),((S=g==null?void 0:g.recommendations)==null?void 0:S.length)>0&&m.jsxs("div",{className:"recommendations-section",children:[m.jsx("h3",{children:"Recommendations"}),g.recommendations.map((O,C)=>m.jsxs("div",{className:`recommendation ${O.type} ${O.priority}`,children:[O.type==="warning"?m.jsx(Ti,{size:16}):m.jsx(lr,{size:16}),m.jsxs("div",{children:[m.jsx("strong",{children:O.message}),m.jsx("p",{children:O.action})]})]},C))]})]})};return u?m.jsx("div",{className:"admin-dashboard loading",children:m.jsxs("div",{className:"loading-spinner",children:[m.jsx("div",{className:"spinner"}),m.jsx("p",{children:"Loading admin dashboard..."})]})}):m.jsxs("div",{className:"admin-dashboard",children:[m.jsxs("header",{className:"admin-header",children:[m.jsxs("div",{className:"header-left",children:[m.jsx("button",{className:"menu-toggle",onClick:()=>f(!c),children:c?m.jsx(Tw,{size:24}):m.jsx(OU,{size:24})}),m.jsx("h1",{children:"ePSA Admin Dashboard"})]}),m.jsxs("div",{className:"header-right",children:[m.jsxs("div",{className:"admin-user-info",children:[m.jsx("span",{className:"user-email",children:e==null?void 0:e.email}),m.jsx("span",{className:"user-role",children:"Admin"})]}),m.jsx("span",{className:"current-time",children:d.toLocaleString()}),m.jsxs("button",{className:"logout-btn",onClick:t,children:[m.jsx(AU,{size:16}),"Logout"]})]})]}),m.jsxs("div",{className:"admin-layout",children:[m.jsx("aside",{className:`admin-sidebar ${c?"open":"closed"}`,children:m.jsxs("nav",{className:"admin-nav",children:[m.jsxs("button",{className:`nav-item ${n==="overview"?"active":""}`,onClick:()=>r("overview"),children:[m.jsx(bU,{size:20}),m.jsx("span",{children:"Overview"})]}),m.jsxs("button",{className:`nav-item ${n==="calculator"?"active":""}`,onClick:()=>r("calculator"),children:[m.jsx(Ew,{size:20}),m.jsx("span",{children:"Calculator Admin"})]}),m.jsxs("button",{className:`nav-item ${n==="analytics"?"active":""}`,onClick:()=>r("analytics"),children:[m.jsx(sU,{size:20}),m.jsx("span",{children:"Analytics"})]}),m.jsxs("button",{className:`nav-item ${n==="users"?"active":""}`,onClick:()=>r("users"),children:[m.jsx(Pf,{size:20}),m.jsx("span",{children:"User Management"})]}),m.jsxs("button",{className:`nav-item ${n==="system"?"active":""}`,onClick:()=>r("system"),children:[m.jsx(xw,{size:20}),m.jsx("span",{children:"System Status"})]})]})}),m.jsx("main",{className:"admin-main",children:b()})]})]})},gbe={url:window.location.origin+"/",handleCodeInApp:!0,iOS:{bundleId:"com.urologyai.epsa.admin"},android:{packageName:"com.urologyai.epsa.admin",installApp:!0,minimumVersion:"12"}};class ybe{constructor(){this.email=null}async sendAdminOTP(e){try{return this.email=e,await OH(Wr,e,gbe),window.localStorage.setItem("adminEmailForSignIn",e),{success:!0,message:"Admin login link sent to your email. Check your inbox and click the link to continue.",method:"email_otp"}}catch(n){return console.error("Error sending admin OTP:",n),n.code==="auth/operation-not-allowed"?{success:!1,message:'Email link authentication is not enabled in Firebase. Please enable it in Firebase Console  Authentication  Sign-in method  Email/Password  Enable "Email link (passwordless sign-in)"',code:n.code,requiresFirebaseSetup:!0}:{success:!1,message:this.getErrorMessage(n.code),code:n.code}}}async completeAdminSignIn(e){try{let n=window.localStorage.getItem("adminEmailForSignIn");if(n||(n=prompt("Please enter your email address for verification:")),!n)throw new Error("Email address required");const r=await kH(Wr,n,e);if(window.localStorage.removeItem("adminEmailForSignIn"),await this.isAdminAuthorized(r.user.email,r.user.uid))return sessionStorage.setItem("admin_authenticated","true"),sessionStorage.setItem("admin_user",JSON.stringify({email:r.user.email,uid:r.user.uid})),{success:!0,user:r.user,message:"Successfully logged in as admin"};throw await Wr.signOut(),new Error("You are not authorized to access the admin dashboard")}catch(n){return console.error("Error completing admin sign-in:",n),{success:!1,message:this.getErrorMessage(n.code)||n.message,code:n.code}}}checkForEmailLink(){return CH(Wr,window.location.href)?this.completeAdminSignIn(window.location.href):null}async isAdminAuthorized(e,n){const r=await py.isAdminAuthorized(e,n);if(r.authorized){try{await py.updateAdminLogin(n)}catch(i){console.error("Error updating admin login tracking:",i)}return!0}else return r.error&&console.error("Authorization error:",r.error),!1}getCurrentAdmin(){const e=sessionStorage.getItem("admin_user");return e?JSON.parse(e):null}isAdminAuthenticated(){return sessionStorage.getItem("admin_authenticated")==="true"&&this.getCurrentAdmin()!==null}async logoutAdmin(){try{return await Wr.signOut(),sessionStorage.removeItem("admin_authenticated"),sessionStorage.removeItem("admin_user"),window.localStorage.removeItem("adminEmailForSignIn"),{success:!0,message:"Logged out successfully"}}catch(e){return console.error("Error during logout:",e),{success:!1,message:"Error during logout"}}}getErrorMessage(e){return{"auth/invalid-email":"Invalid email address","auth/user-not-found":"Admin account not found","auth/too-many-requests":"Too many requests. Please try again later.","auth/network-request-failed":"Network error. Please check your connection.","auth/internal-error":"Internal error. Please try again.","auth/configuration-not-found":"Firebase configuration error","auth/insufficient-permission":"Insufficient permissions","auth/missing-email":"Email address is required","auth/operation-not-allowed":'Email link authentication is not enabled. Please enable it in Firebase Console  Authentication  Sign-in method  Email/Password  Enable "Email link (passwordless sign-in)"',"auth/invalid-action-code":"Invalid or expired login link. Please request a new login link.","auth/expired-action-code":"Login link has expired. Please request a new link (links expire in 24 hours).","auth/user-disabled":"Account has been disabled","auth/weak-password":"Password is too weak","auth/email-already-in-use":"Email is already in use","auth/invalid-password":"Invalid password"}[e]||"Authentication failed. Please try again."}}const Qa=new ybe,vbe=({onLoginSuccess:t})=>{const[e,n]=W.useState(""),[r,i]=W.useState(!1),[o,a]=W.useState("email"),[s,u]=W.useState({type:"",text:""}),[l,c]=W.useState("");W.useEffect(()=>{f()},[]);const f=async()=>{if(window.location.href.includes("apiKey")||window.location.href.includes("oobCode")){i(!0),a("checking"),u({type:"info",text:"Verifying your login link..."});const v=await Qa.checkForEmailLink();v&&v.success?(u({type:"success",text:v.message}),setTimeout(()=>t(v.user),1500)):(v&&u({type:"error",text:v.message}),a("email")),i(!1)}},d=async v=>{if(v.preventDefault(),!e){u({type:"error",text:"Please enter your email address"});return}i(!0);const g=await Qa.sendAdminOTP(e);g.success?(c(e),a("sent"),u({type:"success",text:" Admin login link sent! Check your email and click the link within 24 hours."})):g.message.includes("invalid-action-code")||g.message.includes("expired")?(u({type:"error",text:" Login link expired. Please request a new one below."}),a("email")):u({type:"error",text:g.message}),i(!1)},p=async()=>{i(!0),u({type:"info",text:"Resending login link..."});const v=await Qa.sendAdminOTP(l);v.success?u({type:"success",text:v.message}):u({type:"error",text:v.message}),i(!1)},_=()=>m.jsxs("div",{className:"admin-login-form",children:[m.jsxs("div",{className:"login-header",children:[m.jsx("div",{className:"admin-icon",children:m.jsx(TU,{size:32})}),m.jsx("h1",{children:"Admin Login"}),m.jsx("p",{children:"Enter your admin email to receive a secure login link"})]}),m.jsxs("form",{onSubmit:d,className:"login-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Admin Email"}),m.jsxs("div",{className:"input-wrapper",children:[m.jsx(lI,{size:20,className:"input-icon"}),m.jsx("input",{type:"email",id:"email",value:e,onChange:v=>n(v.target.value),placeholder:"admin@urology-ai.com",required:!0,disabled:r})]})]}),m.jsx("button",{type:"submit",className:"login-button",disabled:r||!e,children:r?m.jsxs(m.Fragment,{children:[m.jsx(V_,{size:20,className:"animate-spin"}),"Sending Link..."]}):m.jsxs(m.Fragment,{children:["Send Login Link",m.jsx(eU,{size:20})]})})]}),m.jsxs("div",{className:"login-info",children:[m.jsx(cf,{size:16}),m.jsx("p",{children:"A secure login link will be sent to your email. Click the link to access the admin dashboard."})]})]}),y=()=>m.jsxs("div",{className:"admin-login-form",children:[m.jsxs("div",{className:"login-header",children:[m.jsx("div",{className:"admin-icon success",children:m.jsx(lI,{size:32})}),m.jsx("h1",{children:"Check Your Email"}),m.jsx("p",{children:"We've sent a secure login link to"}),m.jsx("p",{className:"email-display",children:l})]}),m.jsxs("div",{className:"success-message",children:[m.jsx(lr,{size:24}),m.jsxs("div",{children:[m.jsx("h3",{children:"Login Link Sent!"}),m.jsx("p",{children:"Open your email and click the link to access the admin dashboard."})]})]}),m.jsxs("div",{className:"email-actions",children:[m.jsx("button",{onClick:p,className:"resend-button",disabled:r,children:r?m.jsxs(m.Fragment,{children:[m.jsx(V_,{size:16,className:"animate-spin"}),"Resending..."]}):"Resend Link"}),m.jsx("button",{onClick:()=>{a("email"),u({type:"",text:""})},className:"back-button",children:"Use Different Email"})]}),m.jsxs("div",{className:"login-info",children:[m.jsx(cf,{size:16}),m.jsxs("p",{children:[m.jsx("strong",{children:"Didn't receive the email?"}),' Check your spam folder or click "Resend Link" to try again.']})]})]}),b=()=>m.jsx("div",{className:"admin-login-form",children:m.jsxs("div",{className:"login-header",children:[m.jsx("div",{className:"admin-icon checking",children:m.jsx(V_,{size:32,className:"animate-spin"})}),m.jsx("h1",{children:"Verifying Login"}),m.jsx("p",{children:s.text})]})});return m.jsx("div",{className:"admin-login-container",children:m.jsxs("div",{className:"admin-login-card",children:[m.jsxs("div",{className:"admin-login-header",children:[m.jsx("h2",{children:"ePSA Admin Dashboard"}),m.jsx("p",{children:"Secure Admin Access"})]}),s.text&&m.jsxs("div",{className:`message ${s.type}`,children:[s.type==="error"&&m.jsx(cf,{size:20}),s.type==="success"&&m.jsx(lr,{size:20}),s.type==="info"&&m.jsx(cf,{size:20}),m.jsx("span",{children:s.text})]}),o==="email"&&_(),o==="sent"&&y(),o==="checking"&&b(),m.jsx("div",{className:"admin-login-footer",children:m.jsx("p",{children:"Need access? Contact your system administrator."})})]})})},_be=()=>{const[t,e]=W.useState(!1),[n,r]=W.useState(!0),[i,o]=W.useState(null);W.useEffect(()=>{a()},[]);const a=async()=>{if(r(!0),Qa.isAdminAuthenticated()){const c=Qa.getCurrentAdmin();o(c),e(!0),r(!1);return}const l=await Qa.checkForEmailLink();l&&l.success&&(o(l.user),e(!0)),r(!1)},s=l=>{o(l),e(!0)},u=async()=>{const l=await Qa.logoutAdmin();l.success?(o(null),e(!1)):console.error("Logout failed:",l.message)};return n?m.jsx("div",{className:"admin-loading",children:m.jsxs("div",{className:"loading-spinner",children:[m.jsx("div",{className:"spinner"}),m.jsx("p",{children:"Initializing admin dashboard..."})]})}):t?m.jsx(mbe,{onLogout:u,adminUser:i}):m.jsx(vbe,{onLoginSuccess:s})},wbe=document.getElementById("root"),bbe=vD(wbe);bbe.render(m.jsx(_be,{}));const Ebe=Object.freeze(Object.defineProperty({__proto__:null,auth:Wr,db:Sn},Symbol.toStringTag,{value:"Module"}));
